!function(){"use strict";function t(t,e){return t.splice(e,1)[0]}function e(e,i){const s=e.indexOf(i);return s>-1&&(t(e,s),!0)}function i(t,e,i){return typeof t===e||t instanceof i}function s(t){return i(t,"function",Function)}function n(t){return i(t,"string",String)}function a(t){return i(t,"boolean",Boolean)}function o(t){return i(t,"number",Number)}function r(t){return i(t,"object",Object)}function h(t){return t instanceof Array}function c(t){return t instanceof HTMLElement}function A(t){throw new Error("Unexpected object: "+t)}function l(t){return o(t)&&!Number.isNaN(t)}function u(t){return null==t}function d(t,e,i=!0){let s=function(t,e){let i=0,s=t.length,n=Math.floor((i+s)/2),a=!1;for(;i<s&&n<t.length;){const o=t[n];!u(o)&&e<o?s=n:(e===o&&(a=!0),i=n+1),n=Math.floor((i+s)/2)}return a||(n+=.5),n}(t,e);const n=s%1==0;return s|=0,n&&!i||t.splice(s,0,e),s}class g{constructor(){this.listeners=new Map,this.listenerOptions=new Map}addEventListener(t,e,i){if(s(e)){let s=this.listeners.get(t);s||(s=new Array,this.listeners.set(t,s)),s.find((t=>t===e))||(s.push(e),i&&this.listenerOptions.set(e,i))}}removeEventListener(t,e){if(s(e)){const i=this.listeners.get(t);i&&this.removeListener(i,e)}}removeListener(e,i){const s=e.findIndex((t=>t===i));s>=0&&(t(e,s),this.listenerOptions.has(i)&&this.listenerOptions.delete(i))}dispatchEvent(t){const e=this.listeners.get(t.type);if(e)for(const i of e){const s=this.listenerOptions.get(i);s&&s.once&&this.removeListener(e,i),i.call(this,t)}return!t.defaultPrevented}}class p extends Event{constructor(t){super(t)}}class m extends g{constructor(){super(...arguments),this.mappedCallbacks=new Map}addEventListener(t,e,i){let s=this.mappedCallbacks.get(e);null==s&&(s=t=>e(t),this.mappedCallbacks.set(e,s)),super.addEventListener(t,s,i)}removeEventListener(t,e){const i=this.mappedCallbacks.get(e);i&&super.removeEventListener(t,i)}}const f=["change","click","contextmenu","dblclick","mouseup","pointerup","reset","submit","touchend"];function v(){return Promise.resolve()}function w(t){return new Promise((e=>{const i=setInterval((()=>{t()&&(clearInterval(i),e())}),100)}))}class B{constructor(t,e,...i){this.key=t,this.value=e,this.tags=i.map((t=>t.toLocaleUpperCase())),Object.freeze(this)}apply(t){if(c(t)){0===this.tags.length||this.tags.indexOf(t.tagName)>-1?"style"===this.key?Object.assign(t.style,this.value):this.key in t?t[this.key]=this.value:!1===this.value?t.removeAttribute(this.key):!0===this.value?t.setAttribute(this.key,""):t.setAttribute(this.key,this.value):console.warn(`Element ${t.tagName} does not support Attribute ${this.key}`)}else t[this.key]=this.value}}function y(t){return new B("autoplay",t,"audio","video")}function D(t){return new B("className",t)}function b(t){return new B("disabled",t,"button","command","fieldset","input","keygen","optgroup","option","select","textarea")}function C(t){return new B("htmlFor",t,"label","output")}function M(t){return new B("height",t,"canvas","embed","iframe","img","input","object","video")}function P(t){return new B("href",t,"a","area","base","link")}function I(t){return new B("id",t)}function x(t){return new B("max",t,"input","meter","progress")}function E(t){return new B("min",t,"input","meter")}function F(t){return new B("muted",t,"audio","video")}function S(t){return new B("placeholder",t,"input","textarea")}function k(t){return new B("playsInline",t,"audio","video")}function _(t){return new B("src",t,"audio","embed","iframe","img","input","script","source","track","video")}function L(t){return new B("srcObject",t,"audio","video")}function O(t){return new B("step",t,"input")}function T(t){return new B("title",t)}function R(t){return new B("type",t,"button","input","command","embed","object","script","source","style","menu")}function U(t){return new B("value",t,"button","data","input","li","meter","option","progress","param")}function Q(t){return new B("width",t,"canvas","embed","iframe","img","input","object","video")}class N{constructor(...t){this.set=new Map;const e=(t,e)=>{e||a(e)?this.set.set(t,e):this.set.has(t)&&this.set.delete(t)};for(const i of t)if(i instanceof B){const{key:t,value:s}=i;e(t,s)}else for(const[t,s]of i.set.entries())e(t,s)}apply(t){const e=c(t)?t.style:t;for(const t of this.set.entries()){const[i,s]=t;e[i]=s}}}function H(...t){return new N(...t)}function z(t){return new B("backgroundColor",t)}function G(t){return new B("display",t)}function j(t){return new B("fontFamily",t)}function W(t){return new B("margin",t)}function V(t){return new B("zIndex",t)}j("'Droid Sans Mono', 'Consolas', 'Lucida Console', 'Courier New', 'Courier', monospace"),j("-apple-system, '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', sans-serif");function Z(t){return!u(t)&&!n(t)&&!o(t)&&!a(t)&&!function(t){return t instanceof Date}(t)&&"element"in t&&t.element instanceof Node}function Y(t,...e){let i=null;for(const t of e)if(t instanceof B&&"id"===t.key){i=document.getElementById(t.value);break}null==i&&(i=document.createElement(t));for(let t of e)null!=t&&(n(t)||o(t)||a(t)||t instanceof Date||t instanceof Node||Z(t)?(Z(t)?t=t.element:t instanceof Node||(t=document.createTextNode(t.toLocaleString())),i.appendChild(t)):(t instanceof Function&&(t=t(!0)),t.apply(i)));return i}function X(...t){return Y("a",...t)}function J(...t){return Y("audio",...t)}function K(...t){return function(...t){return Y("button",...t)}(...t,R("button"))}function q(...t){return Y("canvas",...t)}function $(...t){return Y("div",...t)}function tt(...t){return Y("h1",...t)}function et(...t){return Y("input",...t)}function it(...t){return Y("label",...t)}function st(...t){return Y("li",...t)}function nt(...t){return Y("option",...t)}function at(...t){return Y("p",...t)}function ot(...t){return Y("span",...t)}function rt(...t){return Y("ul",...t)}function ht(...t){return et(R("text"),...t)}function ct(...t){return et(R("url"),...t)}function At(...t){return $(H(W("auto")),...t)}function lt(t,e){return async i=>{await t(i),await e(i)}}function ut(t,e,i,s){null==s&&l(i)&&(s=i,i=void 0);const a=n(e),o=n(i),r=null!=s;return new Promise(((n,h)=>{if(a){const i=()=>{t.removeEventListener(e,n)};n=lt(i,n),h=lt(i,h)}if(o){const e=()=>{t.removeEventListener(i,h)};n=lt(e,n),h=lt(e,h)}if(r){const t=setTimeout(h,s,`'${e}' has timed out.`),i=()=>clearTimeout(t);n=lt(i,n),h=lt(i,h)}a&&t.addEventListener(e,n),o&&t.addEventListener(i,(()=>{h("Rejection event found")}))}))}new URL(document.location.href).searchParams.get("testUserNumber");const dt=[];function gt(t,e,i,s,n){const a=window.open(t,"_blank",`left=${e},top=${i},width=${s},height=${n}`);a&&dt.push(a)}window.addEventListener("unload",(()=>{for(const t of dt)t.close()}));const pt="OffscreenCanvas"in globalThis,mt="createImageBitmap"in globalThis,ft=pt&&function(){try{const t=new OffscreenCanvas(1,1);return null!=t.getContext("2d")}catch(t){return!1}}();const vt=mt&&function(){try{const t=pt?new OffscreenCanvas(1,1):q();return null!=t.getContext("bitmaprenderer")}catch(t){return!1}}()?function(t,e){const i=t.getContext("bitmaprenderer");if(u(i))throw new Error("Could not create bitmaprenderer context for canvas");i.transferFromImageBitmap(e)}:function(t,e){const i=t.getContext("2d");if(u(i))throw new Error("Could not create 2d context for canvas");i.drawImage(e,0,0)};function wt(t,e){return new OffscreenCanvas(t,e)}function Bt(t,e){return q(Q(t),M(e))}const yt=ft?wt:Bt;const Dt=ft?function(t){const e=wt(t.width,t.height);return vt(e,t),e}:function(t){const e=Bt(t.width,t.height);return vt(e,t),e};function bt(t,e){const i=t.getContext("2d");if(u(i))throw new Error("Could not create 2d context for canvas");i.drawImage(e,0,0)}const Ct=ft?function(t){const e=wt(t.width,t.height);return bt(e,t),e}:function(t){const e=Bt(t.width,t.height);return bt(e,t),e};function Mt(t,e,i,s=1){return e=Math.floor(e*s),i=Math.floor(i*s),(t.width!=e||t.height!=i)&&(t.width=e,t.height=i,!0)}function Pt(t,e,i,s=1){return function(t){return function(t){return null!=t.textBaseline}(t)||function(t){return null!=t.textBaseline}(t)}(t)?function(t,e,i,s=1){const n=t.imageSmoothingEnabled,a=t.textBaseline,o=t.textAlign,r=t.font,h=Mt(t.canvas,e,i,s);return h&&(t.imageSmoothingEnabled=n,t.textBaseline=a,t.textAlign=o,t.font=r),h}(t,e,i,s):Mt(t.canvas,e,i,s)}HTMLCanvasElement.prototype.view=function(){gt(this.toDataURL(),0,0,this.width+10,this.height+100)},pt&&(OffscreenCanvas.prototype.view=async function(){const t=await this.convertToBlob();gt(URL.createObjectURL(t),0,0,this.width+10,this.height+100)});const It=2*Math.PI;function xt(t,e){let i;if(o(e)){i=new Array(e);for(let t=0;t<i.length;++t)i[t]=1/e}else i=e;let s=0;for(let t=0;t<i.length;++t)s+=i[t];const n=new Array(i.length),a=new Array(i.length),r=performance.now(),h=(e,a,o,h)=>{if(t){n[e]=a/o;let c=0;for(let t=0;t<i.length;++t)c+=n[t]*i[t];const A=performance.now();t(c,s,h,r-A+(A-r)*s/c)}};for(let t=0;t<i.length;++t)n[t]=0,a[t]=(e,i,s)=>h(t,e,i,s);return a}async function Et(t,e,i){const s=xt(t,e.length),n=e.map(((t,e)=>i(t,s[e])));return await Promise.all(n)}function Ft(t,e,i){return Math.min(i,Math.max(e,t))}function St(t,e,i,s){const{width:n,height:a,data:o}=t,r=(t,e)=>4*(e*n+t),h=2*i,c=n-1,A=a-1,l=new Array(4),u=new Array(4);return(t,n,a)=>{const d=Math.floor(t),g=Math.floor(n),p=d-i+1,m=g-i+1;for(let e=0;e<h;e++)l[e]=s(t-(p+e)),u[e]=s(n-(m+e));for(let t=0;t<3;t++){let i=0;for(let e=0;e<h;e++){const s=Ft(m+e,0,A);let n=0;for(let e=0;e<h;e++){const i=r(Ft(p+e,0,c),s);n+=o[i+t]*l[e]}i+=n*u[e]}e.data[a+t]=Math.round(i)}}}var kt;!function(t){t.PositiveZ="pz",t.NegativeZ="nz",t.PositiveX="px",t.NegativeX="nx",t.PositiveY="py",t.NegativeY="ny"}(kt||(kt={}));const _t=[kt.PositiveZ,kt.NegativeZ,kt.PositiveY,kt.NegativeY,kt.NegativeX,kt.PositiveX];var Lt;!function(t){t.Bilinear="bilinear",t.Bicubic="bicubic",t.Lanczos="lanczos",t.Nearest="nearest"}(Lt||(Lt={}));const Ot=new Map;Ot.set(kt.PositiveY,3),Ot.set(kt.NegativeY,1);const Tt=new Map([[kt.PositiveZ,(t,e)=>({x:-1,y:-t,z:-e})],[kt.NegativeZ,(t,e)=>({x:1,y:t,z:-e})],[kt.PositiveX,(t,e)=>({x:t,y:-1,z:-e})],[kt.NegativeX,(t,e)=>({x:-t,y:1,z:-e})],[kt.PositiveY,(t,e)=>({x:-e,y:-t,z:1})],[kt.NegativeY,(t,e)=>({x:e,y:-t,z:-1})]]),Rt=new Map([[Lt.Bilinear,function(t,e){const{width:i,height:s,data:n}=t,a=(t,e)=>4*(e*i+t);return(t,o,r)=>{const h=Ft(Math.floor(t),0,i-1),c=Ft(Math.ceil(t),0,i-1),A=t-h,l=Ft(Math.floor(o),0,s-1),u=Ft(Math.ceil(o),0,s-1),d=o-l,g=a(h,l),p=a(c,l),m=a(h,u),f=a(c,u);for(let t=0;t<3;t++){const i=n[g+t]*(1-A)+n[p+t]*A,s=n[m+t]*(1-A)+n[f+t]*A;e.data[r+t]=Math.ceil(i*(1-d)+s*d)}}}],[Lt.Bicubic,function(t,e){const i=-.5;return St(t,e,2,(t=>{const e=(t=Math.abs(t))*t,s=t*t*t;return t<=1?1.5*s-2.5*e+1:i*s-5*i*e+-4*t- -2}))}],[Lt.Lanczos,function(t,e){return St(t,e,5,(t=>{if(0===t)return 1;{const e=Math.PI*t;return 5*Math.sin(e)*Math.sin(e/5)/(e*e)}}))}],[Lt.Nearest,function(t,e){const{width:i,height:s,data:n}=t;return(t,a,o)=>{const r=(h=Ft(Math.round(t),0,i-1),4*(Ft(Math.round(a),0,s-1)*i+h));var h;for(let t=0;t<3;t++)e.data[o+t]=n[r+t]}}]]);async function Ut(t,e,i,n,a){const o=Tt.get(e);if(!o)throw new Error("Invalid face name: "+e);const r=Rt.get(i);if(!r)throw new Error("Invalid interpolation type: "+i);const h=Math.min(n||Number.MAX_VALUE,t.width/2),c=h,A=new ImageData(h,c);Rt.has(i)||(i=Lt.Nearest);const l=r(t,A);for(let i=0;i<c;i++){s(a)&&a(i,c,e);for(let e=0;e<h;e++){const s=4*(i*h+e);A.data[s+3]=255;const n=o(2*(e+.5)/h-1,2*(i+.5)/c-1),a=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z),r=(Math.atan2(n.y,n.x)%It+It)%It,u=Math.acos(n.z/a);l(t.width*r/Math.PI/2-.5,t.height*u/Math.PI-.5,s)}}const u=yt(h,c),d=u.getContext("2d");if(!d)throw new Error("Couldn't create a 2D canvas context");if(d.putImageData(A,0,0),Ot.has(e)){const t=Ot.get(e),i=h/2,s=c/2;d.translate(i,s),d.rotate(t*Math.PI/2),d.translate(-i,-s),d.drawImage(u,0,0)}return s(a)&&a(c,c,e),u}async function Qt(t,e,i,s,n){const a=await Ut(t,e,i,s,n);return await createImageBitmap(a)}function Nt(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Ht(t,e,i,s,n,a,o,r){const h=yt(a,o),c=h.getContext("2d");if(!c)throw new Error("Couldn't create a 2D canvas context");const A=a/2,l=o/2;return r>0&&(r%2==0?c.translate(A,l):c.translate(l,A),c.rotate(r*Math.PI/2),c.translate(-A,-l)),c.drawImage(t,e,i,s,n,0,0,a,o),h}var zt;!function(t){t[t.None=-1]="None",t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Up=2]="Up",t[t.Down=3]="Down",t[t.Back=4]="Back",t[t.Front=5]="Front"}(zt||(zt={}));const Gt={rows:3,columns:4,indices:[[zt.None,zt.Up,zt.None,zt.None],[zt.Left,zt.Front,zt.Right,zt.Back],[zt.None,zt.Down,zt.None,zt.None]],rotations:[[0,2,0,0],[0,0,0,0],[0,2,0,0]]};function jt(t){const e=t.width/Gt.columns,i=t.height/Gt.rows,s=Nt(e),n=Nt(i),a=new Array(6);for(let o=0;o<Gt.rows;++o){const r=Gt.indices[o],h=Gt.rotations[o];for(let c=0;c<Gt.columns;++c){const A=r[c];A>-1&&(a[A]=Ht(t,c*e,o*i,e,i,s,n,h[c]))}}return a}function Wt(t){const e=function(...t){return Y("script",...t)}(_(t));document.body.appendChild(e)}function Vt(t){var e;r(e=t)&&"dispose"in e&&s(e.dispose)?t.dispose():function(t){return r(t)&&"close"in t&&s(t.close)}(t)&&t.close()}function Zt(t,e){try{return e(t)}finally{Vt(t)}}class Yt{constructor(){this._getCanvas=mt?this.getCanvasViaImageBitmap:this.getCanvasViaImage,this._getImageData=mt?this.getImageDataViaImageBitmap:this.getImageDataViaImage,this._getCubes=mt?this.getCubesViaImageBitmaps:this.getCubesViaImage,this._getEquiMaps=mt?this.getEquiMapViaImageBitmaps:this.getEquiMapViaImage}async getCanvas(t,e){return await this._getCanvas(t,e)}async getImageData(t,e){return await this._getImageData(t,e)}async getCubes(t,e){return await this._getCubes(t,e)}async getEquiMaps(t,e,i,s){return await this._getEquiMaps(t,e,i,s)}async readRequestResponse(t,e){const i=await e;if(!i.ok)throw new Error(`[${i.status}] - ${i.statusText}. Path ${t}`);return i}async getResponse(t){return await this.readRequestResponse(t,fetch(t))}async postObjectForResponse(t,e){return await this.readRequestResponse(t,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))}async readResponseBuffer(t,e,i){const s=e.headers.get("Content-Type");if(!s)throw new Error("Server did not provide a content type");let n=1;const a=e.headers.get("Content-Length");a?(n=parseInt(a,10),l(n)||(console.warn(`Server did not provide a valid content length header. Value: ${a}, Path: ${t}`),n=1)):console.warn(`Server did not provide a content length header. Path: ${t}`);if(l(n)||(n=1),!e.body)throw new Error("No response body!");const o=e.body.getReader(),r=[];let h=0;for(;;){const{done:e,value:s}=await o.read();if(e)break;s&&(r.push(s),h+=s.length,i&&i(h,Math.max(h,n),t))}const c=new ArrayBuffer(h),A=new Uint8Array(c);h=0;for(const t of r)A.set(t,h),h+=t.length;return i&&i(1,1,t),{buffer:c,contentType:s}}async getBuffer(t,e){const i=await this.getResponse(t);return await this.readResponseBuffer(t,i,e)}async postObjectForBuffer(t,e,i){const s=await this.postObjectForResponse(t,e);return await this.readResponseBuffer(t,s,i)}async getBlob(t,e){const{buffer:i,contentType:s}=await this.getBuffer(t,e);return new Blob([i],{type:s})}async postObjectForBlob(t,e,i){const{buffer:s,contentType:n}=await this.postObjectForBuffer(t,e,i);return new Blob([s],{type:n})}async getFile(t,e){const i=await this.getBlob(t,e);return URL.createObjectURL(i)}async postObjectForFile(t,e,i){const s=await this.postObjectForBlob(t,e,i);return URL.createObjectURL(s)}async readFileImage(t){const e=new Image;return e.src=t,e.complete||await ut(e,"load","error"),e}async getImageBitmap(t,e){const i=await this.getBlob(t,e);return await createImageBitmap(i)}async getImage(t,e){const i=await this.getFile(t,e);return await this.readFileImage(i)}async postObjectForImageBitmap(t,e,i){const s=await this.postObjectForBlob(t,e,i);return await createImageBitmap(s)}async postObjectForImage(t,e,i){const s=await this.postObjectForFile(t,e,i);return await this.readFileImage(s)}async getCanvasViaImageBitmap(t,e){return Zt(await this.getImageBitmap(t,e),(t=>Dt(t)))}async getCanvasViaImage(t,e){const i=await this.getImage(t,e);return Ct(i)}readImageData(t){const e=yt(t.width,t.height),i=e.getContext("2d");if(!i)throw new Error("Couldn't create a 2D canvas context");return i.drawImage(t,0,0),i.getImageData(0,0,e.width,e.height)}async getImageDataViaImageBitmap(t,e){return Zt(await this.getImageBitmap(t,e),(t=>this.readImageData(t)))}async getImageDataViaImage(t,e){const i=await this.getImage(t,e);return this.readImageData(i)}async getCubesViaImageBitmaps(t,e){const i=jt(await this.getImageBitmap(t,e));return await Promise.all(i.map((t=>createImageBitmap(t))))}async getCubesViaImage(t,e){return jt(await this.getImage(t,e))}async getEquiMapViaImageBitmaps(t,e,i,s){const n=xt(s,[1,6]),a=await this.getImageDataViaImageBitmap(t,n.shift());return await async function(t,e,i,s,n){return await Et(n,_t,((n,a)=>t(e,n,i,s,a)))}(Qt,a,e,i,n.shift())}async getEquiMapViaImage(t,e,i,s){const n=xt(s,[1,6]),a=await this.getImageDataViaImage(t,n.shift());return await async function(t,e,i,s,n){return await Et(n,_t,((n,a)=>t(e,n,i,s,a)))}(Ut,a,e,i,n.shift())}readBufferText(t){return new TextDecoder("utf-8").decode(t)}async getText(t,e){const{buffer:i}=await this.getBuffer(t,e);return this.readBufferText(i)}async postObjectForText(t,e,i){const{buffer:s}=await this.postObjectForBuffer(t,e,i);return this.readBufferText(s)}async getObject(t,e){const i=await this.getText(t,e);return JSON.parse(i)}async postObjectForObject(t,e,i){const s=await this.postObjectForText(t,e,i);return JSON.parse(s)}async postObject(t,e){await this.postObjectForResponse(t,e)}readTextXml(t){return(new DOMParser).parseFromString(t,"text/xml").documentElement}async getXml(t,e){const i=await this.getText(t,e);return this.readTextXml(i)}async postObjectForXml(t,e,i){const s=await this.postObjectForText(t,e,i);return this.readTextXml(s)}async loadScript(t,e,i){if(e())i&&i(1,1,"skip");else{const s=w(e);Wt(await this.getFile(t,i)),await s}}async renderImageBitmapFace(t,e,i,s,n){return await Qt(t,e,i,s,n)}}class Xt extends Event{constructor(){super("audioActivity"),this.id=null,this.isActive=!1,Object.seal(this)}set(t,e){this.id=t,this.isActive=e}}function Jt(t){return t.splice(0)}class Kt{constructor(t){this.audioContext=t,this.gain=null,this.minDistance=1,this.maxDistance=10,this.rolloff=1,this.algorithm="logarithmic",this.transitionTime=.1,this.gain=t.createGain()}setAudioProperties(t,e,i,s,n){this.minDistance=t,this.maxDistance=e,this.rolloff=i,this.algorithm=s,this.transitionTime=n}dispose(){this.gain&&(this.gain.disconnect(),this.gain=null)}get volume(){return this.gain.gain.value}set volume(t){this.gain.gain.value=t}play(){return Promise.resolve()}stop(){}}class qt extends Kt{constructor(t,e,i){super(i),this.id=t,this.source=e,this.source instanceof AudioBufferSourceNode?this.playingSources=new Array:this.source.connect(this.gain)}dispose(){this.source&&(this.source.disconnect(),this.source=null),super.dispose()}get isPlaying(){return this.playingSources.length>0}async play(){if(this.source instanceof AudioBufferSourceNode){const t=this.source.context.createBufferSource();this.playingSources.push(t),t.buffer=this.source.buffer,t.loop=this.source.loop,t.connect(this.gain),t.start(),this.source.loop||(await ut(t,"ended"),this.playingSources.indexOf(t)>=0&&(t.stop(),t.disconnect(this.gain),e(this.playingSources,t)))}}stop(){if(this.source instanceof AudioBufferSourceNode){for(const t of this.playingSources)t.stop(),t.disconnect(this.gain);Jt(this.playingSources)}}}const $t=new Xt;function te(t,e,i){const s=e/2;return Ft(Math.round(t/s*i),0,i)}class ee extends m{constructor(t,e,i){if(super(),this.wasActive=!1,this.analyser=null,!l(i)||i<=0)throw new Error("Buffer size must be greater than 0");this.id=t.id,this.bufferSize=i,this.buffer=new Float32Array(this.bufferSize),this.wasActive=!1,this.activityCounter=0;const s=()=>{t.spatializer instanceof qt&&t.spatializer.source?(this.analyser=e.createAnalyser(),this.analyser.fftSize=2*this.bufferSize,this.analyser.smoothingTimeConstant=.2,t.spatializer.source.connect(this.analyser)):setTimeout(s,0)};s()}dispose(){this.analyser&&(this.analyser.disconnect(),this.analyser=null),this.buffer=null}update(){if(this.analyser){this.analyser.getFloatFrequencyData(this.buffer);const t=1.1+function(t,e,i,s,n){const a=t.context.sampleRate,o=te(i,a,n),r=te(s,a,n),h=r-o;let c=0;for(let t=o;t<r;++t)c+=e[t];return 0===h?0:c/h}(this.analyser,this.buffer,85,255,this.bufferSize)/100;t>=.5&&this.activityCounter<60?this.activityCounter++:t<.5&&this.activityCounter>0&&this.activityCounter--;const e=this.activityCounter>5;this.wasActive!==e&&(this.wasActive=e,$t.id=this.id,$t.isActive=e,this.dispatchEvent($t))}}}var ie="undefined"!=typeof Float32Array?Float32Array:Array;function se(){var t=new ie(9);return ie!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ne(t,e,i,s,n,a,o,r,h,c){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=a,t[5]=o,t[6]=r,t[7]=h,t[8]=c,t}function ae(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function oe(){var t=new ie(16);return ie!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function re(t,e,i,s,n,a,o,r,h,c,A,l,u,d,g,p,m){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=a,t[5]=o,t[6]=r,t[7]=h,t[8]=c,t[9]=A,t[10]=l,t[11]=u,t[12]=d,t[13]=g,t[14]=p,t[15]=m,t}function he(){var t=new ie(3);return ie!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ce(t){var e=t[0],i=t[1],s=t[2];return Math.hypot(e,i,s)}function Ae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function le(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t}function ue(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function de(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function ge(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function pe(t,e){var i=e[0],s=e[1],n=e[2],a=i*i+s*s+n*n;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function me(t,e,i){var s=e[0],n=e[1],a=e[2],o=i[0],r=i[1],h=i[2];return t[0]=n*h-a*r,t[1]=a*o-s*h,t[2]=s*r-n*o,t}function fe(t,e,i,s){var n=e[0],a=e[1],o=e[2];return t[0]=n+s*(i[0]-n),t[1]=a+s*(i[1]-a),t[2]=o+s*(i[2]-o),t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var ve,we=de;ve=he();function Be(t,e,i){const s=i-e;return 0===s?0:(t-e)/s}class ye{constructor(){this.t=0,this.p=he(),this.f=le(he(),0,0,-1),this.u=le(he(),0,1,0),Object.seal(this)}set(t,e,i,s,n,a,o,r,h){le(this.p,t,e,i),le(this.f,s,n,a),le(this.u,o,r,h)}copy(t){Ae(this.p,t.p),Ae(this.f,t.f),Ae(this.u,t.u)}interpolate(t,e,i){if(i<=t.t)this.copy(t);else if(e.t<=i)this.copy(e);else if(t.t<i){const s=Be(i,t.t,e.t);this.copy(t),fe(this.p,this.p,e.p,s),fe(this.f,this.f,e.f,s),fe(this.u,this.u,e.u,s),pe(this.f,this.f),pe(this.u,this.u),this.t=i}}}const De=he();class be{constructor(){this.start=new ye,this.current=new ye,this.end=new ye,this.offset=he()}setOffset(t,e,i){le(De,t,e,i),we(De,De,this.offset),ue(this.start.p,this.start.p,De),ue(this.current.p,this.current.p,De),ue(this.end.p,this.end.p,De),ge(this.start.f,this.start.f,2),ue(this.start.f,this.start.f,De),pe(this.start.f,this.start.f),ge(this.current.f,this.current.f,2),ue(this.current.f,this.current.f,De),pe(this.current.f,this.current.f),ge(this.end.f,this.end.f,2),ue(this.end.f,this.end.f,De),pe(this.end.f,this.end.f),le(this.offset,t,e,i)}setTarget(t,e,i,s,n,a,o,r,h,c,A){const l=this.offset[0],u=this.offset[1],d=this.offset[2];this.end.set(t+l,e+u,i+d,s,n,a,o,r,h),this.end.t=c+A,A>0?(this.start.copy(this.current),this.start.t=c):(this.start.copy(this.end),this.start.t=c,this.current.copy(this.end),this.current.t=c)}setTargetPosition(t,e,i,s,n){this.setTarget(t,e,i,this.end.f[0],this.end.f[1],this.end.f[2],this.end.u[0],this.end.u[1],this.end.u[2],s,n)}setTargetOrientation(t,e,i,s,n,a,o,r){this.setTarget(this.end.p[0],this.end.p[1],this.end.p[2],t,e,i,s,n,a,o,r)}update(t){this.current.interpolate(this.start,this.end,t)}}class Ce{constructor(t){this.id=t,this.pose=new be,this.streams=new Map,this._spatializer=null}get spatializer(){return this._spatializer}set spatializer(t){this.spatializer!==t&&(this._spatializer&&this._spatializer.dispose(),this._spatializer=t)}dispose(){this.spatializer=null}update(t){this.pose.update(t),this.spatializer&&this.spatializer.update(this.pose.current,t)}}const Me=s(HTMLAudioElement.prototype.setSinkId);var Pe;!function(t){t.Ambisonic="ambisonic",t.Bypass="bypass",t.None="off"}(Pe||(Pe={}));const Ie=[[[0,0,0,1,1,1],[.052336,.034899,.017452,.999848,.999391,.99863],[.104528,.069756,.034899,.999391,.997564,.994522],[.156434,.104528,.052336,.99863,.994522,.987688],[.207912,.139173,.069756,.997564,.990268,.978148],[.258819,.173648,.087156,.996195,.984808,.965926],[.309017,.207912,.104528,.994522,.978148,.951057],[.358368,.241922,.121869,.992546,.970296,.93358],[.406737,.275637,.139173,.990268,.961262,.913545],[.45399,.309017,.156434,.987688,.951057,.891007],[.5,.34202,.173648,.984808,.939693,.866025],[.544639,.374607,.190809,.981627,.927184,.838671],[.587785,.406737,.207912,.978148,.913545,.809017],[.62932,.438371,.224951,.97437,.898794,.777146],[.669131,.469472,.241922,.970296,.882948,.743145],[.707107,.5,.258819,.965926,.866025,.707107],[.743145,.529919,.275637,.961262,.848048,.669131],[.777146,.559193,.292372,.956305,.829038,.62932],[.809017,.587785,.309017,.951057,.809017,.587785],[.838671,.615661,.325568,.945519,.788011,.544639],[.866025,.642788,.34202,.939693,.766044,.5],[.891007,.669131,.358368,.93358,.743145,.45399],[.913545,.694658,.374607,.927184,.71934,.406737],[.93358,.71934,.390731,.920505,.694658,.358368],[.951057,.743145,.406737,.913545,.669131,.309017],[.965926,.766044,.422618,.906308,.642788,.258819],[.978148,.788011,.438371,.898794,.615661,.207912],[.987688,.809017,.45399,.891007,.587785,.156434],[.994522,.829038,.469472,.882948,.559193,.104528],[.99863,.848048,.48481,.87462,.529919,.052336],[1,.866025,.5,.866025,.5,0],[.99863,.882948,.515038,.857167,.469472,-.052336],[.994522,.898794,.529919,.848048,.438371,-.104528],[.987688,.913545,.544639,.838671,.406737,-.156434],[.978148,.927184,.559193,.829038,.374607,-.207912],[.965926,.939693,.573576,.819152,.34202,-.258819],[.951057,.951057,.587785,.809017,.309017,-.309017],[.93358,.961262,.601815,.798636,.275637,-.358368],[.913545,.970296,.615661,.788011,.241922,-.406737],[.891007,.978148,.62932,.777146,.207912,-.45399],[.866025,.984808,.642788,.766044,.173648,-.5],[.838671,.990268,.656059,.75471,.139173,-.544639],[.809017,.994522,.669131,.743145,.104528,-.587785],[.777146,.997564,.681998,.731354,.069756,-.62932],[.743145,.999391,.694658,.71934,.034899,-.669131],[.707107,1,.707107,.707107,0,-.707107],[.669131,.999391,.71934,.694658,-.034899,-.743145],[.62932,.997564,.731354,.681998,-.069756,-.777146],[.587785,.994522,.743145,.669131,-.104528,-.809017],[.544639,.990268,.75471,.656059,-.139173,-.838671],[.5,.984808,.766044,.642788,-.173648,-.866025],[.45399,.978148,.777146,.62932,-.207912,-.891007],[.406737,.970296,.788011,.615661,-.241922,-.913545],[.358368,.961262,.798636,.601815,-.275637,-.93358],[.309017,.951057,.809017,.587785,-.309017,-.951057],[.258819,.939693,.819152,.573576,-.34202,-.965926],[.207912,.927184,.829038,.559193,-.374607,-.978148],[.156434,.913545,.838671,.544639,-.406737,-.987688],[.104528,.898794,.848048,.529919,-.438371,-.994522],[.052336,.882948,.857167,.515038,-.469472,-.99863],[0,.866025,.866025,.5,-.5,-1],[-.052336,.848048,.87462,.48481,-.529919,-.99863],[-.104528,.829038,.882948,.469472,-.559193,-.994522],[-.156434,.809017,.891007,.45399,-.587785,-.987688],[-.207912,.788011,.898794,.438371,-.615661,-.978148],[-.258819,.766044,.906308,.422618,-.642788,-.965926],[-.309017,.743145,.913545,.406737,-.669131,-.951057],[-.358368,.71934,.920505,.390731,-.694658,-.93358],[-.406737,.694658,.927184,.374607,-.71934,-.913545],[-.45399,.669131,.93358,.358368,-.743145,-.891007],[-.5,.642788,.939693,.34202,-.766044,-.866025],[-.544639,.615661,.945519,.325568,-.788011,-.838671],[-.587785,.587785,.951057,.309017,-.809017,-.809017],[-.62932,.559193,.956305,.292372,-.829038,-.777146],[-.669131,.529919,.961262,.275637,-.848048,-.743145],[-.707107,.5,.965926,.258819,-.866025,-.707107],[-.743145,.469472,.970296,.241922,-.882948,-.669131],[-.777146,.438371,.97437,.224951,-.898794,-.62932],[-.809017,.406737,.978148,.207912,-.913545,-.587785],[-.838671,.374607,.981627,.190809,-.927184,-.544639],[-.866025,.34202,.984808,.173648,-.939693,-.5],[-.891007,.309017,.987688,.156434,-.951057,-.45399],[-.913545,.275637,.990268,.139173,-.961262,-.406737],[-.93358,.241922,.992546,.121869,-.970296,-.358368],[-.951057,.207912,.994522,.104528,-.978148,-.309017],[-.965926,.173648,.996195,.087156,-.984808,-.258819],[-.978148,.139173,.997564,.069756,-.990268,-.207912],[-.987688,.104528,.99863,.052336,-.994522,-.156434],[-.994522,.069756,.999391,.034899,-.997564,-.104528],[-.99863,.034899,.999848,.017452,-.999391,-.052336],[-1,0,1,0,-1,-0],[-.99863,-.034899,.999848,-.017452,-.999391,.052336],[-.994522,-.069756,.999391,-.034899,-.997564,.104528],[-.987688,-.104528,.99863,-.052336,-.994522,.156434],[-.978148,-.139173,.997564,-.069756,-.990268,.207912],[-.965926,-.173648,.996195,-.087156,-.984808,.258819],[-.951057,-.207912,.994522,-.104528,-.978148,.309017],[-.93358,-.241922,.992546,-.121869,-.970296,.358368],[-.913545,-.275637,.990268,-.139173,-.961262,.406737],[-.891007,-.309017,.987688,-.156434,-.951057,.45399],[-.866025,-.34202,.984808,-.173648,-.939693,.5],[-.838671,-.374607,.981627,-.190809,-.927184,.544639],[-.809017,-.406737,.978148,-.207912,-.913545,.587785],[-.777146,-.438371,.97437,-.224951,-.898794,.62932],[-.743145,-.469472,.970296,-.241922,-.882948,.669131],[-.707107,-.5,.965926,-.258819,-.866025,.707107],[-.669131,-.529919,.961262,-.275637,-.848048,.743145],[-.62932,-.559193,.956305,-.292372,-.829038,.777146],[-.587785,-.587785,.951057,-.309017,-.809017,.809017],[-.544639,-.615661,.945519,-.325568,-.788011,.838671],[-.5,-.642788,.939693,-.34202,-.766044,.866025],[-.45399,-.669131,.93358,-.358368,-.743145,.891007],[-.406737,-.694658,.927184,-.374607,-.71934,.913545],[-.358368,-.71934,.920505,-.390731,-.694658,.93358],[-.309017,-.743145,.913545,-.406737,-.669131,.951057],[-.258819,-.766044,.906308,-.422618,-.642788,.965926],[-.207912,-.788011,.898794,-.438371,-.615661,.978148],[-.156434,-.809017,.891007,-.45399,-.587785,.987688],[-.104528,-.829038,.882948,-.469472,-.559193,.994522],[-.052336,-.848048,.87462,-.48481,-.529919,.99863],[-0,-.866025,.866025,-.5,-.5,1],[.052336,-.882948,.857167,-.515038,-.469472,.99863],[.104528,-.898794,.848048,-.529919,-.438371,.994522],[.156434,-.913545,.838671,-.544639,-.406737,.987688],[.207912,-.927184,.829038,-.559193,-.374607,.978148],[.258819,-.939693,.819152,-.573576,-.34202,.965926],[.309017,-.951057,.809017,-.587785,-.309017,.951057],[.358368,-.961262,.798636,-.601815,-.275637,.93358],[.406737,-.970296,.788011,-.615661,-.241922,.913545],[.45399,-.978148,.777146,-.62932,-.207912,.891007],[.5,-.984808,.766044,-.642788,-.173648,.866025],[.544639,-.990268,.75471,-.656059,-.139173,.838671],[.587785,-.994522,.743145,-.669131,-.104528,.809017],[.62932,-.997564,.731354,-.681998,-.069756,.777146],[.669131,-.999391,.71934,-.694658,-.034899,.743145],[.707107,-1,.707107,-.707107,-0,.707107],[.743145,-.999391,.694658,-.71934,.034899,.669131],[.777146,-.997564,.681998,-.731354,.069756,.62932],[.809017,-.994522,.669131,-.743145,.104528,.587785],[.838671,-.990268,.656059,-.75471,.139173,.544639],[.866025,-.984808,.642788,-.766044,.173648,.5],[.891007,-.978148,.62932,-.777146,.207912,.45399],[.913545,-.970296,.615661,-.788011,.241922,.406737],[.93358,-.961262,.601815,-.798636,.275637,.358368],[.951057,-.951057,.587785,-.809017,.309017,.309017],[.965926,-.939693,.573576,-.819152,.34202,.258819],[.978148,-.927184,.559193,-.829038,.374607,.207912],[.987688,-.913545,.544639,-.838671,.406737,.156434],[.994522,-.898794,.529919,-.848048,.438371,.104528],[.99863,-.882948,.515038,-.857167,.469472,.052336],[1,-.866025,.5,-.866025,.5,0],[.99863,-.848048,.48481,-.87462,.529919,-.052336],[.994522,-.829038,.469472,-.882948,.559193,-.104528],[.987688,-.809017,.45399,-.891007,.587785,-.156434],[.978148,-.788011,.438371,-.898794,.615661,-.207912],[.965926,-.766044,.422618,-.906308,.642788,-.258819],[.951057,-.743145,.406737,-.913545,.669131,-.309017],[.93358,-.71934,.390731,-.920505,.694658,-.358368],[.913545,-.694658,.374607,-.927184,.71934,-.406737],[.891007,-.669131,.358368,-.93358,.743145,-.45399],[.866025,-.642788,.34202,-.939693,.766044,-.5],[.838671,-.615661,.325568,-.945519,.788011,-.544639],[.809017,-.587785,.309017,-.951057,.809017,-.587785],[.777146,-.559193,.292372,-.956305,.829038,-.62932],[.743145,-.529919,.275637,-.961262,.848048,-.669131],[.707107,-.5,.258819,-.965926,.866025,-.707107],[.669131,-.469472,.241922,-.970296,.882948,-.743145],[.62932,-.438371,.224951,-.97437,.898794,-.777146],[.587785,-.406737,.207912,-.978148,.913545,-.809017],[.544639,-.374607,.190809,-.981627,.927184,-.838671],[.5,-.34202,.173648,-.984808,.939693,-.866025],[.45399,-.309017,.156434,-.987688,.951057,-.891007],[.406737,-.275637,.139173,-.990268,.961262,-.913545],[.358368,-.241922,.121869,-.992546,.970296,-.93358],[.309017,-.207912,.104528,-.994522,.978148,-.951057],[.258819,-.173648,.087156,-.996195,.984808,-.965926],[.207912,-.139173,.069756,-.997564,.990268,-.978148],[.156434,-.104528,.052336,-.99863,.994522,-.987688],[.104528,-.069756,.034899,-.999391,.997564,-.994522],[.052336,-.034899,.017452,-.999848,.999391,-.99863],[0,-0,0,-1,1,-1],[-.052336,.034899,-.017452,-.999848,.999391,-.99863],[-.104528,.069756,-.034899,-.999391,.997564,-.994522],[-.156434,.104528,-.052336,-.99863,.994522,-.987688],[-.207912,.139173,-.069756,-.997564,.990268,-.978148],[-.258819,.173648,-.087156,-.996195,.984808,-.965926],[-.309017,.207912,-.104528,-.994522,.978148,-.951057],[-.358368,.241922,-.121869,-.992546,.970296,-.93358],[-.406737,.275637,-.139173,-.990268,.961262,-.913545],[-.45399,.309017,-.156434,-.987688,.951057,-.891007],[-.5,.34202,-.173648,-.984808,.939693,-.866025],[-.544639,.374607,-.190809,-.981627,.927184,-.838671],[-.587785,.406737,-.207912,-.978148,.913545,-.809017],[-.62932,.438371,-.224951,-.97437,.898794,-.777146],[-.669131,.469472,-.241922,-.970296,.882948,-.743145],[-.707107,.5,-.258819,-.965926,.866025,-.707107],[-.743145,.529919,-.275637,-.961262,.848048,-.669131],[-.777146,.559193,-.292372,-.956305,.829038,-.62932],[-.809017,.587785,-.309017,-.951057,.809017,-.587785],[-.838671,.615661,-.325568,-.945519,.788011,-.544639],[-.866025,.642788,-.34202,-.939693,.766044,-.5],[-.891007,.669131,-.358368,-.93358,.743145,-.45399],[-.913545,.694658,-.374607,-.927184,.71934,-.406737],[-.93358,.71934,-.390731,-.920505,.694658,-.358368],[-.951057,.743145,-.406737,-.913545,.669131,-.309017],[-.965926,.766044,-.422618,-.906308,.642788,-.258819],[-.978148,.788011,-.438371,-.898794,.615661,-.207912],[-.987688,.809017,-.45399,-.891007,.587785,-.156434],[-.994522,.829038,-.469472,-.882948,.559193,-.104528],[-.99863,.848048,-.48481,-.87462,.529919,-.052336],[-1,.866025,-.5,-.866025,.5,0],[-.99863,.882948,-.515038,-.857167,.469472,.052336],[-.994522,.898794,-.529919,-.848048,.438371,.104528],[-.987688,.913545,-.544639,-.838671,.406737,.156434],[-.978148,.927184,-.559193,-.829038,.374607,.207912],[-.965926,.939693,-.573576,-.819152,.34202,.258819],[-.951057,.951057,-.587785,-.809017,.309017,.309017],[-.93358,.961262,-.601815,-.798636,.275637,.358368],[-.913545,.970296,-.615661,-.788011,.241922,.406737],[-.891007,.978148,-.62932,-.777146,.207912,.45399],[-.866025,.984808,-.642788,-.766044,.173648,.5],[-.838671,.990268,-.656059,-.75471,.139173,.544639],[-.809017,.994522,-.669131,-.743145,.104528,.587785],[-.777146,.997564,-.681998,-.731354,.069756,.62932],[-.743145,.999391,-.694658,-.71934,.034899,.669131],[-.707107,1,-.707107,-.707107,0,.707107],[-.669131,.999391,-.71934,-.694658,-.034899,.743145],[-.62932,.997564,-.731354,-.681998,-.069756,.777146],[-.587785,.994522,-.743145,-.669131,-.104528,.809017],[-.544639,.990268,-.75471,-.656059,-.139173,.838671],[-.5,.984808,-.766044,-.642788,-.173648,.866025],[-.45399,.978148,-.777146,-.62932,-.207912,.891007],[-.406737,.970296,-.788011,-.615661,-.241922,.913545],[-.358368,.961262,-.798636,-.601815,-.275637,.93358],[-.309017,.951057,-.809017,-.587785,-.309017,.951057],[-.258819,.939693,-.819152,-.573576,-.34202,.965926],[-.207912,.927184,-.829038,-.559193,-.374607,.978148],[-.156434,.913545,-.838671,-.544639,-.406737,.987688],[-.104528,.898794,-.848048,-.529919,-.438371,.994522],[-.052336,.882948,-.857167,-.515038,-.469472,.99863],[-0,.866025,-.866025,-.5,-.5,1],[.052336,.848048,-.87462,-.48481,-.529919,.99863],[.104528,.829038,-.882948,-.469472,-.559193,.994522],[.156434,.809017,-.891007,-.45399,-.587785,.987688],[.207912,.788011,-.898794,-.438371,-.615661,.978148],[.258819,.766044,-.906308,-.422618,-.642788,.965926],[.309017,.743145,-.913545,-.406737,-.669131,.951057],[.358368,.71934,-.920505,-.390731,-.694658,.93358],[.406737,.694658,-.927184,-.374607,-.71934,.913545],[.45399,.669131,-.93358,-.358368,-.743145,.891007],[.5,.642788,-.939693,-.34202,-.766044,.866025],[.544639,.615661,-.945519,-.325568,-.788011,.838671],[.587785,.587785,-.951057,-.309017,-.809017,.809017],[.62932,.559193,-.956305,-.292372,-.829038,.777146],[.669131,.529919,-.961262,-.275637,-.848048,.743145],[.707107,.5,-.965926,-.258819,-.866025,.707107],[.743145,.469472,-.970296,-.241922,-.882948,.669131],[.777146,.438371,-.97437,-.224951,-.898794,.62932],[.809017,.406737,-.978148,-.207912,-.913545,.587785],[.838671,.374607,-.981627,-.190809,-.927184,.544639],[.866025,.34202,-.984808,-.173648,-.939693,.5],[.891007,.309017,-.987688,-.156434,-.951057,.45399],[.913545,.275637,-.990268,-.139173,-.961262,.406737],[.93358,.241922,-.992546,-.121869,-.970296,.358368],[.951057,.207912,-.994522,-.104528,-.978148,.309017],[.965926,.173648,-.996195,-.087156,-.984808,.258819],[.978148,.139173,-.997564,-.069756,-.990268,.207912],[.987688,.104528,-.99863,-.052336,-.994522,.156434],[.994522,.069756,-.999391,-.034899,-.997564,.104528],[.99863,.034899,-.999848,-.017452,-.999391,.052336],[1,0,-1,-0,-1,0],[.99863,-.034899,-.999848,.017452,-.999391,-.052336],[.994522,-.069756,-.999391,.034899,-.997564,-.104528],[.987688,-.104528,-.99863,.052336,-.994522,-.156434],[.978148,-.139173,-.997564,.069756,-.990268,-.207912],[.965926,-.173648,-.996195,.087156,-.984808,-.258819],[.951057,-.207912,-.994522,.104528,-.978148,-.309017],[.93358,-.241922,-.992546,.121869,-.970296,-.358368],[.913545,-.275637,-.990268,.139173,-.961262,-.406737],[.891007,-.309017,-.987688,.156434,-.951057,-.45399],[.866025,-.34202,-.984808,.173648,-.939693,-.5],[.838671,-.374607,-.981627,.190809,-.927184,-.544639],[.809017,-.406737,-.978148,.207912,-.913545,-.587785],[.777146,-.438371,-.97437,.224951,-.898794,-.62932],[.743145,-.469472,-.970296,.241922,-.882948,-.669131],[.707107,-.5,-.965926,.258819,-.866025,-.707107],[.669131,-.529919,-.961262,.275637,-.848048,-.743145],[.62932,-.559193,-.956305,.292372,-.829038,-.777146],[.587785,-.587785,-.951057,.309017,-.809017,-.809017],[.544639,-.615661,-.945519,.325568,-.788011,-.838671],[.5,-.642788,-.939693,.34202,-.766044,-.866025],[.45399,-.669131,-.93358,.358368,-.743145,-.891007],[.406737,-.694658,-.927184,.374607,-.71934,-.913545],[.358368,-.71934,-.920505,.390731,-.694658,-.93358],[.309017,-.743145,-.913545,.406737,-.669131,-.951057],[.258819,-.766044,-.906308,.422618,-.642788,-.965926],[.207912,-.788011,-.898794,.438371,-.615661,-.978148],[.156434,-.809017,-.891007,.45399,-.587785,-.987688],[.104528,-.829038,-.882948,.469472,-.559193,-.994522],[.052336,-.848048,-.87462,.48481,-.529919,-.99863],[0,-.866025,-.866025,.5,-.5,-1],[-.052336,-.882948,-.857167,.515038,-.469472,-.99863],[-.104528,-.898794,-.848048,.529919,-.438371,-.994522],[-.156434,-.913545,-.838671,.544639,-.406737,-.987688],[-.207912,-.927184,-.829038,.559193,-.374607,-.978148],[-.258819,-.939693,-.819152,.573576,-.34202,-.965926],[-.309017,-.951057,-.809017,.587785,-.309017,-.951057],[-.358368,-.961262,-.798636,.601815,-.275637,-.93358],[-.406737,-.970296,-.788011,.615661,-.241922,-.913545],[-.45399,-.978148,-.777146,.62932,-.207912,-.891007],[-.5,-.984808,-.766044,.642788,-.173648,-.866025],[-.544639,-.990268,-.75471,.656059,-.139173,-.838671],[-.587785,-.994522,-.743145,.669131,-.104528,-.809017],[-.62932,-.997564,-.731354,.681998,-.069756,-.777146],[-.669131,-.999391,-.71934,.694658,-.034899,-.743145],[-.707107,-1,-.707107,.707107,-0,-.707107],[-.743145,-.999391,-.694658,.71934,.034899,-.669131],[-.777146,-.997564,-.681998,.731354,.069756,-.62932],[-.809017,-.994522,-.669131,.743145,.104528,-.587785],[-.838671,-.990268,-.656059,.75471,.139173,-.544639],[-.866025,-.984808,-.642788,.766044,.173648,-.5],[-.891007,-.978148,-.62932,.777146,.207912,-.45399],[-.913545,-.970296,-.615661,.788011,.241922,-.406737],[-.93358,-.961262,-.601815,.798636,.275637,-.358368],[-.951057,-.951057,-.587785,.809017,.309017,-.309017],[-.965926,-.939693,-.573576,.819152,.34202,-.258819],[-.978148,-.927184,-.559193,.829038,.374607,-.207912],[-.987688,-.913545,-.544639,.838671,.406737,-.156434],[-.994522,-.898794,-.529919,.848048,.438371,-.104528],[-.99863,-.882948,-.515038,.857167,.469472,-.052336],[-1,-.866025,-.5,.866025,.5,-0],[-.99863,-.848048,-.48481,.87462,.529919,.052336],[-.994522,-.829038,-.469472,.882948,.559193,.104528],[-.987688,-.809017,-.45399,.891007,.587785,.156434],[-.978148,-.788011,-.438371,.898794,.615661,.207912],[-.965926,-.766044,-.422618,.906308,.642788,.258819],[-.951057,-.743145,-.406737,.913545,.669131,.309017],[-.93358,-.71934,-.390731,.920505,.694658,.358368],[-.913545,-.694658,-.374607,.927184,.71934,.406737],[-.891007,-.669131,-.358368,.93358,.743145,.45399],[-.866025,-.642788,-.34202,.939693,.766044,.5],[-.838671,-.615661,-.325568,.945519,.788011,.544639],[-.809017,-.587785,-.309017,.951057,.809017,.587785],[-.777146,-.559193,-.292372,.956305,.829038,.62932],[-.743145,-.529919,-.275637,.961262,.848048,.669131],[-.707107,-.5,-.258819,.965926,.866025,.707107],[-.669131,-.469472,-.241922,.970296,.882948,.743145],[-.62932,-.438371,-.224951,.97437,.898794,.777146],[-.587785,-.406737,-.207912,.978148,.913545,.809017],[-.544639,-.374607,-.190809,.981627,.927184,.838671],[-.5,-.34202,-.173648,.984808,.939693,.866025],[-.45399,-.309017,-.156434,.987688,.951057,.891007],[-.406737,-.275637,-.139173,.990268,.961262,.913545],[-.358368,-.241922,-.121869,.992546,.970296,.93358],[-.309017,-.207912,-.104528,.994522,.978148,.951057],[-.258819,-.173648,-.087156,.996195,.984808,.965926],[-.207912,-.139173,-.069756,.997564,.990268,.978148],[-.156434,-.104528,-.052336,.99863,.994522,.987688],[-.104528,-.069756,-.034899,.999391,.997564,.994522],[-.052336,-.034899,-.017452,.999848,.999391,.99863]],[[-1,-0,1,-0,0,-1,-0,0,-0],[-.999848,.017452,.999543,-.030224,264e-6,-.999086,.042733,-59e-5,4e-6],[-.999391,.034899,.998173,-.060411,.001055,-.996348,.085356,-.002357,34e-6],[-.99863,.052336,.995891,-.090524,.002372,-.991791,.127757,-.005297,113e-6],[-.997564,.069756,.992701,-.120527,.004214,-.985429,.169828,-.0094,268e-6],[-.996195,.087156,.988606,-.150384,.006578,-.977277,.21146,-.014654,523e-6],[-.994522,.104528,.983611,-.180057,.009462,-.967356,.252544,-.021043,903e-6],[-.992546,.121869,.977722,-.209511,.012862,-.955693,.292976,-.028547,.001431],[-.990268,.139173,.970946,-.238709,.016774,-.942316,.332649,-.037143,.002131],[-.987688,.156434,.963292,-.267617,.021193,-.927262,.371463,-.046806,.003026],[-.984808,.173648,.954769,-.296198,.026114,-.910569,.409317,-.057505,.00414],[-.981627,.190809,.945388,-.324419,.03153,-.892279,.446114,-.069209,.005492],[-.978148,.207912,.935159,-.352244,.037436,-.872441,.481759,-.08188,.007105],[-.97437,.224951,.924096,-.379641,.043823,-.851105,.516162,-.095481,.008999],[-.970296,.241922,.912211,-.406574,.050685,-.828326,.549233,-.109969,.011193],[-.965926,.258819,.899519,-.433013,.058013,-.804164,.580889,-.1253,.013707],[-.961262,.275637,.886036,-.458924,.065797,-.77868,.61105,-.141427,.016556],[-.956305,.292372,.871778,-.484275,.074029,-.75194,.639639,-.158301,.019758],[-.951057,.309017,.856763,-.509037,.082698,-.724012,.666583,-.175868,.023329],[-.945519,.325568,.841008,-.533178,.091794,-.694969,.691816,-.194075,.027281],[-.939693,.34202,.824533,-.55667,.101306,-.664885,.715274,-.212865,.03163],[-.93358,.358368,.807359,-.579484,.111222,-.633837,.736898,-.23218,.036385],[-.927184,.374607,.789505,-.601592,.121529,-.601904,.756637,-.25196,.041559],[-.920505,.390731,.770994,-.622967,.132217,-.569169,.774442,-.272143,.04716],[-.913545,.406737,.751848,-.643582,.143271,-.535715,.79027,-.292666,.053196],[-.906308,.422618,.732091,-.663414,.154678,-.501627,.804083,-.313464,.059674],[-.898794,.438371,.711746,-.682437,.166423,-.466993,.81585,-.334472,.066599],[-.891007,.45399,.690839,-.700629,.178494,-.431899,.825544,-.355623,.073974],[-.882948,.469472,.669395,-.717968,.190875,-.396436,.833145,-.376851,.081803],[-.87462,.48481,.647439,-.734431,.203551,-.360692,.838638,-.398086,.090085],[-.866025,.5,.625,-.75,.216506,-.32476,.842012,-.419263,.098821],[-.857167,.515038,.602104,-.764655,.229726,-.288728,.843265,-.440311,.108009],[-.848048,.529919,.578778,-.778378,.243192,-.252688,.842399,-.461164,.117644],[-.838671,.544639,.555052,-.791154,.256891,-.21673,.839422,-.481753,.127722],[-.829038,.559193,.530955,-.802965,.270803,-.180944,.834347,-.502011,.138237],[-.819152,.573576,.506515,-.813798,.284914,-.14542,.827194,-.521871,.149181],[-.809017,.587785,.481763,-.823639,.299204,-.110246,.817987,-.541266,.160545],[-.798636,.601815,.456728,-.832477,.313658,-.075508,.806757,-.560132,.172317],[-.788011,.615661,.431441,-.840301,.328257,-.041294,.793541,-.578405,.184487],[-.777146,.62932,.405934,-.847101,.342984,-.007686,.778379,-.596021,.19704],[-.766044,.642788,.380236,-.852869,.357821,.025233,.761319,-.612921,.209963],[-.75471,.656059,.35438,-.857597,.372749,.057383,.742412,-.629044,.223238],[-.743145,.669131,.328396,-.861281,.387751,.088686,.721714,-.644334,.23685],[-.731354,.681998,.302317,-.863916,.402807,.119068,.699288,-.658734,.250778],[-.71934,.694658,.276175,-.865498,.417901,.148454,.675199,-.67219,.265005],[-.707107,.707107,.25,-.866025,.433013,.176777,.649519,-.684653,.279508],[-.694658,.71934,.223825,-.865498,.448125,.203969,.622322,-.696073,.294267],[-.681998,.731354,.197683,-.863916,.463218,.229967,.593688,-.706405,.309259],[-.669131,.743145,.171604,-.861281,.478275,.254712,.5637,-.715605,.324459],[-.656059,.75471,.14562,-.857597,.493276,.278147,.532443,-.723633,.339844],[-.642788,.766044,.119764,-.852869,.508205,.300221,.500009,-.730451,.355387],[-.62932,.777146,.094066,-.847101,.523041,.320884,.46649,-.736025,.371063],[-.615661,.788011,.068559,-.840301,.537768,.340093,.431982,-.740324,.386845],[-.601815,.798636,.043272,-.832477,.552367,.357807,.396584,-.74332,.402704],[-.587785,.809017,.018237,-.823639,.566821,.373991,.360397,-.744989,.418613],[-.573576,.819152,-.006515,-.813798,.581112,.388612,.323524,-.745308,.434544],[-.559193,.829038,-.030955,-.802965,.595222,.401645,.286069,-.744262,.450467],[-.544639,.838671,-.055052,-.791154,.609135,.413066,.24814,-.741835,.466352],[-.529919,.848048,-.078778,-.778378,.622833,.422856,.209843,-.738017,.482171],[-.515038,.857167,-.102104,-.764655,.6363,.431004,.171288,-.732801,.497894],[-.5,.866025,-.125,-.75,.649519,.4375,.132583,-.726184,.51349],[-.48481,.87462,-.147439,-.734431,.662474,.44234,.093837,-.718167,.528929],[-.469472,.882948,-.169395,-.717968,.67515,.445524,.05516,-.708753,.544183],[-.45399,.891007,-.190839,-.700629,.687531,.447059,.016662,-.69795,.55922],[-.438371,.898794,-.211746,-.682437,.699602,.446953,-.02155,-.685769,.574011],[-.422618,.906308,-.232091,-.663414,.711348,.445222,-.059368,-.672226,.588528],[-.406737,.913545,-.251848,-.643582,.722755,.441884,-.096684,-.657339,.602741],[-.390731,.920505,-.270994,-.622967,.733809,.436964,-.133395,-.64113,.616621],[-.374607,.927184,-.289505,-.601592,.744496,.430488,-.169397,-.623624,.630141],[-.358368,.93358,-.307359,-.579484,.754804,.422491,-.204589,-.604851,.643273],[-.34202,.939693,-.324533,-.55667,.76472,.413008,-.238872,-.584843,.65599],[-.325568,.945519,-.341008,-.533178,.774231,.402081,-.27215,-.563635,.668267],[-.309017,.951057,-.356763,-.509037,.783327,.389754,-.304329,-.541266,.680078],[-.292372,.956305,-.371778,-.484275,.791997,.376077,-.335319,-.517778,.691399],[-.275637,.961262,-.386036,-.458924,.800228,.361102,-.365034,-.493216,.702207],[-.258819,.965926,-.399519,-.433013,.808013,.344885,-.393389,-.467627,.712478],[-.241922,.970296,-.412211,-.406574,.81534,.327486,-.420306,-.441061,.722191],[-.224951,.97437,-.424096,-.379641,.822202,.308969,-.445709,-.413572,.731327],[-.207912,.978148,-.435159,-.352244,.828589,.289399,-.469527,-.385215,.739866],[-.190809,.981627,-.445388,-.324419,.834495,.268846,-.491693,-.356047,.74779],[-.173648,.984808,-.454769,-.296198,.839912,.247382,-.512145,-.326129,.755082],[-.156434,.987688,-.463292,-.267617,.844832,.225081,-.530827,-.295521,.761728],[-.139173,.990268,-.470946,-.238709,.849251,.20202,-.547684,-.264287,.767712],[-.121869,.992546,-.477722,-.209511,.853163,.178279,-.562672,-.232494,.773023],[-.104528,.994522,-.483611,-.180057,.856563,.153937,-.575747,-.200207,.777648],[-.087156,.996195,-.488606,-.150384,.859447,.129078,-.586872,-.167494,.781579],[-.069756,.997564,-.492701,-.120527,.861811,.103786,-.596018,-.134426,.784806],[-.052336,.99863,-.495891,-.090524,.863653,.078146,-.603158,-.101071,.787324],[-.034899,.999391,-.498173,-.060411,.864971,.052243,-.608272,-.0675,.789126],[-.017452,.999848,-.499543,-.030224,.865762,.026165,-.611347,-.033786,.790208],[0,1,-.5,0,.866025,-0,-.612372,0,.790569],[.017452,.999848,-.499543,.030224,.865762,-.026165,-.611347,.033786,.790208],[.034899,.999391,-.498173,.060411,.864971,-.052243,-.608272,.0675,.789126],[.052336,.99863,-.495891,.090524,.863653,-.078146,-.603158,.101071,.787324],[.069756,.997564,-.492701,.120527,.861811,-.103786,-.596018,.134426,.784806],[.087156,.996195,-.488606,.150384,.859447,-.129078,-.586872,.167494,.781579],[.104528,.994522,-.483611,.180057,.856563,-.153937,-.575747,.200207,.777648],[.121869,.992546,-.477722,.209511,.853163,-.178279,-.562672,.232494,.773023],[.139173,.990268,-.470946,.238709,.849251,-.20202,-.547684,.264287,.767712],[.156434,.987688,-.463292,.267617,.844832,-.225081,-.530827,.295521,.761728],[.173648,.984808,-.454769,.296198,.839912,-.247382,-.512145,.326129,.755082],[.190809,.981627,-.445388,.324419,.834495,-.268846,-.491693,.356047,.74779],[.207912,.978148,-.435159,.352244,.828589,-.289399,-.469527,.385215,.739866],[.224951,.97437,-.424096,.379641,.822202,-.308969,-.445709,.413572,.731327],[.241922,.970296,-.412211,.406574,.81534,-.327486,-.420306,.441061,.722191],[.258819,.965926,-.399519,.433013,.808013,-.344885,-.393389,.467627,.712478],[.275637,.961262,-.386036,.458924,.800228,-.361102,-.365034,.493216,.702207],[.292372,.956305,-.371778,.484275,.791997,-.376077,-.335319,.517778,.691399],[.309017,.951057,-.356763,.509037,.783327,-.389754,-.304329,.541266,.680078],[.325568,.945519,-.341008,.533178,.774231,-.402081,-.27215,.563635,.668267],[.34202,.939693,-.324533,.55667,.76472,-.413008,-.238872,.584843,.65599],[.358368,.93358,-.307359,.579484,.754804,-.422491,-.204589,.604851,.643273],[.374607,.927184,-.289505,.601592,.744496,-.430488,-.169397,.623624,.630141],[.390731,.920505,-.270994,.622967,.733809,-.436964,-.133395,.64113,.616621],[.406737,.913545,-.251848,.643582,.722755,-.441884,-.096684,.657339,.602741],[.422618,.906308,-.232091,.663414,.711348,-.445222,-.059368,.672226,.588528],[.438371,.898794,-.211746,.682437,.699602,-.446953,-.02155,.685769,.574011],[.45399,.891007,-.190839,.700629,.687531,-.447059,.016662,.69795,.55922],[.469472,.882948,-.169395,.717968,.67515,-.445524,.05516,.708753,.544183],[.48481,.87462,-.147439,.734431,.662474,-.44234,.093837,.718167,.528929],[.5,.866025,-.125,.75,.649519,-.4375,.132583,.726184,.51349],[.515038,.857167,-.102104,.764655,.6363,-.431004,.171288,.732801,.497894],[.529919,.848048,-.078778,.778378,.622833,-.422856,.209843,.738017,.482171],[.544639,.838671,-.055052,.791154,.609135,-.413066,.24814,.741835,.466352],[.559193,.829038,-.030955,.802965,.595222,-.401645,.286069,.744262,.450467],[.573576,.819152,-.006515,.813798,.581112,-.388612,.323524,.745308,.434544],[.587785,.809017,.018237,.823639,.566821,-.373991,.360397,.744989,.418613],[.601815,.798636,.043272,.832477,.552367,-.357807,.396584,.74332,.402704],[.615661,.788011,.068559,.840301,.537768,-.340093,.431982,.740324,.386845],[.62932,.777146,.094066,.847101,.523041,-.320884,.46649,.736025,.371063],[.642788,.766044,.119764,.852869,.508205,-.300221,.500009,.730451,.355387],[.656059,.75471,.14562,.857597,.493276,-.278147,.532443,.723633,.339844],[.669131,.743145,.171604,.861281,.478275,-.254712,.5637,.715605,.324459],[.681998,.731354,.197683,.863916,.463218,-.229967,.593688,.706405,.309259],[.694658,.71934,.223825,.865498,.448125,-.203969,.622322,.696073,.294267],[.707107,.707107,.25,.866025,.433013,-.176777,.649519,.684653,.279508],[.71934,.694658,.276175,.865498,.417901,-.148454,.675199,.67219,.265005],[.731354,.681998,.302317,.863916,.402807,-.119068,.699288,.658734,.250778],[.743145,.669131,.328396,.861281,.387751,-.088686,.721714,.644334,.23685],[.75471,.656059,.35438,.857597,.372749,-.057383,.742412,.629044,.223238],[.766044,.642788,.380236,.852869,.357821,-.025233,.761319,.612921,.209963],[.777146,.62932,.405934,.847101,.342984,.007686,.778379,.596021,.19704],[.788011,.615661,.431441,.840301,.328257,.041294,.793541,.578405,.184487],[.798636,.601815,.456728,.832477,.313658,.075508,.806757,.560132,.172317],[.809017,.587785,.481763,.823639,.299204,.110246,.817987,.541266,.160545],[.819152,.573576,.506515,.813798,.284914,.14542,.827194,.521871,.149181],[.829038,.559193,.530955,.802965,.270803,.180944,.834347,.502011,.138237],[.838671,.544639,.555052,.791154,.256891,.21673,.839422,.481753,.127722],[.848048,.529919,.578778,.778378,.243192,.252688,.842399,.461164,.117644],[.857167,.515038,.602104,.764655,.229726,.288728,.843265,.440311,.108009],[.866025,.5,.625,.75,.216506,.32476,.842012,.419263,.098821],[.87462,.48481,.647439,.734431,.203551,.360692,.838638,.398086,.090085],[.882948,.469472,.669395,.717968,.190875,.396436,.833145,.376851,.081803],[.891007,.45399,.690839,.700629,.178494,.431899,.825544,.355623,.073974],[.898794,.438371,.711746,.682437,.166423,.466993,.81585,.334472,.066599],[.906308,.422618,.732091,.663414,.154678,.501627,.804083,.313464,.059674],[.913545,.406737,.751848,.643582,.143271,.535715,.79027,.292666,.053196],[.920505,.390731,.770994,.622967,.132217,.569169,.774442,.272143,.04716],[.927184,.374607,.789505,.601592,.121529,.601904,.756637,.25196,.041559],[.93358,.358368,.807359,.579484,.111222,.633837,.736898,.23218,.036385],[.939693,.34202,.824533,.55667,.101306,.664885,.715274,.212865,.03163],[.945519,.325568,.841008,.533178,.091794,.694969,.691816,.194075,.027281],[.951057,.309017,.856763,.509037,.082698,.724012,.666583,.175868,.023329],[.956305,.292372,.871778,.484275,.074029,.75194,.639639,.158301,.019758],[.961262,.275637,.886036,.458924,.065797,.77868,.61105,.141427,.016556],[.965926,.258819,.899519,.433013,.058013,.804164,.580889,.1253,.013707],[.970296,.241922,.912211,.406574,.050685,.828326,.549233,.109969,.011193],[.97437,.224951,.924096,.379641,.043823,.851105,.516162,.095481,.008999],[.978148,.207912,.935159,.352244,.037436,.872441,.481759,.08188,.007105],[.981627,.190809,.945388,.324419,.03153,.892279,.446114,.069209,.005492],[.984808,.173648,.954769,.296198,.026114,.910569,.409317,.057505,.00414],[.987688,.156434,.963292,.267617,.021193,.927262,.371463,.046806,.003026],[.990268,.139173,.970946,.238709,.016774,.942316,.332649,.037143,.002131],[.992546,.121869,.977722,.209511,.012862,.955693,.292976,.028547,.001431],[.994522,.104528,.983611,.180057,.009462,.967356,.252544,.021043,903e-6],[.996195,.087156,.988606,.150384,.006578,.977277,.21146,.014654,523e-6],[.997564,.069756,.992701,.120527,.004214,.985429,.169828,.0094,268e-6],[.99863,.052336,.995891,.090524,.002372,.991791,.127757,.005297,113e-6],[.999391,.034899,.998173,.060411,.001055,.996348,.085356,.002357,34e-6],[.999848,.017452,.999543,.030224,264e-6,.999086,.042733,59e-5,4e-6],[1,-0,1,-0,0,1,-0,0,-0]]],xe=(Ie[0].length,Ie[1].length,Ie[0][0].length/2),Ee=[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1.003236,1.002156,.999152,.990038],[1.03237,1.021194,.990433,.898572],[1.062694,1.040231,.979161,.799806],[1.093999,1.058954,.964976,.693603],[1.126003,1.077006,.947526,.57989],[1.158345,1.093982,.926474,.45869],[1.19059,1.109437,.901512,.330158],[1.222228,1.12289,.87237,.194621],[1.252684,1.133837,.838839,.052614],[1.281987,1.142358,.801199,0],[1.312073,1.150207,.760839,0],[1.343011,1.157424,.717799,0],[1.374649,1.163859,.671999,0],[1.406809,1.169354,.623371,0],[1.439286,1.173739,.571868,0],[1.471846,1.176837,.517465,0],[1.504226,1.178465,.460174,0],[1.536133,1.178438,.400043,0],[1.567253,1.176573,.337165,0],[1.597247,1.172695,.271688,0],[1.625766,1.166645,.203815,0],[1.652455,1.158285,.133806,0],[1.676966,1.147506,.061983,0],[1.699006,1.134261,0,0],[1.720224,1.119789,0,0],[1.741631,1.10481,0,0],[1.763183,1.08933,0,0],[1.784837,1.073356,0,0],[1.806548,1.056898,0,0],[1.828269,1.039968,0,0],[1.849952,1.02258,0,0],[1.871552,1.004752,0,0],[1.893018,.986504,0,0],[1.914305,.967857,0,0],[1.935366,.948837,0,0],[1.956154,.929471,0,0],[1.976625,.90979,0,0],[1.996736,.889823,0,0],[2.016448,.869607,0,0],[2.035721,.849175,0,0],[2.054522,.828565,0,0],[2.072818,.807816,0,0],[2.090581,.786964,0,0],[2.107785,.766051,0,0],[2.124411,.745115,0,0],[2.140439,.724196,0,0],[2.155856,.703332,0,0],[2.170653,.682561,0,0],[2.184823,.661921,0,0],[2.198364,.641445,0,0],[2.211275,.621169,0,0],[2.223562,.601125,0,0],[2.23523,.581341,0,0],[2.246289,.561847,0,0],[2.256751,.542667,0,0],[2.266631,.523826,0,0],[2.275943,.505344,0,0],[2.284707,.487239,0,0],[2.292939,.469528,0,0],[2.300661,.452225,0,0],[2.307892,.435342,0,0],[2.314654,.418888,0,0],[2.320969,.40287,0,0],[2.326858,.387294,0,0],[2.332343,.372164,0,0],[2.337445,.357481,0,0],[2.342186,.343246,0,0],[2.346585,.329458,0,0],[2.350664,.316113,0,0],[2.354442,.303208,0,0],[2.357937,.290738,0,0],[2.361168,.278698,0,0],[2.364152,.26708,0,0],[2.366906,.255878,0,0],[2.369446,.245082,0,0],[2.371786,.234685,0,0],[2.37394,.224677,0,0],[2.375923,.215048,0,0],[2.377745,.20579,0,0],[2.379421,.196891,0,0],[2.380959,.188342,0,0],[2.382372,.180132,0,0],[2.383667,.172251,0,0],[2.384856,.164689,0,0],[2.385945,.157435,0,0],[2.386943,.150479,0,0],[2.387857,.143811,0,0],[2.388694,.137421,0,0],[2.38946,.131299,0,0],[2.39016,.125435,0,0],[2.390801,.11982,0,0],[2.391386,.114445,0,0],[2.391921,.1093,0,0],[2.39241,.104376,0,0],[2.392857,.099666,0,0],[2.393265,.09516,0,0],[2.393637,.090851,0,0],[2.393977,.086731,0,0],[2.394288,.082791,0,0],[2.394571,.079025,0,0],[2.394829,.075426,0,0],[2.395064,.071986,0,0],[2.395279,.068699,0,0],[2.395475,.065558,0,0],[2.395653,.062558,0,0],[2.395816,.059693,0,0],[2.395964,.056955,0,0],[2.396099,.054341,0,0],[2.396222,.051845,0,0],[2.396334,.049462,0,0],[2.396436,.047186,0,0],[2.396529,.045013,0,0],[2.396613,.042939,0,0],[2.396691,.040959,0,0],[2.396761,.039069,0,0],[2.396825,.037266,0,0],[2.396883,.035544,0,0],[2.396936,.033901,0,0],[2.396984,.032334,0,0],[2.397028,.030838,0,0],[2.397068,.02941,0,0],[2.397104,.028048,0,0],[2.397137,.026749,0,0],[2.397167,.025509,0,0],[2.397194,.024326,0,0],[2.397219,.023198,0,0],[2.397242,.022122,0,0],[2.397262,.021095,0,0],[2.397281,.020116,0,0],[2.397298,.019181,0,0],[2.397314,.01829,0,0],[2.397328,.017441,0,0],[2.397341,.01663,0,0],[2.397352,.015857,0,0],[2.397363,.015119,0,0],[2.397372,.014416,0,0],[2.397381,.013745,0,0],[2.397389,.013106,0,0],[2.397396,.012496,0,0],[2.397403,.011914,0,0],[2.397409,.01136,0,0],[2.397414,.010831,0,0],[2.397419,.010326,0,0],[2.397424,.009845,0,0],[2.397428,.009387,0,0],[2.397432,.008949,0,0],[2.397435,.008532,0,0],[2.397438,.008135,0,0],[2.397441,.007755,0,0],[2.397443,.007394,0,0],[2.397446,.007049,0,0],[2.397448,.006721,0,0],[2.39745,.006407,0,0],[2.397451,.006108,0,0],[2.397453,.005824,0,0],[2.397454,.005552,0,0],[2.397456,.005293,0,0],[2.397457,.005046,0,0],[2.397458,.004811,0,0],[2.397459,.004586,0,0],[2.39746,.004372,0,0],[2.397461,.004168,0,0],[2.397461,.003974,0,0],[2.397462,.003788,0,0],[2.397463,.003611,0,0],[2.397463,.003443,0,0],[2.397464,.003282,0,0],[2.397464,.003129,0,0],[2.397465,.002983,0,0],[2.397465,.002844,0,0],[2.397465,.002711,0,0],[2.397466,.002584,0,0],[2.397466,.002464,0,0],[2.397466,.002349,0,0],[2.397466,.002239,0,0],[2.397467,.002135,0,0],[2.397467,.002035,0,0],[2.397467,.00194,0,0],[2.397467,.001849,0,0],[2.397467,.001763,0,0],[2.397467,.001681,0,0],[2.397468,.001602,0,0],[2.397468,.001527,0,0],[2.397468,.001456,0,0],[2.397468,.001388,0,0],[2.397468,.001323,0,0],[2.397468,.001261,0,0],[2.397468,.001202,0,0],[2.397468,.001146,0,0],[2.397468,.001093,0,0],[2.397468,.001042,0,0],[2.397468,993e-6,0,0],[2.397468,947e-6,0,0],[2.397468,902e-6,0,0],[2.397468,86e-5,0,0],[2.397468,82e-5,0,0],[2.397469,782e-6,0,0],[2.397469,745e-6,0,0],[2.397469,71e-5,0,0],[2.397469,677e-6,0,0],[2.397469,646e-6,0,0],[2.397469,616e-6,0,0],[2.397469,587e-6,0,0],[2.397469,559e-6,0,0],[2.397469,533e-6,0,0],[2.397469,508e-6,0,0],[2.397469,485e-6,0,0],[2.397469,462e-6,0,0],[2.397469,44e-5,0,0],[2.397469,42e-5,0,0],[2.397469,4e-4,0,0],[2.397469,381e-6,0,0],[2.397469,364e-6,0,0],[2.397469,347e-6,0,0],[2.397469,33e-5,0,0],[2.397469,315e-6,0,0],[2.397469,3e-4,0,0],[2.397469,286e-6,0,0],[2.397469,273e-6,0,0],[2.397469,26e-5,0,0],[2.397469,248e-6,0,0],[2.397469,236e-6,0,0],[2.397469,225e-6,0,0],[2.397469,215e-6,0,0],[2.397469,205e-6,0,0],[2.397469,195e-6,0,0],[2.397469,186e-6,0,0],[2.397469,177e-6,0,0],[2.397469,169e-6,0,0],[2.397469,161e-6,0,0],[2.397469,154e-6,0,0],[2.397469,147e-6,0,0],[2.397469,14e-5,0,0],[2.397469,133e-6,0,0],[2.397469,127e-6,0,0],[2.397469,121e-6,0,0],[2.397469,115e-6,0,0],[2.397469,11e-5,0,0],[2.397469,105e-6,0,0],[2.397469,1e-4,0,0],[2.397469,95e-6,0,0],[2.397469,91e-6,0,0],[2.397469,87e-6,0,0],[2.397469,83e-6,0,0],[2.397469,79e-6,0,0],[2.397469,75e-6,0,0],[2.397469,71e-6,0,0],[2.397469,68e-6,0,0],[2.397469,65e-6,0,0],[2.397469,62e-6,0,0],[2.397469,59e-6,0,0],[2.397469,56e-6,0,0],[2.397469,54e-6,0,0],[2.397469,51e-6,0,0],[2.397469,49e-6,0,0],[2.397469,46e-6,0,0],[2.397469,44e-6,0,0],[2.397469,42e-6,0,0],[2.397469,4e-5,0,0],[2.397469,38e-6,0,0],[2.397469,37e-6,0,0],[2.397469,35e-6,0,0],[2.397469,33e-6,0,0],[2.397469,32e-6,0,0],[2.397469,3e-5,0,0],[2.397469,29e-6,0,0],[2.397469,27e-6,0,0],[2.397469,26e-6,0,0],[2.397469,25e-6,0,0],[2.397469,24e-6,0,0],[2.397469,23e-6,0,0],[2.397469,22e-6,0,0],[2.397469,21e-6,0,0],[2.397469,2e-5,0,0],[2.397469,19e-6,0,0],[2.397469,18e-6,0,0],[2.397469,17e-6,0,0],[2.397469,16e-6,0,0],[2.397469,15e-6,0,0],[2.397469,15e-6,0,0],[2.397469,14e-6,0,0],[2.397469,13e-6,0,0],[2.397469,13e-6,0,0],[2.397469,12e-6,0,0],[2.397469,12e-6,0,0],[2.397469,11e-6,0,0],[2.397469,11e-6,0,0],[2.397469,1e-5,0,0],[2.397469,1e-5,0,0],[2.397469,9e-6,0,0],[2.397469,9e-6,0,0],[2.397469,8e-6,0,0],[2.397469,8e-6,0,0],[2.397469,8e-6,0,0],[2.397469,7e-6,0,0],[2.397469,7e-6,0,0],[2.397469,7e-6,0,0],[2.397469,6e-6,0,0],[2.397469,6e-6,0,0],[2.397469,6e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,1e-6,0,0],[2.397469,1e-6,0,0],[2.397469,1e-6,0,0]];var Fe,Se,ke;!function(t){t.Logarithmic="logarithmic",t.Linear="linear",t.None="none"}(Fe||(Fe={})),function(t){t.Width="width",t.Height="height",t.Depth="depth"}(Se||(Se={})),function(t){t.Left="left",t.Right="right",t.Front="front",t.Back="back",t.Down="down",t.Up="up"}(ke||(ke={}));const _e=((Le=he())[0]=0,Le[1]=0,Le[2]=0,Le);var Le;const Oe=le(he(),0,0,-1),Te=le(he(),0,1,0),Re=(le(he(),1,0,0),343),Ue=Fe.Logarithmic,Qe="ambisonic",Ne={[ke.Left]:0,[ke.Right]:0,[ke.Front]:0,[ke.Back]:0,[ke.Down]:0,[ke.Up]:0},He={[Se.Width]:0,[Se.Height]:0,[Se.Depth]:0},ze=[31.25,62.5,125,250,500,1e3,2e3,4e3,8e3],Ge=ze.length,je=new Float32Array(Ge);var We;!function(t){t.Transparent="transparent",t.AcousticCeilingTiles="acoustic-ceiling-tiles",t.BrickBare="brick-bare",t.BrickPainted="brick-painted",t.ConcreteBlockCoarse="concrete-block-coarse",t.ConcreteBlockPainted="concrete-block-painted",t.CurtainHeavy="curtain-heavy",t.FiberGlassInsulation="fiber-glass-insulation",t.GlassThin="glass-thin",t.GlassThick="glass-thick",t.Grass="grass",t.LinoleumOnConcrete="linoleum-on-concrete",t.Marble="marble",t.Metal="metal",t.ParquetOnConcrete="parquet-on-concrete",t.PlasterRough="plaster-rough",t.PlasterSmooth="plaster-smooth",t.PlywoodPanel="plywood-panel",t.PolishedConcreteOrTile="polished-concrete-or-tile",t.Sheetrock="sheetrock",t.WaterOrIceSurface="water-or-ice-surface",t.WoodCeiling="wood-ceiling",t.WoodPanel="wood-panel",t.Uniform="uniform"}(We||(We={}));const Ve={[We.Transparent]:[1,1,1,1,1,1,1,1,1],[We.AcousticCeilingTiles]:[.672,.675,.7,.66,.72,.92,.88,.75,1],[We.BrickBare]:[.03,.03,.03,.03,.03,.04,.05,.07,.14],[We.BrickPainted]:[.006,.007,.01,.01,.02,.02,.02,.03,.06],[We.ConcreteBlockCoarse]:[.36,.36,.36,.44,.31,.29,.39,.25,.5],[We.ConcreteBlockPainted]:[.092,.09,.1,.05,.06,.07,.09,.08,.16],[We.CurtainHeavy]:[.073,.106,.14,.35,.55,.72,.7,.65,1],[We.FiberGlassInsulation]:[.193,.22,.22,.82,.99,.99,.99,.99,1],[We.GlassThin]:[.18,.169,.18,.06,.04,.03,.02,.02,.04],[We.GlassThick]:[.35,.35,.35,.25,.18,.12,.07,.04,.08],[We.Grass]:[.05,.05,.15,.25,.4,.55,.6,.6,.6],[We.LinoleumOnConcrete]:[.02,.02,.02,.03,.03,.03,.03,.02,.04],[We.Marble]:[.01,.01,.01,.01,.01,.01,.02,.02,.04],[We.Metal]:[.03,.035,.04,.04,.05,.05,.05,.07,.09],[We.ParquetOnConcrete]:[.028,.03,.04,.04,.07,.06,.06,.07,.14],[We.PlasterRough]:[.017,.018,.02,.03,.04,.05,.04,.03,.06],[We.PlasterSmooth]:[.011,.012,.013,.015,.02,.03,.04,.05,.1],[We.PlywoodPanel]:[.4,.34,.28,.22,.17,.09,.1,.11,.22],[We.PolishedConcreteOrTile]:[.008,.008,.01,.01,.015,.02,.02,.02,.04],[We.Sheetrock]:[.29,.279,.29,.1,.05,.04,.07,.09,.18],[We.WaterOrIceSurface]:[.006,.006,.008,.008,.013,.015,.02,.025,.05],[We.WoodCeiling]:[.15,.147,.15,.11,.1,.07,.06,.07,.14],[We.WoodPanel]:[.28,.28,.28,.22,.17,.09,.1,.11,.22],[We.Uniform]:[.5,.5,.5,.5,.5,.5,.5,.5,.5]},Ze={[ke.Left]:We.Transparent,[ke.Right]:We.Transparent,[ke.Front]:We.Transparent,[ke.Back]:We.Transparent,[ke.Down]:We.Transparent,[ke.Up]:We.Transparent},Ye=[6e-4,6e-4,7e-4,8e-4,.001,.0015,.0026,.006,.0207],Xe=6.28318530717959,Je=57.29577951308232,Ke=1e-8,qe=function(...t){window.console.log.apply(window.console,["%c[ResonanceAudio]%c "+t.join(" ")+" %c(@"+performance.now().toFixed(2)+"ms)","background: #BBDEFB; color: #FF5722; font-weight: 700","font-weight: 400","color: #AAA"])},$e={[ke.Left]:Se.Width,[ke.Right]:Se.Width,[ke.Front]:Se.Depth,[ke.Back]:Se.Depth,[ke.Up]:Se.Height,[ke.Down]:Se.Height},ti={[ke.Left]:0,[ke.Right]:0,[ke.Front]:2,[ke.Back]:2,[ke.Up]:1,[ke.Down]:1},ei={[ke.Left]:1,[ke.Right]:-1,[ke.Front]:1,[ke.Back]:-1,[ke.Up]:-1,[ke.Down]:1};class ii{constructor(t,e){this.channelGain=new Array,this.merger=null,e=Object.assign({ambisonicOrder:1,azimuth:0,elevation:0,sourceWidth:0},e),this.context=t,this.input=t.createGain(),this.output=t.createGain(),this.setAmbisonicOrder(e.ambisonicOrder),this.azimuth=e.azimuth,this.elevation=e.elevation,this.setSourceWidth(e.sourceWidth)}static validateAmbisonicOrder(t){return isNaN(t)||null==t?(qe("Error: Invalid ambisonic order",t,"\nUsing ambisonicOrder=1 instead."),t=1):t<1?(qe("Error: Unable to render ambisonic order",t,"(Min order is 1)","\nUsing min order instead."),t=1):t>xe&&(qe("Error: Unable to render ambisonic order",t,"(Max order is",xe,")\nUsing max order instead."),t=xe),t}setAmbisonicOrder(t){this.ambisonicOrder=ii.validateAmbisonicOrder(t),this.input.disconnect();for(let t=0;t<this.channelGain.length;t++)this.channelGain[t].disconnect();null!=this.merger&&this.merger.disconnect();let e=(this.ambisonicOrder+1)*(this.ambisonicOrder+1);this.merger=this.context.createChannelMerger(e),this.channelGain=new Array(e);for(let t=0;t<e;t++)this.channelGain[t]=this.context.createGain(),this.input.connect(this.channelGain[t]),this.channelGain[t].connect(this.merger,0,t);this.merger.connect(this.output)}dispose(){this.merger.disconnect(this.output);let t=(this.ambisonicOrder+1)*(this.ambisonicOrder+1);for(let e=0;e<t;++e)this.channelGain[e].disconnect(this.merger,0,e),this.input.disconnect(this.channelGain[e])}setDirection(t,e){(null==t||isNaN(t))&&(t=0),(null==e||isNaN(e))&&(e=0),this.azimuth=t,this.elevation=e,(t=Math.round(t%360))<0&&(t+=360),e=Math.round(Math.min(90,Math.max(-90,e)))+90,this.channelGain[0].gain.value=Ee[this.spreadIndex][0];for(let i=1;i<=this.ambisonicOrder;i++){let s=Ee[this.spreadIndex][i];for(let n=-i;n<=i;n++){const a=i*i+i+n,o=i*(i+1)/2+Math.abs(n)-1;let r=Ie[1][e][o];if(0!=n){let e=xe+n-1;n<0&&(e=xe+n),r*=Ie[0][t][e]}this.channelGain[a].gain.value=r*s}}}setSourceWidth(t){this.spreadIndex=Math.min(359,Math.max(0,Math.round(t))),this.setDirection(this.azimuth,this.elevation)}}function si(...t){const e=`[Omnitone] ${t.join(" ")}`;window.console.log(e)}var ni;!function(t){t.BASE64="base64",t.URL="url"}(ni||(ni={}));class ai{constructor(t,e,i){this._context=t,this._options=Object.assign({},{dataType:ni.BASE64,verbose:!1},i),this._bufferData=this._options.dataType===ni.BASE64?e:e.slice(0)}async load(){try{const t=this._bufferData.map((async t=>{try{return await this._launchAsyncLoadTask(t)}catch(e){const i='BufferList: error while loading "'+t+'". ('+e.message+")";throw new Error(i)}}));return await Promise.all(t)}catch(t){const e='BufferList: error while loading ". ('+t.message+")";throw new Error(e)}}async _launchAsyncLoadTask(t){const e=await this._fetch(t);return await this._context.decodeAudioData(e)}async _fetch(t){if(this._options.dataType===ni.BASE64)return function(t){const e=window.atob(t),i=new Uint8Array(e.length);for(let t=0;t<i.length;++t)i[t]=e.charCodeAt(t);return i.buffer}(t);{const e=await fetch(t);return await e.arrayBuffer()}}}class oi{constructor(t,e){this._context=t,this._active=!1,this._isBufferLoaded=!1,this._buildAudioGraph(),e&&this.setHRIRBufferList(e),this.enable()}_buildAudioGraph(){this._splitterWYZX=this._context.createChannelSplitter(4),this._mergerWY=this._context.createChannelMerger(2),this._mergerZX=this._context.createChannelMerger(2),this._convolverWY=this._context.createConvolver(),this._convolverZX=this._context.createConvolver(),this._splitterWY=this._context.createChannelSplitter(2),this._splitterZX=this._context.createChannelSplitter(2),this._inverter=this._context.createGain(),this._mergerBinaural=this._context.createChannelMerger(2),this._summingBus=this._context.createGain(),this._splitterWYZX.connect(this._mergerWY,0,0),this._splitterWYZX.connect(this._mergerWY,1,1),this._splitterWYZX.connect(this._mergerZX,2,0),this._splitterWYZX.connect(this._mergerZX,3,1),this._mergerWY.connect(this._convolverWY),this._mergerZX.connect(this._convolverZX),this._convolverWY.connect(this._splitterWY),this._convolverZX.connect(this._splitterZX),this._splitterWY.connect(this._mergerBinaural,0,0),this._splitterWY.connect(this._mergerBinaural,0,1),this._splitterWY.connect(this._mergerBinaural,1,0),this._splitterWY.connect(this._inverter,1,0),this._inverter.connect(this._mergerBinaural,0,1),this._splitterZX.connect(this._mergerBinaural,0,0),this._splitterZX.connect(this._mergerBinaural,0,1),this._splitterZX.connect(this._mergerBinaural,1,0),this._splitterZX.connect(this._mergerBinaural,1,1),this._convolverWY.normalize=!1,this._convolverZX.normalize=!1,this._inverter.gain.value=-1,this.input=this._splitterWYZX,this.output=this._summingBus}dispose(){this._active&&this.disable(),this._splitterWYZX.disconnect(this._mergerWY,0,0),this._splitterWYZX.disconnect(this._mergerWY,1,1),this._splitterWYZX.disconnect(this._mergerZX,2,0),this._splitterWYZX.disconnect(this._mergerZX,3,1),this._mergerWY.disconnect(this._convolverWY),this._mergerZX.disconnect(this._convolverZX),this._convolverWY.disconnect(this._splitterWY),this._convolverZX.disconnect(this._splitterZX),this._splitterWY.disconnect(this._mergerBinaural,0,0),this._splitterWY.disconnect(this._mergerBinaural,0,1),this._splitterWY.disconnect(this._mergerBinaural,1,0),this._splitterWY.disconnect(this._inverter,1,0),this._inverter.disconnect(this._mergerBinaural,0,1),this._splitterZX.disconnect(this._mergerBinaural,0,0),this._splitterZX.disconnect(this._mergerBinaural,0,1),this._splitterZX.disconnect(this._mergerBinaural,1,0),this._splitterZX.disconnect(this._mergerBinaural,1,1)}setHRIRBufferList(t){this._isBufferLoaded||(this._convolverWY.buffer=t[0],this._convolverZX.buffer=t[1],this._isBufferLoaded=!0)}enable(){this._mergerBinaural.connect(this._summingBus),this._active=!0}disable(){this._mergerBinaural.disconnect(),this._active=!1}}class ri{constructor(t){this._context=t,this._splitter=this._context.createChannelSplitter(4),this._inX=this._context.createGain(),this._inY=this._context.createGain(),this._inZ=this._context.createGain(),this._m0=this._context.createGain(),this._m1=this._context.createGain(),this._m2=this._context.createGain(),this._m3=this._context.createGain(),this._m4=this._context.createGain(),this._m5=this._context.createGain(),this._m6=this._context.createGain(),this._m7=this._context.createGain(),this._m8=this._context.createGain(),this._outX=this._context.createGain(),this._outY=this._context.createGain(),this._outZ=this._context.createGain(),this._merger=this._context.createChannelMerger(4),this._splitter.connect(this._inX,1),this._splitter.connect(this._inY,2),this._splitter.connect(this._inZ,3),this._inX.gain.value=-1,this._inY.gain.value=-1,this._inZ.gain.value=-1,this._inX.connect(this._m0),this._inX.connect(this._m1),this._inX.connect(this._m2),this._inY.connect(this._m3),this._inY.connect(this._m4),this._inY.connect(this._m5),this._inZ.connect(this._m6),this._inZ.connect(this._m7),this._inZ.connect(this._m8),this._m0.connect(this._outX),this._m1.connect(this._outY),this._m2.connect(this._outZ),this._m3.connect(this._outX),this._m4.connect(this._outY),this._m5.connect(this._outZ),this._m6.connect(this._outX),this._m7.connect(this._outY),this._m8.connect(this._outZ),this._splitter.connect(this._merger,0,0),this._outX.connect(this._merger,0,1),this._outY.connect(this._merger,0,2),this._outZ.connect(this._merger,0,3),this._outX.gain.value=-1,this._outY.gain.value=-1,this._outZ.gain.value=-1,this.setRotationMatrix3(ae(se())),this.input=this._splitter,this.output=this._merger}dispose(){this._splitter.disconnect(this._inX,1),this._splitter.disconnect(this._inY,2),this._splitter.disconnect(this._inZ,3),this._inX.disconnect(this._m0),this._inX.disconnect(this._m1),this._inX.disconnect(this._m2),this._inY.disconnect(this._m3),this._inY.disconnect(this._m4),this._inY.disconnect(this._m5),this._inZ.disconnect(this._m6),this._inZ.disconnect(this._m7),this._inZ.disconnect(this._m8),this._m0.disconnect(this._outX),this._m1.disconnect(this._outY),this._m2.disconnect(this._outZ),this._m3.disconnect(this._outX),this._m4.disconnect(this._outY),this._m5.disconnect(this._outZ),this._m6.disconnect(this._outX),this._m7.disconnect(this._outY),this._m8.disconnect(this._outZ),this._splitter.disconnect(this._merger,0,0),this._outX.disconnect(this._merger,0,1),this._outY.disconnect(this._merger,0,2),this._outZ.disconnect(this._merger,0,3)}setRotationMatrix3(t){this._m0.gain.value=t[0],this._m1.gain.value=t[1],this._m2.gain.value=t[2],this._m3.gain.value=t[3],this._m4.gain.value=t[4],this._m5.gain.value=t[5],this._m6.gain.value=t[6],this._m7.gain.value=t[7],this._m8.gain.value=t[8]}setRotationMatrix4(t){this._m0.gain.value=t[0],this._m1.gain.value=t[1],this._m2.gain.value=t[2],this._m3.gain.value=t[4],this._m4.gain.value=t[5],this._m5.gain.value=t[6],this._m6.gain.value=t[8],this._m7.gain.value=t[9],this._m8.gain.value=t[10]}getRotationMatrix3(){return ne(hi,this._m0.gain.value,this._m1.gain.value,this._m2.gain.value,this._m3.gain.value,this._m4.gain.value,this._m5.gain.value,this._m6.gain.value,this._m7.gain.value,this._m8.gain.value),hi}getRotationMatrix4(){return re(ci,this._m0.gain.value,this._m1.gain.value,this._m2.gain.value,0,this._m3.gain.value,this._m4.gain.value,this._m5.gain.value,0,this._m6.gain.value,this._m7.gain.value,this._m8.gain.value,0,0,0,0,1),ci}}const hi=se(),ci=oe();var Ai;!function(t){t[t.Default=0]="Default",t[t.Safari=1]="Safari",t[t.FUMA=2]="FUMA"}(Ai||(Ai={}));const li={[Ai.Default]:[0,1,2,3],[Ai.Safari]:[2,0,1,3],[Ai.FUMA]:[0,3,1,2]};class ui{constructor(t,e){this._context=t,this._splitter=this._context.createChannelSplitter(4),this._merger=this._context.createChannelMerger(4),this.input=this._splitter,this.output=this._merger,this.setChannelMap(e||Ai.Default)}setChannelMap(t){this._channelMap=t instanceof Array?t:li[t],this._splitter.disconnect(),this._splitter.connect(this._merger,0,this._channelMap[0]),this._splitter.connect(this._merger,1,this._channelMap[1]),this._splitter.connect(this._merger,2,this._channelMap[2]),this._splitter.connect(this._merger,3,this._channelMap[3])}dispose(){this._splitter.disconnect(this._merger,0,this._channelMap[0]),this._splitter.disconnect(this._merger,1,this._channelMap[1]),this._splitter.disconnect(this._merger,2,this._channelMap[2]),this._splitter.disconnect(this._merger,3,this._channelMap[3])}}var di=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wIA9v8QAPv/CwD+/wcA/v8MAP//AQD7/wEACAAEAPj/+v8YABAA7v/n//v/9P/M/8D//f34/R38EvzxAfEBtA2lDTcBJQFJ9T71FP0D/cD1tfVo/Wv9uPTO9PPmOufc/U/+agL3Aisc/RxuGKEZBv3j/iYMzQ2gAzsEQQUABiQFrASzA5cB2QmyCy0AtgR4AeYGtfgAA2j5OQHP+scArPsMBJgEggIEBtz6+QVq/pj/aPg8BPP3gQEi+jEAof0fA1v9+/7S+8IBjvwd/xD4IADL/Pf9zvs+/l3+wgB7/+L+7fzFADH9kf6A+n3+DP6+/TP9xP68/pn+w/26/i39YgA0/u790Pt9/kD+7v1s/Wb+8f4C/1P+pf/x/cT+6/3p/Xz9ff5F/0f9G/4r/6v/4P5L/sL+ff7c/pj+Ov7X/UT+9P5G/oz+6v6A/2D+9/6P/8r/bP7m/ij+C//e/tj/Gf4e/9v+FwDP/lz/sP7F/2H+rv/G/s7/Hf7y/4P+NAD9/k0AK/6w/zP/hACh/sX/gf44AOP+dgCm/iUAk/5qAOD+PwC+/jEAWP4CAAr/bQBw/vv/zf5iACD/OgCS/uD/Cv9oAAb/CgDK/kwA//5tACH/TgCg/h4AHP9aABP/JADP/hEAYv9gAAj/3f8m/ysAYv8gACX/8/8k/ysAXv8bABH//v8j/ygAa/8qAAD/9f9g/1YAWf8JACH/AgB2/z4AXP/w/z3/FgB2/ykAX//9/z//EwCV/zUAS//n/1T/GACK/x4ATv/0/4P/QQB4//v/WP/2/3X/HAB8//P/V//3/2f/AQBh/9v/Tf/x/5P/IwCI/wMAf/8hAKP/JACZ/xUAiv8nAK//HgCr/yMAm/8uAMz/OACi/yQAqf87AMT/MwCY/yUAtP9FAMH/KgCu/ycAyP85AMv/IwCz/xoA1f8qAMn/FgC8/xQA4/8nAMX/CwDJ/xQA4f8ZAMH/BgDO/xQA4f8WAMP/BwDU/xQA4P8QAMH/AQDb/xQA3P8JAMP/AgDh/xIA2v8EAMj/AgDk/w0A1f/+/8v/AwDm/wwA0v/+/9H/BgDl/wkAzv/8/9T/BwDk/wcAzv/8/9r/CQDi/wQAzf/8/9//CADf////0P/9/+L/BwDd//7/0////+T/BgDb//z/1f8AAOf/BQDZ//v/2v8CAOb/AwDY//v/3v8EAOb/AgDY//3/4f8FAOX/AQDZ//7/5P8GAOP/AADb/wAA5/8GAOH////d/wIA5/8FAOD////f/wMA6P8FAOD////h/wQA6P8EAN7////h/wUA4v8DANv/AQDd/wQA3P8CANn/AgDb/wMA2/8CANv/AgDd/wIA3v8CAOH/AQDj/wEA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAA/f8CAP//AQD//wEA//8BAP3/AAACAP7/+f8AAAIA/P8FAAQA8/8AABoA+f/V/wQAHQDO/xoAQQBO/ocA0Px1/ucHW/4UCm8HLO6kAjv8/fCRDdAAYfPiBIgFXveUCM0GBvh6/nz7rf0J/QcQSRVdBgoBSgFR62r9NP8m+LoEAvriBVAAiAPmABEGMf2l+SwBjva6/G4A//8P/CYDMgXm/R0CKAE6/fcBBwAtAND+kQA0A5UDhwFs/8IB8fydAEP/A/8v/e7/mP8j/2YBIwE3Av0AYv+uAOD8lgAg/wwAIf/L/n0Ae//OAJMB3P/XAF//XwCM/08AB/8NAEf/rf4jAT3/lgAJAP4AHgDpAO8AUf9L/07/Qf8KAOD/x/+D/3sATQCDAMoA0f79/+L/EQDt/7EAqv+S/7IAuv/o/wgAc//X//H/SwCm/+3/Yf/B/yoAAADI/7X/AwBg/5EATgCX/xYA/P+q/00AVACY/6v/BADD/zwALQCN/8z/KQDu/ygAEgCZ/6f/VQDC//T/KQCs/7P/UgAfAO7/NgC8/57/awAZAPP/+P/V/8z/bQBBAL//DgD0/+T/TABBAMz/CwAxAPz/SQBqALn/BgALAPz/EAA7AIz/3/8iAAUA//8kALf/y/9VABQA+v81AOj/0P9cAB4A+f8WAOr/vv83ABgAw/8JAOj/4f8nACIAsf/y/w4A3v8gACQAxP/n/ycA7P8WAC0Ayf/U/ycA9v/7/yUA0P/P/zUABADc/xUA5P/J/zcACwDS/xUA9P/m/zAACQDX/+3/9v/2/yQACgDZ/+P/AwAKABYA///b/9j/EQALABkADgD6/+7/GwD4/w4A8P/w//j/EgAEAAUA9f/1/wQAGgD4/wAA5////wAAGQD1////7f8FAAUAFQDv/wAA6v8LAAcAFQDs/wEA9P8SAAYACwDr//7/AQASAAYABQDv/wIAAwAWAAIAAgDv/wAABgATAAEA/f/u/wQABgAQAPr/+P/z/wUACQALAPj/9//4/wgABwAKAPT/+f/5/w4ABwAIAPT/+//9/w4AAwADAPH//f///w8A//8BAPP///8BAA0A/f/+//X/AgACAA0A+//8//b/BAADAAoA+f/7//n/BgADAAcA+P/7//v/BwABAAQA+P/8//3/CQABAAIA9//9////CQD/////+P///wAACAD9//7/+f8AAAAABwD8//3/+v8CAAAABgD7//z//P8EAAAABAD6//3//P8FAP//AgD6//7//v8FAP7/AQD7//////8GAP7/AAD7/wEA//8EAP3/AAD9/wEA/v8DAP3/AAD9/wIA/v8CAP3/AQD9/wIA/v8CAP7/AQD+/wEA"];class gi{constructor(t,e){if(this.context=t,this.config=Object.assign({channelMap:Ai.Default,renderingMode:Pe.Ambisonic},e),this.config.channelMap instanceof Array&&4!==this.config.channelMap.length)throw new Error("FOARenderer: Invalid channel map. (got "+this.config.channelMap+")");if(this.config.hrirPathList&&2!==this.config.hrirPathList.length)throw new Error("FOARenderer: Invalid HRIR URLs. It must be an array with 2 URLs to HRIR files. (got "+this.config.hrirPathList+")");this.buildAudioGraph()}buildAudioGraph(){this.input=this.context.createGain(),this.output=this.context.createGain(),this.bypass=this.context.createGain(),this.router=new ui(this.context,this.config.channelMap),this.rotator=new ri(this.context),this.convolver=new oi(this.context),this.input.connect(this.router.input),this.input.connect(this.bypass),this.router.output.connect(this.rotator.input),this.rotator.output.connect(this.convolver.input),this.convolver.output.connect(this.output),this.input.channelCount=4,this.input.channelCountMode="explicit",this.input.channelInterpretation="discrete"}dispose(){this.getRenderingMode()===Pe.Bypass&&this.bypass.connect(this.output),this.input.disconnect(this.router.input),this.input.disconnect(this.bypass),this.router.output.disconnect(this.rotator.input),this.rotator.output.disconnect(this.convolver.input),this.convolver.output.disconnect(this.output),this.convolver.dispose(),this.rotator.dispose(),this.router.dispose()}async initialize(){const t=this.config.hrirPathList?new ai(this.context,this.config.hrirPathList,{dataType:ni.URL}):new ai(this.context,di,{dataType:ni.BASE64});try{const e=await t.load();this.convolver.setHRIRBufferList(e),this.setRenderingMode(this.config.renderingMode)}catch(t){const e=`FOARenderer: HRIR loading/decoding (mode: ${this.config.renderingMode}) failed. Reason: ${t.message}`;throw new Error(e)}}setChannelMap(t){t.toString()!==this.config.channelMap.toString()&&(si("Remapping channels (["+this.config.channelMap.toString()+"] -> ["+t.toString()+"])."),this.config.channelMap=t instanceof Array?t.slice():t,this.router.setChannelMap(this.config.channelMap))}setRotationMatrix3(t){this.rotator.setRotationMatrix3(t)}setRotationMatrix4(t){this.rotator.setRotationMatrix4(t)}getRenderingMode(){return this.config.renderingMode}setRenderingMode(t){if(t!==this.config.renderingMode){switch(t){case Pe.Ambisonic:this.convolver.enable(),this.bypass.disconnect();break;case Pe.Bypass:this.convolver.disable(),this.bypass.connect(this.output);break;case Pe.None:this.convolver.disable(),this.bypass.disconnect();break;default:A(t)}this.config.renderingMode=t}}}class pi{constructor(t,e,i){this._active=!1,this._isBufferLoaded=!1,this._context=t,this._ambisonicOrder=e,this._numberOfChannels=(this._ambisonicOrder+1)*(this._ambisonicOrder+1),this._buildAudioGraph(),i&&this.setHRIRBufferList(i),this.enable()}_buildAudioGraph(){const t=Math.ceil(this._numberOfChannels/2);this._inputSplitter=this._context.createChannelSplitter(this._numberOfChannels),this._stereoMergers=[],this._convolvers=[],this._stereoSplitters=[],this._positiveIndexSphericalHarmonics=this._context.createGain(),this._negativeIndexSphericalHarmonics=this._context.createGain(),this._inverter=this._context.createGain(),this._binauralMerger=this._context.createChannelMerger(2),this._outputGain=this._context.createGain();for(let e=0;e<t;++e)this._stereoMergers[e]=this._context.createChannelMerger(2),this._convolvers[e]=this._context.createConvolver(),this._stereoSplitters[e]=this._context.createChannelSplitter(2),this._convolvers[e].normalize=!1;for(let t=0;t<=this._ambisonicOrder;++t)for(let e=-t;e<=t;e++){const i=t*t+t+e,s=Math.floor(i/2);this._inputSplitter.connect(this._stereoMergers[s],i,i%2),this._stereoMergers[s].connect(this._convolvers[s]),this._convolvers[s].connect(this._stereoSplitters[s]),e>=0?this._stereoSplitters[s].connect(this._positiveIndexSphericalHarmonics,i%2):this._stereoSplitters[s].connect(this._negativeIndexSphericalHarmonics,i%2)}this._positiveIndexSphericalHarmonics.connect(this._binauralMerger,0,0),this._positiveIndexSphericalHarmonics.connect(this._binauralMerger,0,1),this._negativeIndexSphericalHarmonics.connect(this._binauralMerger,0,0),this._negativeIndexSphericalHarmonics.connect(this._inverter),this._inverter.connect(this._binauralMerger,0,1),this._inverter.gain.value=-1,this.input=this._inputSplitter,this.output=this._outputGain}dispose(){this._active&&this.disable();for(let t=0;t<=this._ambisonicOrder;++t)for(let e=-t;e<=t;e++){const i=t*t+t+e,s=Math.floor(i/2);this._inputSplitter.disconnect(this._stereoMergers[s],i,i%2),this._stereoMergers[s].disconnect(this._convolvers[s]),this._convolvers[s].disconnect(this._stereoSplitters[s]),e>=0?this._stereoSplitters[s].disconnect(this._positiveIndexSphericalHarmonics,i%2):this._stereoSplitters[s].disconnect(this._negativeIndexSphericalHarmonics,i%2)}this._positiveIndexSphericalHarmonics.disconnect(this._binauralMerger,0,0),this._positiveIndexSphericalHarmonics.disconnect(this._binauralMerger,0,1),this._negativeIndexSphericalHarmonics.disconnect(this._binauralMerger,0,0),this._negativeIndexSphericalHarmonics.disconnect(this._inverter),this._inverter.disconnect(this._binauralMerger,0,1)}setHRIRBufferList(t){if(!this._isBufferLoaded){for(let e=0;e<t.length;++e)this._convolvers[e].buffer=t[e];this._isBufferLoaded=!0}}enable(){this._binauralMerger.connect(this._outputGain),this._active=!0}disable(){this._binauralMerger.disconnect(),this._active=!1}}function mi(t,e){return t===e?1:0}function fi(t,e,i){return(i+t)*(2*t+1)+(e+t)}function vi(t,e,i,s,n){const a=fi(e,i,s);t[e-1][a].gain.value=n}function wi(t,e,i,s){const n=fi(e,i,s);return t[e-1][n].gain.value}function Bi(t,e,i,s,n){return s===n?wi(t,1,e,1)*wi(t,n-1,i,n-1)-wi(t,1,e,-1)*wi(t,n-1,i,1-n):s===-n?wi(t,1,e,1)*wi(t,n-1,i,1-n)+wi(t,1,e,-1)*wi(t,n-1,i,n-1):wi(t,1,e,0)*wi(t,n-1,i,s)}function yi(t,e,i,s){return Bi(t,0,e,i,s)}function Di(t,e,i,s){if(0===e)return Bi(t,1,1,i,s)+Bi(t,-1,-1,i,s);if(e>0){const n=mi(e,1);return Bi(t,1,e-1,i,s)*Math.sqrt(1+n)-Bi(t,-1,1-e,i,s)*(1-n)}{const n=mi(e,-1);return Bi(t,1,e+1,i,s)*(1-n)+Bi(t,-1,-e-1,i,s)*Math.sqrt(1+n)}}function bi(t,e,i,s){return 0===e?0:e>0?Bi(t,1,e+1,i,s)+Bi(t,-1,-e-1,i,s):Bi(t,1,e-1,i,s)-Bi(t,-1,1-e,i,s)}function Ci(t,e,i){const s=mi(t,0),n=Math.abs(e)===i?1/(2*i*(2*i-1)):1/((i+e)*(i-e));return le(Mi,Math.sqrt((i+t)*(i-t)*n),.5*(1-2*s)*Math.sqrt((1+s)*(i+Math.abs(t)-1)*(i+Math.abs(t))*n),-.5*(1-s)*Math.sqrt((i-Math.abs(t)-1)*(i-Math.abs(t)))*n),Mi}const Mi=he();function Pi(t,e){for(let i=-e;i<=e;i++)for(let s=-e;s<=e;s++){const n=Ci(i,s,e);Math.abs(n[0])>0&&(n[0]*=yi(t,i,s,e)),Math.abs(n[1])>0&&(n[1]*=Di(t,i,s,e)),Math.abs(n[2])>0&&(n[2]*=bi(t,i,s,e)),vi(t,e,i,s,n[0]+n[1]+n[2])}}function Ii(t){for(let e=2;e<=t.length;e++)Pi(t,e)}class xi{constructor(t,e){this._context=t,this._ambisonicOrder=e;const i=(e+1)*(e+1);this._splitter=this._context.createChannelSplitter(i),this._merger=this._context.createChannelMerger(i),this._gainNodeMatrix=[];for(let t=1;t<=e;t++){const e=t*t,i=2*t+1;this._gainNodeMatrix[t-1]=[];for(let s=0;s<i;s++){const n=e+s;for(let a=0;a<i;a++){const o=e+a,r=s*i+a;this._gainNodeMatrix[t-1][r]=this._context.createGain(),this._splitter.connect(this._gainNodeMatrix[t-1][r],n),this._gainNodeMatrix[t-1][r].connect(this._merger,0,o)}}}this._splitter.connect(this._merger,0,0),this.setRotationMatrix3(ae(se())),this.input=this._splitter,this.output=this._merger}dispose(){for(let t=1;t<=this._ambisonicOrder;t++){const e=t*t,i=2*t+1;for(let s=0;s<i;s++){const n=e+s;for(let a=0;a<i;a++){const o=e+a,r=s*i+a;this._splitter.disconnect(this._gainNodeMatrix[t-1][r],n),this._gainNodeMatrix[t-1][r].disconnect(this._merger,0,o)}}}this._splitter.disconnect(this._merger,0,0)}setRotationMatrix3(t){this._gainNodeMatrix[0][0].gain.value=t[0],this._gainNodeMatrix[0][1].gain.value=t[1],this._gainNodeMatrix[0][2].gain.value=t[2],this._gainNodeMatrix[0][3].gain.value=t[3],this._gainNodeMatrix[0][4].gain.value=t[4],this._gainNodeMatrix[0][5].gain.value=t[5],this._gainNodeMatrix[0][6].gain.value=t[6],this._gainNodeMatrix[0][7].gain.value=t[7],this._gainNodeMatrix[0][8].gain.value=t[8],Ii(this._gainNodeMatrix)}setRotationMatrix4(t){this._gainNodeMatrix[0][0].gain.value=t[0],this._gainNodeMatrix[0][1].gain.value=t[1],this._gainNodeMatrix[0][2].gain.value=t[2],this._gainNodeMatrix[0][3].gain.value=t[4],this._gainNodeMatrix[0][4].gain.value=t[5],this._gainNodeMatrix[0][5].gain.value=t[6],this._gainNodeMatrix[0][6].gain.value=t[8],this._gainNodeMatrix[0][7].gain.value=t[9],this._gainNodeMatrix[0][8].gain.value=t[10],Ii(this._gainNodeMatrix)}getRotationMatrix3(){return ne(Ei,this._gainNodeMatrix[0][0].gain.value,this._gainNodeMatrix[0][1].gain.value,this._gainNodeMatrix[0][2].gain.value,this._gainNodeMatrix[0][3].gain.value,this._gainNodeMatrix[0][4].gain.value,this._gainNodeMatrix[0][5].gain.value,this._gainNodeMatrix[0][6].gain.value,this._gainNodeMatrix[0][7].gain.value,this._gainNodeMatrix[0][8].gain.value),Ei}getRotationMatrix4(){return re(Fi,this._gainNodeMatrix[0][0].gain.value,this._gainNodeMatrix[0][1].gain.value,this._gainNodeMatrix[0][2].gain.value,0,this._gainNodeMatrix[0][3].gain.value,this._gainNodeMatrix[0][4].gain.value,this._gainNodeMatrix[0][5].gain.value,0,this._gainNodeMatrix[0][6].gain.value,this._gainNodeMatrix[0][7].gain.value,this._gainNodeMatrix[0][8].gain.value,0,0,0,0,1),Fi}getAmbisonicOrder(){return this._ambisonicOrder}}const Ei=se(),Fi=oe();var Si=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wQA8/8ZAPr/DAD+/wMA/v8KAAQA/f8DAAMABADs//z/8v/z/8f/R/90/ob+//zAAWsDAwY3DKn9//tu93DvkwI6An4CuwJ0/BH7VPux92X0Gu7N/EX9mgfqCkkIiRMgBd4NQQGL/c0G/xBxAKELZATUA/sIHRSx+fkCyAUmBNEJIARlAdHz2AjNACcIsAW4AlECsvtJ/P/7K/tf++n8aP4W+g0FXAElAMn8nQHn/sT+Zv7N+9X2xvzM/O3+EvpqBBD7SQLd+vb/sPlw/JD72/3n+Rr+L/wS/vz6UQGg/Nf+Av5L/5X9Gv2//SP+mf3j/lf+v/2B/ZH/5P05/iL9MP9F/uf9UP4v/qv9mv7o/Xn+wP2k/8L+uP5J/tD+Dv/Y/bL+mP72/n3+pP+7/hAA+/5zAGH+Z/+u/g8Azv2y/6L+//9o/iIADP8VACz/CwCN/pb/1v4yAFP+wf+4/jsAcf5VAP3+bADa/nMA6f4sAOT+IQBd/v7/7v6aAIL+QADe/nEA0P4yAKz+CQCo/moAuf5xAN7+mAC8/jcANf9eAPX+IAA1/1kAAP9hAMz+PQD5/m0A2/4gAPr+UQDh/jQAEv9BAPH+FABN/zkASv9DADP/BABe/1IAGf8oAE3/RQAw/zIAQf8mADn/GgBE/xIAR/8hAD7/BABy/zEAKP/0/07/GwBX/z4ARf8mAFr/QQBV/zUAVP8eAFz/JABt/0EAUP8MAHz/KgBr/ycAYv8EAH3/MABl/x8Agv8bAIj/GgBv//z/ff8AAJX/IABu/+T/jv/r/4z/9/9n/77/pP8JAJD/EQCJ//r/q/8WAJ//GQCU/xYAtv8qAKr/PQCW/ysAwf8+ALb/OgC3/ygAz/8uAM7/OgDH/ygAz/8kAMz/OgC//xsA1f8qAMn/LwDN/xcA1f8oAMv/JQDR/xMAzf8bAM//HgDU/wUA2v8ZANL/EwDW/wEA1f8ZAMz/BwDX/wIA0v8SANT/BQDW/wMA0/8PANT/AADY/wIA1f8MANX/+f/a/wUA0v8IANf/+//Y/wUA0/8DANr/+f/Y/wQA1v8BANr/+f/Z/wUA1//8/9z/+v/Y/wYA2f/8/93//v/Y/wUA2v/9/93////Z/wUA3P/8/97/AgDa/wMA3v/8/97/AwDb/wIA3//9/97/BADd/wEA4f///9//BQDf/wAA4v8AAN//BQDf/wAA4/8CAN//BADh/wAA4/8DAOD/BADi////4/8DAOH/AwDk/wAA5P8FAOL/AgDl/wEA5P8FAOL/AQDl/wEA4/8EAOL/AQDj/wIA4P8DAN//AADg/wIA3v8CAOD/AADh/wEA4v8AAOP/AADm/wAA6P8AAOz/AADu/wAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////f/+//7///8AAP////8BAAEA/f8AAAEAAQAFAAUA9//6/x0A2f/9/xMA3P+jAE//of9HAKP//gCj/77/Z/vi/28D9/ywDJAJIvr6AsX0Xec4BhcGzf23DZP7yfZ6C1//nwBDBIHyYgob/Tf3sQ41ANoKRA/A+E7yffAa9gD5EQUBDMwMygiqAHMAqPqhAGUB2/gE+a78H/+4APT6DwIUAA0HNwMhBfL8E/90A5n7dP9cALIC+v5C/q0AOv9kAogBHv01/+3/qAQD/ub8T/4vAOUA5P6KATv+ywEYAeT+KP6i/3gCFP6h/hr/+P83ACL/VADn/8UARQJI/4MAu/8qAlj+wf4iAPb/LgFJ/8QAUABAAI4ABf+k/3X/YgFK/ij/j/9HADoAi/+WAA0BVwC/ACL/LACe//cARv9i/xgAUgA0ACj/FgBgAIj/5P9M/7z/zv8/AKz/gv8sAEQA6/+I/yYAawDL/7T/xf8qAOv/FQCu/5n/EgAyAO3/i/9LAE4A+//R//P/FgDe/8z/u/8DADIALAAZALL/TAA8ABwAo//1/xwA/P/L/z0A6P8jAN7/7v+a/zAAwf/7/3//KQAuACwA9v8RAGYAIwBNADgAKgASAF0ADgANACEAMQDH//H/LQACAB0Ay////x0APAABAAQA2v8iAAcAEgDE/+v/FQD+/+P/DAD1/97/6v/4//X/EwD4/+7/5P8cAA0ACQDH//7/CQAXAAEA/P/5//j/CwAWAAEABQD9//n/AQAWAB0A7v/k/wAACQAmAP//9/8AAPn/8/8aAO//6/8fAOv/5v8hAP//5/8PAOf/AAAGAPn/6v8JAAYABgABAOv/1//1//L/+P8DABcA6f/8/wMACgD7/xAA3v/2//z/DADu//z/5v/5/wEA/P/6//7/7v/x/wQABgD5/wAA8v/w/wkAEQD2//j/+v8EAAcAEAD3//v/+v8CAAAACQD3//v//v/9/wUADAD2//X/AgAHAAAABwD2//T/BgAKAP7/AQD4//r/BAAIAPn/AAD3//f/BQAHAPv//v/7//n/BQAJAPj/+v/9//7/AgAGAPj/+f8BAAEAAgAFAPn/+v8BAAIAAAAEAPn/+f8CAAQA/v8BAPr/+v8CAAQA/P////v//P8CAAQA+//+//3//f8CAAUA+v/9//////8AAAQA+v/8////AAD//wIA+//8/wAAAQD+/wEA+//8/wAAAgD9/////P/9/wEAAgD8//7//f/9/wAAAgD8//3//v/+////AQD8//z/////////AAD8//3///8AAP7/AAD9//7///8AAP7////+//////8AAP7////+////////////////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v8AAP///////wAAAAAAAP7/AQABAAAABwD///X/BQAjAPL/CQDb/9D/GAAb/7sAYwCW/z0BcP/X/7T/2QDW+wH8yANCCCUJ5QT++UXmhPwhA78FuAxH+p78ifudBlAG9vmu/lAK2fdlB///cfjoCa0E7Akn9Yb/zvba+AkAHPywBGEBFwUNAL8AXAAGA20DFvmR/kz+F/06Ag/+GwHl/5EEKgJd/q0AP/ym/9n6EfxY/2H+/QFtAC4C6QBDAaMCo/20/+3/3f/p/fL9rv9V/6cBhQHuAX4AcwJYAaH/IP/P/gsApP0LAe7/sQBuAI0AAgGDAE4BzACe/5X//v+v/+f+Zf+gAOv/5QBhAOIApAANASYAuP+h/8b/HQBr/9//bACWAGEAFAB5AD0AWQDU/+D/Yf/p//D/s/+R/4QAMQBvABEAkQBfABQAJgDW/wwA8/8XALz/vf8zAFAAKwD1/zEAPwDJ/x0A7/8LAOX/FwDR//H/EQAdAO//6P8QAFEA2f8WABEAMgDy/xIA+f/s/xAALgDv////HQAvAPT/+f8iAAYAEgAFABoAGgD//w0A+f/0/xsAHgDx/9f/GAACAPH/8f8JAPf/GwALABEA7/8cAPT/CgD2//j/BQD8/+3/OgAgAAYA9f8PAN7/DgD9/9r/1//3/+3/9//1//b/8//5//f/AgAJAOf/+v8OAAMACwD9/+7/5f8eAAEA9//q//7/8P8WAP7/+//4/wIA+f8TAAIA9f/5/wcA+P8iAAgA9v/n/xoA//8gAAUABwDj/wAA9v8BAAUAFQDn/wMA7v8QABAAEQDm/wwA8f8aAAAABwDu/wcACgASAAEA7//w//f/BgARAAkA6P/3/wcADgAKAAYA4f/4/wYADgAAAPr/8P/9/xQACgAHAPn/7//9/xEAAgD+//L/8v/8/xUAAwDw//H/9f8CAAsA/v/q//L/+f8FAAYA/P/r//j///8GAAkA+//o//j/AQAIAP//+v/o//v/CAAIAPv/+P/w/wEACQAHAPj/+f/0/wIACwAFAPb/+f/4/wQACwACAPP/+f/+/wYACAD///L/+/8BAAYABQD9//P//P8FAAUAAgD7//T//f8HAAQA///7//f///8IAAMA/P/6//r/AQAIAAEA+v/6//3/AgAHAAAA+f/7/wAAAwAFAP7/+P/8/wIAAgACAP3/+f/9/wMAAwAAAPz/+v/+/wQAAgD+//z/+/8AAAQAAQD8//z//f8BAAQAAAD7//3///8BAAMA///7//3/AAACAAEA/v/7//7/AQABAAAA/v/9////AQAAAP///v/+////AAD/////////////////////////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAAAA/v/+/wAAAQD8//3/CQAJAP3/+v8PAAcApABlABkBkwCO/i//lfqa/HQAcf/3BdkCzwJcBCMC0wMN/9/9wgI7AaECYfxV/Tf83vhn/xrt8Owx/8n7cgHABYb43QcZDh4WugNrA7P74gHu/9z/zv0t/acCiQHY/iv4qQOl/ysCE/0//XT9Sf4O//j9xfupAn394gHO+rsCXAFIAxQC9wIXBgcD2AQuAnb/9gJh/6wAVfxEAI4Bvf7oAFv/bALsAMQBe/88/joAT/4dAH39/v9LAXn/gwDI//QBdABcAA0A7f4lAMn///+9/tv/iABp/13/pP/dALv/w/8MAHv//f+y/6////7U/5AAZP+Z/8r/nQDR/5r/DwDr/xAA4v+s/3z/+P9uAOv/t/82AGcAHgCb/yQAFQBGAM7/CgD3/xoAegAaAOz/CgBHAA8Adv8/AAAABQC2/xIAAAA7ABQAKgCj/z4AAQAXAJz/JAADAAcA8f/1/2AAAQAlAPD/NgDx/1wA7v/4/wMAZADv//3/HQAkAFoA8P9FAPv/FgBIAPf/WQAHAEUACQD0/xIAQwDu/wMAwP9VALn/XwCw/yEA5f8sAPj/FgDD/1YAyv8rAOX/HQDo//j/IQAQACAAHwD9/yQAHQBAABgABQAiAAUAKAD3/wkACwAKAAMABwAJAPb/+f8GAOr/JQAHABMA6P8TAA4AGgD//woA8/8ZAP//GADu/w0A9v8SAAMABwD4/wQA5P8XAAQACgDq/wUA+/8VAAcACADs/xIAAAATAPH/+v/1//T/7f///+z/+v/y/+//9/8KAAcACgAJAPT/BAAKAAAABgAIAPL/9v8KAAMABAACAPr/9v8OAAIA+P/x//v/+f8MAPb/+P/w/wQA9f8MAPn////7/woA/v8PAAEAAgD1/xAAAQAPAP//AwD//xQABwALAAAABgADABAAAgAHAAAACAABAA8ABQAFAAMABwAEAA4ABwADAAEACQAFAAoAAwD//wAACQADAAUAAQD/////CAABAAMAAAD/////BwACAAEAAAD/////BwACAP7///8BAAAABgABAP7///8CAAAABAAAAP7///8DAAAAAwAAAP3///8DAAAAAQAAAP3//v8EAAAAAAD+//////8EAP/////+/wAA/v8EAP/////+/wEA/v8EAP///v/+/wIA//8DAP///v/+/wIA//8BAP///v/+/wMA//8BAP/////+/wMA//8AAP//AAD+/wQA//8AAP7/AQD//wIA////////AQD//wIA////////AQAAAAEAAAAAAP//AQD//wEAAAAAAP//AQAAAAEAAAAAAAAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wAA+v8AAPz/AAD//wAA/f8AAAEAAAD+/wAACQAAAAQAAAAZAAAAtgAAAFsBAABW/gAAH/oAAGcBAABoBwAAlAAAAO3/AAARAQAA+wIAAEoEAACe/gAAiv4AALD0AADJ8wAAkQQAAF34AABi8QAAPQAAAAH2AAD19AAADAMAAJwGAACTEAAA0AwAAJkHAACOBwAAuQEAANcDAAC6AgAAHwUAAHEFAAB0AwAAbgEAADz+AADYAQAAGAAAAJwCAADgAAAA//0AAMn+AAAT/AAAwP8AAOn9AAAJAAAAewEAAOn+AACN/wAAOv0AAO3+AADN/gAAcP8AACj/AACq/gAA+f4AAML9AACa/wAA/f4AAN7/AABo/wAA6/4AAE//AAAC/wAAEQAAAHX/AAB0AAAA5f8AAEwAAAB3AAAA5/8AAMIAAABCAAAAzgAAAE8AAAB3AAAAKAAAADMAAACqAAAALwAAAK4AAAASAAAAVgAAACgAAAAtAAAATAAAAP3/AAA7AAAA2/8AACQAAADw/wAALQAAADEAAAAlAAAAbAAAADMAAABUAAAAEAAAACgAAAD1/wAA9v8AAPr/AADu/wAALgAAABIAAABUAAAARAAAAGUAAABGAAAAOAAAAGAAAAAuAAAARQAAACEAAAAfAAAAAAAAAAkAAAAQAAAAAwAAABIAAADs/wAAEAAAAAYAAAASAAAAIgAAABEAAAADAAAABAAAAA8AAAD4/wAAHQAAAAsAAAAIAAAADgAAAP//AAAcAAAADwAAAAYAAAASAAAAFwAAAAMAAAAYAAAAEgAAAPr/AAAQAAAADQAAAAoAAAD3/wAABgAAAPb/AADf/wAA/v8AAPL/AAD6/wAAFAAAAAQAAAAEAAAAGwAAAAEAAAAMAAAAIAAAAAIAAAAdAAAAGAAAAAIAAAAcAAAAEgAAAAcAAAAeAAAADwAAAAQAAAAeAAAABAAAAAYAAAAZAAAAAQAAAA4AAAATAAAA/v8AAAoAAAAOAAAA+/8AAAsAAAAJAAAA+f8AAAsAAAABAAAA+f8AAAoAAAD9/wAA+v8AAAcAAAD5/wAA+v8AAAUAAAD3/wAA/f8AAAQAAAD2/wAAAAAAAAEAAAD3/wAAAgAAAAAAAAD4/wAAAwAAAP7/AAD6/wAABAAAAP3/AAD8/wAABAAAAPv/AAD+/wAAAwAAAPv/AAD//wAAAQAAAPv/AAAAAAAAAAAAAPv/AAACAAAA//8AAPz/AAACAAAA/v8AAP3/AAACAAAA/f8AAP7/AAABAAAA/f8AAP//AAABAAAA/f8AAAAAAAAAAAAA/v8AAAEAAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAA"],ki=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wQA8/8YAP3/CgACAAAA//8CAAYA8/8AAPH/CgDv/97/e/+y/9P+UQDwAHUBEwV7/pP8P/y09bsDwAfNBGYIFf/Y+736+fP890Hv8AGcC3T/vwYy+S70AAICA3AD4AagBw0R4w3ZEAcN8RVYAV8Q8P2z+kECHwdK/jIG0QNKAYUElf8IClj7BgjX+/f8j/l3/5f/6fkK+xz8FP0v/nj/Mf/n/FcBPfvH/1H3+gBP/Hf8cfiCAR/54QBh+UQAcvkzAWL8TP13+iD/V/73+wv9Kv+Y/hv+xPz7/UL83//a/z/9AP6R/5L+jf26/P3+rP26/tD8nP7B/Pv+WP1V/sP9gv91/3P9xP3J/nv/GP5S/sb+IP8v/9j/dv7U/pr+6v+u/Z3/sv5cAOr9Q/83/+n/zP5x/57+2//k/nwA/v01//L+SACB/sD/Ff81AJT+TgDp/ocAm/5dAFT+MgD+/pMAW/7o/yH/xQDA/kkA9P6LAL3+pAC0/iQAz/5UALD+UwAt/3UAhf4UAA//pwC+/joAz/5aAAv/fwDY/iMAIf+uAPP+ZAAc/0QAy/4xAB7/TgDs/goADP8wAEL/NwDo/ub/Uf9BAC3/+v9F/y4ARP9HAFP/EQA3/xMATP81AG3/HQAu/wgAaP9FACb/9f9B/y0AUP8rAED/CwBV/z4AW/8TAGH/BQBK/xsAfv8eAFn/AgB3/zwAff8RAGj//v+E/yAAb//0/3n/FwBz/xcAiv8PAHn/FQCJ/xgAg//x/3j/EQCa/ycAff/w/47/HwCI//X/iv/7/43/JQCM/+n/kP8AAJb/JACj//7/oP8ZAML/SwCo/w4Atv8tAMb/PACr/xcAwP9HAMP/OADF/y4A0f9IANL/NwC//zEA0f9LAMb/MAC8/y4A3f9GAMH/FQDQ/yYA2/8sAMT/AwDX/xkA3v8SAM3/9v/c/w8A4f8LAMj/8f/h/xQA2P8CAMn/8//j/xQA0v/7/9H//P/i/xEA0v/1/9L//f/j/w0A0f/x/9f//v/k/wgAz//u/9z/AwDg/wMA0P/v/9//BQDf////0v/y/+D/CADc//3/0v/2/+L/CgDa//r/1v/5/+T/CgDY//j/2f/9/+T/CADY//f/3P8AAOT/BwDY//f/4P8EAOP/BADZ//j/4v8GAOL/AwDa//r/5f8IAOH/AQDc//3/5v8JAOD//v/f////5v8IAOD//v/h/wIA5/8HAOD//f/j/wMA5/8GAOD//f/l/wYA5v8EAOD//v/m/wYA5f8CAOL////n/wYA5P8BAOH/AADl/wUA4f///+H/AQDk/wMA4f///+T/AQDm/wEA5////+r/AADt/wAA7/////P/AAD1////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v///wAAAAAAAAAAAQAAAAAA///9/wAABAD+//n/AgAJAAAA+v/+//f/DAAdAPv/+v+l/8L+jf/4/vgAdwVPAQACLQBo+Qj/Ev7o/N3/VgCbA08Bxf+L+yn9J/2HCU8FmgBvDe30Rv5h/LT09gi5CxkA5gOi8/30kwEM+4YJMf2nBmkJJAQQBLoFtvvv+m4A7PF6/R0Bif3qAuf8WARAAf4GyABG/BIAwvr4Acv8U//c/yIC8AEn/B8Daf2CAgMBAf3MAN38vgLK/UT/QwCyAPYClPyvAW/+pQAoASD+zP+R/IYC1f7C/nEBQP96AZb+1QAIAM//yQE7/tkAZ/7TAXL/w/8+AIsAtwB7/24A4v9a/z4A7v4iADb/dwCj/23/kgBOANUAIv8lAKEAxP9gAK7/BwCP/5kA7/9v/0wAzv9DAGT/3/9vAHv/6P+q/xUA7P8XAO//uv/g/2UAEgCV/wEATADM/+7/+//j/+D/9v/i//j/IgD+/xoAxf/6/z4A5/+8/9D/QwDq/+3/OQDT/zUAIgA/APP/PgAjAPD/BwAGACAADAC3//b/HAA3AN//RgDN/w8AIAACAN//GQBDACEAIwA+ACoAJQAeAPz/KgAYAPr/DgAEABYAIgAcAMT/7f8OAOL/5P/2//L/9P8GAPT/7v/8/+7/6v/t//z/AgAUAOL//P8VAAMA4/8IAPb/+P8MAAoA5v8NAAsA9v///wEAAAD9//n/9/8JAAYA7v/6/wMA+f8GAAEA7f/7/xgACAD4/w8A///3/w0A+f8BAAIA/P/5/xIA///9//r/7v/+/xYACQD///H/CwDz/wEADgAHAPP/FADn/+3/AQD5//f/AgD7/wEABwAMAAEADQD8//n/8f8OAPX/BAD+//X/+v8WAAQA+f8CAAEA7/8QAAEA/P8DAAUA9f8KAAwA9v8DAAUA+f8OAAoA9f/7/w0A+v8EAAgA8P/6/woA+//8/wkA+P/3/woA+//8/wcA9//1/woAAwD5/wcA/P/3/w0AAwD3/wEABAD2/wkABgD3/wEABQD3/wUABQD3//v/BwD3/wMABQD3//r/CQD7////BQD6//n/CQD9//3/BAD9//j/BwAAAPv/AwD///j/BwABAPn/AQABAPn/BQACAPn///8DAPr/AwADAPr//v8EAPv/AQADAPv//P8FAP3///8DAPz/+/8FAP7//f8CAP7/+/8EAP///P8BAP//+/8DAAEA+/8AAAEA+/8CAAIA+////wIA/f8AAAIA/P/+/wIA/f8AAAIA/f/9/wMA/////wEA///+/wIA/////wAAAAD+/wAAAAD/////AAD//wAA//8AAP//AAD//wAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAP////8AAP//AAAAAPz//f8IAAMA9////w4AAQD6/wwA8//+/y8Afv/0/2H/UP5gAbH+2QG1B2cAVAIh/l32FPyM/nACPQDV/+UEo/Q6AQwCu/oLD9kF8QJA/Uz+Wf2KCOcC+wUKBsL5aQBQ97rwOPiPAvn5CAl8AHEDkQPcAA8Bn/lIAdz7HQF1+xz9cAM4/94E4gDKAun+cgPYAYr9JgJr/bf+ivxz/MoBgv5UA8EBSgAQAJ7/UgEk/cQB7f63/sD/vf4XAhT/BQFCADYAnQGI/9EBtv3hALD/vP+c/3H/TgIN/1sBpf8yAP3/4f8qABr+1f8OAJ3/dwAGADEBnv9JAPz/IQBwAIH/jgAS/4wAsACTAOn/DQDCALn/ZQCSAAIAAwD1/9//jv9aADQA/v9EAB0AfgA8AAQACgB9APr/IAARAPT/5v9xACAABAAHAGUAt/89AC4ACgAjAMP/+v/9/xYA7f/1/+D/7P87AC0Auv8RAAcA9/8FAC8A2//y/xIAEwAaADQAJADp/zoAAgAfABIA2f/e/zUA+P/6/w4A9//A/zcA4//P//T/5f/R////EwDb/w4A8/8BABkANADh/xEA+f/0/wIAHADc//j/GwD1//f/GADs/+v/EAAAAPz/EgD3/+r/FgAMAAkAGAD9/+z/IQAQAPH/GQD3//z/CgAfAOX/AgD8//H/BAATAOv/+v///wIABAAdAOj/BQAPAAcAAQATAOz/8/8JAAkA6f8VAOv/+f8QABUA/v8OAO3/+P8KABUA9f8FAPv/5/8TAA0A7f8XAAkAAQAJABYA4/8WAAcACgANABEA7v8EAP7/AAD+/wMA9//7/xAAAQD8/wQA+f/7/wMABgDq/wAA+v/3/wYACQD1//3/BAD9/wgADgDw//r/AgD6/wEACADv//j/BQD///X/BwDu//j/AgACAPP/BAD2//n/BAAGAPb/BAD8//3/BQAJAPL/AwD+//3/BAAIAPP//f8DAPz/AAAGAPP/+/8CAP7//f8FAPX/+f8DAAAA/P8EAPf/+v8GAAMA+/8EAPv/+/8GAAQA+v8CAP///P8EAAUA+f8AAP///f8CAAUA+P///wEA/v8BAAUA+f/+/wIAAAD//wUA+v/9/wMAAQD9/wQA+//9/wMAAgD8/wMA/P/9/wMAAwD7/wEA/v/+/wIAAwD6/wEA///+/wAABAD6/wAAAQD//wAAAwD7////AQAAAP//AwD8//7/AgABAP3/AgD9//7/AQABAP3/AQD+//7/AAACAPz/AAD+//////8BAP3/AAD//wAA//8BAP7/AAD//wAA/v8AAP7/AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////P/9//3//////wAAAAAAAAIAAgACAP//CAAEAEEA//+cAAUAb/8HAAH9+P9eARkAogQUAJn8BwCd/gX/+QQNAKoC9gFdAtb/b/vd/936TP/6AsD/nfqn/un1W/0dA8IEsQLvAJv2bP72+WMAkP8dAcX+nQO2AIr6bP/EABX+NgK/Bdj2IQv2AE4EUAiD/xQAnwIm/B0B/wGNAoH7sQaP/b8CiQakAqD+R/9xA477KQL//6r75v/O/pcCgQCtAiMCBQAkANAARwHf//39hgBl/kUAJgEtAUEATgA/AgoASADK/zUAJv29/vL+l/9c/0cAUwBBAE8A6QE5/87/Wv9NAOf+5v7P/5P/4/9BAKYAQwDD/zYB5v+r/zYATwAp/1v/WQAEAB0AhwA0AA0AIAA3AAEAzv/u/+//5v9m/zwAIADQ/8T/SABiANb/SwAbAFf/MQDX/7L/hP8TAPr/AgAMAAsAHwAZAI3/VgDC/9v/5//x/6P/AwBlAMv/yf82AB4A+P9WAPj/NwDi/1EA0v9JANj/JwAcAAEADABYANj/4f8MAEwAmP82AN//3P8UADYA7//6/wIACADU/ygAyv82AN7/9v/2/ygAxv/9/+3/5//n/zUA6//g/y4ADgD5/wsABwDv/xIADwAGACoAJQD3/zIA+/8FABsAFgDO/zAAHAAIABQALADp/xcACAAAAPH/GADs/wkACQAFAAgAFQDp/wIAHAD1//P/EQDw/+3/GAD9/+f/HAD8//T/DAAQAPH/HwD4//r/DwAPAOj/EQACAOn/DAAXAOX/BAAOANH/9/8MAO//9f8LANT/9f8EAO//6f8NANb/+P8KAOz/5v8MAOD/7f8UAO//7//+//7/9v8YAPj/9f/z/wsA+v8SAPD/+v/x/xYA+f8SAPb/9//3/xEABQACAPn/9//y/xQACQD///b//v/7/xIACQD9//H/AAD7/xEAAgD5//P/AwD9/w8AAgD3//D/BAD//wUA/v/0//D/BgADAAMA/P/2//f/BwAGAP7/+//2//j/CAAFAPv/+f/5//v/BwAHAPn/9//7//7/BQAFAPf/9//+/wEABAACAPf/+P8BAAIAAgAAAPj/9/8CAAMAAAD+//n/+f8EAAQA/v/8//r/+/8EAAMA/P/7//z//P8EAAIA/P/5//7//v8DAAEA+//5//////8CAAAA+//5/wEAAAABAP//+//6/wIAAQD///3//P/7/wMAAQD///3//f/9/wIAAQD9//3//v/9/wMAAQD9//z/AAD//wEAAAD9//z/AAAAAAAA///9//3/AAD//wAA/v////7/AAD//wAA////////AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+////+f////v//v///wAA/////wUAAQAIAAIABwACAHkATAAOAaMAAf9C/9X6QvwhArAAtghABW37nv/y+0wAWQNcAE8JRwSOC6AEJe8P8S/zrPWaBI/+LQA/+0L+P/4K8AgAb/8uCh78BQtC614GaQWfAin5UfzN8Tf+GQizAZ4MCQMbGJ4BoRS7AvcHyQARA6n9ZwHZ/z4DvwAZAlAB6gbNAS4GFADFATL7E/2K+j37C/xp/SD9Uv0VAOsDs//WAd3+bv7F/f79mP2X/KH+FwC0/1n+VgFcATABHQGaAET+nf8Y/hoAovpqAXj9CQKW/lsCl/4RApj+bAHk/RcAlv4BAG/+DgDi//3/GwAOAEIAq/+y/3z/8v8+/7T/Tv8//27/mgDZ/1sA+P+cAAAA/P/i/yMAi/85AMP/KgDM/9MA9P+QABoA4QAiACwACwBdAP7/TQDb/y0Ayf+SAA0AZwDg/4wA+/8/AAMAgQDp/w0ADAAQAAoANgAgAA4AKABIAB4A4v/3/+f/+v/c/+n/EADn/wgAFAAqAOz/IwDc/9//3f8XAND/2v/a/w0A5v8BANb/9P/m/wAA8P8ZAN3/RwAGAEsABgB/AP7/NAASAEgABAA3AP3/KgD9/1sA8P8lAOr/FgD1/xAA4/8kAOv/AwD4/xEA5f8NAPT/+v/3/x8A7f8PAPj/IwD5/yAA9/8ZAAEAGgD4/xoA9f8HAAMACAD0/xgA+P8AAPr/IQDp/w4A8v8HAPX/IgD1/wYA+P8GAPX/GgD3/woABQASAAcAGQDw/+v/9P8bAP3/HADs/+f/7/8LAPr//v/0//T/AgD2/wsA6P///+P/CADY//7/5v/3/wQA/v8LAPD/GgD1/yMA/P8QAOv/LADw/yQA+P8XAO7/MQD9/yEAAQAcAPD/IgD9/xMA+/8OAO//FQABAAoA+/8PAPP/FQABAAQA9/8PAPX/CAADAAEA+P8NAPv/CAAGAAUA9/8JAP//AAAFAPz/+f8HAAQA/f8FAP3//P8FAAYA+P8DAP7/+/8AAAcA9/8BAP///f///wgA9//+/wAA/v/8/wUA9//8/wIA///7/wUA+v/7/wIAAAD6/wMA/P/6/wEAAQD6/wEA/v/7/wIAAgD6////AAD7/wEAAgD7//7/AQD8/wAAAwD8//3/AwD9/wAAAgD9//z/AwD/////AgD+//z/AwAAAP7/AQD///3/AgABAP3/AAAAAP3/AgACAPz///8BAP3/AQACAP3//v8BAP7/AAABAP3//v8CAP7///8BAP7//f8CAP////8AAAAA/v8CAAAAAAAAAAAA/v8BAAAAAAD//wAA//8AAP//AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA/////wAAAQD+////AAAGAP3/OAABAIIAAwBv//f/E/0QAK0ADQCzA/7/8P4u/0cBDQCJA6ABbQDg/w7/z/9o+Vn/SPnL/1//Ef+2+jr9RfZgA5QFZwILDFj+PAb2/nEFKgKk/R0Dlv6b/FUDsP6YAoj9SgAT/iL/tAPwAv8A0P6zAr7/dwAnAf39uP22/skA2v///2YCoP4UAUsAZgF2AJH+4P70/rz9+f+U/Xv/8v7CAcb+TACS/kwAv/+x/tX9oP71/oL/1f8nAEUAZwGtAAgAIgC/AD4BaP8GAGH/dQDF/64Arf8nAakAhAH9/+kAQQD3AFb/q/8p/yIAR/8FAPD/ZAA/AIYA3v8tADQADQBp/3f/CwABAP3/Wf8OANj/WwDH/xoAe/8DAKz/zv96/z8A3f/J/5X/IAD5//j/q//c/+//RADq//D/vv8pADUAFQDI/y8ACAAbANb/OwD3/+3/9f/e/wcAIAAeAMH/8/8xAC0AEADW/+3/HAADAPv/8P8DAOL/OwD3/xcACQAHAM//5f8XAAcAz//T/9D/HgD9////yf/e//v/AgD//9H/6/////H/+/8hAAIA9//7/w0AFgAQAPL/2v/8/xsAGQABANz/9P8YAAQA/v/y/wMA5v8YAAkAAAAAAAMA7/8KABgADwDs//j/BwATABsA8P/1//z/BAAMAAAA9P/s/xAA/v8GAAkA/v/p/wMACwALAP7/9P/p/wcADQAFAPb/7//4/w0ACAD8//b//v/1/wMACwD1//T/8P/8/wAACQDz/+f/5P8GAAkABQD5//D/+v8FAA0AAwD///T/AgACABAA/v8CAPD/+/8FAAoA9f/3//f//v8GAP7/9v/t//z/+f8AAPj/+v/3/wEA+v8HAPr//P/5/wQA//8DAPr/+P/3/wYA///+//X/+//5/wQA/f/7//X/+//4/wMA/f/8//j//v/9/wYA///8//f/AgAAAAUA/f/6//n/AwACAAIA/f/7//z/AwACAAAA/f/6//3/AgADAP7//f/7/wAAAwAFAPz////8/wMAAgAEAPv//v/+/wMAAgADAPv//v///wMAAQABAPv//f8AAAIAAAD///v//f8BAAIA///+//z//v8CAAIA/v/9//3///8CAAEA/v/9//7/AAACAAAA/v/9////AAABAAAA/f/9/wAAAQABAP///f/+/wEAAQAAAP///v/+/wEAAQD///7//v///wEAAQD///7//v///wEAAAD+//7///8AAAAAAAD+//7///8AAAAA///+//7///8AAAAA////////AAAAAP////////////8AAP//////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAAAAABAAAAAAD//////////////v////3/////////+//8////AQD9//z/9f8BAAIA+f8dACgAWQBxAJX/qv+Y/uz9aP9k/7UDUQQBAiQA4Pgi/AkB0gKaBsD/+fxp/vz9CQSp/I/+ywDO+vMD0fzK/PABcgBeBfoBv/+uAuH9Sf5gAy39awMmBWUBuP9fA9/9fgDj/2/+EACaACcCSv9Z/2j/rv7hAA0AWf55/7L84P7E/SIAT/67AMv/tf+FAA7/1v+7/gv/IP+E/sQA+P5aAXz/tP9XAFX/tP8o/4r/j//e/yQAMv9mAJT/rgCr/9X/EwCb//H/9f7F/6D/EAAoAK3//v+e/zsAh/+B/7r/if/C/2r/4P/z/6//HwCy/0IA7/9ZALT/y/80ACgA9v/J/9//DgA5ADUALQARADIACwAfAOf/NgArACMACQBBAEcAGAAjAC4AWQBUAHcAAAAfACEAIAAcAPj/CADk/yQA7v89AEEAFwD5/xYA6f8aAOX/AADF/zQADwAUAOT/BQDr/yUA6P8XAOf/HADR/0AA8P8nAAgACQDt/ycAKAAHAPH/IQDz/xsACADn//n/DgADAA4A8P///8z/GgDN/yMA/f8QANj/MwACAC0ACwAOAO3/JgAZAAUACgAAAA4AIgAaAAkADwACAAAAHQATAAUABQACAAgACwAjAO////8AAA8ABQAPAPL//f8GAAsABgAGAPD/8v8GAPz/CAD6//H/6v8PAAgABgD4//3/9v8aAAgABwD1//7//v8QAAoACAD//wUA9v8QAAoABAAFAAgAAgAJAAoAAwD//w0AAgD//wcA/v8DAAoABQAFABUABAAKAAYABwAHAA8ACgAGAAwADwAMAAkAEAAJAAgADwAMAAgADgAJAAUACQAPAAUACwAHAAEABgAIAAEABAAGAP//AgAJAAAAAgAEAP7///8IAAIA//8GAAEAAQAJAAIA/v8EAAMA//8JAAEA/v8DAAMA/v8HAAMA/f8BAAUA/v8FAAMA/v8BAAcA//8DAAMA/v8BAAYA//8CAAMA/////wcAAAAAAAMAAAD//wYAAQD+/wMAAQD//wUAAQD+/wIAAgD//wQAAgD+/wEAAwD//wMAAwD+/wEAAwD//wIAAwD//wEABAAAAAEABAD//wAABAABAAAAAwAAAAAABAABAP//AwABAAAAAwACAP//AgACAAAAAwACAP//AgACAAAAAgACAAAAAQADAAAAAQACAAAAAQADAAAAAQACAAAAAAACAAEAAAACAAEAAAACAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAAAAAAAAAAAAAAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA//8AAP//AAACAAAA+f8BAAYA///4/wIA//8AAA8A/v/V/wEAEwA9AAEBRwA2AF7/kfog/3gBwv99CDYBU/qtAUX/AP7OAfkAX/o9B38FSfwaAuT14/60BAr8CQAI/tfyIQTzAXP+egdUBBwBof7TBMT8bAWi/5EEWwBRAAAKyfxE/8b88vp6ACP+PAF4/qD8MQNM/ygCJ/2XAPD9kP5gAVT/iP9I/lEB4P8qAD0BFAGa/+7/DgB2AOP98gFm/u/+Vv5/AG8ASP9gAM//qv9w//oAcv+2/jIBHgA7/6D/oAAGAKH/lADT/wAAggC8AAYAkP9yAEcAkf8BAOD/RAAr/zUANwDt/xQAJQAkAMT/zwA/AOH/xv9zAGsANQBTAIcALAAvACIATACy/xMADADg/xcAWABvAJL/7f9VAPb/EgDt/wcA4f8kAPP/5P+h/wgACQDy//r/LgAQAMn/8/9CAOX/5v/S/9//3P8pABYAuP/s/w8AFgDt/+3/7v/w/9j/5/8GAOf/2P/2//P//v8kABMAuf/m/xoADADZ/+r/3P8KAAUAKwDe/wsA3P8VAAAADgAfAB0ACAAMAF4AGgAhAPL/MwDz/0kABAAKAPX/LwAbAAkA9v/s/+3/8/8CABAAAADm//n/BQALAAUAAQDj//n/JQAVAPX/9v/+/wIAEQABAPP/8P/1/wAABgD6/+3/7//o//j/DAD8/+b/8P8IAAkABgD4//D/8P8UAAoAAwD4/wAA+f8OAAcAAAAFAPX/9v8TAAkA8v8EAPb/9/8dAA0A7/8CAPn/+f8SAAQA8/8CAOf/+v8DAAgA9P////H//P8IAAUA8//0/wIAAQAGAAgA9//7/wAA+/8EAP//+P/+////AgACAAsA8v/+/wIABQD7/wgA9v/7/wMABAD5/wAA/P/3/wEAAQD7//7//P/1/wQA///3//r////3/wMAAwD1//r/AwD6////AgD4//n/AwD8//7/AgD4//n/AwD+//3/AQD4//n/BQD///n/AAD6//j/BAABAPj/AAD9//v/AwADAPj//v/+//z/AwAEAPj//v8BAP7/AQADAPj//f8CAP////8EAPr//P8DAAAA/v8CAPv//P8DAAEA/f8BAP3//f8DAAIA/P8AAP7//f8DAAIA/P///wAA/f8BAAIA+//+/wEA//8AAAEA+//+/wEA/////wEA/P/+/wEA///+/wAA/f/9/wEAAAD9/wAA/f/+/wEAAQD8/////v/+/wAAAQD8////////////AQD9////AAD/////AAD+////AAAAAP//AAD///////8AAP//AAD//wAA//8AAP//"];const _i=[2,3];class Li{constructor(t,e){if(this.context=t,this.config=Object.assign({ambisonicOrder:3,renderingMode:Pe.Ambisonic},e),_i.includes(this.config.ambisonicOrder)||(si("HOARenderer: Invalid ambisonic order. (got "+this.config.ambisonicOrder+") Fallbacks to 3rd-order ambisonic."),this.config.ambisonicOrder=Math.max(2,Math.min(3,this.config.ambisonicOrder))),this.config.numberOfChannels=(this.config.ambisonicOrder+1)*(this.config.ambisonicOrder+1),this.config.numberOfStereoChannels=Math.ceil(this.config.numberOfChannels/2),this.config.hrirPathList.length!==this.config.numberOfStereoChannels)throw new Error("HOARenderer: Invalid HRIR URLs. It must be an array with "+this.config.numberOfStereoChannels+" URLs to HRIR files. (got "+e.hrirPathList+")");this._buildAudioGraph()}_buildAudioGraph(){this.input=this.context.createGain(),this.output=this.context.createGain(),this.bypass=this.context.createGain(),this.rotator=new xi(this.context,this.config.ambisonicOrder),this.convolver=new pi(this.context,this.config.ambisonicOrder),this.input.connect(this.rotator.input),this.input.connect(this.bypass),this.rotator.output.connect(this.convolver.input),this.convolver.output.connect(this.output),this.input.channelCount=this.config.numberOfChannels,this.input.channelCountMode="explicit",this.input.channelInterpretation="discrete"}dispose(){this.getRenderingMode()===Pe.Bypass&&this.bypass.connect(this.output),this.input.disconnect(this.rotator.input),this.input.disconnect(this.bypass),this.rotator.output.disconnect(this.convolver.input),this.convolver.output.disconnect(this.output),this.rotator.dispose(),this.convolver.dispose()}async initialize(){let t;t=this.config.hrirPathList?new ai(this.context,this.config.hrirPathList,{dataType:ni.URL}):2===this.config.ambisonicOrder?new ai(this.context,Si):new ai(this.context,ki);try{const e=await t.load();this.convolver.setHRIRBufferList(e),this.setRenderingMode(this.config.renderingMode)}catch(t){const e=`HOARenderer: HRIR loading/decoding (mode: ${this.config.renderingMode}) failed. Reason: ${t.message}`;throw new Error(e)}}setRotationMatrix3(t){this.rotator.setRotationMatrix3(t)}setRotationMatrix4(t){this.rotator.setRotationMatrix4(t)}getRenderingMode(){return this.config.renderingMode}setRenderingMode(t){if(t!==this.config.renderingMode){switch(t){case Pe.Ambisonic:this.convolver.enable(),this.bypass.disconnect();break;case Pe.Bypass:this.convolver.disable(),this.bypass.connect(this.output);break;case Pe.None:this.convolver.disable(),this.bypass.disconnect();break;default:A(t)}this.config.renderingMode=t}}}class Oi{constructor(t,e){e=Object.assign({ambisonicOrder:1,position:Ae(he(),_e),forward:Ae(he(),Oe),up:Ae(he(),Te),renderingMode:Qe},e),this.position=he(),this.tempMatrix3=se(),this.ambisonicOrder=ii.validateAmbisonicOrder(e.ambisonicOrder),1==this.ambisonicOrder?this.renderer=function(t,e){return new gi(t,e)}(t,{renderingMode:e.renderingMode}):this.ambisonicOrder>1&&(this.renderer=function(t,e){return new Li(t,e)}(t,{ambisonicOrder:this.ambisonicOrder,renderingMode:e.renderingMode})),this.input=t.createGain(),this.output=t.createGain(),this.ambisonicOutput=t.createGain(),this.renderer.initialize().then((()=>{this.input.connect(this.renderer.input),this.renderer.rotator.output.connect(this.ambisonicOutput),this.renderer.output.connect(this.output)})),this.setOrientation(e.forward,e.up)}getRenderingMode(){return this.renderer.getRenderingMode()}setRenderingMode(t){this.renderer.setRenderingMode(t)}dispose(){this.input.disconnect(this.renderer.input),this.renderer.rotator.output.disconnect(this.ambisonicOutput),this.renderer.output.disconnect(this.output),this.renderer.dispose()}setOrientation(t,e){Ae(Ti,t),Ae(Ri,e),me(Ui,Ti,Ri),ne(this.tempMatrix3,Ui[0],Ui[1],Ui[2],Ri[0],Ri[1],Ri[2],-Ti[0],-Ti[1],-Ti[2]),this.renderer.setRotationMatrix3(this.tempMatrix3)}}const Ti=he(),Ri=he(),Ui=he();class Qi{constructor(t,e){this.listenerPosition=Ae(he(),_e),this.speedOfSound=Re,this.coefficients={left:Ne.left,right:Ne.right,front:Ne.front,back:Ne.back,up:Ne.up,down:Ne.down},this.halfDimensions={width:.5*He.width,height:.5*He.height,depth:.5*He.depth},e&&(l(e?.speedOfSound)&&(this.speedOfSound=e.speedOfSound),h(e?.listenerPosition)&&3===e.listenerPosition.length&&l(e.listenerPosition[0])&&l(e.listenerPosition[1])&&l(e.listenerPosition[2])&&(this.listenerPosition[0]=e.listenerPosition[0],this.listenerPosition[1]=e.listenerPosition[1],this.listenerPosition[2]=e.listenerPosition[2])),this.input=t.createGain(),this.output=t.createGain(),this.lowpass=t.createBiquadFilter(),this.merger=t.createChannelMerger(4),this.delays={left:t.createDelay(2),right:t.createDelay(2),front:t.createDelay(2),back:t.createDelay(2),up:t.createDelay(2),down:t.createDelay(2)},this.gains={left:t.createGain(),right:t.createGain(),front:t.createGain(),back:t.createGain(),up:t.createGain(),down:t.createGain()},this.inverters={right:t.createGain(),back:t.createGain(),down:t.createGain()};for(const t of Object.values(ke)){const e=this.delays[t],i=this.gains[t];e.delayTime.value=0,i.gain.value=0,this.delays[t]=e,this.gains[t]=i,this.lowpass.connect(e),e.connect(i),i.connect(this.merger,0,0),t!==ke.Right&&t!=ke.Back&&t!==ke.Down||(this.inverters[t].gain.value=-1)}this.input.connect(this.lowpass),this.lowpass.type="lowpass",this.lowpass.frequency.value=6400,this.lowpass.Q.value=0,this.gains.left.connect(this.merger,0,1),this.gains.right.connect(this.inverters.right),this.inverters.right.connect(this.merger,0,1),this.gains.up.connect(this.merger,0,2),this.gains.down.connect(this.inverters.down),this.inverters.down.connect(this.merger,0,2),this.gains.front.connect(this.merger,0,3),this.gains.back.connect(this.inverters.back),this.inverters.back.connect(this.merger,0,3),this.merger.connect(this.output),this.setRoomProperties(e?.dimensions,e?.coefficients)}setRoomProperties(t,e){null==t&&(t={width:He.width,height:He.height,depth:He.depth}),l(t.width)&&l(t.height)&&l(t.depth)&&(this.halfDimensions.width=.5*t.width,this.halfDimensions.height=.5*t.height,this.halfDimensions.depth=.5*t.depth),null==e&&(e={left:Ne.left,right:Ne.right,front:Ne.front,back:Ne.back,up:Ne.up,down:Ne.down}),l(e.left)&&l(e.right)&&l(e.front)&&l(e.back)&&l(e.up)&&l(e.down)&&(this.coefficients.left=e.left,this.coefficients.right=e.right,this.coefficients.front=e.front,this.coefficients.back=e.back,this.coefficients.up=e.up,this.coefficients.down=e.down),this.setListenerPosition(this.listenerPosition)}dispose(){this.input.disconnect(this.lowpass);for(const t of Object.values(ke)){const e=this.delays[t],i=this.gains[t];this.lowpass.disconnect(e),e.disconnect(i),i.disconnect(this.merger,0,0)}this.gains.left.disconnect(this.merger,0,1),this.gains.right.disconnect(this.inverters.right),this.inverters.right.disconnect(this.merger,0,1),this.gains.up.disconnect(this.merger,0,2),this.gains.down.disconnect(this.inverters.down),this.inverters.down.disconnect(this.merger,0,2),this.gains.front.disconnect(this.merger,0,3),this.gains.back.disconnect(this.inverters.back),this.inverters.back.disconnect(this.merger,0,3),this.merger.disconnect(this.output)}setListenerPosition(t){Ae(this.listenerPosition,t);for(const t of Object.values(ke)){const e=this.halfDimensions[$e[t]],i=this.listenerPosition[ti[t]],s=ei[t],n=1*Math.max(0,e+s*i)+1,a=n/this.speedOfSound;this.delays[t].delayTime.value=a;const o=this.coefficients[t]/n;this.gains[t].gain.value=o}}}class Ni{constructor(t,e){const i=(e=Object.assign({durations:je.slice(),predelay:1.5,gain:.01,bandwidth:1,tailonset:3.8},e)).predelay/1e3;this.bandwidthCoeff=.346573590279973*e.bandwidth,this.tailonsetSamples=e.tailonset/1e3,this.context=t,this.input=t.createGain(),this.predelay=t.createDelay(i),this.convolver=t.createConvolver(),this.output=t.createGain(),this.output.gain.value=e.gain,this.convolver.normalize=!1,this.input.connect(this.predelay),this.predelay.connect(this.convolver),this.convolver.connect(this.output),this.setDurations(e.durations)}dispose(){this.input.disconnect(this.predelay),this.predelay.disconnect(this.convolver),this.convolver.disconnect(this.output)}setDurations(t){if(t.length!==Ge)return void qe("Warning: invalid number of RT60 values provided to reverb.");const e=new Float32Array(Ge),i=this.context.sampleRate;for(let s=0;s<t.length;s++)t[s]=Math.max(0,Math.min(3,t[s])),e[s]=Math.round(t[s]*i*1);let s=0;for(let t=0;t<e.length;t++)e[t]>s&&(s=e[t]);s<1&&(s=1);const n=this.context.createBuffer(1,s,i),a=n.getChannelData(0),o=new Float32Array(s);for(let t=0;t<s;t++)o[t]=2*Math.random()-1;for(let t=0;t<Ge;t++){const s=-6.90775527898214/e[t],n=Xe*ze[t]/i,r=Math.sin(n),h=r*Math.sinh(this.bandwidthCoeff*n/r),c=1/(1+h),A=h*c,l=-2*Math.cos(n)*c,u=(1-h)*c;let d=0,g=0;for(let i=0;i<e[t];i++){const t=o[i]*Math.exp(s*i)-l*d-u*g;a[i]+=A*(t-g),g=d,d=t}}const r=Math.round(this.tailonsetSamples);for(let t=0;t<Math.min(a.length,r);t++){const e=.5*(1-Math.cos(Xe*t/(2*r-1)));a[t]*=e}this.convolver.buffer=n}}function Hi(t){const e={[ke.Left]:null,[ke.Right]:null,[ke.Front]:null,[ke.Back]:null,[ke.Up]:null,[ke.Down]:null};for(const t of Object.values(ke)){const i=Ze[t];e[t]=Ve[i]}null==t&&(t=Object.assign({},t,Ze));for(const i of Object.values(ke))t[i]in Ve?e[i]=Ve[t[i]]:qe('Material "'+t[i]+'" on wall "'+i+'" not found. Using "'+Ze[i]+'".');return e}function zi(t){if(null==t)t={width:He.width,height:He.height,depth:He.depth};else for(const e of Object.values(Se))t.hasOwnProperty(e)||(t[e]=He[e]);return t}function Gi(t,e,i){const s=new Float32Array(Ge);t=zi(t),e=function(t){null==t&&(t={[ke.Left]:null,[ke.Right]:null,[ke.Front]:null,[ke.Back]:null,[ke.Up]:null,[ke.Down]:null});for(const e of Object.values(ke))t.hasOwnProperty(e)||(t[e]=Ve[Ze[e]]);return t}(e),null==i&&(i=Re);const n=55.2620422318571/i,a=t.width*t.height*t.depth;if(a<1e-4)return s;const o=t.width*t.height,r=t.width*t.depth,h=t.depth*t.height,c=2*(o+r+h);for(let t=0;t<Ge;t++){const i=((e.left[t]+e.right[t])*o+(e.down[t]+e.up[t])*r+(e.front[t]+e.back[t])*h)/c;s[t]=1.38*n*a/(-c*Math.log(1-i)+4*Ye[t]*a)}return s}function ji(t){const e={[ke.Left]:0,[ke.Right]:0,[ke.Front]:0,[ke.Back]:0,[ke.Up]:0,[ke.Down]:0};for(const i of Object.values(ke))if(Ne.hasOwnProperty(i)){e[i]=0;for(let s=0;s<3;s++){const n=s+4;e[i]+=t[i][n]}e[i]/=3,e[i]=Math.sqrt(1-e[i])}return e}class Wi{constructor(t,e){(e=Object.assign({listenerPosition:Ae(he(),_e),dimensions:Object.assign({},e.dimensions,He),materials:Object.assign({},e.materials,Ze),speedOfSound:Re},e)).dimensions=zi(e.dimensions);const i=Hi(e.materials),s=ji(i),n=Gi(e.dimensions,i,e.speedOfSound);this.early=new Qi(t,{dimensions:e.dimensions,coefficients:s,speedOfSound:e.speedOfSound,listenerPosition:e.listenerPosition}),this.late=new Ni(t,{durations:n}),this.speedOfSound=e.speedOfSound,this.output=t.createGain(),this.early.output.connect(this.output),this._merger=t.createChannelMerger(4),this.late.output.connect(this._merger,0,0),this._merger.connect(this.output)}dispose(){this.early.output.disconnect(this.output),this.late.output.disconnect(this._merger,0,0),this._merger.disconnect(this.output)}setProperties(t,e){const i=Hi(e),s=Gi(t,i,this.speedOfSound);this.late.setDurations(s),this.early.speedOfSound=this.speedOfSound;const n=ji(i);this.early.setRoomProperties(t,n)}setListenerPosition(t){this.early.speedOfSound=this.speedOfSound,this.early.setListenerPosition(t);const e=this.getDistanceOutsideRoom(t);let i=1;e>Ke&&(i=1-e/1,i=Math.max(0,Math.min(1,i))),this.output.gain.value=i}getDistanceOutsideRoom(t){const e=Math.max(0,-this.early.halfDimensions.width-t[0],t[0]-this.early.halfDimensions.width),i=Math.max(0,-this.early.halfDimensions.height-t[1],t[1]-this.early.halfDimensions.height),s=Math.max(0,-this.early.halfDimensions.depth-t[2],t[2]-this.early.halfDimensions.depth);return Math.sqrt(e*e+i*i+s*s)}}class Vi{constructor(t,e){this.minDistance=1,this.maxDistance=1e3,this.rolloff=Ue,e&&(l(e.minDistance)&&(this.minDistance=e.minDistance),l(e.maxDistance)&&(this.maxDistance=e.maxDistance),e.rolloff&&(this.rolloff=e.rolloff)),this.setRolloff(this.rolloff),this.gainNode=t.createGain(),this.setDistance(this.maxDistance),this.input=this.gainNode,this.output=this.gainNode}setDistance(t){let e=1;if("logarithmic"==this.rolloff){if(t>this.maxDistance)e=0;else if(t>this.minDistance){let i=this.maxDistance-this.minDistance;if(i>Ke){let s=1/(i+1);e=(1/(t-this.minDistance+1)-s)/(1-s)}}}else if("linear"==this.rolloff)if(t>this.maxDistance)e=0;else if(t>this.minDistance){let i=this.maxDistance-this.minDistance;i>Ke&&(e=(this.maxDistance-t)/i)}this.gainNode.gain.value=e}setRolloff(t){null==t&&(t=Ue),this.rolloff=t}}const Zi=he(),Yi=he();class Xi{constructor(t,e){this.cosTheta=0,e=Object.assign({alpha:0,sharpness:1},e),this.context=t,this.lowpass=t.createBiquadFilter(),this.lowpass.type="lowpass",this.lowpass.Q.value=0,this.lowpass.frequency.value=.5*t.sampleRate,this.setPattern(e.alpha,e.sharpness),this.input=this.lowpass,this.output=this.lowpass}computeAngle(t,e){pe(Zi,t),pe(Yi,e);let i=1;if(this.alpha>Ke){let t=(n=Yi,(s=Zi)[0]*n[0]+s[1]*n[1]+s[2]*n[2]);i=1-this.alpha+this.alpha*t,i=Math.pow(Math.abs(i),this.sharpness)}var s,n;this.lowpass.frequency.value=.5*this.context.sampleRate*i}setPattern(t,e){this.alpha=Math.min(1,Math.max(0,t)),this.sharpness=Math.max(1,e),this.computeAngle(le(Zi,this.cosTheta*this.cosTheta,0,0),le(Yi,1,0,0))}}class Ji{constructor(t,e){e=Object.assign({position:Ae(he(),_e),forward:Ae(he(),Oe),up:Ae(he(),Te),minDistance:1,maxDistance:1e3,rolloff:Ue,gain:1,alpha:0,sharpness:1,sourceWidth:0},e),this.scene=t,this.position=e.position,this.forward=e.forward,this.up=e.up,this.dx=he(),this.right=he(),me(this.right,this.forward,this.up);let i=t.context;this.input=i.createGain(),this.directivity=new Xi(i,{alpha:e.alpha,sharpness:e.sharpness}),this.toEarly=i.createGain(),this.toLate=i.createGain(),this.attenuation=new Vi(i,{minDistance:e.minDistance,maxDistance:e.maxDistance,rolloff:e.rolloff}),this.encoder=new ii(i,{ambisonicOrder:t.ambisonicOrder,sourceWidth:e.sourceWidth}),this.input.connect(this.toLate),this.toLate.connect(t.room.late.input),this.input.connect(this.attenuation.input),this.attenuation.output.connect(this.toEarly),this.toEarly.connect(t.room.early.input),this.attenuation.output.connect(this.directivity.input),this.directivity.output.connect(this.encoder.input),this.encoder.output.connect(t.listener.input),this.setPosition(e.position),this.input.gain.value=e.gain}dispose(){this.encoder.output.disconnect(this.scene.listener.input),this.directivity.output.disconnect(this.encoder.input),this.attenuation.output.disconnect(this.directivity.input),this.toEarly.disconnect(this.scene.room.early.input),this.attenuation.output.disconnect(this.toEarly),this.input.disconnect(this.attenuation.input),this.toLate.disconnect(this.scene.room.late.input),this.input.disconnect(this.toLate),this.encoder.dispose()}update(){de(this.dx,this.position,this.scene.listener.position);const t=ce(this.dx);pe(this.dx,this.dx);const e=Je*Math.atan2(-this.dx[0],this.dx[2]),i=Je*Math.atan2(this.dx[1],Math.sqrt(this.dx[0]*this.dx[0]+this.dx[2]*this.dx[2]));this.attenuation.setDistance(t),this.directivity.computeAngle(this.forward,this.dx),this.encoder.setDirection(e,i)}setRolloff(t){this.attenuation.setRolloff(t)}setMinDistance(t){this.attenuation.minDistance=t}setMaxDistance(t){this.attenuation.maxDistance=t}setGain(t){this.input.gain.value=t}setPosition(t){Ae(this.position,t);let e=function(t){let e=1;return t>Ke&&(e=1-t/1,e=Math.max(0,Math.min(1,e))),e}(this.scene.room.getDistanceOutsideRoom(this.position));this.toLate.gain.value=e,this.toEarly.gain.value=e,this.update()}setOrientation(t,e){Ae(this.forward,t),Ae(this.up,e),me(this.right,this.forward,this.up)}setSourceWidth(t){this.encoder.setSourceWidth(t),this.setPosition(this.position)}setDirectivityPattern(t,e){this.directivity.setPattern(t,e),this.setPosition(this.position)}}class Ki{constructor(t,e){e=Object.assign({ambisonicOrder:1,listenerPosition:Ae(he(),_e),listenerForward:Ae(he(),Oe),listenerUp:Ae(he(),Te),dimensions:Object.assign({},e.dimensions,He),materials:Object.assign({},e.materials,Ze),speedOfSound:Re,renderingMode:Qe},e),this.ambisonicOrder=ii.validateAmbisonicOrder(e.ambisonicOrder),this._sources=new Array,this.room=new Wi(t,{listenerPosition:e.listenerPosition,dimensions:e.dimensions,materials:e.materials,speedOfSound:e.speedOfSound}),this.listener=new Oi(t,{ambisonicOrder:e.ambisonicOrder,position:e.listenerPosition,forward:e.listenerForward,up:e.listenerUp,renderingMode:e.renderingMode}),this.context=t,this.output=t.createGain(),this.ambisonicOutput=t.createGain(),this.ambisonicInput=this.listener.input,this.room.output.connect(this.listener.input),this.listener.output.connect(this.output),this.listener.ambisonicOutput.connect(this.ambisonicOutput)}getRenderingMode(){return this.listener.getRenderingMode()}setRenderingMode(t){this.listener.setRenderingMode(t)}dispose(){this.room.output.disconnect(this.listener.input),this.listener.output.disconnect(this.output),this.listener.ambisonicOutput.disconnect(this.ambisonicOutput)}createSource(t){let e=new Ji(this,t);return this._sources[this._sources.length]=e,e}removeSource(t){const e=this._sources.findIndex((e=>e===t));e>-1&&(this._sources.splice(e,1),t.dispose())}setAmbisonicOrder(t){this.ambisonicOrder=ii.validateAmbisonicOrder(t)}setRoomProperties(t,e){this.room.setProperties(t,e)}setListenerPosition(t){Ae(this.listener.position,t),this.room.setListenerPosition(t),this._sources.forEach((function(t){t.update()}))}setListenerOrientation(t,e){this.listener.setOrientation(t,e)}setSpeedOfSound(t){this.room.speedOfSound=t}}class qi extends qt{constructor(t,e,i,s){super(t,e,i),this.node=s,this.gain.connect(this.node)}dispose(){this.node&&(this.node.disconnect(),this.node=null),super.dispose()}}class $i extends qi{constructor(t,e,i,s){const n=s.createSource(void 0);super(t,e,i,n.input),this.resScene=s,this.resNode=n,Object.seal(this)}update(t,e){const{p:i,f:s,u:n}=t;this.resNode.setPosition(i),this.resNode.setOrientation(s,n)}setAudioProperties(t,e,i,s,n){super.setAudioProperties(t,e,i,s,n),this.resNode.setMinDistance(this.minDistance),this.resNode.setMaxDistance(this.maxDistance),this.resNode.setGain(1/this.rolloff),this.resNode.setRolloff(this.algorithm)}dispose(){this.resScene.removeSource(this.resNode),this.resNode=null,super.dispose()}}class ts extends qt{constructor(t,e,i,s){super(t,e,i),this.gain.connect(s),Object.seal(this)}update(t,e){}}class es extends Kt{constructor(t,e){super(t),this.gain.connect(e)}createSpatializer(t,e,i,s){if(i)throw new Error("Can't spatialize with the base listener.");return new ts(t,e,s,this.gain)}}class is extends es{constructor(t,e){super(t,e),this.scene=new Ki(t,{ambisonicOrder:1,renderingMode:Pe.Bypass}),this.scene.output.connect(this.gain),this.scene.setRoomProperties({width:10,height:5,depth:10},{[ke.Left]:We.Transparent,[ke.Right]:We.Transparent,[ke.Front]:We.Transparent,[ke.Back]:We.Transparent,[ke.Down]:We.Grass,[ke.Up]:We.Transparent}),Object.seal(this)}update(t,e){const{p:i,f:s,u:n}=t;this.scene.setListenerPosition(i),this.scene.setListenerOrientation(s,n)}createSpatializer(t,e,i,s){return i?new $i(t,e,s,this.scene):super.createSpatializer(t,e,i,s)}}const ss=he();class ns extends qt{constructor(t,e,i,s,n){super(t,e,i),this.listener=n,this.gain.connect(s),Object.seal(this)}update(t,e){const i=this.listener.pose.p;we(ss,i,t.p);let s=Ft(Be(ce(ss),this.minDistance,this.maxDistance),0,1);"logarithmic"===this.algorithm&&(s=Math.sqrt(s));const n=1-s;this.gain.gain.setValueAtTime(n,e)}}class as extends es{constructor(t,e){super(t,e),this.pose=null,this.gain.gain.value=.25,Object.seal(this)}update(t,e){this.pose=t}createSpatializer(t,e,i,s){return i?new ns(t,e,s,this.gain,this):super.createSpatializer(t,e,i,s)}}class os extends qi{constructor(t,e,i,s){const n=i.createPanner();super(t,e,i,n),this.node.panningModel="HRTF",this.node.distanceModel="inverse",this.node.coneInnerAngle=360,this.node.coneOuterAngle=0,this.node.coneOuterGain=0,this.node.connect(s)}setAudioProperties(t,e,i,s,n){super.setAudioProperties(t,e,i,s,n),this.node.refDistance=this.minDistance,"logarithmic"===this.algorithm&&(s="inverse"),this.node.distanceModel=s,this.node.rolloffFactor=this.rolloff}}class rs extends os{constructor(t,e,i,s){super(t,e,i,s),Object.seal(this)}update(t,e){const{p:i,f:s}=t;this.node.positionX.setValueAtTime(i[0],e),this.node.positionY.setValueAtTime(i[1],e),this.node.positionZ.setValueAtTime(i[2],e),this.node.orientationX.setValueAtTime(-s[0],e),this.node.orientationY.setValueAtTime(-s[1],e),this.node.orientationZ.setValueAtTime(-s[2],e)}}class hs extends es{constructor(t,e){super(t,e),this.node=t.listener,this.volume=.75}dispose(){this.node=null,super.dispose()}}class cs extends hs{constructor(t,e){super(t,e),Object.seal(this)}update(t,e){const{p:i,f:s,u:n}=t;this.node.positionX.setValueAtTime(i[0],e),this.node.positionY.setValueAtTime(i[1],e),this.node.positionZ.setValueAtTime(i[2],e),this.node.forwardX.setValueAtTime(s[0],e),this.node.forwardY.setValueAtTime(s[1],e),this.node.forwardZ.setValueAtTime(s[2],e),this.node.upX.setValueAtTime(n[0],e),this.node.upY.setValueAtTime(n[1],e),this.node.upZ.setValueAtTime(n[2],e)}createSpatializer(t,e,i,s){return i?new rs(t,e,s,this.gain):super.createSpatializer(t,e,i,s)}}class As extends os{constructor(t,e,i,s){super(t,e,i,s),Object.seal(this)}update(t,e){const{p:i,f:s}=t;this.node.setPosition(i[0],i[1],i[2]),this.node.setOrientation(s[0],s[1],s[2])}}class ls extends hs{constructor(t,e){super(t,e),Object.seal(this)}update(t,e){const{p:i,f:s,u:n}=t;this.node.setPosition(i[0],i[1],i[2]),this.node.setOrientation(s[0],s[1],s[2],n[0],n[1],n[2])}createSpatializer(t,e,i,s){return i?new As(t,e,s,this.gain):super.createSpatializer(t,e,i,s)}}!("AudioContext"in globalThis)&&"webkitAudioContext"in globalThis&&(globalThis.AudioContext=globalThis.webkitAudioContext),!("OfflineAudioContext"in globalThis)&&"webkitOfflineAudioContext"in globalThis&&(globalThis.OfflineAudioContext=globalThis.webkitOfflineAudioContext);const us=new Xt,ds=new p("audioReady"),gs=J(),ps="createMediaStreamTrackSource"in AudioContext.prototype,ms=!ps&&!("createMediaStreamSource"in AudioContext.prototype),fs=new Map([["wav",["audio/wav","audio/vnd.wave","audio/wave","audio/x-wav"]],["mp3",["audio/mpeg"]],["m4a",["audio/mp4"]],["m4b",["audio/mp4"]],["3gp",["audio/mp4"]],["3g2",["audio/mp4"]],["aac",["audio/aac","audio/aacp"]],["oga",["audio/ogg"]],["ogg",["audio/ogg"]],["spx",["audio/ogg"]],["webm",["audio/webm"]],["flac",["audio/flac"]]]);let vs="AudioContext"in globalThis,ws="AudioListener"in globalThis,Bs=ws&&"setPosition"in AudioListener.prototype,ys=ws&&"positionX"in AudioListener.prototype,Ds=ws;var bs,Cs,Ms,Ps;!function(t){t.Low="volumescale",t.Medium="webaudiopanner",t.High="resonance"}(bs||(bs={}));class Is extends m{constructor(t,e){super(),this.minDistance=1,this.maxDistance=10,this.rolloff=1,this._algorithm="logarithmic",this.transitionTime=.5,this._offsetRadius=0,this.clips=new Map,this.users=new Map,this.analysers=new Map,this.sortedUserIDs=new Array,this.localUserID=null,this.listener=null,this.audioContext=null,this.element=null,this.destination=null,this._audioOutputDeviceID=null,this.fetcher=t||new Yt,this.type=e||bs.Medium,this.onAudioActivity=t=>{us.id=t.id,us.isActive=t.isActive,this.dispatchEvent(us)},this.createContext(),Object.seal(this)}get offsetRadius(){return this._offsetRadius}set offsetRadius(t){this._offsetRadius=t,this.updateUserOffsets()}get algorithm(){return this._algorithm}addEventListener(t,e,i=null){t===ds.type&&this.ready?e(ds):super.addEventListener(t,e,i)}get ready(){return this.audioContext&&"running"===this.audioContext.state}async start(){await this.audioContext.resume(),await this.setAudioOutputDeviceID(this._audioOutputDeviceID),this.element&&await this.element.play()}update(){if(this.audioContext){const t=this.currentTime;for(const e of this.clips.values())e.update(t);for(const e of this.users.values())e.update(t);for(const t of this.analysers.values())t.update()}}createContext(){if(!this.audioContext){if(this.audioContext=new AudioContext,Me?(this.destination=this.audioContext.createMediaStreamDestination(),this.element=J(k,y,L(this.destination.stream),H(G("none"))),document.body.appendChild(this.element)):this.destination=this.audioContext.destination,this.type===bs.High)if(vs&&ws&&Ds)try{this.listener=new is(this.audioContext,this.destination)}catch(t){Ds=!1,this.type=bs.Medium,console.warn("Resonance Audio API not available!",t)}else this.type=bs.Medium;if(this.type===bs.Medium)if(vs&&ws){if(ys)try{this.listener=new cs(this.audioContext,this.destination)}catch(t){ys=!1,console.warn("No AudioListener.positionX property!",t)}if(!ys&&Bs)try{this.listener=new ls(this.audioContext,this.destination)}catch(t){Bs=!1,console.warn("No WebAudio API!",t)}ys||Bs||(this.type=bs.Low,ws=!1)}else this.type=bs.Low;if(this.type===bs.Low&&(this.listener=new as(this.audioContext,this.destination)),null===this.listener)throw new Error("Calla requires a functioning WebAudio system.");this.ready?(this.start(),this.dispatchEvent(ds)):function(t,e){const i=u(e)?v:e,s=async e=>{if(e.isTrusted&&await i()){for(const t of f)window.removeEventListener(t,s);t()}};for(const t of f)window.addEventListener(t,s)}((()=>this.dispatchEvent(ds)),(async()=>(await this.start(),this.ready)))}}getAudioOutputDeviceID(){return this.element?.sinkId}async setAudioOutputDeviceID(t){this._audioOutputDeviceID=t||"",this.element&&this._audioOutputDeviceID!==this.element.sinkId&&await this.element.setSinkId(this._audioOutputDeviceID)}createSpatializer(t,e,i){if(!this.listener)throw new Error("Audio context isn't ready");return this.listener.createSpatializer(t,e,i,this.audioContext)}get currentTime(){return this.audioContext.currentTime}createUser(t){let e=this.users.get(t);return e||(e=new Ce(t),this.users.set(t,e),d(this.sortedUserIDs,t),this.updateUserOffsets()),e}createLocalUser(t){this.localUserID=t;let i=null,s=null;for(const t of this.users.entries())if(t[1].spatializer===this.listener){[i,s]=t;break}return s?(this.users.delete(i),e(this.sortedUserIDs,i),this.users.set(t,s),d(this.sortedUserIDs,t),this.updateUserOffsets()):(s=this.createUser(t),s.spatializer=this.listener),s}async createClip(t,e,i,s,n,a,o){if(null==a||0===a.length)throw new Error("No clip source path provided");let r=null;if(function(t){const e=t.lastIndexOf(".");if(e>-1){const i=t.substring(e+1);if(fs.has(i)){for(const t of fs.get(i))if(gs.canPlayType(t))return!0;return!1}}return!0}(a)){const t=await this.fetcher.getBlob(a,o);gs.canPlayType(t.type)&&(r=t)}else o&&o(1,1,"skip");if(!r)throw new Error("Cannot play file: "+a);const h=await r.arrayBuffer(),c=await this.audioContext.decodeAudioData(h),A=this.audioContext.createBufferSource();A.buffer=c,A.loop=e;const l=new Ce("audio-clip-"+t);return l.spatializer=this.createSpatializer(t,A,s),l.spatializer.volume=n,i&&l.spatializer.play(),this.clips.set(t,l),l}hasClip(t){return this.clips.has(t)}async playClip(t){if(this.ready&&this.hasClip(t)){const e=this.clips.get(t);await e.spatializer.play()}}stopClip(t){if(this.ready&&this.hasClip(t)){this.clips.get(t).spatializer.stop()}}getSource(t,e){return t.get(e)||null}getUser(t){return this.getSource(this.users,t)}getClip(t){return this.getSource(this.clips,t)}removeSource(t,e){t.has(e)&&Zt(t.get(e),(i=>{i.spatializer&&i.spatializer.stop(),t.delete(e)}))}removeUser(t){this.removeSource(this.users,t),e(this.sortedUserIDs,t),this.updateUserOffsets()}removeClip(t){this.removeSource(this.clips,t)}createSourceFromStream(t){if(ps){const e=t.getAudioTracks().map((t=>this.audioContext.createMediaStreamTrackSource(t)));if(0===e.length)throw new Error("No audio tracks!");if(1===e.length)return e[0];{const t=this.audioContext.createChannelMerger(e.length);for(const i of e)i.connect(t);return t}}{const e=J(k(!0),y(!0),F(!ms),function(t){return new B("controls",t,"audio","video")}(!1),H(G("none")),L(t));return document.body.appendChild(e),e.play(),ms?this.audioContext.createMediaElementSource(e):this.audioContext.createMediaStreamSource(t)}}async setUserStream(t,e){if(this.users.has(t)){this.analysers.has(t)&&Zt(this.analysers.get(t),(e=>{this.analysers.delete(t),e.removeEventListener("audioActivity",this.onAudioActivity)}));const i=this.users.get(t);if(i.spatializer=null,e){await w((()=>e.active));const s=this.createSourceFromStream(e);i.spatializer=this.createSpatializer(t,s,!0),i.spatializer.setAudioProperties(this.minDistance,this.maxDistance,this.rolloff,this.algorithm,this.transitionTime);const n=new ee(i,this.audioContext,1024);n.addEventListener("audioActivity",this.onAudioActivity),this.analysers.set(t,n)}}}updateUserOffsets(){if(this.offsetRadius>0){const t=this.sortedUserIDs.indexOf(this.localUserID),e=2*Math.PI/this.sortedUserIDs.length,i=(t+1)*e,s=this.offsetRadius*Math.sin(i),n=this.offsetRadius*(Math.cos(i)-1);for(let t=0;t<this.sortedUserIDs.length;++t){const i=this.sortedUserIDs[t],a=(t+1)*e,o=this.offsetRadius*Math.sin(a)-s,r=this.offsetRadius*(Math.cos(a)-1)-n;this.setUserOffset(i,o,0,r)}}}setAudioProperties(t,e,i,s,n){this.minDistance=t,this.maxDistance=e,this.transitionTime=n,this.rolloff=i,this._algorithm=s;for(const t of this.users.values())t.spatializer&&t.spatializer.setAudioProperties(this.minDistance,this.maxDistance,this.rolloff,this.algorithm,this.transitionTime)}withPose(t,e,i,s){if(t.has(e)){const n=t.get(e).pose;return null==i&&(i=this.transitionTime),s(n,i)}return null}withUser(t,e,i){return this.withPose(this.users,t,e,i)}setUserOffset(t,e,i,s){this.withUser(t,null,(t=>{t.setOffset(e,i,s)}))}getUserOffset(t){return this.withUser(t,null,(t=>t.offset))}setUserPose(t,e,i,s,n,a,o,r,h,c,A=null){this.withUser(t,A,((t,A)=>{t.setTarget(e,i,s,n,a,o,r,h,c,this.currentTime,A)}))}withClip(t,e,i){return this.withPose(this.clips,t,e,i)}setClipPosition(t,e,i,s,n=null){this.withClip(t,n,((t,n)=>{t.setTargetPosition(e,i,s,this.currentTime,n)}))}setClipOrientation(t,e,i,s,n,a,o,r=null){this.withClip(t,r,((t,r)=>{t.setTargetOrientation(e,i,s,n,a,o,this.currentTime,r)}))}setClipPose(t,e,i,s,n,a,o,r,h,c,A=null){this.withClip(t,A,((t,A)=>{t.setTarget(e,i,s,n,a,o,r,h,c,this.currentTime,A)}))}}!function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting"}(Cs||(Cs={}));class xs{constructor(t,e,i=null){this.value=t,this.desc=e,this.value=t,this.desc=e,this.props=i||{}}contains(t){return t instanceof xs?this.contains(t.value):this.value.indexOf(t)>=0}}class Es extends Event{constructor(t){super(t),this.eventType=t}}class Fs extends Es{constructor(){super("serverConnected")}}class Ss extends Es{constructor(){super("serverDisconnected")}}class ks extends Es{constructor(){super("serverFailed")}}class _s extends Es{constructor(t,e){super(t),this.id=e}}class Ls extends _s{constructor(t,e,i){super(t,e),this.displayName=i}}class Os extends _s{constructor(t,e){super("conferenceJoined",t),this.pose=e}}class Ts extends _s{constructor(t){super("conferenceLeft",t)}}class Rs extends Es{constructor(){super("conferenceFailed")}}class Us extends Ls{constructor(t,e,i){super("participantJoined",t,e),this.source=i}}class Qs extends _s{constructor(t){super("participantLeft",t)}}class Ns extends Ls{constructor(t,e){super("userNameChanged",t,e)}}class Hs extends _s{constructor(t,e,i){super(t,e),this.muted=i}}class zs extends Hs{constructor(t,e){super("audioMuteStatusChanged",t,e)}}class Gs extends Hs{constructor(t,e){super("videoMuteStatusChanged",t,e)}}!function(t){t.Audio="audio",t.Video="video"}(Ms||(Ms={})),function(t){t.Added="added",t.Removed="removed",t.Changed="changed"}(Ps||(Ps={}));class js extends _s{constructor(t,e,i,s,n){super(t,s),this.kind=e,this.op=i,this.stream=n}}class Ws extends js{constructor(t,e,i,s){super(t,e,Ps.Added,i,s)}}class Vs extends js{constructor(t,e,i,s){super(t,e,Ps.Removed,i,s)}}class Zs extends Ws{constructor(t,e){super("audioAdded",Ms.Audio,t,e)}}class Ys extends Vs{constructor(t,e){super("audioRemoved",Ms.Audio,t,e)}}class Xs extends Ws{constructor(t,e){super("videoAdded",Ms.Video,t,e)}}class Js extends Vs{constructor(t,e){super("videoRemoved",Ms.Video,t,e)}}class Ks extends _s{constructor(t,e,i,s,n,a,o,r,h,c,A){super(t,e),this.px=i,this.py=s,this.pz=n,this.fx=a,this.fy=o,this.fz=r,this.ux=h,this.uy=c,this.uz=A}set(t,e,i,s,n,a,o,r,h){this.px=t,this.py=e,this.pz=i,this.fx=s,this.fy=n,this.fz=a,this.ux=o,this.uy=r,this.uz=h}}class qs extends Ks{constructor(t,e,i,s,n,a,o,r,h,c){super("userPosed",t,e,i,s,n,a,o,r,h,c)}}class $s extends Ks{constructor(t,e,i,s,n,a,o,r,h,c,A){super("userPointer",t,i,s,n,a,o,r,h,c,A),this.name=e}}class tn extends _s{constructor(t,e,i){super(t,e),this.emoji=i instanceof xs?i.value:i}}class en extends tn{constructor(t,e){super("emote",t,e)}}class sn extends tn{constructor(t,e){super("setAvatarEmoji",t,e)}}class nn extends _s{constructor(t,e){super("avatarChanged",t),this.url=e}}class an extends _s{constructor(t,e){super("chat",t),this.text=e}}class on extends m{constructor(t){super(),this.sleepTime=t,this.tasks=new Map}async getNext(t,e){return new Promise((i=>{const s=n=>{n instanceof _s&&n.id===e&&(this.removeEventListener(t,s),i(n))};this.addEventListener(t,s)}))}get isConnected(){return this.metadataState===Cs.Connected}async callThrottled(t,e,...i){if(!this.tasks.has(t)){const n=performance.now(),a=this.callInternal(e,...i);this.tasks.set(t,a),await a;const o=performance.now()-n;this.sleepTime-o>0&&await(s=this.sleepTime,new Promise((t=>{setTimeout(t,s)}))),this.tasks.delete(t)}var s}async callImmediate(t,...e){await this.callInternal(t,...e)}setLocalPose(t,e,i,s,n,a,o,r,h){this.callThrottled("userPosed","userPosed",t,e,i,s,n,a,o,r,h)}setLocalPoseImmediate(t,e,i,s,n,a,o,r,h){this.callImmediate("userPosed",t,e,i,s,n,a,o,r,h)}setLocalPointer(t,e,i,s,n,a,o,r,h,c){this.callThrottled("userPointer"+t,"userPointer",t,e,i,s,n,a,o,r,h,c)}setAvatarEmoji(t){this.callImmediate("setAvatarEmoji",t)}setAvatarURL(t){this.callImmediate("avatarChanged",t)}emote(t){this.callImmediate("emote",t)}chat(t){this.callImmediate("chat",t)}}const rn="Calla";class hn extends on{constructor(t){super(250),this.tele=t,this._status=Cs.Disconnected,this.remoteUserIDs=new Array,this.tele.addEventListener("participantJoined",(t=>{d(this.remoteUserIDs,t.id,!1)})),this.tele.addEventListener("participantLeft",(t=>{e(this.remoteUserIDs,t.id)}))}get metadataState(){return this._status}async connect(){}async join(t){this._status=Cs.Connecting,this.tele.conference.addEventListener(JitsiMeetJS.events.conference.ENDPOINT_MESSAGE_RECEIVED,((t,e)=>{if(e.hax===rn){const i=t.getId(),s=e.command,n=e.values;switch(s){case"avatarChanged":this.dispatchEvent(new nn(i,n[0]));break;case"emote":this.dispatchEvent(new en(i,n[0]));break;case"setAvatarEmoji":this.dispatchEvent(new sn(i,n[0]));break;case"userPosed":this.dispatchEvent(new qs(i,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]));break;case"userPointer":this.dispatchEvent(new $s(i,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));break;case"chat":this.dispatchEvent(new an(i,n[0]));break;default:A(s)}}})),await ut(this.tele.conference,JitsiMeetJS.events.conference.DATA_CHANNEL_OPENED),this._status=Cs.Connected}async leave(){this._status=Cs.Disconnected}async identify(t){}async disconnect(){}sendJitsiHax(t,e,...i){this.tele.conference.sendMessage({hax:rn,command:e,values:i},t)}callInternal(t,...e){for(const i of this.remoteUserIDs)this.sendJitsiHax(i,t,...e);return Promise.resolve()}async stopInternal(){this._status=Cs.Disconnecting,await w((()=>this.metadataState===Cs.Disconnected))}}function cn(t,...e){for(const i of e)for(const e of t)if(i(e))return e;return null}const An={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},ln={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},un={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},dn={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},gn={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class pn{static getFirstMatch(t,e){const i=e.match(t);return i&&i.length>0&&i[1]||""}static getSecondMatch(t,e){const i=e.match(t);return i&&i.length>1&&i[2]||""}static matchAndReturnConst(t,e,i){if(t.test(e))return i}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const e=t.split(".").splice(0,2).map((t=>parseInt(t,10)||0));if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const e=t.split(".").splice(0,2).map((t=>parseInt(t,10)||0));if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,e,i=!1){const s=pn.getVersionPrecision(t),n=pn.getVersionPrecision(e);let a=Math.max(s,n),o=0;const r=pn.map([t,e],(t=>{const e=a-pn.getVersionPrecision(t),i=t+new Array(e+1).join(".0");return pn.map(i.split("."),(t=>new Array(20-t.length).join("0")+t)).reverse()}));for(i&&(o=a-Math.min(s,n)),a-=1;a>=o;){if(r[0][a]>r[1][a])return 1;if(r[0][a]===r[1][a]){if(a===o)return 0;a-=1}else if(r[0][a]<r[1][a])return-1}}static map(t,e){const i=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,e);for(s=0;s<t.length;s+=1)i.push(e(t[s]));return i}static find(t,e){let i,s;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(i=0,s=t.length;i<s;i+=1){const s=t[i];if(e(s,i))return s}}static assign(t,...e){const i=t;let s,n;if(Object.assign)return Object.assign(t,...e);for(s=0,n=e.length;s<n;s+=1){const t=e[s];if("object"==typeof t&&null!==t){Object.keys(t).forEach((e=>{i[e]=t[e]}))}}return t}static getBrowserAlias(t){return An[t]}static getBrowserTypeByAlias(t){return ln[t]||""}}const mn=/version\/(\d+(\.?_?\d+)+)/i,fn=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},i=pn.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},i=pn.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},i=pn.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},i=pn.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},i=pn.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},i=pn.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},i=pn.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},i=pn.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},i=pn.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},i=pn.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},i=pn.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},i=pn.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},i=pn.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},i=pn.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},i=pn.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return i&&(e.version=i),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},i=pn.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},i=pn.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},i=pn.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},i=pn.getFirstMatch(mn,t)||pn.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},i=pn.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},i=pn.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},i=pn.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},i=pn.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},i=pn.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},i=pn.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},i=pn.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},i=pn.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},i=pn.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e={name:"Android Browser"},i=pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},i=pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},i=pn.getFirstMatch(mn,t);return i&&(e.version=i),e}},{test:[/.*/i],describe(t){const e=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:pn.getFirstMatch(e,t),version:pn.getSecondMatch(e,t)}}}];var vn=[{test:[/Roku\/DVP/],describe(t){const e=pn.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:dn.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=pn.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:dn.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=pn.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),i=pn.getWindowsVersionName(e);return{name:dn.Windows,version:e,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:dn.iOS},i=pn.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return i&&(e.version=i),e}},{test:[/macintosh/i],describe(t){const e=pn.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),i=pn.getMacOSVersionName(e),s={name:dn.MacOS,version:e};return i&&(s.versionName=i),s}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=pn.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:dn.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e=pn.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),i=pn.getAndroidVersionName(e),s={name:dn.Android,version:e};return i&&(s.versionName=i),s}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=pn.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),i={name:dn.WebOS};return e&&e.length&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=pn.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||pn.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||pn.getFirstMatch(/\bbb(\d+)/i,t);return{name:dn.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=pn.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:dn.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=pn.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:dn.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:dn.Linux})},{test:[/CrOS/],describe:()=>({name:dn.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=pn.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:dn.PlayStation4,version:e}}}],wn=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=pn.getFirstMatch(/(can-l01)/i,t)&&"Nova",i={type:un.mobile,vendor:"Huawei"};return e&&(i.model=e),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:un.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:un.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:un.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:un.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:un.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:un.tablet})},{test(t){const e=t.test(/ipod|iphone/i),i=t.test(/like (ipod|iphone)/i);return e&&!i},describe(t){const e=pn.getFirstMatch(/(ipod|iphone)/i,t);return{type:un.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:un.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:un.mobile})},{test:t=>"blackberry"===t.getBrowserName(!0),describe:()=>({type:un.mobile,vendor:"BlackBerry"})},{test:t=>"bada"===t.getBrowserName(!0),describe:()=>({type:un.mobile})},{test:t=>"windows phone"===t.getBrowserName(),describe:()=>({type:un.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&e>=3},describe:()=>({type:un.tablet})},{test:t=>"android"===t.getOSName(!0),describe:()=>({type:un.mobile})},{test:t=>"macos"===t.getOSName(!0),describe:()=>({type:un.desktop,vendor:"Apple"})},{test:t=>"windows"===t.getOSName(!0),describe:()=>({type:un.desktop})},{test:t=>"linux"===t.getOSName(!0),describe:()=>({type:un.desktop})},{test:t=>"playstation 4"===t.getOSName(!0),describe:()=>({type:un.tv})},{test:t=>"roku"===t.getOSName(!0),describe:()=>({type:un.tv})}],Bn=[{test:t=>"microsoft edge"===t.getBrowserName(!0),describe(t){if(/\sedg\//i.test(t))return{name:gn.Blink};const e=pn.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:gn.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:gn.Trident},i=pn.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:gn.Presto},i=pn.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=t.test(/gecko/i),i=t.test(/like gecko/i);return e&&!i},describe(t){const e={name:gn.Gecko},i=pn.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:gn.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:gn.WebKit},i=pn.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}}];class yn{constructor(t,e=!1){if(null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==e&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=pn.find(fn,(t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some((t=>this.test(t)));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=pn.find(vn,(t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some((t=>this.test(t)));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:e}=this.getOS();return t?String(e).toLowerCase()||"":e||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:e}=this.getPlatform();return t?String(e).toLowerCase()||"":e||""}parsePlatform(){this.parsedResult.platform={};const t=pn.find(wn,(t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some((t=>this.test(t)));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=pn.find(Bn,(t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some((t=>this.test(t)));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return pn.assign({},this.parsedResult)}satisfies(t){const e={};let i=0;const s={};let n=0;if(Object.keys(t).forEach((a=>{const o=t[a];"string"==typeof o?(s[a]=o,n+=1):"object"==typeof o&&(e[a]=o,i+=1)})),i>0){const t=Object.keys(e),i=pn.find(t,(t=>this.isOS(t)));if(i){const t=this.satisfies(e[i]);if(void 0!==t)return t}const s=pn.find(t,(t=>this.isPlatform(t)));if(s){const t=this.satisfies(e[s]);if(void 0!==t)return t}}if(n>0){const t=Object.keys(s),e=pn.find(t,(t=>this.isBrowser(t,!0)));if(void 0!==e)return this.compareVersion(s[e])}}isBrowser(t,e=!1){const i=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const n=pn.getBrowserTypeByAlias(s);return e&&n&&(s=n.toLowerCase()),s===i}compareVersion(t){let e=[0],i=t,s=!1;const n=this.getBrowserVersion();if("string"==typeof n)return">"===t[0]||"<"===t[0]?(i=t.substr(1),"="===t[1]?(s=!0,i=t.substr(2)):e=[],">"===t[0]?e.push(1):e.push(-1)):"="===t[0]?i=t.substr(1):"~"===t[0]&&(s=!0,i=t.substr(1)),e.indexOf(pn.compareVersions(n,i,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,e=!1){return this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some((t=>this.is(t)))}}const Dn=class{static getParser(t,e=!1){if("string"!=typeof t)throw new Error("UserAgent should be a string");return new yn(t,e)}static parse(t){return new yn(t).getResult()}static get BROWSER_MAP(){return ln}static get ENGINE_MAP(){return gn}static get OS_MAP(){return dn}static get PLATFORMS_MAP(){return un}}.getParser(navigator.userAgent).getResult(),bn=(Dn.platform.type,Dn.engine.name,"InstallTrigger"in globalThis),Cn=/iPad|iPhone|iPod/.test(navigator.platform)||/Macintosh(.*?) FxiOS(.*?)\//.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>2,Mn=(/^((?!chrome|android).)*safari/i.test(navigator.userAgent),/Mobile VR/.test(navigator.userAgent),/oculus/.test(navigator.userAgent)),Pn=(Mn&&/pacific/.test(navigator.userAgent),Mn&&/quest/.test(navigator.userAgent));function In(t,e){t.addEventListener(e,((...t)=>{kn&&console.log(">== CALLA ==<",e,...t)}))}const xn="calla:preferredAudioOutputID",En="calla:preferredAudioInputID",Fn="calla:preferredVideoInputID",Sn="local-user";let kn="localhost"===window.location.hostname||/\bdebug\b/.test(window.location.search);class _n extends m{constructor(t,e){super(),this.localUserID=null,this.localUserName=null,this.roomName=null,this._prepared=!1,this._connectionState=Cs.Disconnected,this._conferenceState=Cs.Disconnected,this.hasAudioPermission=!1,this.hasVideoPermission=!1,this.fetcher=t||new Yt,this.audio=e||new Is(t,Pn?bs.High:bs.Medium),this.addEventListener("serverConnected",this.setConnectionState.bind(this,Cs.Connected)),this.addEventListener("serverFailed",this.setConnectionState.bind(this,Cs.Disconnected)),this.addEventListener("serverDisconnected",this.setConnectionState.bind(this,Cs.Disconnected)),this.addEventListener("conferenceJoined",this.setConferenceState.bind(this,Cs.Connected)),this.addEventListener("conferenceFailed",this.setConferenceState.bind(this,Cs.Disconnected)),this.addEventListener("conferenceRestored",this.setConferenceState.bind(this,Cs.Connected)),this.addEventListener("conferenceLeft",this.setConferenceState.bind(this,Cs.Disconnected))}toggleLogging(){kn=!kn}get connectionState(){return this._connectionState}setConnectionState(t){this._connectionState=t}get conferenceState(){return this._conferenceState}setConferenceState(t){this._conferenceState=t}dispatchEvent(t){return t instanceof _s&&(null==t.id||"local"===t.id)&&(this.localUserID===Sn?t.id=null:t.id=this.localUserID),super.dispatchEvent(t)}async getNext(t,e){return new Promise((i=>{const s=n=>{n instanceof _s&&n.id===e&&(this.removeEventListener(t,s),i(n))};this.addEventListener(t,s)}))}get preferredAudioInputID(){return localStorage.getItem(En)}set preferredAudioInputID(t){localStorage.setItem(En,t)}get preferredVideoInputID(){return localStorage.getItem(Fn)}set preferredVideoInputID(t){localStorage.setItem(Fn,t)}async setPreferredDevices(){await this.setPreferredAudioInput(!0),await this.setPreferredVideoInput(!1),await this.setPreferredAudioOutput(!0)}async getPreferredAudioInput(t){return cn(await this.getAudioInputDevices(),(t=>t.deviceId===this.preferredAudioInputID),(t=>"communications"===t.deviceId),(t=>"default"===t.deviceId),(e=>t&&e.deviceId.length>0))}async setPreferredAudioInput(t){const e=await this.getPreferredAudioInput(t);e&&await this.setAudioInputDevice(e)}async getPreferredVideoInput(t){return cn(await this.getVideoInputDevices(),(t=>t.deviceId===this.preferredVideoInputID),(e=>t&&e&&/front/i.test(e.label)),(e=>t&&e.deviceId.length>0))}async setPreferredVideoInput(t){const e=await this.getPreferredVideoInput(t);e&&await this.setVideoInputDevice(e)}async getDevices(){let t=null;for(let e=0;e<3;++e){t=await navigator.mediaDevices.enumerateDevices();for(const e of t)e.deviceId.length>0&&(this.hasAudioPermission=this.hasAudioPermission||"audioinput"===e.kind&&e.label.length>0,this.hasVideoPermission=this.hasVideoPermission||"videoinput"===e.kind&&e.label.length>0);if(this.hasAudioPermission)break;try{await navigator.mediaDevices.getUserMedia({audio:!this.hasAudioPermission,video:!this.hasVideoPermission})}catch(t){console.warn(t)}}return t||[]}async getMediaPermissions(){return await this.getDevices(),{audio:this.hasAudioPermission,video:this.hasVideoPermission}}async getAvailableDevices(t=!1){let e=await this.getDevices();return t&&(e=function(t){const e=[];for(let i=0;i<t.length;++i){const s=t[i];let n=!1;for(let t=0;t<e.length&&!n;++t){const i=e[t];n=s.kind===i.kind&&i.label.indexOf(s.label)>0}n||e.push(s)}return e}(e)),{audioOutput:Me?e.filter((t=>"audiooutput"===t.kind)):[],audioInput:e.filter((t=>"audioinput"===t.kind)),videoInput:e.filter((t=>"videoinput"===t.kind))}}async getAudioInputDevices(t=!1){const e=await this.getAvailableDevices(t);return e&&e.audioInput||[]}async getVideoInputDevices(t=!1){const e=await this.getAvailableDevices(t);return e&&e.videoInput||[]}async setAudioOutputDevice(t){Me&&(this.preferredAudioOutputID=t&&t.deviceId||null)}async getAudioOutputDevices(t=!1){if(!Me)return[];const e=await this.getAvailableDevices(t);return e&&e.audioOutput||[]}async getCurrentAudioOutputDevice(){if(!Me)return null;const t=this.audio.getAudioOutputDeviceID(),e=(await this.getAudioOutputDevices()).filter((e=>null!=t&&e.deviceId===t||null==t&&e.deviceId===this.preferredAudioOutputID));return 0===e.length?null:e[0]}get preferredAudioOutputID(){return localStorage.getItem(xn)}set preferredAudioOutputID(t){localStorage.setItem(xn,t)}async getPreferredAudioOutput(t){return cn(await this.getAudioOutputDevices(),(t=>t.deviceId===this.preferredAudioOutputID),(t=>"communications"===t.deviceId),(t=>"default"===t.deviceId),(e=>t&&e.deviceId.length>0))}async setPreferredAudioOutput(t){const e=await this.getPreferredAudioOutput(t);e&&await this.setAudioOutputDevice(e)}async setAudioInputDevice(t){this.preferredAudioInputID=t&&t.deviceId||null}async setVideoInputDevice(t){this.preferredVideoInputID=t&&t.deviceId||null}async connect(){this.setConnectionState(Cs.Connecting)}async join(t,e){this.setConferenceState(Cs.Connecting)}async leave(){this.setConferenceState(Cs.Disconnecting)}async disconnect(){this.setConnectionState(Cs.Disconnecting)}}function Ln(t){try{return decodeURIComponent(t)}catch(e){return t}}class On extends _n{constructor(t,e){super(t,e),this.usingDefaultMetadataClient=!1,this.host=null,this.bridgeHost=null,this.bridgeMUC=null,this.connection=null,this.conference=null,this.tracks=new Map,this.listenersForObjs=new Map}_on(t,e,i){let s=this.listenersForObjs.get(t);s||this.listenersForObjs.set(t,s=new Map);let n=s.get(e);n||s.set(e,n=new Array),n.push(i),t.addEventListener(e,i)}_off(t){const e=this.listenersForObjs.get(t);if(e){this.listenersForObjs.delete(t);for(const[i,s]of e.entries()){for(const e of s)t.removeEventListener(i,e);Jt(s)}e.clear()}}getDefaultMetadataClient(){return this.usingDefaultMetadataClient=!0,new hn(this)}async prepare(t,e,i,s){if(!this._prepared){this.host=t,this.bridgeHost=e,this.bridgeMUC=i,console.info("Connecting to:",this.host);const n=xt(s,2);await this.fetcher.loadScript("https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js",(()=>"jQuery"in globalThis),n.shift()),await this.fetcher.loadScript(`https://${this.host}/libs/lib-jitsi-meet.min.js`,(()=>"JitsiMeetJS"in globalThis),n.shift()),JitsiMeetJS.setLogLevel(JitsiMeetJS.logLevels.ERROR),JitsiMeetJS.init(),this._prepared=!0}}async connect(){await super.connect();const t=JitsiMeetJS.events.connection;this.connection=new JitsiMeetJS.JitsiConnection(null,null,{hosts:{domain:this.bridgeHost,muc:this.bridgeMUC},serviceUrl:`https://${this.host}/http-bind`});for(const e of Object.values(t))In(this.connection,e);const e=()=>{this.connection&&(this._off(this.connection),this.connection=null)},i=(t,e,i)=>{this._on(this.connection,t,(()=>{this.dispatchEvent(new e),i&&i()}))};i(t.CONNECTION_ESTABLISHED,Fs),i(t.CONNECTION_DISCONNECTED,Ss,e),i(t.CONNECTION_FAILED,ks,e);const s=ut(this.connection,t.CONNECTION_ESTABLISHED);this.connection.connect(),await s}async join(t,e){await super.join(t,e);const i=t.toLocaleLowerCase();if(i!==this.roomName){this.conference&&await this.leave(),this.roomName=i,this.conference=this.connection.initJitsiConference(this.roomName,{openBridgeChannel:this.usingDefaultMetadataClient,p2p:{enabled:!1},startVideoMuted:!0});const s=JitsiMeetJS.events.conference;for(const t of Object.values(s))"conference.audioLevelsChanged"!==t&&In(this.conference,t);const n=(t,e,i)=>{this._on(this.conference,t,(()=>{this.dispatchEvent(new e),i&&i(t)}))},a=async e=>{if(this.localUserID=Sn,this.tracks.size>0){console.warn("><> CALLA <>< ---- there are leftover conference tracks");for(const t of this.tracks.keys())await this.tryRemoveTrack(t,Ms.Video),await this.tryRemoveTrack(t,Ms.Audio),this.dispatchEvent(new Qs(t))}this.dispatchEvent(new Ts(this.localUserID)),this.conference&&(this._off(this.conference),this.conference=null),console.info(`Left room '${t}'. Reason: ${e}.`)};n(s.CONFERENCE_ERROR,Rs,a),n(s.CONFERENCE_FAILED,Rs,a),n(s.CONNECTION_INTERRUPTED,Rs,a),this._on(this.conference,s.CONFERENCE_JOINED,(async()=>{const t=this.conference.myUserId();t&&(this.localUserID=t,this.dispatchEvent(new Os(t,null)))})),this._on(this.conference,s.CONFERENCE_LEFT,(()=>a(s.CONFERENCE_LEFT))),this._on(this.conference,s.USER_JOINED,((t,e)=>{this.dispatchEvent(new Us(t,Ln(e.getDisplayName()),null))})),this._on(this.conference,s.USER_LEFT,(t=>{this.dispatchEvent(new Qs(t))})),this._on(this.conference,s.DISPLAY_NAME_CHANGED,((t,e)=>{this.dispatchEvent(new Ns(t,Ln(e)))}));const o=(t,e)=>{const i=t.getParticipantId()||this.localUserID,s=t.getType()===Ms.Audio?new zs(i,e):new Gs(i,e);this.dispatchEvent(s)};this._on(this.conference,s.TRACK_ADDED,(t=>{const e=t.getParticipantId()||this.localUserID,i=t.getType(),s=i===Ms.Audio?new Zs(e,t.stream):new Xs(e,t.stream);let n=this.tracks.get(e);n||(n=new Map,this.tracks.set(e,n));const a=n.get(i);if(a){const t=Ms.Audio?new Ys(e,a.stream):new Js(e,a.stream);this.dispatchEvent(t),a.dispose()}n.set(i,t),this.dispatchEvent(s),t.addEventListener(JitsiMeetJS.events.track.TRACK_MUTE_CHANGED,(t=>{o(t,t.isMuted())})),o(t,!1)})),this._on(this.conference,s.TRACK_REMOVED,(t=>{Zt(t,(e=>{const i=t.getParticipantId()||this.localUserID,s=t.getType(),n=Ms.Audio?new Ys(i,t.stream):new Js(i,t.stream);o(t,!0),this.dispatchEvent(n);const a=this.tracks.get(i);if(a){const e=a.get(s);e&&(a.delete(s),0===a.size&&this.tracks.delete(i),e!==t&&e.dispose())}}))}));const r=ut(this,"conferenceJoined");this.conference.join(e),await r}}async identify(t){this.localUserName=t,this.conference.setDisplayName(function(t){try{return encodeURIComponent(t)}catch(e){return t}}(t))}async tryRemoveTrack(t,e){const i=this.tracks.get(t),s=e===Ms.Video?Js:Ys;if(i){const n=i.get(e);if(n){this.dispatchEvent(new s(t,n.stream)),i.delete(e);try{this.conference&&n.isLocal&&this.conference.removeTrack(n)}catch(t){console.warn(t)}finally{n.dispose()}}0===i.size&&this.tracks.delete(t)}}async leave(){await super.leave();try{await this.tryRemoveTrack(this.localUserID,Ms.Video),await this.tryRemoveTrack(this.localUserID,Ms.Audio);const t=ut(this,"conferenceLeft");this.conference.leave(),await t}catch(t){console.warn("><> CALLA <>< ---- Failed to leave teleconference.",t)}}async disconnect(){await super.disconnect(),this.conferenceState===Cs.Connected&&await this.leave();const t=ut(this,"serverDisconnected");this.connection.disconnect(),await t}userExists(t){return this.conference&&this.conference.participants&&t in this.conference.participants}getUserNames(){return this.conference?Object.keys(this.conference.participants).map((t=>[t,Ln(this.conference.participants[t].getDisplayName())])):[]}getCurrentMediaTrack(t){if(this.localUserID===Sn)return null;const e=this.tracks.get(this.localUserID);return e?e.get(t):null}async setAudioInputDevice(t){await super.setAudioInputDevice(t);const e=this.getCurrentMediaTrack(Ms.Audio);if(e){const t=this.getNext("audioRemoved",this.localUserID);this.conference.removeTrack(e),await t}if(this.conference&&this.preferredAudioInputID){const t=this.getNext("audioAdded",this.localUserID),e=await JitsiMeetJS.createLocalTracks({devices:["audio"],micDeviceId:this.preferredAudioInputID,constraints:{autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0}});for(const t of e)this.conference.addTrack(t);await t}}async setVideoInputDevice(t){await super.setVideoInputDevice(t);const e=this.getCurrentMediaTrack(Ms.Video);if(e){const t=this.getNext("videoRemoved",this.localUserID);this.conference.removeTrack(e),await t}if(this.conference&&this.preferredVideoInputID){const t=this.getNext("videoAdded",this.localUserID),e=await JitsiMeetJS.createLocalTracks({devices:["video"],cameraDeviceId:this.preferredVideoInputID});for(const t of e)this.conference.addTrack(t);await t}}async getCurrentAudioInputDevice(){const t=this.getCurrentMediaTrack(Ms.Audio),e=(await this.getAudioInputDevices()).filter((e=>null!=t&&e.deviceId===t.getDeviceId()||null==t&&e.deviceId===this.preferredAudioInputID));return 0===e.length?null:e[0]}async getCurrentVideoInputDevice(){const t=this.getCurrentMediaTrack(Ms.Video),e=(await this.getVideoInputDevices()).filter((e=>null!=t&&e.deviceId===t.getDeviceId()||null==t&&e.deviceId===this.preferredVideoInputID));return 0===e.length?null:e[0]}async toggleAudioMuted(){const t=this.getNext("audioMuteStatusChanged",this.localUserID),e=this.getCurrentMediaTrack(Ms.Audio);if(e){e.isMuted()?await e.unmute():await e.mute()}else await this.setPreferredAudioInput(!0);return(await t).muted}async toggleVideoMuted(){const t=this.getNext("videoMuteStatusChanged",this.localUserID);this.getCurrentMediaTrack(Ms.Video)?await this.setVideoInputDevice(null):await this.setPreferredVideoInput(!0);return(await t).muted}isMediaMuted(t){const e=this.getCurrentMediaTrack(t);return null==e||e.isMuted()}async getAudioMuted(){return this.isMediaMuted(Ms.Audio)}async getVideoMuted(){return this.isMediaMuted(Ms.Video)}}var Tn;!function(t){t.InConference="in-conference",t.JoiningConference="joining-conference",t.Connected="connected",t.Connecting="connecting",t.Prepaired="prepaired",t.Prepairing="prepairing",t.Unprepared="unprepaired"}(Tn||(Tn={}));const Rn=new Xt;class Un extends xs{constructor(t,e,...i){super(t,e),this.width=null,this.alts=i}random(){const t=Math.floor(Math.random()*this.alts.length);if(t<0)return null;const e=this.alts[t];return e instanceof Un?e.random():e}contains(t){if(super.contains(t))return!0;for(const e of this.alts)if(e.contains(t))return!0;return!1}}function Qn(t,e,i=null){return new xs(t,e,i)}function Nn(t,e,i=null){return new xs(t+Kn.value,e,i)}function Hn(t,e,...i){return new Un(t,e,...i)}function zn(t,e,i,...s){const n=Object.values(i).filter((t=>t instanceof xs)).map((t=>t)).concat(...s);return Object.assign(Hn(t,e,...n),i)}function Gn(t,e,i=null){if(t instanceof Array)return t.map((t=>Gn(t,e)));if(t instanceof Un){const{value:i,desc:s}=Gn(Qn(t.value,t.desc),e);return Hn(i,s,...Gn(t.alts,e))}return e instanceof Array?e.map((e=>Gn(t,e))):Qn(t.value+e.value,i||t.desc+": "+e.desc)}function jn(t,e,i=null){if(t instanceof Array)return t.map((t=>jn(t,e)));if(t instanceof Un){const{value:i,desc:s}=jn(Qn(t.value,t.desc),e);return Hn(i,s,...jn(t.alts,e))}return e instanceof Array?e.map((e=>jn(t,e))):Qn(t.value+qn.value+e.value,i||t.desc+": "+e.desc)}function Wn(t,e,...i){const s=Qn(t,e),n=Gn(s,sa),a=Gn(s,na),o=Gn(s,aa),r=Gn(s,oa),h=Gn(s,ra);return zn(s.value,s.desc,{default:s,light:n,mediumLight:a,medium:o,mediumDark:r,dark:h},...i)}function Vn(t){const e=jn(t,ea),i=jn(t,ta);return zn(t.value,t.desc,{default:t,man:e,woman:i})}function Zn(t,e){return Vn(Wn(t,e))}function Yn(t,e,...i){const s=Wn(t,e),n=jn(s,ha),a=jn(s,ca),o=jn(s,Aa),r=jn(s,la);return zn(s.value,s.desc,{default:s,red:n,curly:a,white:o,bald:r},...i)}function Xn(t,e){const i=Qn(t.value,e),s=jn(Ka.default,i),n=jn(io.default,i);return zn(t.value,t.desc,{symbol:t,men:s,women:n})}const Jn=Qn("","Variation Selector-15: text style"),Kn=Qn("","Variation Selector-16: emoji style"),qn=Qn("","Zero Width Joiner"),$n=Qn("","Combining Enclosing Keycap"),ta=Nn("","Female"),ea=Nn("","Male"),ia=Nn("","Transgender Symbol"),sa=Qn("","Light Skin Tone"),na=Qn("","Medium-Light Skin Tone"),aa=Qn("","Medium Skin Tone"),oa=Qn("","Medium-Dark Skin Tone"),ra=Qn("","Dark Skin Tone"),ha=Qn("","Red Hair"),ca=Qn("","Curly Hair"),Aa=Qn("","White Hair"),la=Qn("","Bald"),ua=Zn("","Frowning"),da=Zn("","Pouting"),ga=Zn("","Gesturing NO"),pa=Zn("","Gesturing OK"),ma=Zn("","Tipping Hand"),fa=Zn("","Raising Hand"),va=Zn("","Bowing"),wa=Zn("","Facepalming"),Ba=Zn("","Shrugging"),ya=Zn("","Can't Hear"),Da=Zn("","Getting Massage"),ba=Zn("","Getting Haircut"),Ca=Zn("","Construction Worker"),Ma=Zn("","Guard"),Pa=Zn("","Spy"),Ia=(Zn("","Police"),Zn("","Wearing Turban")),xa=Zn("","Superhero"),Ea=Zn("","Supervillain"),Fa=Zn("","Mage"),Sa=Zn("","Fairy"),ka=Zn("","Vampire"),_a=Zn("","Merperson"),La=Zn("","Elf"),Oa=Zn("","Walking"),Ta=Zn("","Standing"),Ra=Zn("","Kneeling"),Ua=Zn("","Running"),Qa=Hn("Gestures","Gestures",ua,da,ga,pa,ma,fa,va,wa,Ba,ya,Da,ba),Na=Wn("","Baby"),Ha=Wn("","Child"),za=Wn("","Boy"),Ga=Wn("","Girl"),ja=zn(Ha.value,Ha.desc,{default:Ha,male:za,female:Ga}),Wa=Zn("","Blond Person"),Va=Wn("","Person",Wa.default,Ia.default),Za=Wn("","Bearded Man"),Ya=Nn("","Man in Suit, Levitating"),Xa=Wn("","Man With Chinese Cap"),Ja=Wn("","Man in Tuxedo"),Ka=Yn("","Man",Wa.man,Za,Ya,Xa,Ia.man,Ja),qa=Wn("","Pregnant Woman"),$a=Wn("","Breast-Feeding"),to=Wn("","Woman With Headscarf"),eo=Wn("","Bride With Veil"),io=Yn("","Woman",Wa.woman,qa,$a,to,Ia.woman,eo),so=zn(Va.value,"Adult",{default:Va,male:Ka,female:io}),no=Wn("","Older Person"),ao=Wn("","Old Man"),oo=Wn("","Old Woman"),ro=zn(no.value,no.desc,{default:no,male:ao,female:oo}),ho=Nn("","Medical"),co=Xn(ho,"Health Care"),Ao=Qn("","Graduation Cap"),lo=Xn(Ao,"Student"),uo=Qn("","School"),go=Xn(uo,"Teacher"),po=Nn("","Balance Scale"),mo=Xn(po,"Judge"),fo=Qn("","Sheaf of Rice"),vo=Xn(fo,"Farmer"),wo=Qn("","Cooking"),Bo=Xn(wo,"Cook"),yo=Qn("","Wrench"),Do=Xn(yo,"Mechanic"),bo=Qn("","Factory"),Co=Xn(bo,"Factory Worker"),Mo=Qn("","Briefcase"),Po=Xn(Mo,"Office Worker"),Io=Qn("","Fire Engine"),xo=Xn(Io,"Fire Fighter"),Eo=Qn("","Rocket"),Fo=Xn(Eo,"Astronaut"),So=Nn("","Airplane"),ko=Xn(So,"Pilot"),_o=Qn("","Artist Palette"),Lo=Xn(_o,"Artist"),Oo=Qn("","Microphone"),To=Xn(Oo,"Singer"),Ro=Qn("","Laptop"),Uo=Xn(Ro,"Technologist"),Qo=Qn("","Microscope"),No=Xn(Qo,"Scientist"),Ho=Qn("","Crown"),zo=Wn("","Prince"),Go=Wn("","Princess"),jo=zn(Ho.value,Ho.desc,{symbol:Ho,male:zo,female:Go}),Wo=zn("Roles","Depictions of people working",{healthCareWorkers:co,students:lo,teachers:go,judges:mo,farmers:vo,cooks:Bo,mechanics:Do,factoryWorkers:Co,officeWorkers:Po,scientists:No,technologists:Uo,singers:To,artists:Lo,pilots:ko,astronauts:Fo,fireFighters:xo,spies:Pa,guards:Ma,constructionWorkers:Ca,royalty:jo}),Vo=Wn("","Cherub"),Zo=Wn("","Santa Claus"),Yo=Wn("","Mrs. Claus"),Xo=Vn(Qn("","Genie")),Jo=Vn(Qn("","Zombie")),Ko=zn("Fantasy","Depictions of fantasy characters",{cherub:Vo,santaClaus:Zo,mrsClaus:Yo,superheroes:xa,supervillains:Ea,mages:Fa,fairies:Sa,vampires:ka,merpeople:_a,elves:La,genies:Xo,zombies:Jo}),qo=Qn("","Safety Vest"),$o=Qn("","Probing Cane"),tr=Xn($o,"Probing"),er=Qn("","Motorized Wheelchair"),ir=Xn(er,"In Motorized Wheelchair"),sr=Qn("","Manual Wheelchair"),nr=Xn(sr,"In Manual Wheelchair"),ar=Wn("","Man Dancing"),or=Wn("","Woman Dancing"),rr=zn(ar.value,"Dancing",{male:ar,female:or}),hr=Zn("","Juggler"),cr=Zn("","Climber"),Ar=Qn("","Fencer"),lr=Wn("","Jockey"),ur=Nn("","Skier"),dr=Wn("","Snowboarder"),gr=Zn(""+Kn.value,"Golfer"),pr=Zn("","Surfing"),mr=Zn("","Rowing Boat"),fr=Zn("","Swimming"),vr=Zn(""+Kn.value,"Basket Baller"),wr=Zn(""+Kn.value,"Weight Lifter"),Br=Zn("","Biker"),yr=Zn("","Mountain Biker"),Dr=Zn("","Cartwheeler"),br=Vn(Qn("","Wrestler")),Cr=Zn("","Water Polo Player"),Mr=Zn("","Hand Baller"),Pr=zn("In Motion","Depictions of people in motion",{walking:Oa,standing:Ta,kneeling:Ra,withProbingCane:tr,inMotorizedWheelchair:ir,inManualWheelchair:nr,dancers:rr,jugglers:hr,climbers:cr,fencer:Ar,jockeys:lr,skier:ur,snowboarders:dr,golfers:gr,surfers:pr,rowers:mr,swimmers:fr,runners:Ua,basketballers:vr,weightLifters:wr,bikers:Br,mountainBikers:yr,cartwheelers:Dr,wrestlers:br,waterPoloers:Cr,handBallers:Mr}),Ir=Zn("","In Lotus Position"),xr=Wn("","In Bath"),Er=Wn("","In Bed"),Fr=Zn("","In Sauna"),Sr=zn("Resting","Depictions of people at rest",{inLotusPosition:Ir,inBath:xr,inBed:Er,inSauna:Fr}),kr=Hn(Na.value,Na.desc,Na,Vo),_r=zn("People","People",{babies:kr,children:ja,adults:so,elderly:ro}),Lr=zn("All People","All People",{people:_r,gestures:Qa,inMotion:Pr,resting:Sr,roles:Wo,fantasy:Ko}),Or=Qn("","Ogre"),Tr=Qn("","Goblin"),Rr=Qn("","Ghost"),Ur=Qn("","Alien"),Qr=Qn("","Alien Monster"),Nr=Qn("","Angry Face with Horns"),Hr=Qn("","Skull"),zr=Qn("","Pile of Poo"),Gr=Qn("","Grinning Face"),jr=Qn("","Beaming Face with Smiling Eyes"),Wr=Qn("","Face with Tears of Joy"),Vr=Qn("","Grinning Face with Big Eyes"),Zr=Qn("","Grinning Face with Smiling Eyes"),Yr=Qn("","Grinning Face with Sweat"),Xr=Qn("","Grinning Squinting Face"),Jr=Qn("","Smiling Face with Halo"),Kr=Qn("","Smiling Face with Horns"),qr=Qn("","Winking Face"),$r=Qn("","Smiling Face with Smiling Eyes"),th=Qn("","Face Savoring Food"),eh=Qn("","Relieved Face"),ih=Qn("","Smiling Face with Heart-Eyes"),sh=Qn("","Smiling Face with Sunglasses"),nh=Qn("","Smirking Face"),ah=Qn("","Neutral Face"),oh=Qn("","Expressionless Face"),rh=Qn("","Unamused Face"),hh=Qn("","Downcast Face with Sweat"),ch=Qn("","Pensive Face"),Ah=Qn("","Confused Face"),lh=Qn("","Confounded Face"),uh=Qn("","Kissing Face"),dh=Qn("","Face Blowing a Kiss"),gh=Qn("","Kissing Face with Smiling Eyes"),ph=Qn("","Kissing Face with Closed Eyes"),mh=Qn("","Face with Tongue"),fh=Qn("","Winking Face with Tongue"),vh=Qn("","Squinting Face with Tongue"),wh=Qn("","Disappointed Face"),Bh=Qn("","Worried Face"),yh=Qn("","Angry Face"),Dh=Qn("","Pouting Face"),bh=Qn("","Crying Face"),Ch=Qn("","Persevering Face"),Mh=Qn("","Face with Steam From Nose"),Ph=Qn("","Sad but Relieved Face"),Ih=Qn("","Frowning Face with Open Mouth"),xh=Qn("","Anguished Face"),Eh=Qn("","Fearful Face"),Fh=Qn("","Weary Face"),Sh=Qn("","Sleepy Face"),kh=Qn("","Tired Face"),_h=Qn("","Grimacing Face"),Lh=Qn("","Loudly Crying Face"),Oh=Qn("","Face with Open Mouth"),Th=Qn("","Hushed Face"),Rh=Qn("","Anxious Face with Sweat"),Uh=Qn("","Face Screaming in Fear"),Qh=Qn("","Astonished Face"),Nh=Qn("","Flushed Face"),Hh=Qn("","Sleeping Face"),zh=Qn("","Dizzy Face"),Gh=Qn("","Face Without Mouth"),jh=Qn("","Face with Medical Mask"),Wh=Qn("","Grinning Cat with Smiling Eyes"),Vh=Qn("","Cat with Tears of Joy"),Zh=Qn("","Grinning Cat"),Yh=Qn("","Smiling Cat with Heart-Eyes"),Xh=Qn("","Cat with Wry Smile"),Jh=Qn("","Kissing Cat"),Kh=Qn("","Pouting Cat"),qh=Qn("","Crying Cat"),$h=Qn("","Weary Cat"),tc=Qn("","Slightly Frowning Face"),ec=Qn("","Slightly Smiling Face"),ic=Qn("","Upside-Down Face"),sc=Qn("","Face with Rolling Eyes"),nc=Qn("","See-No-Evil Monkey"),ac=Qn("","Hear-No-Evil Monkey"),oc=Qn("","Speak-No-Evil Monkey"),rc=Qn("","Zipper-Mouth Face"),hc=Qn("","Money-Mouth Face"),cc=Qn("","Face with Thermometer"),Ac=Qn("","Nerd Face"),lc=Qn("","Thinking Face"),uc=Qn("","Face with Head-Bandage"),dc=Qn("","Robot"),gc=Qn("","Hugging Face"),pc=Qn("","Cowboy Hat Face"),mc=Qn("","Clown Face"),fc=Qn("","Nauseated Face"),vc=Qn("","Rolling on the Floor Laughing"),wc=Qn("","Drooling Face"),Bc=Qn("","Lying Face"),yc=Qn("","Sneezing Face"),Dc=Qn("","Face with Raised Eyebrow"),bc=Qn("","Star-Struck"),Cc=Qn("","Zany Face"),Mc=Qn("","Shushing Face"),Pc=Qn("","Face with Symbols on Mouth"),Ic=Qn("","Face with Hand Over Mouth"),xc=Qn("","Face Vomiting"),Ec=Qn("","Exploding Head"),Fc=Qn("","Smiling Face with Hearts"),Sc=Qn("","Yawning Face"),kc=Qn("","Partying Face"),_c=Qn("","Woozy Face"),Lc=Qn("","Hot Face"),Oc=Qn("","Cold Face"),Tc=Qn("","Pleading Face"),Rc=Qn("","Face with Monocle"),Uc=Nn("","Skull and Crossbones"),Qc=Nn("","Frowning Face"),Nc=Nn("","Smiling Face"),Hc=Nn("","Speaking Head"),zc=Qn("","Bust in Silhouette"),Gc=zn("Faces","Round emoji faces",{ogre:Or,goblin:Tr,ghost:Rr,alien:Ur,alienMonster:Qr,angryFaceWithHorns:Nr,skull:Hr,pileOfPoo:zr,grinningFace:Gr,beamingFaceWithSmilingEyes:jr,faceWithTearsOfJoy:Wr,grinningFaceWithBigEyes:Vr,grinningFaceWithSmilingEyes:Zr,grinningFaceWithSweat:Yr,grinningSquitingFace:Xr,smillingFaceWithHalo:Jr,smilingFaceWithHorns:Kr,winkingFace:qr,smilingFaceWithSmilingEyes:$r,faceSavoringFood:th,relievedFace:eh,smilingFaceWithHeartEyes:ih,smilingFaceWithSunglasses:sh,smirkingFace:nh,neutralFace:ah,expressionlessFace:oh,unamusedFace:rh,downcastFaceWithSweat:hh,pensiveFace:ch,confusedFace:Ah,confoundedFace:lh,kissingFace:uh,faceBlowingAKiss:dh,kissingFaceWithSmilingEyes:gh,kissingFaceWithClosedEyes:ph,faceWithTongue:mh,winkingFaceWithTongue:fh,squintingFaceWithTongue:vh,disappointedFace:wh,worriedFace:Bh,angryFace:yh,poutingFace:Dh,cryingFace:bh,perseveringFace:Ch,faceWithSteamFromNose:Mh,sadButRelievedFace:Ph,frowningFaceWithOpenMouth:Ih,anguishedFace:xh,fearfulFace:Eh,wearyFace:Fh,sleepyFace:Sh,tiredFace:kh,grimacingFace:_h,loudlyCryingFace:Lh,faceWithOpenMouth:Oh,hushedFace:Th,anxiousFaceWithSweat:Rh,faceScreamingInFear:Uh,astonishedFace:Qh,flushedFace:Nh,sleepingFace:Hh,dizzyFace:zh,faceWithoutMouth:Gh,faceWithMedicalMask:jh,grinningCatWithSmilingEyes:Wh,catWithTearsOfJoy:Vh,grinningCat:Zh,smilingCatWithHeartEyes:Yh,catWithWrySmile:Xh,kissingCat:Jh,poutingCat:Kh,cryingCat:qh,wearyCat:$h,slightlyFrowningFace:tc,slightlySmilingFace:ec,updisdeDownFace:ic,faceWithRollingEyes:sc,seeNoEvilMonkey:nc,hearNoEvilMonkey:ac,speakNoEvilMonkey:oc,zipperMouthFace:rc,moneyMouthFace:hc,faceWithThermometer:cc,nerdFace:Ac,thinkingFace:lc,faceWithHeadBandage:uc,robot:dc,huggingFace:gc,cowboyHatFace:pc,clownFace:mc,nauseatedFace:fc,rollingOnTheFloorLaughing:vc,droolingFace:wc,lyingFace:Bc,sneezingFace:yc,faceWithRaisedEyebrow:Dc,starStruck:bc,zanyFace:Cc,shushingFace:Mc,faceWithSymbolsOnMouth:Pc,faceWithHandOverMouth:Ic,faceVomitting:xc,explodingHead:Ec,smilingFaceWithHearts:Fc,yawningFace:Sc,partyingFace:kc,woozyFace:_c,hotFace:Lc,coldFace:Oc,pleadingFace:Tc,faceWithMonocle:Rc,skullAndCrossbones:Uc,frowningFace:Qc,smilingFace:Nc,speakingHead:Hc,bust:zc}),jc=Qn("","Kiss Mark"),Wc=Qn("","Love Letter"),Vc=Qn("","Beating Heart"),Zc=Qn("","Broken Heart"),Yc=Qn("","Two Hearts"),Xc=Qn("","Sparkling Heart"),Jc=Qn("","Growing Heart"),Kc=Qn("","Heart with Arrow"),qc=Qn("","Blue Heart"),$c=Qn("","Green Heart"),tA=Qn("","Yellow Heart"),eA=Qn("","Purple Heart"),iA=Qn("","Heart with Ribbon"),sA=Qn("","Revolving Hearts"),nA=Qn("","Heart Decoration"),aA=Qn("","Black Heart"),oA=Qn("","White Heart"),rA=Qn("","Brown Heart"),hA=Qn("","Orange Heart"),cA=Nn("","Heart Exclamation"),AA=Nn("","Red Heart"),lA=zn("Love","Hearts and kisses",{kissMark:jc,loveLetter:Wc,beatingHeart:Vc,brokenHeart:Zc,twoHearts:Yc,sparklingHeart:Xc,growingHeart:Jc,heartWithArrow:Kc,blueHeart:qc,greenHeart:$c,yellowHeart:tA,purpleHeart:eA,heartWithRibbon:iA,revolvingHearts:sA,heartDecoration:nA,blackHeart:aA,whiteHeart:oA,brownHeart:rA,orangeHeart:hA,heartExclamation:cA,redHeart:AA}),uA=Qn("","Anger Symbol"),dA=Qn("","Bomb"),gA=Qn("","Zzz"),pA=Qn("","Collision"),mA=Qn("","Sweat Droplets"),fA=Qn("","Dashing Away"),vA=Qn("","Dizzy"),wA=Qn("","Speech Balloon"),BA=Qn("","Thought Balloon"),yA=Qn("","Hundred Points"),DA=Nn("","Hole"),bA=Nn("","Left Speech Bubble"),CA=Nn("","Right Speech Bubble"),MA=Nn("","Conversation Bubbles 2"),PA=Nn("","Conversation Bubbles 3"),IA=Nn("","Left Thought Bubble"),xA=Nn("","Right Thought Bubble"),EA=Nn("","Left Anger Bubble"),FA=Nn("","Right Anger Bubble"),SA=Nn("","Anger Bubble"),kA=Nn("","Anger Bubble Lightning"),_A=Nn("","Lightning Bolt"),LA=Hn("Cartoon","Cartoon symbols",uA,dA,gA,pA,mA,fA,vA,wA,BA,yA,DA,bA,CA,MA,PA,IA,xA,EA,FA,SA,kA,_A),OA=Qn("","Backhand Index Pointing Up"),TA=Qn("","Backhand Index Pointing Down"),RA=Qn("","Backhand Index Pointing Left"),UA=Qn("","Backhand Index Pointing Right"),QA=Qn("","Oncoming Fist"),NA=Qn("","Waving Hand"),HA=Qn("","OK Hand"),zA=Qn("","Thumbs Up"),GA=Qn("","Thumbs Down"),jA=Qn("","Clapping Hands"),WA=Qn("","Open Hands"),VA=Qn("","Nail Polish"),ZA=Nn("","Hand with Fingers Splayed"),YA=Nn("","Hand with Fingers Splayed 2"),XA=Qn("","Thumbs Up 2"),JA=Qn("","Thumbs Down 2"),KA=Qn("","Peace Fingers"),qA=Qn("","Middle Finger"),$A=Qn("","Vulcan Salute"),tl=Qn("","Hand Pointing Down"),el=Qn("","Hand Pointing Left"),il=Qn("","Hand Pointing Right"),sl=Qn("","Hand Pointing Left 2"),nl=Qn("","Hand Pointing Right 2"),al=Qn("","Index Pointing Left"),ol=Qn("","Index Pointing Right"),rl=Qn("","Index Pointing Up"),hl=Qn("","Index Pointing Down"),cl=Qn("","Index Pointing Up 2"),Al=Qn("","Index Pointing Down 2"),ll=Qn("","Index Pointing Up 3"),ul=Qn("","Index Pointing Down 3"),dl=Qn("","Raising Hands"),gl=Qn("","Folded Hands"),pl=Qn("","Pinched Fingers"),ml=Qn("","Pinching Hand"),fl=Qn("","Sign of the Horns"),vl=Qn("","Call Me Hand"),wl=Qn("","Raised Back of Hand"),Bl=Qn("","Left-Facing Fist"),yl=Qn("","Right-Facing Fist"),Dl=Qn("","Handshake"),bl=Qn("","Crossed Fingers"),Cl=Qn("","Love-You Gesture"),Ml=Qn("","Palms Up Together"),Pl=Nn("","Index Pointing Up 4"),Il=Qn("","Raised Fist"),xl=Qn("","Raised Hand"),El=Nn("","Victory Hand"),Fl=Nn("","Writing Hand"),Sl=Hn("Hands","Hands pointing at things",OA,TA,RA,UA,QA,NA,HA,zA,GA,jA,WA,VA,ZA,YA,YA,XA,JA,KA,qA,$A,tl,el,il,sl,nl,al,ol,rl,hl,cl,Al,ll,ul,dl,gl,pl,ml,fl,vl,wl,Bl,yl,Dl,bl,Cl,Ml,Pl,Il,xl,El,Fl),kl=Qn("","Red Circle"),_l=Qn("","Blue Circle"),Ll=Qn("","Large Orange Diamond"),Ol=Qn("","Large Blue Diamond"),Tl=Qn("","Small Orange Diamond"),Rl=Qn("","Small Blue Diamond"),Ul=Qn("","Red Triangle Pointed Up"),Ql=Qn("","Red Triangle Pointed Down"),Nl=Qn("","Orange Circle"),Hl=Qn("","Yellow Circle"),zl=Qn("","Green Circle"),Gl=Qn("","Purple Circle"),jl=Qn("","Brown Circle"),Wl=Qn("","Hollow Red Circle"),Vl=Qn("","White Circle"),Zl=Qn("","Black Circle"),Yl=Qn("","Red Square"),Xl=Qn("","Blue Square"),Jl=Qn("","Orange Square"),Kl=Qn("","Yellow Square"),ql=Qn("","Green Square"),$l=Qn("","Purple Square"),tu=Qn("","Brown Square"),eu=Qn("","Black Square Button"),iu=Qn("","White Square Button"),su=Nn("","Black Small Square"),nu=Nn("","White Small Square"),au=Qn("","White Medium-Small Square"),ou=Qn("","Black Medium-Small Square"),ru=Nn("","White Medium Square"),hu=Nn("","Black Medium Square"),cu=Qn("","Black Large Square"),Au=Qn("","White Large Square"),lu=Qn("","Star"),uu=Qn("","Diamond with a Dot"),du=Hn("Shapes","Colored shapes",kl,_l,Ll,Ol,Tl,Rl,Ul,Ql,Nl,Hl,zl,Gl,jl,Wl,Vl,Zl,Yl,Xl,Jl,Kl,ql,$l,tu,eu,iu,su,nu,au,ou,ru,hu,cu,Au,lu,uu),gu=Nn("","Eye"),pu=jn(gu,bA,"Eye in Speech Bubble"),mu=Hn("Body Parts","General body parts",Qn("","Eyes"),gu,pu,Qn("","Ear"),Qn("","Nose"),Qn("","Mouth"),Qn("","Tongue"),Qn("","Flexed Biceps"),Qn("","Selfie"),Qn("","Bone"),Qn("","Leg"),Qn("","Foot"),Qn("","Tooth"),Qn("","Ear with Hearing Aid"),Qn("","Mechanical Arm"),Qn("","Mechanical Leg"),Qn("","Anatomical Heart"),Qn("","Lungs"),Qn("","Brain")),fu=Nn("","Snowflake"),vu=Qn("","Rainbow"),wu=Hn("Weather","Weather",Qn("","Sunrise Over Mountains"),Qn("","Sunrise"),Qn("","Cityscape at Dusk"),Qn("","Sunset"),Qn("","Night with Stars"),Qn("","Closed Umbrella"),Nn("","Umbrella"),Nn("","Umbrella with Rain Drops"),Nn("","Snowman"),Qn("","Snowman Without Snow"),Nn("","Sun"),Nn("","Cloud"),Nn("","Sun Behind Small Cloud"),Qn("","Sun Behind Cloud"),Nn("","Sun Behind Large Cloud"),Nn("","Sun Behind Rain Cloud"),Nn("","Cloud with Rain"),Nn("","Cloud with Snow"),Nn("","Cloud with Lightning"),Nn("","Cloud with Lightning and Rain"),fu,Qn("","Cyclone"),Nn("","Tornado"),Nn("","Wind Face"),Qn("","Water Wave"),Nn("","Fog"),Qn("","Foggy"),vu,Nn("","Thermometer")),Bu=Qn("","Cat"),yu=jn(Bu,cu,"Black Cat"),Du=Qn("","Dog"),bu=jn(Du,qo,"Service Dog"),Cu=Qn("","Bear"),Mu=jn(Cu,fu,"Polar Bear"),Pu=Hn("Animals","Animals and insects",Qn("","Rat"),Qn("","Mouse"),Qn("","Ox"),Qn("","Water Buffalo"),Qn("","Cow"),Qn("","Tiger"),Qn("","Leopard"),Qn("","Rabbit"),Bu,yu,Qn("","Dragon"),Qn("","Crocodile"),Qn("","Whale"),Qn("","Snail"),Qn("","Snake"),Qn("","Horse"),Qn("","Ram"),Qn("","Goat"),Qn("","Ewe"),Qn("","Monkey"),Qn("","Rooster"),Qn("","Chicken"),Du,bu,Qn("","Pig"),Qn("","Boar"),Qn("","Elephant"),Qn("","Octopus"),Qn("","Spiral Shell"),Qn("","Bug"),Qn("","Ant"),Qn("","Honeybee"),Qn("","Lady Beetle"),Qn("","Fish"),Qn("","Tropical Fish"),Qn("","Blowfish"),Qn("","Turtle"),Qn("","Hatching Chick"),Qn("","Baby Chick"),Qn("","Front-Facing Baby Chick"),Qn("","Bird"),Qn("","Penguin"),Qn("","Koala"),Qn("","Poodle"),Qn("","Camel"),Qn("","Two-Hump Camel"),Qn("","Dolphin"),Qn("","Mouse Face"),Qn("","Cow Face"),Qn("","Tiger Face"),Qn("","Rabbit Face"),Qn("","Cat Face"),Qn("","Dragon Face"),Qn("","Spouting Whale"),Qn("","Horse Face"),Qn("","Monkey Face"),Qn("","Dog Face"),Qn("","Pig Face"),Qn("","Frog"),Qn("","Hamster"),Qn("","Wolf"),Cu,Mu,Qn("","Panda"),Qn("","Pig Nose"),Qn("","Paw Prints"),Nn("","Chipmunk"),Nn("","Dove"),Nn("","Spider"),Nn("","Spider Web"),Qn("","Lion"),Qn("","Scorpion"),Qn("","Turkey"),Qn("","Unicorn"),Qn("","Eagle"),Qn("","Duck"),Qn("","Bat"),Qn("","Shark"),Qn("","Owl"),Qn("","Fox"),Qn("","Butterfly"),Qn("","Deer"),Qn("","Gorilla"),Qn("","Lizard"),Qn("","Rhinoceros"),Qn("","Giraffe"),Qn("","Zebra"),Qn("","Hedgehog"),Qn("","Sauropod"),Qn("","T-Rex"),Qn("","Cricket"),Qn("","Kangaroo"),Qn("","Llama"),Qn("","Peacock"),Qn("","Hippopotamus"),Qn("","Parrot"),Qn("","Raccoon"),Qn("","Mosquito"),Qn("","Microbe"),Qn("","Badger"),Qn("","Swan"),Qn("","Sloth"),Qn("","Otter"),Qn("","Orangutan"),Qn("","Skunk"),Qn("","Flamingo"),Qn("","Guide Dog")),Iu=Qn("","White Flower"),xu=Hn("Plants","Flowers, trees, and things",Qn("","Seedling"),Qn("","Evergreen Tree"),Qn("","Deciduous Tree"),Qn("","Palm Tree"),Qn("","Cactus"),Qn("","Tulip"),Qn("","Cherry Blossom"),Qn("","Rose"),Qn("","Hibiscus"),Qn("","Sunflower"),Qn("","Blossom"),fo,Qn("","Herb"),Qn("","Four Leaf Clover"),Qn("","Maple Leaf"),Qn("","Fallen Leaf"),Qn("","Leaf Fluttering in Wind"),Nn("","Rosette"),Qn("","Bouquet"),Iu,Qn("","Wilted Flower"),Nn("","Shamrock")),Eu=Qn("","Banana"),Fu=Hn("Food","Food, drink, and utensils",Qn("","Hot Dog"),Qn("","Taco"),Qn("","Burrito"),Qn("","Chestnut"),Nn("","Hot Pepper"),Qn("","Ear of Corn"),Qn("","Mushroom"),Qn("","Tomato"),Qn("","Eggplant"),Qn("","Grapes"),Qn("","Melon"),Qn("","Watermelon"),Qn("","Tangerine"),Qn("","Lemon"),Eu,Qn("","Pineapple"),Qn("","Red Apple"),Qn("","Green Apple"),Qn("","Pear"),Qn("","Peach"),Qn("","Cherries"),Qn("","Strawberry"),Qn("","Hamburger"),Qn("","Pizza"),Qn("","Meat on Bone"),Qn("","Poultry Leg"),Qn("","Rice Cracker"),Qn("","Rice Ball"),Qn("","Cooked Rice"),Qn("","Curry Rice"),Qn("","Steaming Bowl"),Qn("","Spaghetti"),Qn("","Bread"),Qn("","French Fries"),Qn("","Roasted Sweet Potato"),Qn("","Dango"),Qn("","Oden"),Qn("","Sushi"),Qn("","Fried Shrimp"),Qn("","Fish Cake with Swirl"),Qn("","Bento Box"),Qn("","Pot of Food"),wo,Qn("","Popcorn"),Qn("","Croissant"),Qn("","Avocado"),Qn("","Cucumber"),Qn("","Bacon"),Qn("","Potato"),Qn("","Carrot"),Qn("","Baguette Bread"),Qn("","Green Salad"),Qn("","Shallow Pan of Food"),Qn("","Stuffed Flatbread"),Qn("","Egg"),Qn("","Peanuts"),Qn("","Kiwi Fruit"),Qn("","Pancakes"),Qn("","Dumpling"),Qn("","Fortune Cookie"),Qn("","Takeout Box"),Qn("","Bowl with Spoon"),Qn("","Coconut"),Qn("","Broccoli"),Qn("","Pretzel"),Qn("","Cut of Meat"),Qn("","Sandwich"),Qn("","Canned Food"),Qn("","Leafy Green"),Qn("","Mango"),Qn("","Moon Cake"),Qn("","Bagel"),Qn("","Crab"),Qn("","Shrimp"),Qn("","Squid"),Qn("","Lobster"),Qn("","Oyster"),Qn("","Cheese Wedge"),Qn("","Salt"),Qn("","Garlic"),Qn("","Onion"),Qn("","Falafel"),Qn("","Waffle"),Qn("","Butter"),Qn("","Soft Ice Cream"),Qn("","Shaved Ice"),Qn("","Ice Cream"),Qn("","Doughnut"),Qn("","Cookie"),Qn("","Chocolate Bar"),Qn("","Candy"),Qn("","Lollipop"),Qn("","Custard"),Qn("","Honey Pot"),Qn("","Shortcake"),Qn("","Birthday Cake"),Qn("","Pie"),Qn("","Cupcake"),Qn("","Teacup Without Handle"),Qn("","Sake"),Qn("","Wine Glass"),Qn("","Cocktail Glass"),Qn("","Tropical Drink"),Qn("","Beer Mug"),Qn("","Clinking Beer Mugs"),Qn("","Baby Bottle"),Qn("","Bottle with Popping Cork"),Qn("","Clinking Glasses"),Qn("","Tumbler Glass"),Qn("","Glass of Milk"),Qn("","Cup with Straw"),Qn("","Beverage Box"),Qn("","Mate"),Qn("","Ice"),Qn("","Hot Beverage"),Qn("","Fork and Knife"),Nn("","Fork and Knife with Plate"),Qn("","Amphora"),Qn("","Kitchen Knife"),Qn("","Spoon"),Qn("","Chopsticks")),Su=(Hn("National Flags","Flags of countries from around the world",Qn("","Flag: Ascension Island"),Qn("","Flag: Andorra"),Qn("","Flag: United Arab Emirates"),Qn("","Flag: Afghanistan"),Qn("","Flag: Antigua & Barbuda"),Qn("","Flag: Anguilla"),Qn("","Flag: Albania"),Qn("","Flag: Armenia"),Qn("","Flag: Angola"),Qn("","Flag: Antarctica"),Qn("","Flag: Argentina"),Qn("","Flag: American Samoa"),Qn("","Flag: Austria"),Qn("","Flag: Australia"),Qn("","Flag: Aruba"),Qn("","Flag: land Islands"),Qn("","Flag: Azerbaijan"),Qn("","Flag: Bosnia & Herzegovina"),Qn("","Flag: Barbados"),Qn("","Flag: Bangladesh"),Qn("","Flag: Belgium"),Qn("","Flag: Burkina Faso"),Qn("","Flag: Bulgaria"),Qn("","Flag: Bahrain"),Qn("","Flag: Burundi"),Qn("","Flag: Benin"),Qn("","Flag: St. Barthlemy"),Qn("","Flag: Bermuda"),Qn("","Flag: Brunei"),Qn("","Flag: Bolivia"),Qn("","Flag: Caribbean Netherlands"),Qn("","Flag: Brazil"),Qn("","Flag: Bahamas"),Qn("","Flag: Bhutan"),Qn("","Flag: Bouvet Island"),Qn("","Flag: Botswana"),Qn("","Flag: Belarus"),Qn("","Flag: Belize"),Qn("","Flag: Canada"),Qn("","Flag: Cocos (Keeling) Islands"),Qn("","Flag: Congo - Kinshasa"),Qn("","Flag: Central African Republic"),Qn("","Flag: Congo - Brazzaville"),Qn("","Flag: Switzerland"),Qn("","Flag: Cte dIvoire"),Qn("","Flag: Cook Islands"),Qn("","Flag: Chile"),Qn("","Flag: Cameroon"),Qn("","Flag: China"),Qn("","Flag: Colombia"),Qn("","Flag: Clipperton Island"),Qn("","Flag: Costa Rica"),Qn("","Flag: Cuba"),Qn("","Flag: Cape Verde"),Qn("","Flag: Curaao"),Qn("","Flag: Christmas Island"),Qn("","Flag: Cyprus"),Qn("","Flag: Czechia"),Qn("","Flag: Germany"),Qn("","Flag: Diego Garcia"),Qn("","Flag: Djibouti"),Qn("","Flag: Denmark"),Qn("","Flag: Dominica"),Qn("","Flag: Dominican Republic"),Qn("","Flag: Algeria"),Qn("","Flag: Ceuta & Melilla"),Qn("","Flag: Ecuador"),Qn("","Flag: Estonia"),Qn("","Flag: Egypt"),Qn("","Flag: Western Sahara"),Qn("","Flag: Eritrea"),Qn("","Flag: Spain"),Qn("","Flag: Ethiopia"),Qn("","Flag: European Union"),Qn("","Flag: Finland"),Qn("","Flag: Fiji"),Qn("","Flag: Falkland Islands"),Qn("","Flag: Micronesia"),Qn("","Flag: Faroe Islands"),Qn("","Flag: France"),Qn("","Flag: Gabon"),Qn("","Flag: United Kingdom"),Qn("","Flag: Grenada"),Qn("","Flag: Georgia"),Qn("","Flag: French Guiana"),Qn("","Flag: Guernsey"),Qn("","Flag: Ghana"),Qn("","Flag: Gibraltar"),Qn("","Flag: Greenland"),Qn("","Flag: Gambia"),Qn("","Flag: Guinea"),Qn("","Flag: Guadeloupe"),Qn("","Flag: Equatorial Guinea"),Qn("","Flag: Greece"),Qn("","Flag: South Georgia & South Sandwich Islands"),Qn("","Flag: Guatemala"),Qn("","Flag: Guam"),Qn("","Flag: Guinea-Bissau"),Qn("","Flag: Guyana"),Qn("","Flag: Hong Kong SAR China"),Qn("","Flag: Heard & McDonald Islands"),Qn("","Flag: Honduras"),Qn("","Flag: Croatia"),Qn("","Flag: Haiti"),Qn("","Flag: Hungary"),Qn("","Flag: Canary Islands"),Qn("","Flag: Indonesia"),Qn("","Flag: Ireland"),Qn("","Flag: Israel"),Qn("","Flag: Isle of Man"),Qn("","Flag: India"),Qn("","Flag: British Indian Ocean Territory"),Qn("","Flag: Iraq"),Qn("","Flag: Iran"),Qn("","Flag: Iceland"),Qn("","Flag: Italy"),Qn("","Flag: Jersey"),Qn("","Flag: Jamaica"),Qn("","Flag: Jordan"),Qn("","Flag: Japan"),Qn("","Flag: Kenya"),Qn("","Flag: Kyrgyzstan"),Qn("","Flag: Cambodia"),Qn("","Flag: Kiribati"),Qn("","Flag: Comoros"),Qn("","Flag: St. Kitts & Nevis"),Qn("","Flag: North Korea"),Qn("","Flag: South Korea"),Qn("","Flag: Kuwait"),Qn("","Flag: Cayman Islands"),Qn("","Flag: Kazakhstan"),Qn("","Flag: Laos"),Qn("","Flag: Lebanon"),Qn("","Flag: St. Lucia"),Qn("","Flag: Liechtenstein"),Qn("","Flag: Sri Lanka"),Qn("","Flag: Liberia"),Qn("","Flag: Lesotho"),Qn("","Flag: Lithuania"),Qn("","Flag: Luxembourg"),Qn("","Flag: Latvia"),Qn("","Flag: Libya"),Qn("","Flag: Morocco"),Qn("","Flag: Monaco"),Qn("","Flag: Moldova"),Qn("","Flag: Montenegro"),Qn("","Flag: St. Martin"),Qn("","Flag: Madagascar"),Qn("","Flag: Marshall Islands"),Qn("","Flag: North Macedonia"),Qn("","Flag: Mali"),Qn("","Flag: Myanmar (Burma)"),Qn("","Flag: Mongolia"),Qn("","Flag: Macao Sar China"),Qn("","Flag: Northern Mariana Islands"),Qn("","Flag: Martinique"),Qn("","Flag: Mauritania"),Qn("","Flag: Montserrat"),Qn("","Flag: Malta"),Qn("","Flag: Mauritius"),Qn("","Flag: Maldives"),Qn("","Flag: Malawi"),Qn("","Flag: Mexico"),Qn("","Flag: Malaysia"),Qn("","Flag: Mozambique"),Qn("","Flag: Namibia"),Qn("","Flag: New Caledonia"),Qn("","Flag: Niger"),Qn("","Flag: Norfolk Island"),Qn("","Flag: Nigeria"),Qn("","Flag: Nicaragua"),Qn("","Flag: Netherlands"),Qn("","Flag: Norway"),Qn("","Flag: Nepal"),Qn("","Flag: Nauru"),Qn("","Flag: Niue"),Qn("","Flag: New Zealand"),Qn("","Flag: Oman"),Qn("","Flag: Panama"),Qn("","Flag: Peru"),Qn("","Flag: French Polynesia"),Qn("","Flag: Papua New Guinea"),Qn("","Flag: Philippines"),Qn("","Flag: Pakistan"),Qn("","Flag: Poland"),Qn("","Flag: St. Pierre & Miquelon"),Qn("","Flag: Pitcairn Islands"),Qn("","Flag: Puerto Rico"),Qn("","Flag: Palestinian Territories"),Qn("","Flag: Portugal"),Qn("","Flag: Palau"),Qn("","Flag: Paraguay"),Qn("","Flag: Qatar"),Qn("","Flag: Runion"),Qn("","Flag: Romania"),Qn("","Flag: Serbia"),Qn("","Flag: Russia"),Qn("","Flag: Rwanda"),Qn("","Flag: Saudi Arabia"),Qn("","Flag: Solomon Islands"),Qn("","Flag: Seychelles"),Qn("","Flag: Sudan"),Qn("","Flag: Sweden"),Qn("","Flag: Singapore"),Qn("","Flag: St. Helena"),Qn("","Flag: Slovenia"),Qn("","Flag: Svalbard & Jan Mayen"),Qn("","Flag: Slovakia"),Qn("","Flag: Sierra Leone"),Qn("","Flag: San Marino"),Qn("","Flag: Senegal"),Qn("","Flag: Somalia"),Qn("","Flag: Suriname"),Qn("","Flag: South Sudan"),Qn("","Flag: So Tom & Prncipe"),Qn("","Flag: El Salvador"),Qn("","Flag: Sint Maarten"),Qn("","Flag: Syria"),Qn("","Flag: Eswatini"),Qn("","Flag: Tristan Da Cunha"),Qn("","Flag: Turks & Caicos Islands"),Qn("","Flag: Chad"),Qn("","Flag: French Southern Territories"),Qn("","Flag: Togo"),Qn("","Flag: Thailand"),Qn("","Flag: Tajikistan"),Qn("","Flag: Tokelau"),Qn("","Flag: Timor-Leste"),Qn("","Flag: Turkmenistan"),Qn("","Flag: Tunisia"),Qn("","Flag: Tonga"),Qn("","Flag: Turkey"),Qn("","Flag: Trinidad & Tobago"),Qn("","Flag: Tuvalu"),Qn("","Flag: Taiwan"),Qn("","Flag: Tanzania"),Qn("","Flag: Ukraine"),Qn("","Flag: Uganda"),Qn("","Flag: U.S. Outlying Islands"),Qn("","Flag: United Nations"),Qn("","Flag: United States"),Qn("","Flag: Uruguay"),Qn("","Flag: Uzbekistan"),Qn("","Flag: Vatican City"),Qn("","Flag: St. Vincent & Grenadines"),Qn("","Flag: Venezuela"),Qn("","Flag: British Virgin Islands"),Qn("","Flag: U.S. Virgin Islands"),Qn("","Flag: Vietnam"),Qn("","Flag: Vanuatu"),Qn("","Flag: Wallis & Futuna"),Qn("","Flag: Samoa"),Qn("","Flag: Kosovo"),Qn("","Flag: Yemen"),Qn("","Flag: Mayotte"),Qn("","Flag: South Africa"),Qn("","Flag: Zambia"),Qn("","Flag: Zimbabwe")),Nn("","White Flag")),ku=jn(Su,vu,"Rainbow Flag"),_u=jn(Su,ia,"Transgender Flag"),Lu=Qn("","Black Flag"),Ou=jn(Lu,Uc,"Pirate Flag"),Tu=Hn("Flags","Basic flags",Qn("","Crossed Flags"),Qn("","Chequered Flag"),Su,ku,_u,Lu,Ou,Qn("","Flag: England"),Qn("","Flag: Scotland"),Qn("","Flag: Wales"),Qn("","Triangular Flag")),Ru=Nn("","Motorcycle"),Uu=Nn("","Racing Car"),Qu=Qn("","Seat"),Nu=Qn("","Helicopter"),Hu=Qn("","Locomotive"),zu=Qn("","Railway Car"),Gu=Qn("","High-Speed Train"),ju=Qn("","Bullet Train"),Wu=Qn("","Train"),Vu=Qn("","Metro"),Zu=Qn("","Light Rail"),Yu=Qn("","Station"),Xu=Qn("","Tram"),Ju=Qn("","Tram Car"),Ku=Qn("","Bus"),qu=Qn("","Oncoming Bus"),$u=Qn("","Trolleybus"),td=Qn("","Bus Stop"),ed=Qn("","Minibus"),id=Qn("","Ambulance"),sd=Qn("","Taxi"),nd=Qn("","Oncoming Taxi"),ad=Qn("","Automobile"),od=Qn("","Oncoming Automobile"),rd=Qn("","Sport Utility Vehicle"),hd=Qn("","Delivery Truck"),cd=Qn("","Articulated Lorry"),Ad=Qn("","Tractor"),ld=Qn("","Monorail"),ud=Qn("","Mountain Railway"),dd=Qn("","Suspension Railway"),gd=Qn("","Mountain Cableway"),pd=Qn("","Aerial Tramway"),md=Qn("","Ship"),fd=Qn("","Speedboat"),vd=Qn("","Horizontal Traffic Light"),wd=Qn("","Vertical Traffic Light"),Bd=Qn("","Construction"),yd=Qn("","Bicycle"),Dd=Qn("","Stop Sign"),bd=Nn("","Oil Drum"),Cd=Nn("","Motorway"),Md=Nn("","Railway Track"),Pd=Nn("","Motor Boat"),Id=Nn("","Small Airplane"),xd=Qn("","Airplane Departure"),Ed=Qn("","Airplane Arrival"),Fd=Nn("","Satellite"),Sd=Nn("","Passenger Ship"),kd=Qn("","Kick Scooter"),_d=Qn("","Motor Scooter"),Ld=Qn("","Canoe"),Od=Qn("","Flying Saucer"),Td=Qn("","Skateboard"),Rd=Qn("","Auto Rickshaw"),Ud=Qn("","Parachute"),Qd=Qn("","Anchor"),Nd=Nn("","Ferry"),Hd=Qn("","Sailboat"),zd=Qn("","Fuel Pump"),Gd=Hn("Vehicles","Things that go",Ru,Uu,Qu,Eo,Nu,Hu,zu,Gu,ju,Wu,Vu,Zu,Yu,Xu,Ju,Ku,qu,$u,td,ed,id,Io,sd,nd,ad,od,rd,hd,cd,Ad,ld,ud,dd,gd,pd,md,fd,vd,wd,Bd,yd,Dd,bd,Cd,Md,Pd,Id,xd,Ed,Fd,Sd,kd,_d,Ld,Od,Td,Rd,er,sr,Ud,Qd,Nd,Hd,zd,So),jd=(Hn("Blood Types","Blood types",Qn("","A Button (Blood Type)"),Qn("","B Button (Blood Type)"),Qn("","O Button (Blood Type)"),Qn("","AB Button (Blood Type)")),Hn("Regions","Region indicators",Qn("","Regional Indicator Symbol Letter A"),Qn("","Regional Indicator Symbol Letter B"),Qn("","Regional Indicator Symbol Letter C"),Qn("","Regional Indicator Symbol Letter D"),Qn("","Regional Indicator Symbol Letter E"),Qn("","Regional Indicator Symbol Letter F"),Qn("","Regional Indicator Symbol Letter G"),Qn("","Regional Indicator Symbol Letter H"),Qn("","Regional Indicator Symbol Letter I"),Qn("","Regional Indicator Symbol Letter J"),Qn("","Regional Indicator Symbol Letter K"),Qn("","Regional Indicator Symbol Letter L"),Qn("","Regional Indicator Symbol Letter M"),Qn("","Regional Indicator Symbol Letter N"),Qn("","Regional Indicator Symbol Letter O"),Qn("","Regional Indicator Symbol Letter P"),Qn("","Regional Indicator Symbol Letter Q"),Qn("","Regional Indicator Symbol Letter R"),Qn("","Regional Indicator Symbol Letter S"),Qn("","Regional Indicator Symbol Letter T"),Qn("","Regional Indicator Symbol Letter U"),Qn("","Regional Indicator Symbol Letter V"),Qn("","Regional Indicator Symbol Letter W"),Qn("","Regional Indicator Symbol Letter X"),Qn("","Regional Indicator Symbol Letter Y"),Qn("","Regional Indicator Symbol Letter Z")),Hn("Japanese","Japanse symbology",Qn("","Japanese Symbol for Beginner"),Qn("","Japanese Here Button"),Nn("","Japanese Service Charge Button"),Qn("","Japanese Free of Charge Button"),Qn("","Japanese Reserved Button"),Qn("","Japanese Prohibited Button"),Qn("","Japanese Vacancy Button"),Qn("","Japanese Passing Grade Button"),Qn("","Japanese No Vacancy Button"),Qn("","Japanese Not Free of Charge Button"),Nn("","Japanese Monthly Amount Button"),Qn("","Japanese Application Button"),Qn("","Japanese Discount Button"),Qn("","Japanese Open for Business Button"),Qn("","Japanese Bargain Button"),Qn("","Japanese Acceptable Button"),Nn("","Japanese Congratulations Button"),Nn("","Japanese Secret Button")),Hn("Clocks","Time-keeping pieces",Qn("","One OClock"),Qn("","Two OClock"),Qn("","Three OClock"),Qn("","Four OClock"),Qn("","Five OClock"),Qn("","Six OClock"),Qn("","Seven OClock"),Qn("","Eight OClock"),Qn("","Nine OClock"),Qn("","Ten OClock"),Qn("","Eleven OClock"),Qn("","Twelve OClock"),Qn("","One-Thirty"),Qn("","Two-Thirty"),Qn("","Three-Thirty"),Qn("","Four-Thirty"),Qn("","Five-Thirty"),Qn("","Six-Thirty"),Qn("","Seven-Thirty"),Qn("","Eight-Thirty"),Qn("","Nine-Thirty"),Qn("","Ten-Thirty"),Qn("","Eleven-Thirty"),Qn("","Twelve-Thirty"),Nn("","Mantelpiece Clock"),Qn("","Watch"),Qn("","Alarm Clock"),Nn("","Stopwatch"),Nn("","Timer Clock"),Qn("","Hourglass Done"),Qn("","Hourglass Not Done"))),Wd=Nn("","Clockwise Vertical Arrows"),Vd=Nn("","Counterclockwise Arrows Button"),Zd=Nn("","Left-Right Arrow"),Yd=Nn("","Up-Down Arrow"),Xd=Nn("","Up-Left Arrow"),Jd=Nn("","Up-Right Arrow"),Kd=Qn("","Down-Right Arrow"),qd=Nn("","Down-Right Arrow"),$d=Nn("","Down-Left Arrow"),tg=Nn("","Right Arrow Curving Left"),eg=Nn("","Left Arrow Curving Right"),ig=Nn("","Right Arrow"),sg=Nn("","Right Arrow Curving Up"),ng=Nn("","Right Arrow Curving Down"),ag=Nn("","Left Arrow"),og=Nn("","Up Arrow"),rg=Nn("","Down Arrow"),hg=Hn("Arrows","Arrows pointing in different directions",Wd,Vd,Zd,Yd,Xd,Jd,qd,$d,tg,eg,ig,sg,ng,ag,og,rg),cg=Qn("","CL Button"),Ag=Qn("","Cool Button"),lg=Qn("","Free Button"),ug=Qn("","ID Button"),dg=Qn("","New Button"),gg=Qn("","NG Button"),pg=Qn("","OK Button"),mg=Qn("","SOS Button"),fg=Qn("","Up! Button"),vg=Qn("","Vs Button"),wg=Qn("","Radio Button"),Bg=Qn("","Back Arrow"),yg=Qn("","End Arrow"),Dg=Qn("","On! Arrow"),bg=Qn("","Soon Arrow"),Cg=Qn("","Top Arrow"),Mg=Nn("","Check Box with Check"),Pg=Qn("","Input Latin Uppercase"),Ig=Qn("","Input Latin Lowercase"),xg=Qn("","Input Numbers"),Eg=Qn("","Input Symbols"),Fg=Qn("","Input Latin Letters"),Sg=Qn("","Shuffle Tracks Button"),kg=Qn("","Repeat Button"),_g=Qn("","Repeat Single Button"),Lg=Qn("","Upwards Button"),Og=Qn("","Downwards Button"),Tg=Nn("","Play Button"),Rg=Nn("","Reverse Button"),Ug=Nn("","Eject Button"),Qg=Qn("","Fast-Forward Button"),Ng=Qn("","Fast Reverse Button"),Hg=Qn("","Fast Up Button"),zg=Qn("","Fast Down Button"),Gg=Nn("","Next Track Button"),jg=Nn("","Last Track Button"),Wg=Nn("","Play or Pause Button"),Vg=Nn("","Pause Button"),Zg=Nn("","Stop Button"),Yg=Nn("","Record Button"),Xg=Hn("Buttons","Buttons",cg,Ag,lg,ug,dg,gg,pg,mg,fg,vg,wg,Bg,yg,Dg,bg,Cg,Mg,Pg,Ig,xg,Eg,Fg,Sg,kg,_g,Lg,Og,Tg,Vg,Rg,Ug,Qg,Ng,Hg,zg,Gg,jg,Wg,Vg,Zg,Yg),Jg=Hn("Zodiac","The symbology of astrology",Qn("","Aries"),Qn("","Taurus"),Qn("","Gemini"),Qn("","Cancer"),Qn("","Leo"),Qn("","Virgo"),Qn("","Libra"),Qn("","Scorpio"),Qn("","Sagittarius"),Qn("","Capricorn"),Qn("","Aquarius"),Qn("","Pisces"),Qn("","Ophiuchus")),Kg=Nn("0","Digit Zero"),qg=Nn("1","Digit One"),$g=Nn("2","Digit Two"),tp=Nn("3","Digit Three"),ep=Nn("4","Digit Four"),ip=Nn("5","Digit Five"),sp=Nn("6","Digit Six"),np=Nn("7","Digit Seven"),ap=Nn("8","Digit Eight"),op=Nn("9","Digit Nine"),rp=Nn("*","Asterisk"),hp=Nn("#","Number Sign"),cp=(Hn("Numbers","Numbers",Kg,qg,$g,tp,ep,ip,sp,np,ap,op,rp,hp,Gn(Kg,$n,"Keycap Digit Zero"),Gn(qg,$n,"Keycap Digit One"),Gn($g,$n,"Keycap Digit Two"),Gn(tp,$n,"Keycap Digit Three"),Gn(ep,$n,"Keycap Digit Four"),Gn(ip,$n,"Keycap Digit Five"),Gn(sp,$n,"Keycap Digit Six"),Gn(np,$n,"Keycap Digit Seven"),Gn(ap,$n,"Keycap Digit Eight"),Gn(op,$n,"Keycap Digit Nine"),Gn(rp,$n,"Keycap Asterisk"),Gn(hp,$n,"Keycap Number Sign"),Qn("","Keycap: 10")),Qn("","Tag Plus Sign")),Ap=Qn("","Tag Hyphen-Minus"),lp=(Hn("Tags","Tags",Qn("","Tag Space"),Qn("","Tag Exclamation Mark"),Qn("","Tag Quotation Mark"),Qn("","Tag Number Sign"),Qn("","Tag Dollar Sign"),Qn("","Tag Percent Sign"),Qn("","Tag Ampersand"),Qn("","Tag Apostrophe"),Qn("","Tag Left Parenthesis"),Qn("","Tag Right Parenthesis"),Qn("","Tag Asterisk"),cp,Qn("","Tag Comma"),Ap,Qn("","Tag Full Stop"),Qn("","Tag Solidus"),Qn("","Tag Digit Zero"),Qn("","Tag Digit One"),Qn("","Tag Digit Two"),Qn("","Tag Digit Three"),Qn("","Tag Digit Four"),Qn("","Tag Digit Five"),Qn("","Tag Digit Six"),Qn("","Tag Digit Seven"),Qn("","Tag Digit Eight"),Qn("","Tag Digit Nine"),Qn("","Tag Colon"),Qn("","Tag Semicolon"),Qn("","Tag Less-Than Sign"),Qn("","Tag Equals Sign"),Qn("","Tag Greater-Than Sign"),Qn("","Tag Question Mark"),Qn("","Tag Commercial at"),Qn("","Tag Latin Capital Letter a"),Qn("","Tag Latin Capital Letter B"),Qn("","Tag Latin Capital Letter C"),Qn("","Tag Latin Capital Letter D"),Qn("","Tag Latin Capital Letter E"),Qn("","Tag Latin Capital Letter F"),Qn("","Tag Latin Capital Letter G"),Qn("","Tag Latin Capital Letter H"),Qn("","Tag Latin Capital Letter I"),Qn("","Tag Latin Capital Letter J"),Qn("","Tag Latin Capital Letter K"),Qn("","Tag Latin Capital Letter L"),Qn("","Tag Latin Capital Letter M"),Qn("","Tag Latin Capital Letter N"),Qn("","Tag Latin Capital Letter O"),Qn("","Tag Latin Capital Letter P"),Qn("","Tag Latin Capital Letter Q"),Qn("","Tag Latin Capital Letter R"),Qn("","Tag Latin Capital Letter S"),Qn("","Tag Latin Capital Letter T"),Qn("","Tag Latin Capital Letter U"),Qn("","Tag Latin Capital Letter V"),Qn("","Tag Latin Capital Letter W"),Qn("","Tag Latin Capital Letter X"),Qn("","Tag Latin Capital Letter Y"),Qn("","Tag Latin Capital Letter Z"),Qn("","Tag Left Square Bracket"),Qn("","Tag Reverse Solidus"),Qn("","Tag Right Square Bracket"),Qn("","Tag Circumflex Accent"),Qn("","Tag Low Line"),Qn("","Tag Grave Accent"),Qn("","Tag Latin Small Letter a"),Qn("","Tag Latin Small Letter B"),Qn("","Tag Latin Small Letter C"),Qn("","Tag Latin Small Letter D"),Qn("","Tag Latin Small Letter E"),Qn("","Tag Latin Small Letter F"),Qn("","Tag Latin Small Letter G"),Qn("","Tag Latin Small Letter H"),Qn("","Tag Latin Small Letter I"),Qn("","Tag Latin Small Letter J"),Qn("","Tag Latin Small Letter K"),Qn("","Tag Latin Small Letter L"),Qn("","Tag Latin Small Letter M"),Qn("","Tag Latin Small Letter N"),Qn("","Tag Latin Small Letter O"),Qn("","Tag Latin Small Letter P"),Qn("","Tag Latin Small Letter Q"),Qn("","Tag Latin Small Letter R"),Qn("","Tag Latin Small Letter S"),Qn("","Tag Latin Small Letter T"),Qn("","Tag Latin Small Letter U"),Qn("","Tag Latin Small Letter V"),Qn("","Tag Latin Small Letter W"),Qn("","Tag Latin Small Letter X"),Qn("","Tag Latin Small Letter Y"),Qn("","Tag Latin Small Letter Z"),Qn("","Tag Left Curly Bracket"),Qn("","Tag Vertical Line"),Qn("","Tag Right Curly Bracket"),Qn("","Tag Tilde"),Qn("","Cancel Tag")),Hn("Math","Math",Nn("","Multiply"),Qn("","Plus"),Qn("","Minus"),Qn("","Divide"))),up=Hn("Games","Games",Nn("","Spade Suit"),Nn("","Club Suit"),Nn("","Heart Suit",{color:"red"}),Nn("","Diamond Suit",{color:"red"}),Qn("","Mahjong Red Dragon"),Qn("","Joker"),Qn("","Direct Hit"),Qn("","Slot Machine"),Qn("","Pool 8 Ball"),Qn("","Game Die"),Qn("","Bowling"),Qn("","Flower Playing Cards"),Qn("","Puzzle Piece"),Nn("","Chess Pawn"),Qn("","Yo-Yo"),Qn("","Kite")),dp=Hn("Sports Equipment","Sports equipment",Qn("","Running Shirt"),Qn("","Tennis"),Qn("","Skis"),Qn("","Basketball"),Qn("","Sports Medal"),Qn("","Trophy"),Qn("","American Football"),Qn("","Rugby Football"),Qn("","Cricket Game"),Qn("","Volleyball"),Qn("","Field Hockey"),Qn("","Ice Hockey"),Qn("","Ping Pong"),Qn("","Badminton"),Qn("","Sled"),Qn("","Goal Net"),Qn("","1st Place Medal"),Qn("","2nd Place Medal"),Qn("","3rd Place Medal"),Qn("","Boxing Glove"),Qn("","Curling Stone"),Qn("","Lacrosse"),Qn("","Softball"),Qn("","Flying Disc"),Qn("","Soccer Ball"),Qn("","Baseball"),Nn("","Ice Skate")),gp=Hn("Clothing","Clothing",Qn("","Top Hat"),Qn("","Diving Mask"),Qn("","Womans Hat"),Qn("","Glasses"),Nn("","Sunglasses"),Qn("","Necktie"),Qn("","T-Shirt"),Qn("","Jeans"),Qn("","Dress"),Qn("","Kimono"),Qn("","Bikini"),Qn("","Womans Clothes"),Qn("","Purse"),Qn("","Handbag"),Qn("","Clutch Bag"),Qn("","Mans Shoe"),Qn("","Running Shoe"),Qn("","High-Heeled Shoe"),Qn("","Womans Sandal"),Qn("","Womans Boot"),Qn("","Martial Arts Uniform"),Qn("","Sari"),Qn("","Lab Coat"),Qn("","Goggles"),Qn("","Hiking Boot"),Qn("","Flat Shoe"),$o,qo,Qn("","Billed Cap"),Qn("","Scarf"),Qn("","Gloves"),Qn("","Coat"),Qn("","Socks"),Qn("","Nazar Amulet"),Qn("","Ballet Shoes"),Qn("","One-Piece Swimsuit"),Qn("","Briefs"),Qn("","Shorts")),pp=Hn("Town","Town",Nn("","Building Construction"),Nn("","Houses"),Nn("","Cityscape"),Nn("","Derelict House"),Nn("","Classical Building"),Nn("","Desert"),Nn("","Desert Island"),Nn("","National Park"),Nn("","Stadium"),Qn("","House"),Qn("","House with Garden"),Qn("","Office Building"),Qn("","Japanese Post Office"),Qn("","Post Office"),Qn("","Hospital"),Qn("","Bank"),Qn("","ATM Sign"),Qn("","Hotel"),Qn("","Love Hotel"),Qn("","Convenience Store"),uo,Qn("","Department Store"),bo,Qn("","Bridge at Night"),Qn("","Fountain"),Nn("","Shopping Bags"),Qn("","Receipt"),Qn("","Shopping Cart"),Qn("","Barber Pole"),Qn("","Wedding"),Nn("","Ballot Box with Ballot")),mp=Hn("Music","Music",Qn("","Musical Score"),Qn("","Musical Notes"),Qn("","Musical Note"),Qn("","Saxophone"),Qn("","Guitar"),Qn("","Musical Keyboard"),Qn("","Trumpet"),Qn("","Violin"),Qn("","Drum"),Qn("","Banjo")),fp=Hn("Astronomy","Astronomy",Qn("","Milky Way"),Qn("","Globe Showing Europe-Africa"),Qn("","Globe Showing Americas"),Qn("","Globe Showing Asia-Australia"),Qn("","Globe with Meridians"),Qn("","New Moon"),Qn("","Waxing Crescent Moon"),Qn("","First Quarter Moon"),Qn("","Waxing Gibbous Moon"),Qn("","Full Moon"),Qn("","Waning Gibbous Moon"),Qn("","Last Quarter Moon"),Qn("","Waning Crescent Moon"),Qn("","Crescent Moon"),Qn("","New Moon Face"),Qn("","First Quarter Moon Face"),Qn("","Last Quarter Moon Face"),Qn("","Full Moon Face"),Qn("","Sun with Face"),Qn("","Glowing Star"),Qn("","Shooting Star"),Nn("","Comet"),Qn("","Ringed Planet")),vp=Hn("Finance","Finance",Qn("","Money Bag"),Qn("","Currency Exchange"),Qn("","Heavy Dollar Sign"),Qn("","Credit Card"),Qn("","Yen Banknote"),Qn("","Dollar Banknote"),Qn("","Euro Banknote"),Qn("","Pound Banknote"),Qn("","Money with Wings"),Qn("","Chart Increasing with Yen")),wp=Hn("Writing","Writing",Nn("","Pen"),Nn("","Fountain Pen"),Nn("","Paintbrush"),Nn("","Crayon"),Nn("","Pencil"),Nn("","Black Nib")),Bp=Nn("","Alembic"),yp=Nn("","Gear"),Dp=Nn("","Atom Symbol"),bp=Nn("","Keyboard"),Cp=Nn("","Telephone"),Mp=Nn("","Studio Microphone"),Pp=Nn("","Level Slider"),Ip=Nn("","Control Knobs"),xp=Qn("","Movie Camera"),Ep=Qn("","Headphone"),Fp=Qn("","Video Game"),Sp=Qn("","Light Bulb"),kp=Qn("","Computer Disk"),_p=Qn("","Floppy Disk"),Lp=Qn("","Optical Disk"),Op=Qn("","DVD"),Tp=Qn("","Telephone Receiver"),Rp=Qn("","Pager"),Up=Qn("","Fax Machine"),Qp=Qn("","Satellite Antenna"),Np=Qn("","Loudspeaker"),Hp=Qn("","Megaphone"),zp=Qn("","Mobile Phone"),Gp=Qn("","Mobile Phone with Arrow"),jp=Qn("","Mobile Phone Vibrating"),Wp=Qn("","Mobile Phone Off"),Vp=Qn("","No Mobile Phone"),Zp=Qn("","Antenna Bars"),Yp=Qn("","Camera"),Xp=Qn("","Camera with Flash"),Jp=Qn("","Video Camera"),Kp=Qn("","Television"),qp=Qn("","Radio"),$p=Qn("","Videocassette"),tm=Nn("","Film Projector"),em=Qn("","Dim Button"),im=Qn("","Bright Button"),sm=Qn("","Muted Speaker"),nm=Qn("","Speaker Low Volume"),am=Qn("","Speaker Medium Volume"),om=Qn("","Speaker High Volume"),rm=Qn("","Battery"),hm=Qn("","Electric Plug"),cm=Qn("","Magnifying Glass Tilted Left"),Am=Qn("","Magnifying Glass Tilted Right"),lm=Qn("","Locked with Pen"),um=Qn("","Locked with Key"),dm=Qn("","Key"),gm=Qn("","Locked"),pm=Qn("","Unlocked"),mm=Qn("","Bell"),fm=Qn("","Bell with Slash"),vm=Qn("","Bookmark"),wm=Qn("","Link"),Bm=Nn("","Joystick"),ym=Nn("","Desktop Computer"),Dm=Nn("","Printer"),bm=Nn("","Computer Mouse"),Cm=Nn("","Trackball"),Mm=Qn("","Card Index Dividers"),Pm=Qn("","Card File Box"),Im=Qn("","File Cabinet"),xm=Qn("","Wastebasket"),Em=Qn("","Spiral Note Pad"),Fm=Qn("","Spiral Calendar"),Sm=Qn("","Compression"),km=Qn("","Old Key"),_m=Hn("Technology","Technology",Bm,Fp,Sp,Ro,Mo,kp,_p,Lp,Op,ym,bp,Dm,bm,Cm,Cp,Tp,Rp,Up,Qp,Np,Hp,Kp,qp,$p,tm,Mp,Pp,Ip,Oo,xp,Ep,Yp,Xp,Jp,zp,Wp,Gp,lm,um,gm,pm,mm,fm,vm,wm,jp,Zp,em,im,sm,nm,am,om,rm,hm),Lm=Hn("Mail","Mail",Qn("","Outbox Tray"),Qn("","Inbox Tray"),Qn("","Package"),Qn("","E-Mail"),Qn("","Incoming Envelope"),Qn("","Envelope with Arrow"),Qn("","Closed Mailbox with Lowered Flag"),Qn("","Closed Mailbox with Raised Flag"),Qn("","Open Mailbox with Raised Flag"),Qn("","Open Mailbox with Lowered Flag"),Qn("","Postbox"),Qn("","Postal Horn")),Om=Hn("Celebration","Celebration",Qn("","Ribbon"),Qn("","Wrapped Gift"),Qn("","Jack-O-Lantern"),Qn("","Christmas Tree"),Qn("","Firecracker"),Qn("","Fireworks"),Qn("","Sparkler"),Qn("","Sparkles"),Nn("","Sparkle"),Qn("","Balloon"),Qn("","Party Popper"),Qn("","Confetti Ball"),Qn("","Tanabata Tree"),Qn("","Pine Decoration"),Qn("","Japanese Dolls"),Qn("","Carp Streamer"),Qn("","Wind Chime"),Qn("","Moon Viewing Ceremony"),Qn("","Backpack"),Ao,Qn("","Red Envelope"),Qn("","Red Paper Lantern"),Nn("","Military Medal")),Tm=Hn("Tools","Tools",Qn("","Fishing Pole"),Qn("","Flashlight"),yo,Qn("","Hammer"),Qn("","Nut and Bolt"),Nn("","Hammer and Wrench"),Qn("","Compass"),Qn("","Fire Extinguisher"),Qn("","Toolbox"),Qn("","Brick"),Qn("","Axe"),Nn("","Hammer and Pick"),Nn("","Pick"),Nn("","Rescue Workers Helmet"),Nn("","Chains"),Sm),Rm=Hn("Office","Office",Qn("","File Folder"),Qn("","Open File Folder"),Qn("","Page with Curl"),Qn("","Page Facing Up"),Qn("","Calendar"),Qn("","Tear-Off Calendar"),Qn("","Card Index"),Mm,Pm,Im,xm,Em,Fm,Qn("","Chart Increasing"),Qn("","Chart Decreasing"),Qn("","Bar Chart"),Qn("","Clipboard"),Qn("","Pushpin"),Qn("","Round Pushpin"),Qn("","Paperclip"),Nn("","Linked Paperclips"),Qn("","Straight Ruler"),Qn("","Triangular Ruler"),Qn("","Bookmark Tabs"),Qn("","Ledger"),Qn("","Notebook"),Qn("","Notebook with Decorative Cover"),Qn("","Closed Book"),Qn("","Open Book"),Qn("","Green Book"),Qn("","Blue Book"),Qn("","Orange Book"),Qn("","Books"),Qn("","Name Badge"),Qn("","Scroll"),Qn("","Memo"),Nn("","Scissors"),Nn("","Envelope")),Um=Hn("Signs","Signs",Qn("","Cinema"),Vp,Qn("","No One Under Eighteen"),Qn("","Prohibited"),Qn("","Cigarette"),Qn("","No Smoking"),Qn("","Litter in Bin Sign"),Qn("","No Littering"),Qn("","Potable Water"),Qn("","Non-Potable Water"),Qn("","No Bicycles"),Qn("","No Pedestrians"),Qn("","Children Crossing"),Qn("","Mens Room"),Qn("","Womens Room"),Qn("","Restroom"),Qn("","Baby Symbol"),Qn("","Water Closet"),Qn("","Passport Control"),Qn("","Customs"),Qn("","Baggage Claim"),Qn("","Left Luggage"),Nn("","Parking Button"),Qn("","Wheelchair Symbol"),Nn("","Radioactive"),Nn("","Biohazard"),Nn("","Warning"),Qn("","High Voltage"),Qn("","No Entry"),Nn("","Recycling Symbol"),ta,ea,ia),Qm=Hn("Religion","Religion",Qn("","Dotted Six-Pointed Star"),Nn("","Star of David"),Nn("","Om"),Qn("","Kaaba"),Qn("","Mosque"),Qn("","Synagogue"),Qn("","Menorah"),Qn("","Place of Worship"),Qn("","Hindu Temple"),Nn("","Orthodox Cross"),Nn("","Latin Cross"),Nn("","Star and Crescent"),Nn("","Peace Symbol"),Nn("","Yin Yang"),Nn("","Wheel of Dharma"),Nn("","Infinity"),Qn("","Diya Lamp"),Nn("","Shinto Shrine"),Qn("","Church"),Nn("","Eight-Pointed Star"),Qn("","Prayer Beads")),Nm=Qn("","Door"),Hm=Hn("Household","Household",Qn("","Lipstick"),Qn("","Ring"),Qn("","Gem Stone"),Qn("","Newspaper"),dm,Qn("","Fire"),Qn("","Pistol"),Nn("","Candle"),Nn("","Framed Picture"),km,Nn("","Rolled-Up Newspaper"),Nn("","World Map"),Nm,Qn("","Toilet"),Qn("","Shower"),Qn("","Bathtub"),Nn("","Couch and Lamp"),Nn("","Bed"),Qn("","Lotion Bottle"),Qn("","Thread"),Qn("","Yarn"),Qn("","Safety Pin"),Qn("","Teddy Bear"),Qn("","Broom"),Qn("","Basket"),Qn("","Roll of Paper"),Qn("","Soap"),Qn("","Sponge"),Qn("","Chair"),Qn("","Razor"),Nn("","Reminder Ribbon")),zm=Hn("Activities","Activities",Nn("","Film Frames"),Nn("","Admission Tickets"),Qn("","Carousel Horse"),Qn("","Ferris Wheel"),Qn("","Roller Coaster"),_o,Qn("","Circus Tent"),Qn("","Ticket"),Qn("","Clapper Board"),Qn("","Performing Arts")),Gm=Hn("Travel","Travel",Nn("","Label"),Qn("","Volcano"),Nn("","Snow-Capped Mountain"),Nn("","Mountain"),Nn("","Camping"),Nn("","Beach with Umbrella"),Nn("","Umbrella on Ground"),Qn("","Japanese Castle"),Qn("","Footprints"),Qn("","Mount Fuji"),Qn("","Tokyo Tower"),Qn("","Statue of Liberty"),Qn("","Map of Japan"),Qn("","Moai"),Nn("","Bellhop Bell"),Qn("","Luggage"),Qn("","Flag in Hole"),Qn("","Tent"),Nn("","Hot Springs")),jm=Hn("Medieval","Medieval",Qn("","Castle"),Qn("","Bow and Arrow"),Ho,Qn("","Trident Emblem"),Nn("","Dagger"),Nn("","Shield"),Qn("","Crystal Ball"),Nn("","Crossed Swords"),Nn("","Fleur-de-lis")),Wm=Nn("","Double Exclamation Mark"),Vm=Nn("","Exclamation Question Mark"),Zm=Nn("","Information"),Ym=Nn("","Circled M"),Xm=Qn("","Check Mark Button"),Jm=Nn("","Check Mark"),Km=Nn("","Eight-Spoked Asterisk"),qm=Qn("","Cross Mark"),$m=Qn("","Cross Mark Button"),tf=Qn("","Question Mark"),ef=Qn("","White Question Mark"),sf=Qn("","White Exclamation Mark"),nf=Qn("","Exclamation Mark"),af=Qn("","Curly Loop"),of=Qn("","Double Curly Loop"),rf=Nn("","Wavy Dash"),hf=Nn("","Part Alternation Mark"),cf=Nn("","Trade Mark"),Af=Nn("","Copyright"),lf=Nn("","Registered"),uf=Nn("","Square: Four Corners"),df=(zn("Marks","Marks",{doubleExclamationMark:Wm,interrobang:Vm,information:Zm,circledM:Ym,checkMarkButton:Xm,checkMark:Jm,eightSpokedAsterisk:Km,crossMark:qm,crossMarkButton:$m,questionMark:tf,whiteQuestionMark:ef,whiteExclamationMark:sf,exclamationMark:nf,curlyLoop:af,doubleCurlyLoop:of,wavyDash:rf,partAlternationMark:hf,tradeMark:cf,copyright:Af,registered:lf}),zn("Science","Science",{droplet:Qn("","Droplet"),dropOfBlood:Qn("","Drop of Blood"),adhesiveBandage:Qn("","Adhesive Bandage"),stethoscope:Qn("","Stethoscope"),syringe:Qn("","Syringe"),pill:Qn("","Pill"),microscope:Qo,testTube:Qn("","Test Tube"),petriDish:Qn("","Petri Dish"),dna:Qn("","DNA"),abacus:Qn("","Abacus"),magnet:Qn("","Magnet"),telescope:Qn("","Telescope"),medical:ho,balanceScale:po,alembic:Bp,gear:yp,atomSymbol:Dp,magnifyingGlassTiltedLeft:cm,magnifyingGlassTiltedRight:Am})),gf=Qn("","White Chess King"),pf=Qn("","White Chess Queen"),mf=Qn("","White Chess Rook"),ff=Qn("","White Chess Bishop"),vf=Qn("","White Chess Knight"),wf=Qn("","White Chess Pawn"),Bf=zn(gf.value+pf.value+mf.value+ff.value+vf.value+wf.value,"White Chess Pieces",{width:"auto",king:gf,queen:pf,rook:mf,bishop:ff,knight:vf,pawn:wf}),yf=Qn("","Black Chess King"),Df=Qn("","Black Chess Queen"),bf=Qn("","Black Chess Rook"),Cf=Qn("","Black Chess Bishop"),Mf=Qn("","Black Chess Knight"),Pf=Qn("","Black Chess Pawn"),If=zn(yf.value+Df.value+bf.value+Cf.value+Mf.value+Pf.value,"Black Chess Pieces",{width:"auto",king:yf,queen:Df,rook:bf,bishop:Cf,knight:Mf,pawn:Pf}),xf=zn(wf.value+Pf.value,"Chess Pawns",{width:"auto",white:wf,black:Pf}),Ef=zn(mf.value+bf.value,"Chess Rooks",{width:"auto",white:mf,black:bf}),Ff=zn(ff.value+Cf.value,"Chess Bishops",{width:"auto",white:ff,black:Cf}),Sf=zn(vf.value+Mf.value,"Chess Knights",{width:"auto",white:vf,black:Mf}),kf=zn(pf.value+Df.value,"Chess Queens",{width:"auto",white:pf,black:Df}),_f=zn(gf.value+yf.value,"Chess Kings",{width:"auto",white:gf,black:yf}),Lf=zn("Chess Pieces","Chess Pieces",{width:"auto",white:Bf,black:If,pawns:xf,rooks:Ef,bishops:Ff,knights:Sf,queens:kf,kings:_f}),Of=zn("Dice","Dice",{dice1:Qn("","Dice: Side 1"),dice2:Qn("","Dice: Side 2"),dice3:Qn("","Dice: Side 3"),dice4:Qn("","Dice: Side 4"),dice5:Qn("","Dice: Side 5"),dice6:Qn("","Dice: Side 6")}),Tf=zn("All Icons","All Icons",{faces:Gc,love:lA,cartoon:LA,hands:Sl,bodyParts:mu,people:_r,gestures:Qa,inMotion:Pr,resting:Sr,roles:Wo,fantasy:Ko,animals:Pu,plants:xu,food:Fu,flags:Tu,vehicles:Gd,clocks:jd,arrows:hg,shapes:du,buttons:Xg,zodiac:Jg,chess:Lf,dice:Of,math:lp,games:up,sportsEquipment:dp,clothing:gp,town:pp,music:mp,weather:wu,astro:fp,finance:vp,writing:wp,science:df,tech:_m,mail:Lm,celebration:Om,tools:Tm,office:Rm,signs:Um,religion:Qm,household:Hm,activities:zm,travel:Gm,medieval:jm}),Rf=[];function Uf(t){const e=[];return t.fontStyle&&"normal"!==t.fontStyle&&e.push(t.fontStyle),t.fontVariant&&"normal"!==t.fontVariant&&e.push(t.fontVariant),t.fontWeight&&"normal"!==t.fontWeight&&e.push(t.fontWeight),e.push(t.fontSize+"px"),e.push(t.fontFamily),e.join(" ")}async function Qf(t,e=null,i){if(-1===Rf.indexOf(t)){e=e||"The quick brown fox jumps over the lazy dog",i&&i(0,1,t);const s=await document.fonts.load(t,e);i&&i(1,1,t),0===s.length?console.warn(`Failed to load font "${t}". If this is a system font, just set the object's \`value\` property, instead of calling \`loadFontAndSetText\`.`):Rf.push(t)}}function Nf(t,e,i){return(1-i)*t+i*e}class Hf extends Event{constructor(){super("tick"),this.t=0,this.dt=0,this.sdt=0,Object.seal(this)}copy(t){this.t=t.t,this.dt=t.dt,this.sdt=t.sdt}set(t,e){this.t=t,this.dt=e,this.sdt=Nf(this.sdt,e,.01)}}class zf extends m{constructor(t){super(),this._timer=null,this._frameTime=Number.MAX_VALUE,this._targetFPS=0,this.targetFrameRate=t,this._onTick=t=>{const e=new Hf;let i=t;this._onTick=t=>{t>i&&(e.t=t,e.dt=t-i,e.sdt=e.dt,i=t,this._onTick=t=>{let s=t-i;s<-1e3&&(i=t-this._frameTime,s=this._frameTime),s>0&&s>=this._frameTime&&(e.set(t,s),i=t,this.dispatchEvent(e))})}}}restart(){this.stop(),this.start()}get isRunning(){return null!=this._timer}stop(){this._timer=null,this.dispatchEvent(new Event("stopped"))}get targetFrameRate(){return this._targetFPS}set targetFrameRate(t){this._targetFPS=t,this._frameTime=1e3/t}}const Gf="tele.calla.chat";class jf{constructor(t,e,i){if(this.name=t,this.callback=e,!s(e))throw new Error("A function instance is required for this parameter");this.opts=i,Object.freeze(this)}apply(t){c(t)&&this.add(t)}add(t){t.addEventListener(this.name,this.callback,this.opts)}remove(t){t.removeEventListener(this.name,this.callback)}}function Wf(t,e){return new jf("click",t,e)}function Vf(t,e){return new jf("input",t,e)}function Zf(t){return s(t.isOpen)&&s(t.setOpen)&&s(t.toggleOpen)&&s(t.show)&&s(t.hide)}function Yf(t){return Zf(t)?t.isOpen():"none"!==t.style.display}function Xf(t,e,i=""){Zf(t)?t.setOpen(e,i):e?Kf(t,i):qf(t)}function Jf(t,e=""){Zf(t)?t.toggleOpen(e):Yf(t)?qf(t,e):Kf(t)}function Kf(t,e=""){Zf(t)?t.show():t.style.display=e}function qf(t,e=""){Zf(t)?t.hide(e):t.style.display="none"}function $f(t,e,i,n,a){a=a||"",t.accessKey&&(a+=` <kbd>(ALT+${t.accessKey.toUpperCase()})</kbd>`),s(t.updateLabel)?t.updateLabel(e,i,n,a):t.innerHTML=(e?i:n)+a}const tv=b(!0),ev=b(!1);function iv(t,e){s(t.setLocked)?t.setLocked(e):e?tv.apply(t):ev.apply(t)}const sv=new p("toggleOptions"),nv=new p("tweet"),av=new p("leave"),ov=new p("toggleFullscreen"),rv=new p("toggleInstructions"),hv=new p("toggleUserDirectory"),cv=new p("toggleAudio"),Av=new p("toggleVideo"),lv=new p("changeDevices"),uv=new p("emote"),dv=new p("selectEmoji"),gv=new p("zoomChanged");class pv extends g{constructor(t,...e){super(),this.element=Y(t,...e)}get id(){return this.element.id}get eventTarget(){return this.element}isForwardedEvent(t){return!0}addEventListener(t,e,i){this.isForwardedEvent(t)?this.eventTarget.addEventListener(t,e,i):super.addEventListener(t,e,i)}removeEventListener(t,e){this.isForwardedEvent(t)?this.eventTarget.removeEventListener(t,e):super.removeEventListener(t,e)}get style(){return this.element.style}get visible(){return null!==this.style.display}set visible(t){Xf(this.element,t)}get tagName(){return this.element.tagName}get disabled(){return!1}set disabled(t){}focus(){this.element.focus()}blur(){this.element.blur()}}const mv=b(!0),fv=b(!1);function vv(t,e,i,s,...n){return new wv(t,e,i,s,...n)}class wv extends pv{constructor(t,e,i,n,...a){if(super("select",I(t),...a),this._emptySelectionEnabled=!1,this._values=new Array,!s(i))throw new Error("makeID parameter must be a Function");if(!s(n))throw new Error("makeLabel parameter must be a Function");this.noSelectionText=e,this.makeID=t=>null!==t&&i(t)||null,this.makeLabel=t=>null!==t&&n(t)||"None",this.emptySelectionEnabled=!0,Object.seal(this)}render(){if(function(t){for(;t.lastChild;)t.lastChild.remove()}(this.element),0===this.values.length)this.element.append(nt(this.noSelectionText)),mv.apply(this.element);else{this.emptySelectionEnabled&&this.element.append(nt(this.noSelectionText));for(let t of this.values)this.element.append(nt(U(this.makeID(t)),this.makeLabel(t)));fv.apply(this.element)}}get emptySelectionEnabled(){return this._emptySelectionEnabled}set emptySelectionEnabled(t){this._emptySelectionEnabled=t,this.render()}get values(){return this._values}set values(t){const e=this.selectedValue;this._values.splice(0,this._values.length,...t),this.render(),this.selectedValue=e}get options(){return this.element.options}get selectedIndex(){let t=this.element.selectedIndex;return this.emptySelectionEnabled&&--t,t}set selectedIndex(t){this.emptySelectionEnabled&&++t,this.element.selectedIndex=t}get selectedValue(){return 0<=this.selectedIndex&&this.selectedIndex<this.values.length?this.values[this.selectedIndex]:null}set selectedValue(t){this.selectedIndex=this.indexOf(t)}get selectedText(){const t=this.element.selectedOptions;return 1===t.length?t[0].textContent||t[0].innerText:""}set selectedText(t){const e=this.values.findIndex((e=>null!==t&&this.makeLabel(e)===t));this.selectedIndex=e}indexOf(t){return u(t)?-1:this.values.findIndex((e=>this.makeID(t)===this.makeID(e)))}contains(t){return this.indexOf(t)>=0}}const Bv=new p("hidden"),yv=new p("shown");class Dv extends m{constructor(t){super(),this.element=$(I(t)),this.header=this.element.querySelector(".header"),this.content=this.element.querySelector(".content"),this.footer=this.element.querySelector(".footer");const e=this.element.querySelector(".dialogTitle > button.closeButton");e&&e.addEventListener("click",(()=>qf(this)))}isOpen(){return"none"!==this.style.display}setOpen(t,e){this.style.display=t?e||"":"none"}toggleOpen(t){this.setOpen(!this.isOpen(),t)}get tagName(){return this.element.tagName}get disabled(){return!1}set disabled(t){}get style(){return this.element.style}appendChild(t){return this.element.appendChild(t)}append(...t){this.element.append(...t)}show(){Kf(this.element),this.dispatchEvent(yv)}async showAsync(){Kf(this),await ut(this,"hidden")}hide(){qf(this.element),this.dispatchEvent(Bv)}}const bv=new p("audioInputChanged"),Cv=new p("audioOutputChanged"),Mv=new p("videoInputChanged");function Pv(t,e,i,s){return u(i)&&(i=1),u(s)&&(s=1),new B("gridArea",`${e}/${t}/${e+s}/${t+i}`)}function Iv(t,e){return u(e)&&(e=1),new B("gridRow",`${t}/${t+e}`)}const xv=G("grid");function Ev(...t){return H(xv,(e=t.join(" "),new B("gridTemplateColumns",e)));var e}const Fv=b(!0),Sv=b(!1);class kv extends p{constructor(t){super("emojiSelected"),this.emoji=t}}const _v=new p("emojiCanceled");const Lv=new p("login");class Ov extends p{constructor(t,e){super(t),this.button=e}}class Tv extends Ov{constructor(t){super("gamepadButtonUp",t)}}class Rv extends Ov{constructor(t){super("gamepadButtonDown",t)}}class Uv extends p{constructor(t,e){super(t),this.axis=e}}class Qv extends Uv{constructor(t){super("gamepadAxisMaxed",t)}}class Nv extends m{constructor(t){super(),this.lastButtons=new Array,this.buttons=new Array,this.axes=new Array,this.hapticActuators=new Array,this.btnDownEvts=new Array,this.btnUpEvts=new Array,this.btnState=new Array,this.axisThresholdMax=.9,this.axisThresholdMin=.1,this.axisMaxEvts=new Array,this.axisMaxed=new Array,this.sticks=new Array,this.id=t.id,this.displayId=t.displayId,this.connected=t.connected,this.hand=t.hand,this.pose=t.pose,this._isStick=e=>e%2==0&&e<t.axes.length-1;for(let e=0;e<t.buttons.length;++e)this.btnDownEvts[e]=new Rv(e),this.btnUpEvts[e]=new Tv(e),this.btnState[e]=!1,this.buttons[e]=t.buttons[e];for(let e=0;e<t.axes.length;++e)this.axisMaxEvts[e]=new Qv(e),this.axisMaxed[e]=!1,this._isStick(e)&&(this.sticks[e/2]={x:0,y:0}),this.axes[e]=t.axes[e];if(null!=t.hapticActuators)for(let e=0;e<t.hapticActuators.length;++e)this.hapticActuators[e]=t.hapticActuators[e];Object.seal(this)}update(t){this.connected=t.connected,this.hand=t.hand,this.pose=t.pose;for(let e=0;e<t.buttons.length;++e){const i=this.btnState[e],s=t.buttons[e].pressed;s!==i&&(this.btnState[e]=s,this.dispatchEvent((s?this.btnDownEvts:this.btnUpEvts)[e])),this.lastButtons[e]=this.buttons[e],this.buttons[e]=t.buttons[e]}for(let e=0;e<t.axes.length;++e){const i=this.axisMaxed[e],s=t.axes[e],n=Math.sign(s),a=Math.abs(s),o=a>=this.axisThresholdMax,r=a<=this.axisThresholdMin;o&&!i&&this.dispatchEvent(this.axisMaxEvts[e]),this.axes[e]=n*(o?1:r?0:a)}for(let t=0;t<this.axes.length-1;t+=2){const e=this.sticks[t/2];e.x=this.axes[t],e.y=this.axes[t+1]}if(null!=t.hapticActuators)for(let e=0;e<t.hapticActuators.length;++e)this.hapticActuators[e]=t.hapticActuators[e]}}const Hv="CallaSettings";class zv extends Event{constructor(){super("inputBindingChanged")}}const Gv=new zv;class jv extends m{constructor(){super(),this.bindings=new Map([["keyButtonUp","ArrowUp"],["keyButtonDown","ArrowDown"],["keyButtonLeft","ArrowLeft"],["keyButtonRight","ArrowRight"],["keyButtonEmote","e"],["keyButtonToggleAudio","a"],["keyButtonZoomOut","["],["keyButtonZoomIn","]"],["gpAxisLeftRight",0],["gpAxisUpDown",1],["gpButtonEmote",0],["gpButtonToggleAudio",1],["gpButtonZoomIn",6],["gpButtonZoomOut",7],["gpButtonUp",12],["gpButtonDown",13],["gpButtonLeft",14],["gpButtonRight",15]]);for(let t of this.bindings.keys())Object.defineProperty(this,t,{get:()=>this.bindings.get(t),set:e=>{this.bindings.has(t)&&e!==this.bindings.get(t)&&(this.bindings.set(t,e),this.dispatchEvent(Gv))}});Object.freeze(this)}get(t){return this.bindings.get(t)}set(t,e){this.bindings.set(t,e)}get keyButtonUp(){return this.bindings.get("keyButtonUp")}set keyButtonUp(t){this.checkedSet("keyButtonUp",t)}get keyButtonDown(){return this.bindings.get("keyButtonDown")}set keyButtonDown(t){this.checkedSet("keyButtonDown",t)}get keyButtonLeft(){return this.bindings.get("keyButtonLeft")}set keyButtonLeft(t){this.checkedSet("keyButtonLeft",t)}get keyButtonRight(){return this.bindings.get("keyButtonRight")}set keyButtonRight(t){this.checkedSet("keyButtonRight",t)}get keyButtonEmote(){return this.bindings.get("keyButtonEmote")}set keyButtonEmote(t){this.checkedSet("keyButtonEmote",t)}get keyButtonToggleAudio(){return this.bindings.get("keyButtonToggleAudio")}set keyButtonToggleAudio(t){this.checkedSet("keyButtonToggleAudio",t)}get keyButtonZoomOut(){return this.bindings.get("keyButtonZoomOut")}set keyButtonZoomOut(t){this.checkedSet("keyButtonZoomOut",t)}get keyButtonZoomIn(){return this.bindings.get("keyButtonZoomIn")}set keyButtonZoomIn(t){this.checkedSet("keyButtonZoomIn",t)}get gpAxisLeftRight(){return this.bindings.get("gpAxisLeftRight")}set gpAxisLeftRight(t){this.checkedSet("gpAxisLeftRight",t)}get gpAxisUpDown(){return this.bindings.get("gpAxisUpDown")}set gpAxisUpDown(t){this.checkedSet("gpAxisUpDown",t)}get gpButtonEmote(){return this.bindings.get("gpButtonEmote")}set gpButtonEmote(t){this.checkedSet("gpButtonEmote",t)}get gpButtonToggleAudio(){return this.bindings.get("gpButtonToggleAudio")}set gpButtonToggleAudio(t){this.checkedSet("gpButtonToggleAudio",t)}get gpButtonZoomIn(){return this.bindings.get("gpButtonZoomIn")}set gpButtonZoomIn(t){this.checkedSet("gpButtonZoomIn",t)}get gpButtonZoomOut(){return this.bindings.get("gpButtonZoomOut")}set gpButtonZoomOut(t){this.checkedSet("gpButtonZoomOut",t)}get gpButtonUp(){return this.bindings.get("gpButtonUp")}set gpButtonUp(t){this.checkedSet("gpButtonUp",t)}get gpButtonDown(){return this.bindings.get("gpButtonDown")}set gpButtonDown(t){this.checkedSet("gpButtonDown",t)}get gpButtonLeft(){return this.bindings.get("gpButtonLeft")}set gpButtonLeft(t){this.checkedSet("gpButtonLeft",t)}get gpButtonRight(){return this.bindings.get("gpButtonRight")}set gpButtonRight(t){this.checkedSet("gpButtonRight",t)}checkedSet(t,e){this.bindings.has(t)&&e!==this.bindings.get(t)&&(this.bindings.set(t,e),this.dispatchEvent(Gv))}toJSON(){return{keyButtonUp:this.keyButtonUp,keyButtonDown:this.keyButtonDown,keyButtonLeft:this.keyButtonLeft,keyButtonRight:this.keyButtonRight,keyButtonEmote:this.keyButtonEmote,keyButtonToggleAudio:this.keyButtonToggleAudio,keyButtonZoomOut:this.keyButtonZoomOut,keyButtonZoomIn:this.keyButtonZoomIn,gpAxisLeftRight:this.gpAxisLeftRight,gpAxisUpDown:this.gpAxisUpDown,gpButtonEmote:this.gpButtonEmote,gpButtonToggleAudio:this.gpButtonToggleAudio,gpButtonZoomIn:this.gpButtonZoomIn,gpButtonZoomOut:this.gpButtonZoomOut,gpButtonUp:this.gpButtonUp,gpButtonDown:this.gpButtonDown,gpButtonLeft:this.gpButtonLeft,gpButtonRight:this.gpButtonRight}}copy(t){t&&(this.keyButtonUp=t.keyButtonUp,this.keyButtonDown=t.keyButtonDown,this.keyButtonLeft=t.keyButtonLeft,this.keyButtonRight=t.keyButtonRight,this.keyButtonEmote=t.keyButtonEmote,this.keyButtonToggleAudio=t.keyButtonToggleAudio,this.keyButtonZoomOut=t.keyButtonZoomOut,this.keyButtonZoomIn=t.keyButtonZoomIn,this.gpAxisLeftRight=t.gpAxisLeftRight,this.gpAxisUpDown=t.gpAxisUpDown,this.gpButtonEmote=t.gpButtonEmote,this.gpButtonToggleAudio=t.gpButtonToggleAudio,this.gpButtonZoomIn=t.gpButtonZoomIn,this.gpButtonZoomOut=t.gpButtonZoomOut,this.gpButtonUp=t.gpButtonUp,this.gpButtonDown=t.gpButtonDown,this.gpButtonLeft=t.gpButtonLeft,this.gpButtonRight=t.gpButtonRight)}fix(t){this.bindings.has("keyButtonUp")||(this.keyButtonUp=t.keyButtonUp),this.bindings.has("keyButtonDown")||(this.keyButtonDown=t.keyButtonDown),this.bindings.has("keyButtonLeft")||(this.keyButtonLeft=t.keyButtonLeft),this.bindings.has("keyButtonRight")||(this.keyButtonRight=t.keyButtonRight),this.bindings.has("keyButtonEmote")||(this.keyButtonEmote=t.keyButtonEmote),this.bindings.has("keyButtonToggleAudio")||(this.keyButtonToggleAudio=t.keyButtonToggleAudio),this.bindings.has("keyButtonZoomOut")||(this.keyButtonZoomOut=t.keyButtonZoomOut),this.bindings.has("keyButtonZoomIn")||(this.keyButtonZoomIn=t.keyButtonZoomIn),this.bindings.has("gpAxisLeftRight")||(this.gpAxisLeftRight=t.gpAxisLeftRight),this.bindings.has("gpAxisUpDown")||(this.gpAxisUpDown=t.gpAxisUpDown),this.bindings.has("gpButtonEmote")||(this.gpButtonEmote=t.gpButtonEmote),this.bindings.has("gpButtonToggleAudio")||(this.gpButtonToggleAudio=t.gpButtonToggleAudio),this.bindings.has("gpButtonZoomIn")||(this.gpButtonZoomIn=t.gpButtonZoomIn),this.bindings.has("gpButtonZoomOut")||(this.gpButtonZoomOut=t.gpButtonZoomOut),this.bindings.has("gpButtonUp")||(this.gpButtonUp=t.gpButtonUp),this.bindings.has("gpButtonDown")||(this.gpButtonDown=t.gpButtonDown),this.bindings.has("gpButtonLeft")||(this.gpButtonLeft=t.gpButtonLeft),this.bindings.has("gpButtonRight")||(this.gpButtonRight=t.gpButtonRight)}}const Wv=Object.freeze({keyButtonUp:"ArrowUp",keyButtonDown:"ArrowDown",keyButtonLeft:"ArrowLeft",keyButtonRight:"ArrowRight",keyButtonEmote:"e",keyButtonToggleAudio:"a",keyButtonZoomOut:"[",keyButtonZoomIn:"]",gpAxisLeftRight:0,gpAxisUpDown:1,gpButtonEmote:0,gpButtonToggleAudio:1,gpButtonZoomIn:6,gpButtonZoomOut:7,gpButtonUp:12,gpButtonDown:13,gpButtonLeft:14,gpButtonRight:15});function Vv(t,e,i,...s){return new Zv(t,e,i,...s)}class Zv extends pv{constructor(t,e,i,...s){super("div"),this.label=it(C(t),i),this.input=et(R(e),...s),this.element.append(this.label,this.input),this.element.style.display="grid",Object.seal(this)}get eventTarget(){return this.input}get value(){return this.input.value}set value(t){this.input.value=t}get checked(){return this.input.checked}set checked(t){this.input.checked=t}setLocked(t){iv(this.input,t)}}const Yv=new p("select");function Xv(t,e,...i){return new Jv(t,e,...i)}class Jv extends pv{constructor(t,e,...i){super("div",I(t),at(...i)),this.button=K(I(t+"Btn"),Wf((()=>this.dispatchEvent(Yv))),e)}isForwardedEvent(t){return"select"!==t}get visible(){return super.visible}set visible(t){super.visible=t,this.button.className=t?"tabSelected":"tabUnselected",this.element.className=t?"tabSelected":"tabUnselected"}}class Kv extends Event{constructor(){super("avatarURLChanged")}}class qv extends Event{constructor(){super("gamepadChanged")}}class $v extends Event{constructor(){super("selectAvatar")}}class tw extends Event{constructor(){super("fontSizeChanged")}}class ew extends Event{constructor(){super("inputBindingChanged")}}class iw extends Event{constructor(){super("audioPropertiesChanged")}}class sw extends Event{constructor(){super("toggleDrawHearing")}}class nw extends Event{constructor(){super("toggleVideo")}}class aw extends Event{constructor(){super("gamepadButtonUp"),this.button=0}}class ow extends Event{constructor(){super("gamepadAxisMaxed"),this.axis=0}}const rw=Q("7em"),hw=Q("3em"),cw=new Kv,Aw=new qv,lw=new $v,uw=new tw,dw=new ew,gw=new iw,pw=new sw,mw=new nw,fw=new aw,vw=new ow,ww=b(!0),Bw=b(!1);const yw=z("lightgreen"),Dw=z("rgba(65, 255, 202, 0.25)"),bw=z("transparent");class Cw extends Event{constructor(){super("warpTo"),this.id=null}}const Mw=new Cw;function Pw(t,e,i){return t*(i-e)+e}let Iw;if(!Object.prototype.hasOwnProperty.call(CanvasRenderingContext2D.prototype,"getTransform")&&Object.prototype.hasOwnProperty.call(CanvasRenderingContext2D.prototype,"mozCurrentTransform")){class t{constructor(t){this.a=t[0],this.b=t[1],this.c=t[2],this.d=t[3],this.e=t[4],this.f=t[5]}get is2D(){return!0}get isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}transformPoint(t){return void 0!==t&&void 0!==t.x&&void 0!==t.y?{x:t.x*this.a+t.y*this.c+this.e,y:t.x*this.b+t.y*this.d+this.f}:null}}Iw=e=>new t(e.mozCurrentTransform)}else Iw=t=>t.getTransform();function xw(t){return Iw(t)}const Ew=new p("redrawn");class Fw extends m{constructor(){super(),this._minWidth=null,this._maxWidth=null,this._minHeight=null,this._maxHeight=null,this._strokeColor=null,this._strokeSize=null,this._bgColor=null,this._value=null,this._scale=1,this._fillColor="black",this._textDirection="horizontal",this._wrapWords=!0,this._fontStyle="normal",this._fontVariant="normal",this._fontWeight="normal",this._fontFamily="sans-serif",this._fontSize=20,this._padding={top:0,right:0,bottom:0,left:0},this._canvas=yt(10,10);const t=this.canvas.getContext("2d");if(!t)throw new Error("Couldn't create a graphics context for the TextImage canvas.");this._g=t}async loadFontAndSetText(t=null){const e=Uf(this);await Qf(e,t),this.value=t}get scale(){return this._scale}set scale(t){this.scale!==t&&(this._scale=t,this.redraw())}get minWidth(){return this._minWidth}set minWidth(t){this.minWidth!==t&&(this._minWidth=t,this.redraw())}get maxWidth(){return this._maxWidth}set maxWidth(t){this.maxWidth!==t&&(this._maxWidth=t,this.redraw())}get minHeight(){return this._minHeight}set minHeight(t){this.minHeight!==t&&(this._minHeight=t,this.redraw())}get maxHeight(){return this._maxHeight}set maxHeight(t){this.maxHeight!==t&&(this._maxHeight=t,this.redraw())}get canvas(){return this._canvas}get width(){return this.canvas.width/this.scale}get height(){return this.canvas.height/this.scale}get padding(){return this._padding}set padding(t){if(t instanceof Array)throw new Error("Invalid padding");this.padding.top===t.top&&this.padding.right==t.right&&this.padding.bottom==t.bottom&&this.padding.left==t.left||(this._padding=t,this.redraw())}get wrapWords(){return this._wrapWords}set wrapWords(t){this.wrapWords!==t&&(this._wrapWords=t,this.redraw())}get textDirection(){return this._textDirection}set textDirection(t){this.textDirection!==t&&(this._textDirection=t,this.redraw())}get fontStyle(){return this._fontStyle}set fontStyle(t){this.fontStyle!==t&&(this._fontStyle=t,this.redraw())}get fontVariant(){return this._fontVariant}set fontVariant(t){this.fontVariant!==t&&(this._fontVariant=t,this.redraw())}get fontWeight(){return this._fontWeight}set fontWeight(t){this.fontWeight!==t&&(this._fontWeight=t,this.redraw())}get fontSize(){return this._fontSize}set fontSize(t){this.fontSize!==t&&(this._fontSize=t,this.redraw())}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.redraw())}get fillColor(){return this._fillColor}set fillColor(t){this.fillColor!==t&&(this._fillColor=t,this.redraw())}get strokeColor(){return this._strokeColor}set strokeColor(t){this.strokeColor!==t&&(this._strokeColor=t,this.redraw())}get strokeSize(){return this._strokeSize}set strokeSize(t){this.strokeSize!==t&&(this._strokeSize=t,this.redraw())}get bgColor(){return this._bgColor}set bgColor(t){this.bgColor!==t&&(this._bgColor=t,this.redraw())}get value(){return this._value}set value(t){this.value!==t&&(this._value=t,this.redraw())}draw(t,e,i){this._canvas.width>0&&this._canvas.height>0&&t.drawImage(this._canvas,e,i,this.width,this.height)}split(t){return this.wrapWords?t.split(" ").join("\n").replace(/\r\n/,"\n").split("\n"):t.replace(/\r\n/,"\n").split("\n")}redraw(){if(this._g.clearRect(0,0,this.canvas.width,this.canvas.height),this.fontFamily&&this.fontSize&&(this.fillColor||this.strokeColor&&this.strokeSize)&&this.value){const t=this.textDirection&&0===this.textDirection.indexOf("vertical"),e=null!=this.minWidth||null!=this.maxWidth||null!=this.minHeight||null!=this.maxHeight,i=((this.minWidth||0)-this.padding.right-this.padding.left)*this.scale,s=((this.maxWidth||4096)-this.padding.right-this.padding.left)*this.scale,n=((this.minHeight||0)-this.padding.top-this.padding.bottom)*this.scale,a=((this.maxHeight||4096)-this.padding.top-this.padding.bottom)*this.scale,r=t?n:i,h=t?a:s,c=t?i:n,A=t?s:a,l=[],u=this.split(this.value);let d=0,g=0,p=0,m=!1,f=!1,v=1e4,w=0,B=Ft(this.fontSize*this.scale,w,v),y=null,D=Number.MAX_VALUE;do{const t=this.fontSize;this._fontSize=B;const i=Uf(this);this._fontSize=t,this._g.textAlign="center",this._g.textBaseline="middle",this._g.font=i,g=0,p=0;for(const t of u){const i=this._g.measureText(t);g=Math.max(g,i.width),p+=B,o(i.actualBoundingBoxLeft)&&o(i.actualBoundingBoxRight)&&o(i.actualBoundingBoxAscent)&&o(i.actualBoundingBoxDescent)&&(e||(g=i.actualBoundingBoxLeft+i.actualBoundingBoxRight,p=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent,d=(i.actualBoundingBoxLeft-g/2)/2))}if(e){const t=g-r,e=g-h,i=p-c,s=p-A,n=Math.abs(t),a=Math.abs(e),o=Math.abs(i),u=Math.abs(s);m=e>1||s>1,f=t<-1&&i<-1;const d=Math.min(n,Math.min(a,Math.min(o,u)));d<D&&(D=d,y=this._g.font),(m||f)&&l.indexOf(this._g.font)>-1&&y&&(this._g.font=y,m=!1,f=!1),m?(v=B,B=(w+B)/2):f&&(w=B,B=(B+v)/2)}l.push(this._g.font)}while(m||f);e&&(g<r?g=r:g>h&&(g=h),p<c?p=c:p>A&&(p=A));const b=g+this.scale*(this.padding.right+this.padding.left),C=p+this.scale*(this.padding.top+this.padding.bottom);try{Pt(this._g,b,C)}catch(t){throw console.error(t),t}this.bgColor?(this._g.fillStyle=this.bgColor,this._g.fillRect(0,0,this.canvas.width,this.canvas.height)):this._g.clearRect(0,0,this.canvas.width,this.canvas.height),this.strokeColor&&this.strokeSize&&(this._g.lineWidth=this.strokeSize*this.scale,this._g.strokeStyle=this.strokeColor),this.fillColor&&(this._g.fillStyle=this.fillColor);const M=.5*(u.length-1);for(let t=0;t<u.length;++t){const e=u[t],i=(t-M)*B,s=d+this.canvas.width/2,n=i+this.canvas.height/2;this.strokeColor&&this.strokeSize&&this._g.strokeText(e,s,n),this.fillColor&&this._g.fillText(e,s,n)}if(t){const t=yt(this.canvas.height,this.canvas.width),e=t.getContext("2d");e?(e.translate(t.width/2,t.height/2),"vertical"===this.textDirection||"vertical-left"===this.textDirection?e.rotate(Math.PI/2):"vertical-right"===this.textDirection&&e.rotate(-Math.PI/2),e.translate(-this.canvas.width/2,-this.canvas.height/2),e.drawImage(this.canvas,0,0),Pt(this._g,t.width,t.height)):console.warn("Couldn't rotate the TextImage"),this._g.drawImage(t,0,0)}this.dispatchEvent(Ew)}}}class Sw{constructor(t,e,i){this.emoji=t,this.x=e,this.y=i,this.life=1,this.width=-1,this.emoteText=null,this.dx=Math.random()-.5,this.dy=.5*-Math.random()-.5,this.emoteText=new Fw,this.emoteText.fontFamily="Noto Color Emoji",this.emoteText.value=t.value}isDead(){return this.life<=.01}update(t){this.life-=t/3,this.dx*=.99,this.dy*=.99,this.x+=this.dx*t,this.y+=this.dy*t}drawShadow(t,e){const i=xw(t).a;t.save(),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowOffsetX=3*i,t.shadowOffsetY=3*i,t.shadowBlur=3*i,this.drawEmote(t,e),t.restore()}drawEmote(t,e){const i=t.globalAlpha,s=xw(t).a;t.globalAlpha=this.life,this.emoteText.fontSize=e.tileHeight/2,this.emoteText.scale=s,this.emoteText.draw(t,this.x*e.tileWidth-this.width/2,this.y*e.tileHeight),t.globalAlpha=i}}class kw extends p{constructor(t){super(t),this.pointerType=null,this.pointerID=null,this.x=0,this.y=0,this.dx=0,this.dy=0,this.dz=0,this.u=0,this.v=0,this.du=0,this.dv=0,this.buttons=0,this.dragDistance=0,Object.seal(this)}}class _w extends p{constructor(t){super("inputTypeChanging"),this.newInputType=t,Object.freeze(this)}}class Lw{constructor(t){if("wheel"!==t.type){const e=t;this.type=e.pointerType,this.id=e.pointerId}else this.type="mouse",this.id=0;this.buttons=t.buttons,this.moveDistance=0,this.dragDistance=0,this.x=t.offsetX,this.y=t.offsetY,this.dx=t.movementX,this.dy=t.movementY,Object.seal(this)}}const Ow=new kw("pointerdown"),Tw=new kw("pointerup"),Rw=new kw("click"),Uw=new kw("move"),Qw=new kw("drag");class Nw extends m{constructor(t){super(),this.pointers=new Map,this.currentInputType=null;let e=!0;const i=(e,i,s)=>{e.pointerType=i.type,e.pointerID=i.id,e.buttons=i.buttons,e.x=i.x,e.y=i.y,e.u=Pw(Be(e.x,0,t.clientWidth),-1,1),e.v=Pw(Be(e.y,0,t.clientHeight),-1,1),e.dx=i.dx,e.dy=i.dy,e.dz=s,e.du=2*e.dx/t.clientWidth,e.dv=2*e.dy/t.clientHeight,e.dragDistance=i.dragDistance,this.dispatchEvent(e)},s=t=>{const e=this.pointers.get(t.id);return e&&(t.dragDistance=e.dragDistance,document.pointerLockElement&&(t.x=e.x+t.dx,t.y=e.y+t.dy)),t.moveDistance=Math.sqrt(t.dx*t.dx+t.dy*t.dy),this.pointers.set(t.id,t),e};t.addEventListener("wheel",(t=>{if(!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)){t.preventDefault();const e=new Lw(t);s(e);const n=-t.deltaY*(bn?1:.02);i(Uw,e,n)}}),{passive:!1}),t.addEventListener("pointerdown",(t=>{const n=this.pressCount,a=new Lw(t);s(a);const o=this.pressCount;a.type!==this.currentInputType&&(this.dispatchEvent(new _w(a.type)),this.currentInputType=a.type),i(Ow,a,0),e=0===n&&1===o}));t.addEventListener("pointermove",(t=>{const n=this.pinchDistance,a=new Lw(t),o=s(a),r=this.pressCount,h=((t,i)=>{if(null!==t&&null!==i)return e=!1,(i-t)/10;return 0})(n,this.pinchDistance);i(Uw,a,h),1===r&&1===a.buttons&&o&&o.buttons===a.buttons&&(a.dragDistance+=a.moveDistance,a.dragDistance>5&&(e=!1,i(Qw,a,0)))})),t.addEventListener("pointerup",(t=>{const n=new Lw(t),a=s(n);n.buttons=a.buttons,i(Tw,n,0),e&&i(Rw,n,0),n.dragDistance=0,"touch"===n.type&&this.pointers.delete(n.id)})),t.addEventListener("contextmenu",(t=>{t.preventDefault()})),t.addEventListener("pointercancel",(t=>{this.pointers.has(t.pointerId)&&this.pointers.delete(t.pointerId)}))}get primaryPointer(){for(let t of this.pointers.values())return t;return null}getPointerCount(t){let e=0;for(const i of this.pointers.values())i.type===t&&++e;return e}get pressCount(){let t=0;for(let e of this.pointers.values())e.buttons>0&&++t;return t}get pinchDistance(){if(2!==this.pressCount)return null;let t,e;for(let i of this.pointers.values())if(1===i.buttons)if(t){if(e)break;e=i}else t=i;const i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}}function Hw(t){let e=t;const i=new Array;for(;e.parent;)i.unshift(e),e=e.parent;return i}function zw(t,e,i,s){t.cleanDirty();const n=(s=s||{}).heuristic||Gw.manhattan,a=s.closest||!1,o=new Zw((function(t){return t.f}));let r=e;for(e.h=n(e,i),t.markDirty(e),o.push(e);o.size()>0;){const e=o.pop();if(e===i)return Hw(e);e.closed=!0;const s=t.neighbors(e);for(const h of s){if(h.closed||h.isWall())continue;const s=e.g+h.getCost(e),c=h.visited;(!c||s<h.g)&&(h.visited=!0,h.parent=e,h.h=h.h||n(h,i),h.g=s,h.f=h.g+h.h,t.markDirty(h),a&&(h.h<r.h||h.h===r.h&&h.g<r.g)&&(r=h),c?o.rescoreElement(h):o.push(h))}}return a?Hw(r):[]}const Gw={manhattan:(t,e)=>Math.abs(e.x-t.x)+Math.abs(e.y-t.y),diagonal(t,e){const i=Math.sqrt(2),s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return 1*(s+n)+(i-2)*Math.min(s,n)}};function jw(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}class Ww{constructor(t,e){this.dirtyNodes=new Array,this.grid=null,this.diagonal=!0,e&&(this.diagonal=!1!==e.diagonal),this.nodes=new Array,this.grid=new Array;for(let e=0;e<t.length;e++){const i=t[e];this.grid[e]=new Array(i.length);for(let t=0;t<i.length;t++){const s=new Vw(e,t,i[t]);this.grid[e][t]=s,this.nodes.push(s)}}this.init()}init(){Jt(this.dirtyNodes);for(let t=0;t<this.nodes.length;t++)jw(this.nodes[t])}cleanDirty(){for(let t=0;t<this.dirtyNodes.length;t++)jw(this.dirtyNodes[t]);Jt(this.dirtyNodes)}markDirty(t){this.dirtyNodes.push(t)}neighbors(t){const e=[],i=t.x,s=t.y,n=this.grid;return n[i-1]&&n[i-1][s]&&e.push(n[i-1][s]),n[i+1]&&n[i+1][s]&&e.push(n[i+1][s]),n[i]&&n[i][s-1]&&e.push(n[i][s-1]),n[i]&&n[i][s+1]&&e.push(n[i][s+1]),this.diagonal&&(n[i-1]&&n[i-1][s-1]&&e.push(n[i-1][s-1]),n[i+1]&&n[i+1][s-1]&&e.push(n[i+1][s-1]),n[i-1]&&n[i-1][s+1]&&e.push(n[i-1][s+1]),n[i+1]&&n[i+1][s+1]&&e.push(n[i+1][s+1])),e}toString(){const t=[],e=this.grid;for(let i=0;i<e.length;i++){const s=[],n=e[i];for(let t=0;t<n.length;t++)s.push(n[t].weight);t.push(s.join(" "))}return t.join("\n")}}class Vw{constructor(t,e,i){this.x=t,this.y=e,this.weight=i,this.f=0,this.g=0,this.h=0,this.visited=!1,this.closed=!1,this.parent=null}toString(){return`[${this.x} ${this.y}]`}getCost(t){return t&&t.x!=this.x&&t.y!=this.y?1.41421*this.weight:this.weight}isWall(){return 0===this.weight}}class Zw{constructor(t){this.scoreFunction=t,this.content=new Array}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){const t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t}remove(t){const e=this.content.indexOf(t),i=this.content.pop();e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){const e=this.content[t];for(;t>0;){const i=(t+1>>1)-1,s=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(s)))break;this.content[i]=e,this.content[t]=s,t=i}}bubbleUp(t){const e=this.content.length,i=this.content[t],s=this.scoreFunction(i);for(;;){const n=t+1<<1,a=n-1;let o,r=null;if(a<e){const t=this.content[a];o=this.scoreFunction(t),o<s&&(r=a)}if(n<e){const t=this.content[n];this.scoreFunction(t)<(null===r?s:o)&&(r=n)}if(null===r)break;this.content[t]=this.content[r],this.content[r]=i,t=r}}}class Yw{constructor(t,e){this.url=t,this.fetcher=e,this.name=null,this.tileWidth=0,this.tileHeight=0,this.tilesPerRow=0,this.tileCount=0,this.image=null,this.collision=new Map}async load(){const t=await this.fetcher.getXml(this.url.href),e=t.querySelector("image").getAttribute("source"),i=new URL(e,this.url),s=t.querySelectorAll("tile");for(let t=0;t<s.length;++t){const e=s[t],i=parseInt(e.getAttribute("id"),10),n=e.querySelector("properties > property[name='Collision']").getAttribute("value");this.collision.set(i,"true"===n)}this.name=t.getAttribute("name"),this.tileWidth=parseInt(t.getAttribute("tilewidth"),10),this.tileHeight=parseInt(t.getAttribute("tileheight"),10),this.tileCount=parseInt(t.getAttribute("tilecount"),10),this.image=await this.fetcher.getCanvas(i.href),this.tilesPerRow=Math.floor(this.image.width/this.tileWidth)}isClear(t){return!this.collision.get(t-1)}draw(t,e,i,s){if(e>0){const n=e-1,a=this.tileWidth*(n%this.tilesPerRow),o=this.tileHeight*Math.floor(n/this.tilesPerRow),r=i*this.tileWidth,h=s*this.tileHeight;t.drawImage(this.image,a,o,this.tileWidth,this.tileHeight,r,h,this.tileWidth,this.tileHeight)}}}class Xw{constructor(t,e){this.fetcher=e,this._tileWidth=0,this._tileHeight=0,this._layers=0,this._width=0,this._height=0,this._offsetX=0,this._offsetY=0,this._layerImages=new Array,this._url=null,this._tileset=null,this._tiles=null,this._graph=null,this._url=new URL(`data/tilemaps/${t}.tmx`,document.baseURI)}async load(){const t=await this.fetcher.getXml(this._url.href),e=parseInt(t.getAttribute("width"),10),i=parseInt(t.getAttribute("height"),10),s=parseInt(t.getAttribute("tilewidth"),10),n=parseInt(t.getAttribute("tileheight"),10),a=t.querySelector("tileset").getAttribute("source"),o=t.querySelectorAll("layer > data");this._layers=o.length,this._width=e,this._height=i,this._offsetX=-Math.floor(e/2),this._offsetY=-Math.floor(i/2),this._tileWidth=s,this._tileHeight=n,this._tiles=[];for(let t=0;t<o.length;++t){const i=o[t].innerHTML.replace(" ","").replace("\t","").replace("\n","").replace("\r","").split(",").map((t=>parseInt(t,10))),s=[];let n=[];for(let t of i)n.push(t),n.length===e&&(s.push(n),n=[]);n.length>0&&s.push(n),this._tiles.push(s)}this._tileset=new Yw(new URL(a,this._url),this.fetcher),await this._tileset.load(),this._tileWidth=this._tileset.tileWidth,this._tileHeight=this._tileset.tileHeight;for(let t=0;t<this._layers;++t){const e=yt(this.width*this.tileWidth,this.height*this.tileHeight);this._layerImages.push(e);const i=e.getContext("2d"),s=this._tiles[t];for(let t=0;t<this.height;++t){const e=s[t];for(let s=0;s<this.width;++s){const n=e[s];this._tileset.draw(i,n,s,t)}}}let r=[];for(let t of this._tiles[0]){let e=[];for(let i of t)this._tileset.isClear(i)?e.push(1):e.push(0);r.push(e)}this._graph=new Ww(r,{diagonal:!0})}get width(){return this._width}get height(){return this._height}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}isInBounds(t,e){return 0<=t&&t<this.width&&0<=e&&e<this.height}getGridNode(t,e){return t-=this._offsetX,e-=this._offsetY,t=Math.round(t),e=Math.round(e),this.isInBounds(t,e)?this._graph.grid[e][t]:null}draw(t){t.save(),t.translate(this._offsetX*this.tileWidth,this._offsetY*this.tileHeight);for(let e of this._layerImages)t.drawImage(e,0,0);t.restore()}searchPath(t,e){return zw(this._graph,t,e).map((t=>({x:t.y+this._offsetX,y:t.x+this._offsetY})))}isClear(t,e,i){return t-=this._offsetX,e-=this._offsetY,t=Math.round(t),e=Math.round(e),t<0||this.width<=t||e<0||this.height<=e||this._tileset&&this._tileset.isClear(this._tiles[0][e][t])||i&&i.canSwim}getClearTile(t,e,i,s,n){const a=t+i,o=e+s,r=t<a?1:-1,h=e<o?1:-1;let c=((i=Math.abs(a-t))>(s=Math.abs(o-e))?i:-s)/2;for(;t!==a||e!==o;){const a=c;if(a>-i){if(!this.isClear(t+r,e,n))break;c-=s,t+=r}if(a<s){if(!this.isClear(t,e+h,n))break;c+=i,e+=h}}return{x:t,y:e}}getClearTileNear(t,e,i,s){for(let n=1;n<=i;++n)for(let i=-n;i<=n;++i){const a=n-Math.abs(i),o=t+i,r=e+a,h=e-a;if(this.isClear(o,r,s))return{x:o,y:r};if(this.isClear(o,h,s))return{x:o,y:h}}return{x:t,y:e}}}var Jw;!function(t){t.None="none",t.Emoji="emoji",t.Photo="photo",t.Video="video"}(Jw||(Jw={}));class Kw{constructor(t,e){this.mode=t,this.canSwim=e,this.element=yt(128,128),this.g=this.element.getContext("2d")}draw(t,e,i,s){const n=this.element.width/this.element.height,a=n>1?e:n*i,o=n>1?e/n:i,r=(e-a)/2,h=(i-o)/2;t.drawImage(this.element,r,h,a,o)}}class qw extends Kw{constructor(t){super(Jw.Emoji,function(t){return pr.contains(t)||mr.contains(t)||fr.contains(t)||_a.contains(t)}(t)),this.value=t;const e=new Fw;e.fillColor=t.color||"black",e.fontFamily="Noto Color Emoji",e.fontSize=256,e.value=this.value,Pt(this.g,e.width,e.height),e.draw(this.g,0,0)}}class $w extends Kw{constructor(t){super(Jw.Photo,!1);const e=new Image;e.addEventListener("load",(()=>{const t=(e.width-e.height)/2,i=Math.max(0,t),s=Math.max(0,-t),n=Math.min(e.width,e.height);Pt(this.g,n,n),this.g.drawImage(e,i,s,n,n,0,0,n,n)})),t instanceof URL?this.url=t.href:this.url=t,e.src=this.url}}class tB extends Kw{constructor(t){if(super(Jw.Video,!1),t instanceof HTMLVideoElement)this.video=t;else{if(!(t instanceof MediaStream))throw new Error("Can only create a video avatar from an HTMLVideoElement or MediaStream.");this.video=function(...t){return Y("video",...t)}(y,k,F,function(t){return new B("volume",t,"audio","video")}(0),L(t))}Cn||(this.video.play(),ut(this.video,"canplay").then((()=>this.video.play())))}draw(t,e,i,s){if(this.video.videoWidth>0&&this.video.videoHeight>0){const t=(this.video.videoWidth-this.video.videoHeight)/2,e=Math.max(0,t),i=Math.max(0,-t),n=Math.min(this.video.videoWidth,this.video.videoHeight);Pt(this.g,n,n),this.g.save(),s&&(this.g.translate(n,0),this.g.scale(-1,1)),this.g.drawImage(this.video,e,i,n,n,0,0,n,n),this.g.restore()}super.draw(t,e,i,s)}}class eB extends p{constructor(t){super("userMoved"),this.id=t,this.x=0,this.y=0}}const iB=new Fw,sB=new Fw;iB.fontFamily="Noto Color Emoji",iB.value=sm.value,sB.fontFamily="Noto Color Emoji",sB.value=am.value;class nB extends m{constructor(t,e,i,s){super(),this.id=t,this.pose=i,this.isMe=s,this.audioMuted=!1,this.videoMuted=!0,this.isActive=!1,this.stackUserCount=1,this.stackIndex=0,this.stackAvatarHeight=0,this.stackAvatarWidth=0,this.stackOffsetX=0,this.stackOffsetY=0,this.visible=!0,this._displayName=null,this._avatarVideo=null,this._avatarImage=null,this._avatarEmoji=null,this.userMovedEvt=new eB(t),this.label=s?"(Me)":`(${this.id})`,this.setAvatarEmoji(zc.value),this.lastPositionRequestTime=performance.now()/1e3-1,this.userNameText=new Fw,this.userNameText.fillColor="white",this.userNameText.fontSize=128,this.displayName=e,Object.seal(this)}get x(){return this.pose.current.p[0]}get y(){return this.pose.current.p[2]}get gridX(){return this.pose.end.p[0]}get gridY(){return this.pose.end.p[2]}setAvatar(t){switch(t.mode){case Jw.Emoji:this.setAvatarEmoji(t.avatar);break;case Jw.Photo:this.setAvatarImage(t.avatar);break;case Jw.Video:this.setAvatarVideo(t.avatar);break;default:A(t)}}serialize(){return{id:this.id,avatarMode:this.avatarMode,avatarID:this.avatarID}}get avatarVideo(){return this._avatarVideo}setAvatarVideo(t){this._avatarVideo=t?new tB(t):null}get avatarImage(){return this._avatarImage}setAvatarImage(t){n(t)&&t.length>0?this._avatarImage=new $w(t):this._avatarImage=null}get avatarEmoji(){return this._avatarEmoji}setAvatarEmoji(t){this._avatarEmoji=t?new qw(t):null}get avatarMode(){return this._avatarVideo?Jw.Video:this._avatarImage?Jw.Photo:this._avatarEmoji?Jw.Emoji:Jw.None}get avatarID(){switch(this.avatarMode){case Jw.Emoji:return this.avatarEmoji.value;case Jw.Photo:return this.avatarImage.url;case Jw.Video:case Jw.None:return null;default:A(this.avatarMode)}}get avatar(){switch(this.avatarMode){case Jw.Emoji:return this._avatarEmoji;case Jw.Photo:return this._avatarImage;case Jw.Video:return this._avatarVideo;case Jw.None:return null;default:A(this.avatarMode)}}get displayName(){return this._displayName||this.label}set displayName(t){this._displayName=t,this.userNameText.value=this.displayName}moveTo(t,e){this.isMe&&(this.userMovedEvt.x=t,this.userMovedEvt.y=e,this.dispatchEvent(this.userMovedEvt))}update(t,e){this.stackUserCount=0,this.stackIndex=0;for(let t of e.values())t.gridX===this.gridX&&t.gridY===this.gridY&&(t.id===this.id&&(this.stackIndex=this.stackUserCount),++this.stackUserCount);this.stackAvatarWidth=t.tileWidth-5*(this.stackUserCount-1),this.stackAvatarHeight=t.tileHeight-5*(this.stackUserCount-1),this.stackOffsetX=5*this.stackIndex,this.stackOffsetY=5*this.stackIndex}drawShadow(t,e){const i=xw(t).a,s=this.x*e.tileWidth,n=this.y*e.tileHeight,a=xw(t).transformPoint({x:s,y:n});this.visible=-e.tileWidth<=a.x&&a.x<t.canvas.width&&-e.tileHeight<=a.y&&a.y<t.canvas.height,this.visible&&(t.save(),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowOffsetX=3*i,t.shadowOffsetY=3*i,t.shadowBlur=3*i,this.innerDraw(t,e),t.restore())}drawAvatar(t,e){if(this.visible){if(t.save(),this.innerDraw(t,e),this.isActive&&!this.audioMuted){const e=this.stackAvatarHeight/2,i=xw(t).a;sB.fontSize=e,sB.scale=i,sB.draw(t,this.stackAvatarWidth-sB.width,0)}t.restore()}}innerDraw(t,e){if(t.translate(this.x*e.tileWidth+this.stackOffsetX,this.y*e.tileHeight+this.stackOffsetY),t.fillStyle="black",t.textBaseline="top",this.avatar&&this.avatar.draw(t,this.stackAvatarWidth,this.stackAvatarHeight,this.isMe),this.audioMuted||!this.videoMuted){const e=this.stackAvatarHeight/2,i=xw(t).a;this.audioMuted&&(iB.fontSize=e,iB.scale=i,iB.draw(t,this.stackAvatarWidth-iB.width,0))}}drawName(t,e,i){if(this.visible){const s=xw(t).a;t.save();{t.translate(this.x*e.tileWidth+this.stackOffsetX,this.y*e.tileHeight+this.stackOffsetY),t.shadowColor="black",t.shadowOffsetX=3*s,t.shadowOffsetY=3*s,t.shadowBlur=3*s;const n=i/this.userNameText.fontSize;t.scale(n,n),this.userNameText.draw(t,0,-this.userNameText.height)}t.restore()}}drawHearingTile(t,e,i,s,n){t.save(),t.translate((this.gridX+i)*e.tileWidth,(this.gridY+s)*e.tileHeight),t.strokeStyle=`rgba(0, 255, 0, ${(1-n)/2})`,t.strokeRect(0,0,e.tileWidth,e.tileHeight),t.restore()}drawHearingRange(t,e,i,s){const n=xw(t).a,a=Math.min(s,Math.ceil(t.canvas.width/(2*e.tileWidth*n))),o=Math.min(s,Math.ceil(t.canvas.height/(2*e.tileHeight*n)));for(let n=0;n<o;++n)for(let o=0;o<a;++o){const a=Be(Math.sqrt(o*o+n*n),i,s);a<=1&&(this.drawHearingTile(t,e,o,n,a),0!=n&&this.drawHearingTile(t,e,o,-n,a),0!=o&&this.drawHearingTile(t,e,-o,n,a),0!=o&&0!=n&&this.drawHearingTile(t,e,-o,-n,a))}}}const aB=.01,oB=new p("gameStarted"),rB=new p("gameEnded"),hB=new p("zoomChanged"),cB=new p("emojiNeeded"),AB=new p("toggleAudio"),lB=new p("toggleVideo"),uB=new class extends p{constructor(t){super("userJoined"),this.user=t}}(null),dB=new eB(null),gB=new class extends p{constructor(t){super("emote"),this.emoji=t}}(null),pB=new Map;const mB=new class{constructor(){this._drawHearing=!1,this._audioDistanceMin=1,this._audioDistanceMax=10,this._audioRolloff=1,this._fontSize=12,this._transitionSpeed=1,this._zoom=1.5,this._roomName="calla",this._userName="",this._email="",this._avatarEmoji=null,this._avatarURL=null,this._gamepadIndex=0,this._inputBinding=new jv,this._preferredAudioOutputID=null,this._preferredAudioInputID=null,this._preferredVideoInputID=null;const t=localStorage.getItem(Hv);if(t){const e=JSON.parse(t),i=e._inputBinding;delete e._inputBinding,Object.assign(this,e),this._avatarEmoji&&!n(this._avatarEmoji)&&("value"in this._avatarEmoji?this._avatarEmoji=this._avatarEmoji.value:this._avatarEmoji=null),this.inputBinding=i}this._inputBinding.fix(Wv),window.location.hash.length>0&&(this.roomName=window.location.hash.substring(1)),Object.seal(this)}commit(){localStorage.setItem(Hv,JSON.stringify(this))}get preferredAudioOutputID(){return this._preferredAudioOutputID}set preferredAudioOutputID(t){t!==this.preferredAudioOutputID&&(this._preferredAudioOutputID=t,this.commit())}get preferredAudioInputID(){return this._preferredAudioInputID}set preferredAudioInputID(t){t!==this.preferredAudioInputID&&(this._preferredAudioInputID=t,this.commit())}get preferredVideoInputID(){return this._preferredVideoInputID}set preferredVideoInputID(t){t!==this.preferredVideoInputID&&(this._preferredVideoInputID=t,this.commit())}get transitionSpeed(){return this._transitionSpeed}set transitionSpeed(t){t!==this.transitionSpeed&&(this._transitionSpeed=t,this.commit())}get drawHearing(){return this._drawHearing}set drawHearing(t){t!==this.drawHearing&&(this._drawHearing=t,this.commit())}get audioDistanceMin(){return this._audioDistanceMin}set audioDistanceMin(t){t!==this.audioDistanceMin&&(this._audioDistanceMin=t,this.commit())}get audioDistanceMax(){return this._audioDistanceMax}set audioDistanceMax(t){t!==this.audioDistanceMax&&(this._audioDistanceMax=t,this.commit())}get audioRolloff(){return this._audioRolloff}set audioRolloff(t){t!==this.audioRolloff&&(this._audioRolloff=t,this.commit())}get fontSize(){return this._fontSize}set fontSize(t){t!==this.fontSize&&(this._fontSize=t,this.commit())}get zoom(){return this._zoom}set zoom(t){t!==this.zoom&&(this._zoom=t,this.commit())}get userName(){return this._userName}set userName(t){t!==this.userName&&(this._userName=t,this.commit())}get email(){return this._email}set email(t){t!==this.email&&(this._email=t,this.commit())}get avatarEmoji(){return this._avatarEmoji}set avatarEmoji(t){t!==this.avatarEmoji&&(this._avatarEmoji=t,this.commit())}get avatarURL(){return this._avatarURL}set avatarURL(t){t!==this.avatarURL&&(this._avatarURL=t,this.commit())}get roomName(){return this._roomName}set roomName(t){t!==this.roomName&&(this._roomName=t,this.commit())}get gamepadIndex(){return this._gamepadIndex}set gamepadIndex(t){t!==this.gamepadIndex&&(this._gamepadIndex=t,this.commit())}get inputBinding(){return this._inputBinding.toJSON()}set inputBinding(t){let e=!1;this._inputBinding.addEventListener("inputBindingChanged",(t=>e=!0),{once:!0}),this._inputBinding.copy(t),e&&this.commit()}},fB=new Yt,vB=new Is(fB,bs.High),wB=new class extends m{constructor(t,e,i,s){super(),this.isAudioMuted=null,this.isVideoMuted=null,u(i)&&(i=On),this.tele=new i(t,e),u(s)?this.meta=this.tele.getDefaultMetadataClient():this.meta=new s(this.tele);const n=this.dispatchEvent.bind(this);this.tele.addEventListener("serverConnected",n),this.tele.addEventListener("serverDisconnected",n),this.tele.addEventListener("serverFailed",n),this.tele.addEventListener("conferenceFailed",n),this.tele.addEventListener("conferenceRestored",n),this.tele.addEventListener("audioMuteStatusChanged",n),this.tele.addEventListener("videoMuteStatusChanged",n),this.tele.addEventListener("conferenceJoined",(async t=>{const e=this.audio.createLocalUser(t.id);t.pose=e.pose,this.dispatchEvent(t),await this.setPreferredDevices()})),this.tele.addEventListener("conferenceLeft",(t=>{this.audio.createLocalUser(t.id),this.dispatchEvent(t)})),this.tele.addEventListener("participantJoined",(async t=>{t.source=this.audio.createUser(t.id),this.dispatchEvent(t)})),this.tele.addEventListener("participantLeft",(t=>{this.dispatchEvent(t),this.audio.removeUser(t.id)})),this.tele.addEventListener("userNameChanged",n),this.tele.addEventListener("videoAdded",n),this.tele.addEventListener("videoRemoved",n),this.tele.addEventListener("audioAdded",(t=>{const e=this.audio.getUser(t.id);if(e){let i=e.streams.get(t.kind);i&&e.streams.delete(t.kind),i=t.stream,e.streams.set(t.kind,i),t.id!==this.tele.localUserID&&this.audio.setUserStream(t.id,i),this.dispatchEvent(t)}})),this.tele.addEventListener("audioRemoved",(t=>{const e=this.audio.getUser(t.id);e&&e.streams.has(t.kind)&&e.streams.delete(t.kind),t.id!==this.tele.localUserID&&this.audio.setUserStream(t.id,null),this.dispatchEvent(t)})),this.meta.addEventListener("avatarChanged",n),this.meta.addEventListener("chat",n),this.meta.addEventListener("emote",n),this.meta.addEventListener("setAvatarEmoji",n);const a=t=>{const e=this.audio.getUserOffset(t.id);e&&(t.px+=e[0],t.py+=e[1],t.pz+=e[2]),this.dispatchEvent(t)};this.meta.addEventListener("userPointer",a),this.meta.addEventListener("userPosed",(t=>{this.audio.setUserPose(t.id,t.px,t.py,t.pz,t.fx,t.fy,t.fz,t.ux,t.uy,t.uz),a(t)})),this.audio.addEventListener("audioActivity",(t=>{Rn.id=t.id,Rn.isActive=t.isActive,this.dispatchEvent(Rn)}));const o=this.dispose.bind(this);window.addEventListener("beforeunload",o),window.addEventListener("unload",o),window.addEventListener("pagehide",o),Object.seal(this)}get connectionState(){return this.tele.connectionState}get conferenceState(){return this.tele.conferenceState}get audio(){return this.tele.audio}get preferredAudioOutputID(){return this.tele.preferredAudioOutputID}set preferredAudioOutputID(t){this.tele.preferredAudioOutputID=t}get preferredAudioInputID(){return this.tele.preferredAudioInputID}set preferredAudioInputID(t){this.tele.preferredAudioInputID=t}get preferredVideoInputID(){return this.tele.preferredVideoInputID}set preferredVideoInputID(t){this.tele.preferredVideoInputID=t}async getCurrentAudioOutputDevice(){return await this.tele.getCurrentAudioOutputDevice()}async getMediaPermissions(){return await this.tele.getMediaPermissions()}async getAudioOutputDevices(t){return await this.tele.getAudioOutputDevices(t)}async getAudioInputDevices(t){return await this.tele.getAudioInputDevices(t)}async getVideoInputDevices(t){return await this.tele.getVideoInputDevices(t)}dispose(){this.leave(),this.disconnect()}get offsetRadius(){return this.audio.offsetRadius}set offsetRadius(t){this.audio.offsetRadius=t}setLocalPose(t,e,i,s,n,a,o,r,h){this.audio.setUserPose(this.localUserID,t,e,i,s,n,a,o,r,h,0),this.meta.setLocalPose(t,e,i,s,n,a,o,r,h)}setLocalPoseImmediate(t,e,i,s,n,a,o,r,h){this.audio.setUserPose(this.localUserID,t,e,i,s,n,a,o,r,h,0),this.meta.setLocalPoseImmediate(t,e,i,s,n,a,o,r,h)}setLocalPointer(t,e,i,s,n,a,o,r,h,c){this.meta.setLocalPointer(t,e,i,s,n,a,o,r,h,c)}setAvatarEmoji(t){this.meta.setAvatarEmoji(t)}setAvatarURL(t){this.meta.setAvatarURL(t)}emote(t){this.meta.emote(t)}chat(t){this.meta.chat(t)}async setPreferredDevices(){await this.tele.setPreferredDevices()}async setAudioInputDevice(t){await this.tele.setAudioInputDevice(t)}async setVideoInputDevice(t){await this.tele.setVideoInputDevice(t)}async getCurrentAudioInputDevice(){return await this.tele.getCurrentAudioInputDevice()}async getCurrentVideoInputDevice(){return await this.tele.getCurrentVideoInputDevice()}async toggleAudioMuted(){return await this.tele.toggleAudioMuted()}async toggleVideoMuted(){return await this.tele.toggleVideoMuted()}async getAudioMuted(){return await this.tele.getAudioMuted()}async getVideoMuted(){return await this.tele.getVideoMuted()}get metadataState(){return this.meta.metadataState}get localUserID(){return this.tele.localUserID}get localUserName(){return this.tele.localUserName}get roomName(){return this.tele.roomName}userExists(t){return this.tele.userExists(t)}getUserNames(){return this.tele.getUserNames()}async prepare(t,e,i,s){await this.tele.prepare(t,e,i,s)}async connect(){await this.tele.connect(),this.tele.connectionState===Cs.Connected&&await this.meta.connect()}async join(t){await this.tele.join(t),this.tele.conferenceState===Cs.Connected&&await this.meta.join(t)}async identify(t){await this.tele.identify(t),await this.meta.identify(this.localUserID)}async leave(){await this.meta.leave(),await this.tele.leave()}async disconnect(){await this.meta.disconnect(),await this.tele.disconnect()}update(){this.audio.update()}async setAudioOutputDevice(t){this.tele.setAudioOutputDevice(t),Me&&await this.audio.setAudioOutputDeviceID(this.tele.preferredAudioOutputID)}async setAudioMuted(t){let e=this.isAudioMuted;return t!==e&&(e=await this.toggleAudioMuted()),e}async setVideoMuted(t){let e=this.isVideoMuted;return t!==e&&(e=await this.toggleVideoMuted()),e}}(fB,vB),BB=new class extends m{constructor(t,e,i){super(),this.fetcher=t,this.zoomMin=e,this.zoomMax=i,this.waypoints=new Array,this.users=new Map,this.emotes=new Array,this.keys=new Map,this.lastMove=Number.MAX_VALUE,this.lastWalk=Number.MAX_VALUE,this.gridOffsetX=0,this.gridOffsetY=0,this.fontSize=0,this.cameraX=0,this.offsetCameraX=0,this.targetOffsetCameraX=0,this.cameraY=0,this.offsetCameraY=0,this.targetOffsetCameraY=0,this.cameraZ=1.5,this.targetCameraZ=1.5,this.drawHearing=!1,this.audioDistanceMin=2,this.audioDistanceMax=10,this.rolloff=5,this.lastGamepadIndex=-1,this.gamepadIndex=-1,this.transitionSpeed=.125,this.keyboardEnabled=!0,this.me=null,this.map=null,this.currentRoomName=null,this.currentEmoji=null,this.element=q(I("frontBuffer")),this.gFront=this.element.getContext("2d"),this.audioDistanceMin=2,this.audioDistanceMax=10,this.rolloff=5,this.currentEmoji=null,this.inputBinding={keyButtonUp:"ArrowUp",keyButtonDown:"ArrowDown",keyButtonLeft:"ArrowLeft",keyButtonRight:"ArrowRight",keyButtonEmote:"e",keyButtonToggleAudio:"a",keyButtonZoomOut:"[",keyButtonZoomIn:"]",gpAxisLeftRight:0,gpAxisUpDown:1,gpButtonEmote:0,gpButtonToggleAudio:1,gpButtonZoomIn:6,gpButtonZoomOut:7,gpButtonUp:12,gpButtonDown:13,gpButtonLeft:14,gpButtonRight:15},this.lastGamepadIndex=-1,this.gamepadIndex=-1,this.transitionSpeed=.125,this.keyboardEnabled=!0,window.addEventListener("keydown",(t=>{this.keys.set(t.key,t),!this.keyboardEnabled||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||t.key!==this.inputBinding.keyButtonToggleAudio||!this.me||this.toggleMyAudio()})),window.addEventListener("keyup",(t=>{this.keys.has(t.key)&&this.keys.delete(t.key)})),this.screenControls=new Nw(this.element),this.screenControls.addEventListener("move",(t=>{Math.abs(t.dz)>0&&(this.zoom+=t.dz,this.dispatchEvent(hB))})),this.screenControls.addEventListener("drag",(t=>{this.targetOffsetCameraX=this.offsetCameraX+=t.dx,this.targetOffsetCameraY=this.offsetCameraY+=t.dy})),this.screenControls.addEventListener("click",(t=>{if(this.me){const e=this.getTileAt(t),i=e.x-this.me.gridX,s=e.y-this.me.gridY;this.moveMeByPath(i,s)}}))}get style(){return this.element.style}updateAudioActivity(t,e){this.withUser("update audio activity",t,(t=>{t.isActive=e}))}emote(t,e){if(this.users.has(t)){const i=this.users.get(t);i.isMe&&((e=e||this.currentEmoji)?(gB.emoji=this.currentEmoji=e,this.dispatchEvent(gB)):this.dispatchEvent(cB)),e&&this.emotes.push(new Sw(e,i.x,i.y))}}getTileAt(t){const e=t.x*devicePixelRatio-this.gridOffsetX-this.offsetCameraX,i=t.y*devicePixelRatio-this.gridOffsetY-this.offsetCameraY,s=e/this.cameraZ,n=i/this.cameraZ,a=s-this.cameraX,o=n-this.cameraY;return{x:a/this.map.tileWidth-.5,y:o/this.map.tileHeight-.5}}moveMeTo(t,e){this.map.isClear(t,e,this.me.avatar)&&(this.targetOffsetCameraX=0,this.targetOffsetCameraY=0,dB.x=t,dB.y=e,this.dispatchEvent(dB))}moveMeBy(t,e){const i=this.map.getClearTile(this.me.gridX,this.me.gridY,t,e,this.me.avatar);this.moveMeTo(i.x,i.y)}moveMeByPath(t,e){Jt(this.waypoints);const i=this.me.gridX,s=this.me.gridY,n=this.map.getGridNode(i,s),a=i+t,o=s+e,r=a-Math.round(a),h=o-Math.round(o),c=this.map.getGridNode(a,o);if(n&&c){const t=this.map.searchPath(n,c);if(0===t.length)this.moveMeTo(a,o);else{for(let e of t)e.x+=r,e.y+=h;this.waypoints.push(...t)}}else this.moveMeTo(a,o)}warpMeTo(t,e){const i=this.map.getClearTileNear(t,e,3,this.me.avatar);this.moveMeTo(i.x,i.y)}visit(t){this.withUser("visit",t,(t=>{this.warpMeTo(t.gridX,t.gridY)}))}get zoom(){const t=Be(this.targetCameraZ,this.zoomMin,this.zoomMax);return Pw(Math.pow(t,.5),this.zoomMin,this.zoomMax)}set zoom(t){const e=Be(t=Ft(t,this.zoomMin,this.zoomMax),this.zoomMin,this.zoomMax),i=Pw(Math.pow(e,2),this.zoomMin,this.zoomMax);this.targetCameraZ=i}addUser(t,e,i){this.users.has(t)&&this.removeUser(t);const s=new nB(t,e,i,!1);this.users.set(t,s),uB.user=s,this.dispatchEvent(uB)}toggleMyAudio(){this.dispatchEvent(AB)}toggleMyVideo(){this.dispatchEvent(lB)}muteUserAudio(t,e){this.withUser("mute audio",t,(t=>{t.audioMuted=e}))}muteUserVideo(t,e){this.withUser("mute video",t,(t=>{t.videoMuted=e}))}withUser(t,e,i,s){if(void 0===s&&(s=5e3),e)if(this.users.has(e)){i(this.users.get(e))}else console.warn(`No user "${e}" found to ${t}. Trying again in a quarter second.`),s>0&&setTimeout(this.withUser.bind(this,t,e,i,s-250),250)}changeUserName(t,e){this.withUser("change user name",t,(t=>{t.displayName=e}))}removeUser(t){this.users.has(t)&&this.users.delete(t)}setAvatarVideo(t,e){this.withUser("set avatar video",t,(t=>{t.setAvatarVideo(e)}))}setAvatarURL(t,e){this.withUser("set avatar image",t,(t=>{t.setAvatarImage(e)}))}setAvatarEmoji(t,e){this.withUser("set avatar emoji",t,(t=>{t.setAvatarEmoji(e.value)}))}async startAsync(t,e,i,s,a){this.currentRoomName=a.toLowerCase(),this.me=new nB(t,e,i,!0),n(s)&&this.me.setAvatarImage(s),this.users.set(t,this.me),this.map=new Xw(this.currentRoomName,this.fetcher);let o=!1;for(let t=0;t<2;++t)try{await this.map.load(),o=!0}catch(e){0===t?(console.warn(e),console.warn("Retrying with default map."),this.map=new Xw("default",this.fetcher)):console.error(e)}o||console.error("Couldn't load any maps!"),this.startLoop(),this.dispatchEvent(hB),this.dispatchEvent(oB)}startLoop(){Kf(this.element),this.resize(),this.element.focus()}resize(){!function(t,e=1){Mt(t,t.clientWidth,t.clientHeight,e)}(this.element,window.devicePixelRatio)}end(){this.currentRoomName=null,this.map=null,this.users.clear(),this.me=null,qf(this.element),this.dispatchEvent(rB)}update(t){if(null!==this.currentRoomName){if(t/=1e3,this.gridOffsetX=Math.floor(.5*this.element.width/this.map.tileWidth)*this.map.tileWidth,this.gridOffsetY=Math.floor(.5*this.element.height/this.map.tileHeight)*this.map.tileHeight,this.lastMove+=t,this.lastMove>=.125){let t=0,e=0,i=0;if(this.keyboardEnabled)for(let s of Object.values(this.keys))if(!(s.altKey||s.shiftKey||s.ctrlKey||s.metaKey))switch(s.key){case this.inputBinding.keyButtonUp:e--;break;case this.inputBinding.keyButtonDown:e++;break;case this.inputBinding.keyButtonLeft:t--;break;case this.inputBinding.keyButtonRight:t++;break;case this.inputBinding.keyButtonZoomIn:i++;break;case this.inputBinding.keyButtonZoomOut:i--;break;case this.inputBinding.keyButtonEmote:this.emote(this.me.id,this.currentEmoji)}const s=navigator.getGamepads()[this.gamepadIndex];if(s){pB.has(this)||pB.set(this,new Nv(s));const n=pB.get(this);n.update(s),n.buttons[this.inputBinding.gpButtonEmote].pressed&&this.emote(this.me.id,this.currentEmoji),!n.lastButtons[this.inputBinding.gpButtonToggleAudio].pressed&&n.buttons[this.inputBinding.gpButtonToggleAudio].pressed&&this.toggleMyAudio(),n.buttons[this.inputBinding.gpButtonUp].pressed?--e:n.buttons[this.inputBinding.gpButtonDown].pressed&&++e,n.buttons[this.inputBinding.gpButtonLeft].pressed?--t:n.buttons[this.inputBinding.gpButtonRight].pressed&&++t,t+=Math.round(n.axes[this.inputBinding.gpAxisLeftRight]),e+=Math.round(n.axes[this.inputBinding.gpAxisUpDown]),i+=2*(n.buttons[this.inputBinding.gpButtonZoomIn].value-n.buttons[this.inputBinding.gpButtonZoomOut].value),this.targetOffsetCameraX+=-50*Math.round(2*n.axes[2]),this.targetOffsetCameraY+=-50*Math.round(2*n.axes[3]),this.dispatchEvent(hB)}t=Ft(t,-1,1),e=Ft(e,-1,1),0===t&&0===e||(this.moveMeBy(t,e),Jt(this.waypoints)),0!==i&&(this.zoom+=i,this.dispatchEvent(hB)),this.lastMove=0}if(this.lastWalk+=t,this.lastWalk>=this.transitionSpeed){if(this.waypoints.length>0){const t=this.waypoints.shift();this.moveMeTo(t.x,t.y)}this.lastWalk=0}for(let e of this.emotes)e.update(t);this.emotes=this.emotes.filter((t=>!t.isDead()));for(let t of this.users.values())t.update(this.map,this.users);this.render()}}render(){const t=-this.me.x*this.map.tileWidth,e=-this.me.y*this.map.tileHeight;this.cameraZ=Nf(this.cameraZ,this.targetCameraZ,aB*this.cameraZ),this.cameraX=Nf(this.cameraX,t,aB*this.cameraZ),this.cameraY=Nf(this.cameraY,e,aB*this.cameraZ),this.offsetCameraX=Nf(this.offsetCameraX,this.targetOffsetCameraX,aB),this.offsetCameraY=Nf(this.offsetCameraY,this.targetOffsetCameraY,aB),this.gFront.resetTransform(),this.gFront.imageSmoothingEnabled=!1,this.gFront.clearRect(0,0,this.element.width,this.element.height),this.gFront.save(),this.gFront.translate(this.gridOffsetX+this.offsetCameraX,this.gridOffsetY+this.offsetCameraY),this.gFront.scale(this.cameraZ,this.cameraZ),this.gFront.translate(this.cameraX,this.cameraY),this.map.draw(this.gFront);for(let t of this.users.values())t.drawShadow(this.gFront,this.map);for(let t of this.emotes)t.drawShadow(this.gFront,this.map);for(let t of this.users.values())t.drawAvatar(this.gFront,this.map);this.drawCursor();for(let t of this.users.values())t.drawName(this.gFront,this.map,this.fontSize);this.drawHearing&&this.me.drawHearingRange(this.gFront,this.map,this.audioDistanceMin,this.audioDistanceMax);for(let t of this.emotes)t.drawEmote(this.gFront,this.map);this.gFront.restore()}drawCursor(){const t=this.screenControls.primaryPointer;if(t){const e=this.getTileAt(t);this.gFront.strokeStyle=this.map.isClear(e.x,e.y,this.me.avatar)?"green":"red",this.gFront.strokeRect(e.x*this.map.tileWidth,e.y*this.map.tileHeight,this.map.tileWidth,this.map.tileHeight)}}}(fB,.5,20),yB=new class extends Dv{constructor(){super("login"),this._ready=!1,this._connecting=!1,this._connected=!1,this.addEventListener("shown",(()=>this._ready=!0)),this.roomSelectControl=$(I("roomSelectorControl")),this.roomEntryControl=$(I("roomEntryControl"));const t=new Array,e=this.element.querySelectorAll("#roomSelector option");for(let i=0;i<e.length;++i){const s=e[i];t.push({ShortName:s.value,Name:s.textContent||s.innerText})}this.roomSelect=vv("roomSelector","No rooms available",(t=>t.ShortName),(t=>t.Name)),this.roomSelect.addEventListener("input",(()=>this.validate())),this.roomSelect.emptySelectionEnabled=!1,this.roomSelect.values=t,this.roomSelect.selectedIndex=0,this.roomInput=ht(I("roomName")),this.roomInput.addEventListener("input",(()=>this.validate())),this.roomInput.addEventListener("keypress",(t=>{"Enter"===t.key&&(0===this.userName.length?this.userNameInput.focus():0===this.email.length&&this.emailInput.focus())})),this.userNameInput=ht(I("userName")),this.userNameInput.addEventListener("input",(()=>this.validate())),this.userNameInput.addEventListener("keypress",(t=>{"Enter"===t.key&&(0===this.userName.length?this.userNameInput.focus():0===this.roomName.length&&(this.roomSelectMode?this.roomSelect.focus():this.roomInput.focus()))})),this.emailInput=function(...t){return et(R("email"),...t)}(I("email")),this.emailInput.addEventListener("keypress",(t=>{"Enter"===t.key&&(0===this.userName.length?this.userNameInput.focus():0===this.roomName.length&&(this.roomSelectMode?this.roomSelect.focus():this.roomInput.focus()))}));K(I("createNewRoom")).addEventListener("click",(()=>{this.roomSelectMode=!1}));K(I("selectRoom")).addEventListener("click",(()=>{this.roomSelectMode=!0})),this.connectButton=K(I("connect"));const i=t=>{!t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&"Enter"===t.key&&this.userName.length>0&&this.roomName.length>0&&this.dispatchEvent(Lv)};this.connectButton.addEventListener("click",(()=>this.dispatchEvent(Lv))),this.roomInput.addEventListener("keypress",i),this.userNameInput.addEventListener("keypress",i),this.addEventListener("login",(()=>{this.connecting=!0})),this.roomSelectMode=!0,this.validate()}validate(){const t=this.roomName.length>0&&this.userName.length>0;iv(this.connectButton,!this.ready||this.connecting||this.connected||!t),this.connectButton.innerHTML=this.connected?"Connected":this.connecting?"Connecting...":this.ready?"Connect":"Loading..."}get roomSelectMode(){return"none"!==this.roomSelectControl.style.display}set roomSelectMode(t){Xf(this.roomSelectControl,t),Xf(this.roomEntryControl,!t),t?this.roomSelect.selectedValue={ShortName:this.roomInput.value}:this.roomSelect.selectedIndex>=0&&(this.roomInput.value=this.roomSelect.selectedValue.ShortName),this.validate()}get roomName(){return(this.roomSelectMode?this.roomSelect.selectedValue&&this.roomSelect.selectedValue.ShortName:this.roomInput.value)||""}set roomName(t){null!=t&&0!==t.length||(t=this.roomSelect.values[0].ShortName),this.roomInput.value=t,this.roomSelect.selectedValue={ShortName:t},this.roomSelectMode=this.roomSelect.selectedIndex>-1,this.validate()}set userName(t){this.userNameInput.value=t,this.validate()}get userName(){return this.userNameInput.value}set email(t){this.emailInput.value=t}get email(){return this.emailInput.value}get connectButtonText(){return this.connectButton.innerText||this.connectButton.textContent}set connectButtonText(t){this.connectButton.innerHTML=t}get ready(){return this._ready}set ready(t){this._ready=t,this.validate()}get connecting(){return this._connecting}set connecting(t){this._connecting=t,this.validate()}get connected(){return this._connected}set connected(t){this._connected=t,this.connecting=!1}},DB=new class extends Dv{constructor(){super("users"),this.roomName=null,this.userName=null,this.rows=new Map,this.users=new Map,this.avatarGs=new Map,this.lastUser=null,this.usersList=$(I("chatUsers")),Object.seal(this)}async startAsync(t,e){this.roomName=t,this.userName=e}update(){if(Yf(this))for(let t of this.users.entries()){const[e,i]=t;if(this.avatarGs.has(e)&&i.avatar){const t=this.avatarGs.get(e);t.clearRect(0,0,t.canvas.width,t.canvas.height),i.avatar.draw(t,t.canvas.width,t.canvas.height,i.isMe)}}}set(t){const e=!this.rows.has(t.id);this.delete(t.id);const i=this.rows.size+1;if(e){const e=$(Pv(1,i,2,1),V(-1),yw);setTimeout((()=>{this.usersList.removeChild(e)}),3e3),this.usersList.append(e),this.users.set(t.id,t),this.avatarGs.set(t.id,q(Q(32),M(32)).getContext("2d"))}const s=this.avatarGs.get(t.id).canvas,n=$(H(Pv(1,i,2,1),V(1),bw),new jf("mouseover",(t=>{Dw.apply(n.style)}),a),function(t,e){return new jf("mouseout",t,e)}((()=>bw.apply(n.style))),Wf((()=>{qf(this),Mw.id=t.id,this.dispatchEvent(Mw)})));var a;const o=[$(H(Pv(1,i),V(0)),s),$(H(Pv(2,i),V(0)),t.displayName),n];this.rows.set(t.id,o),this.usersList.append(...o)}delete(t){if(this.rows.has(t)){const e=this.rows.get(t);this.rows.delete(t);for(let t of e)this.usersList.removeChild(t);let i=1;for(let t of this.rows.values()){const e=Iv(i++);for(let i of t)e.apply(i)}}}clear(){for(let t of this.rows.keys())this.delete(t)}warn(...t){const e=$(H(Pv(1,this.rows.size+1,2,1),z("yellow")),...t.map((t=>t.toString())));this.usersList.append(e),setTimeout((()=>{this.usersList.removeChild(e)}),5e3)}},bB=new class extends m{constructor(t,e){super(),this._audioEnabled=!0,this._videoEnabled=!1;const i=t=>{this.zoom+=t,this.dispatchEvent(gv)};this.element=$(I("controls")),this.element.append(this.optionsButton=K(I("optionsButton"),T("Show/hide options"),Wf((()=>this.dispatchEvent(sv))),At(yp.value),At("Options")),this.instructionsButton=K(I("instructionsButton"),T("Show/hide instructions"),Wf((()=>this.dispatchEvent(rv))),At(tf.value),At("Info")),this.shareButton=K(I("shareButton"),T("Share your current room to twitter"),Wf((()=>this.dispatchEvent(nv))),function(...t){return Y("img",...t)}(_("https://cdn2.iconfinder.com/data/icons/minimalism/512/twitter.png"),function(t){return new B("alt",t,"applet","area","img","input")}("icon"),function(t){return new B("role",t)}("presentation"),M("25px"),W("2px auto -2px auto")),At("Tweet")),this.showUsersButton=K(I("showUsersButton"),T("View user directory"),Wf((()=>this.dispatchEvent(hv))),At(Hc.value),At("Users")),this.fullscreenButton=K(I("fullscreenButton"),T("Toggle fullscreen"),Wf((()=>this.dispatchEvent(ov))),Wf((()=>this.isFullscreen=!this.isFullscreen)),At(uf.value),At("Expand")),this.leaveButton=K(I("leaveButton"),T("Leave the room"),Wf((()=>this.dispatchEvent(av))),At(Nm.value),At("Leave")),$(I("toggleAudioControl"),D("comboButton"),this.toggleAudioButton=K(I("toggleAudioButton"),T("Toggle audio mute/unmute"),Wf((()=>this.dispatchEvent(cv))),this.toggleAudioLabel=At(om.value),At("Audio")),this.toggleVideoButton=K(I("toggleVideoButton"),T("Toggle video mute/unmute"),Wf((()=>this.dispatchEvent(Av))),this.toggleVideoLabel=At(Vp.value),At("Video")),this.changeDevicesButton=K(I("changeDevicesButton"),T("Change devices"),Wf((()=>this.dispatchEvent(lv))),At(Lg.value),At("Change"))),$(I("emojiControl"),D("comboButton"),new B("textAlign","center"),K(I("emoteButton"),T("Emote"),Wf((()=>this.dispatchEvent(uv))),this.emoteButton=At(Iu.value),At("Emote")),K(I("selectEmoteButton"),T("Select Emoji"),Wf((()=>this.dispatchEvent(dv))),At(Lg.value),At("Change"))),this.zoomInButton=K(I("zoomInButton"),T("Zoom in"),Wf((()=>i(.5))),At(cm.value),At("+")),$(I("zoomSliderContainer"),this.slider=function(...t){return et(R("range"),...t)}(I("zoomSlider"),T("Zoom"),E(t),x(e),O(.1),U("0"),Vf((()=>this.dispatchEvent(gv))))),this.zoomOutButton=K(I("zoomOutButton"),T("Zoom out"),Wf((()=>i(-.5))),At(Am.value),At("-"))),Object.seal(this)}get isFullscreen(){return null!==document.fullscreenElement}set isFullscreen(t){t?document.body.requestFullscreen():document.exitFullscreen(),$f(this.fullscreenButton,t,Kd.value,uf.value)}get style(){return this.element.style}isOpen(){return"none"!==this.style.display}setOpen(t,e){this.style.display=t?e||"":"none"}toggleOpen(t){this.setOpen(!this.isOpen(),t)}hide(){this.setOpen(!1)}show(){this.setOpen(!0)}get enabled(){return!this.instructionsButton.disabled}set enabled(t){const e=this.element.querySelectorAll("button");for(let i=0;i<e.length;++i)e[i].disabled=!t}get audioEnabled(){return this._audioEnabled}set audioEnabled(t){this._audioEnabled=t,$f(this.toggleAudioLabel,t,om.value,sm.value)}get videoEnabled(){return this._videoEnabled}set videoEnabled(t){this._videoEnabled=t,$f(this.toggleVideoLabel,t,Jp.value,Vp.value)}setEmojiButton(t){this.emoteButton.innerHTML=t.value}get zoom(){return parseFloat(this.slider.value)}set zoom(t){this.slider.value=t.toFixed(3)}}(.5,20),CB=new class extends Dv{constructor(){super("devices"),this.videoInputSelect=vv("videoInputDevices","No video input",(t=>t.deviceId),(t=>t.label),Vf((()=>this.dispatchEvent(Mv)))),this.audioInputSelect=vv("audioInputDevices","No audio input",(t=>t.deviceId),(t=>t.label),Vf((()=>this.dispatchEvent(bv)))),this.audioOutputSelect=vv("audioOutputDevices","No audio output",(t=>t.deviceId),(t=>t.label),Vf((()=>this.dispatchEvent(Cv)))),this.audioInputDevices=[],this.audioOutputDevices=[],this.videoInputDevices=[],Object.seal(this)}get audioInputDevices(){return this.audioInputSelect.values}set audioInputDevices(t){this.audioInputSelect.values=t}get currentAudioInputDevice(){return this.audioInputSelect.selectedValue}set currentAudioInputDevice(t){this.audioInputSelect.selectedValue=t}get audioOutputDevices(){return this.audioOutputSelect.values}set audioOutputDevices(t){this.audioOutputSelect.values=t}get currentAudioOutputDevice(){return this.audioOutputSelect.selectedValue}set currentAudioOutputDevice(t){this.audioOutputSelect.selectedValue=t}get videoInputDevices(){return this.videoInputSelect.values}set videoInputDevices(t){this.videoInputSelect.values=t}get currentVideoInputDevice(){return this.videoInputSelect.selectedValue}set currentVideoInputDevice(t){this.videoInputSelect.selectedValue=t}},MB=new class extends Dv{constructor(){super("options"),this._drawHearing=!1,this._inputBinding=new jv,this.user=null;const t=t=>()=>this.dispatchEvent(t),e=Vf(t(gw)),i=(t,e)=>{const i=Vv(t,"text",e,rw,new jf("keyup",(e=>{const i=e;"Tab"!==i.key&&"Shift"!==i.key&&(this._inputBinding.set(t,i.key),this.dispatchEvent(dw))}),s));var s;return i.value=this._inputBinding.get(t).toString(),i},s=(t,e)=>{const i=Vv(t,"text",e,hw);return this.addEventListener("gamepadButtonUp",(e=>{document.activeElement===i.input&&(this._inputBinding.set(t,e.button),this.dispatchEvent(dw))})),i.value=this._inputBinding.get(t).toString(),i},n=(t,e)=>{const i=Vv(t,"text",e,hw);return this.addEventListener("gamepadAxisMaxed",(e=>{document.activeElement===i.input&&(this._inputBinding.set(t,e.axis),this.dispatchEvent(dw))})),i.value=this._inputBinding.get(t).toString(),i},a=[Xv("avatar","Avatar",$(it(C("selectAvatarEmoji"),"Emoji: "),K(I("selectAvatarEmoji"),"Select",Wf(t(lw))))," or ",$(it(C("setAvatarURL"),"Photo: "),this.avatarURLInput=ct(S("https://example.com/me.png")),K(I("setAvatarURL"),"Set",Wf((()=>{this.avatarURL=this.avatarURLInput.value,this.dispatchEvent(cw)}))),this.clearAvatarURLButton=K(b,"Clear",Wf((()=>{this.avatarURL=null,this.dispatchEvent(cw)}))))," or ",$(it(C("videoAvatarButton"),"Video: "),this.useVideoAvatarButton=K(I("videoAvatarButton"),"Use video",Wf(t(mw)))),this.avatarPreview=q(Q(256),M(256))),Xv("interface","Interface",this.fontSizeInput=Vv("fontSize","number","Font size: ",U("10"),E(5),x(32),hw,Vf(t(uw))),at(this.drawHearingCheck=Vv("drawHearing","checkbox","Draw hearing range: ",Vf((()=>{this.drawHearing=!this.drawHearing,this.dispatchEvent(pw)}))),this.audioMinInput=Vv("minAudio","number","Min: ",U("1"),E(0),x(100),hw,e),this.audioMaxInput=Vv("maxAudio","number","Min: ",U("10"),E(0),x(100),hw,e),this.audioRolloffInput=Vv("rollof","number","Rollof: ",U("1"),E(.1),x(10),O(.1),hw,e))),Xv("keyboard","Keyboard",this.keyButtonUpInput=i("keyButtonUp","Up: "),this.keyButtonDownInput=i("keyButtonDown","Down: "),this.keyButtonLeftInput=i("keyButtonLeft","Left: "),this.keyButtonRightInput=i("keyButtonRight","Right: "),this.keyButtonEmoteInput=i("keyButtonEmote","Emote: "),this.keyButtonToggleAudioInput=i("keyButtonToggleAudio","Toggle audio: "),this.keyButtonZoomInInput=i("keyButtonZoomIn","Zoom in: "),this.keyButtonZoomOutInput=i("keyButtonZoomOut","Zoom out: ")),Xv("gamepad","Gamepad",$(it(C("gamepads"),"Use gamepad: "),this.gpSelect=vv("gamepads","No gamepad",(t=>t.id),(t=>t.id),Vf(t(Aw)))),this.gpAxisLeftRightInput=n("gpAxisLeftRight","Left/Right axis:"),this.gpAxisUpDownInput=n("gpAxisUpDown","Up/Down axis:"),this.gpButtonUpInput=s("gpButtonUp","Up button: "),this.gpButtonDownInput=s("gpButtonDown","Down button: "),this.gpButtonLeftInput=s("gpButtonLeft","Left button: "),this.gpButtonRightInput=s("gpButtonRight","Right button: "),this.gpButtonEmoteInput=s("gpButtonEmote","Emote button: "),this.gpButtonToggleAudioInput=s("gpButtonToggleAudio","Toggle audio button: "),this.gpButtonZoomInInput=s("gpButtonZoomIn","Zoom in: "),this.gpButtonZoomOutInput=s("gpButtonZoomOut","Zoom out: "))],o=[];for(let t=0;t<a.length;++t)o[t]="1fr",a[t].style.gridColumnStart=(t+1).toFixed(0);Ev(...o).apply(this.header),this.header.append(...a.map((t=>t.button))),this.content.append(...a.map((t=>t.element)));const r=t=>()=>{for(let e=0;e<a.length;++e)a[e].visible=e===t};for(let t=0;t<a.length;++t)a[t].visible=0===t,a[t].addEventListener("select",r(t));this._inputBinding.addEventListener("inputBindingChanged",(()=>{this.keyButtonUp=this._inputBinding.keyButtonUp,this.keyButtonDown=this._inputBinding.keyButtonDown,this.keyButtonLeft=this._inputBinding.keyButtonLeft,this.keyButtonRight=this._inputBinding.keyButtonRight,this.keyButtonEmote=this._inputBinding.keyButtonEmote,this.keyButtonToggleAudio=this._inputBinding.keyButtonToggleAudio,this.keyButtonZoomOut=this._inputBinding.keyButtonZoomOut,this.keyButtonZoomIn=this._inputBinding.keyButtonZoomIn,this.gpAxisLeftRight=this._inputBinding.gpAxisLeftRight,this.gpAxisUpDown=this._inputBinding.gpAxisUpDown,this.gpButtonUp=this._inputBinding.gpButtonUp,this.gpButtonDown=this._inputBinding.gpButtonDown,this.gpButtonLeft=this._inputBinding.gpButtonLeft,this.gpButtonRight=this._inputBinding.gpButtonRight,this.gpButtonEmote=this._inputBinding.gpButtonEmote,this.gpButtonToggleAudio=this._inputBinding.gpButtonToggleAudio,this.gpButtonZoomOut=this._inputBinding.gpButtonZoomOut,this.gpButtonZoomIn=this._inputBinding.gpButtonZoomIn})),this.gamepads=[],this._avatarG=this.avatarPreview.getContext("2d"),Object.seal(this)}update(){if(Yf(this)){const t=this.currentGamepad;t&&(this._pad?this._pad.update(t):(this._pad=new Nv(t),this._pad.addEventListener("gamepadbuttonup",(t=>{fw.button=t.button,this.dispatchEvent(fw)})),this._pad.addEventListener("gamepadaxismaxed",(t=>{vw.axis=t.axis,this.dispatchEvent(vw)})))),this.user&&this.user.avatar&&(this._avatarG.clearRect(0,0,this.avatarPreview.width,this.avatarPreview.height),this.user.avatar.draw(this._avatarG,this.avatarPreview.width,this.avatarPreview.height,!0))}}get avatarURL(){return 0===this.avatarURLInput.value.length?null:this.avatarURLInput.value}set avatarURL(t){n(t)?(this.avatarURLInput.value=t,Bw.apply(this.clearAvatarURLButton)):(this.avatarURLInput.value="",ww.apply(this.clearAvatarURLButton))}setAvatarVideo(t){this.useVideoAvatarButton.innerHTML=null!==t?"Remove video":"Use video"}get inputBinding(){return this._inputBinding.toJSON()}set inputBinding(t){this._inputBinding.copy(t)}get gamepads(){return this.gpSelect.values}set gamepads(t){const e=0===t.length;this.gpSelect.values=t,iv(this.gpAxisLeftRightInput,e),iv(this.gpAxisUpDownInput,e),iv(this.gpButtonUpInput,e),iv(this.gpButtonDownInput,e),iv(this.gpButtonLeftInput,e),iv(this.gpButtonRightInput,e),iv(this.gpButtonEmoteInput,e),iv(this.gpButtonToggleAudioInput,e)}get currentGamepadIndex(){return this.gpSelect.selectedIndex}get currentGamepad(){return this.currentGamepadIndex<0?null:navigator.getGamepads()[this.currentGamepadIndex]}get gamepadIndex(){return this.gpSelect.selectedIndex}set gamepadIndex(t){this.gpSelect.selectedIndex=t}get drawHearing(){return this._drawHearing}set drawHearing(t){this._drawHearing=t,this.drawHearingCheck.checked=t}get audioDistanceMin(){const t=parseFloat(this.audioMinInput.value);return l(t)?t:1}set audioDistanceMin(t){l(t)&&t>0&&(this.audioMinInput.value=t.toFixed(3),this.audioDistanceMin>this.audioDistanceMax&&(this.audioDistanceMax=this.audioDistanceMin))}get audioDistanceMax(){const t=parseFloat(this.audioMaxInput.value);return l(t)?t:10}set audioDistanceMax(t){l(t)&&t>0&&(this.audioMaxInput.value=t.toFixed(3),this.audioDistanceMin>this.audioDistanceMax&&(this.audioDistanceMin=this.audioDistanceMax))}get audioRolloff(){const t=parseFloat(this.audioRolloffInput.value);return l(t)?t:1}set audioRolloff(t){l(t)&&t>0&&(this.audioRolloffInput.value=t.toFixed(3))}get fontSize(){const t=parseFloat(this.fontSizeInput.value);return l(t)?t:16}set fontSize(t){l(t)&&t>0&&(this.fontSizeInput.value=t.toFixed(3))}get keyButtonUp(){return this.keyButtonUpInput.value}set keyButtonUp(t){this.keyButtonUpInput.value=t}get keyButtonDown(){return this.keyButtonDownInput.value}set keyButtonDown(t){this.keyButtonDownInput.value=t}get keyButtonLeft(){return this.keyButtonLeftInput.value}set keyButtonLeft(t){this.keyButtonLeftInput.value=t}get keyButtonRight(){return this.keyButtonRightInput.value}set keyButtonRight(t){this.keyButtonRightInput.value=t}get keyButtonEmote(){return this.keyButtonEmoteInput.value}set keyButtonEmote(t){this.keyButtonEmoteInput.value=t}get keyButtonToggleAudio(){return this.keyButtonToggleAudioInput.value}set keyButtonToggleAudio(t){this.keyButtonToggleAudioInput.value=t}get keyButtonZoomOut(){return this.keyButtonZoomOutInput.value}set keyButtonZoomOut(t){this.keyButtonZoomOutInput.value=t}get keyButtonZoomIn(){return this.keyButtonZoomInInput.value}set keyButtonZoomIn(t){this.keyButtonZoomInInput.value=t}get gpAxisLeftRight(){return parseInt(this.gpAxisLeftRightInput.value,10)}set gpAxisLeftRight(t){this.gpAxisLeftRightInput.value=t?.toFixed(0)}get gpAxisUpDown(){return parseInt(this.gpAxisUpDownInput.value,10)}set gpAxisUpDown(t){this.gpAxisUpDownInput.value=t?.toFixed(0)}get gpButtonUp(){return parseInt(this.gpButtonUpInput.value,10)}set gpButtonUp(t){this.gpButtonUpInput.value=t?.toFixed(0)}get gpButtonDown(){return parseInt(this.gpButtonDownInput.value,10)}set gpButtonDown(t){this.gpButtonDownInput.value=t?.toFixed(0)}get gpButtonLeft(){return parseInt(this.gpButtonLeftInput.value,10)}set gpButtonLeft(t){this.gpButtonLeftInput.value=t?.toFixed(0)}get gpButtonRight(){return parseInt(this.gpButtonRightInput.value,10)}set gpButtonRight(t){this.gpButtonRightInput.value=t?.toFixed(0)}get gpButtonEmote(){return parseInt(this.gpButtonEmoteInput.value,10)}set gpButtonEmote(t){this.gpButtonEmoteInput.value=t?.toFixed(0)}get gpButtonToggleAudio(){return parseInt(this.gpButtonToggleAudioInput.value,10)}set gpButtonToggleAudio(t){this.gpButtonToggleAudioInput.value=t?.toFixed(0)}get gpButtonZoomOut(){return parseInt(this.gpButtonZoomOutInput.value,10)}set gpButtonZoomOut(t){this.gpButtonZoomOutInput.value=t?.toFixed(0)}get gpButtonZoomIn(){return parseInt(this.gpButtonZoomInInput.value,10)}set gpButtonZoomIn(t){this.gpButtonZoomInInput.value=t?.toFixed(0)}},PB=new Dv("instructions"),IB=new class extends Dv{constructor(){super("emoji"),this.header.append(function(...t){return Y("h2",...t)}("Recent"),this.recent=at("(None)"));const t=new Array,e=new Array;let i=null,s=0;function n(t,e){let i=t.value,s=i.indexOf(Kn.value);return-1===s&&(s=i.indexOf(Jn.value)),s>=0&&(i=i.substring(0,s)),new xs(i+e.value,t.desc+"/"+e.desc)}const a=(t,o,r)=>{const c=h(t)&&t||!h(t)&&t.alts;for(let t of c){let h=null;const c=K(T(t.desc),Wf((e=>{i=i&&e.ctrlKey?n(i,t):t,this.preview.innerHTML=`${i.value} - ${i.desc}`,Sv.apply(this.confirmButton),h&&(Jf(h),c.innerHTML=t.value+(Yf(h)?"-":"+"))})),t.value);let A=null;r?(c.id="emoji-with-alt-"+s++,A=rt(st(c,it(C(c.id),t.desc)))):A=ot(c),t.alts&&(h=$(),e.push(h),a(t,h,!0),qf(h),A.appendChild(h),c.style.width="3em",c.innerHTML+="+"),t.width&&(c.style.width=t.width),t.color&&(c.style.color=t.color),o.appendChild(A)}};for(let t of Object.values(Tf))if(t instanceof Un){const e=tt(),i=at(),s=X(P("javascript:undefined"),T(t.desc),Wf((()=>{Jf(i),s.innerHTML=t.value+(Yf(i)?" -":" +")})),t.value+" -");a(t,i,!1),e.appendChild(s),this.content.appendChild(e),this.content.appendChild(i)}this.footer.append(this.confirmButton=K(D("confirm"),"OK",Wf((()=>{-1===t.indexOf(i)&&(t.push(i),this.recent.innerHTML="",a(t,this.recent,!1)),this.dispatchEvent(new kv(i)),qf(this)}))),K(D("cancel"),"Cancel",Wf((()=>{Fv.apply(this.confirmButton),this.dispatchEvent(_v),qf(this)}))),this.preview=ot(Pv(1,4,3,1))),Fv.apply(this.confirmButton),this.selectAsync=()=>new Promise(((t,i)=>{let s=null,n=null;const a=()=>{this.removeEventListener("emojiSelected",s),this.removeEventListener("emojiCanceled",n),this.removeEventListener("hidden",n)};s=e=>{a();try{t(e.emoji)}catch(t){i(t)}},n=()=>{a(),t(null)},this.addEventListener("emojiSelected",s),this.addEventListener("emojiCanceled",n),this.addEventListener("hidden",n),(()=>{for(let t of e)qf(t)})(),Kf(this)}))}},xB=new class extends zf{constructor(){super(120)}start(){const t=e=>{this._timer=requestAnimationFrame(t),this._onTick(e)};this._timer=requestAnimationFrame(t)}stop(){this._timer&&(cancelAnimationFrame(this._timer),super.stop())}},EB=b(!0),FB=b(!1);let SB=!1;function kB(t){return()=>_B(t)}function _B(t){SB||(qf(yB),qf(DB),qf(MB),qf(CB),qf(IB),qf(PB),Kf(t))}async function LB(t){if(!Yf(IB)){SB=!0,EB.apply(bB.optionsButton),EB.apply(bB.instructionsButton),EB.apply(bB.changeDevicesButton),qf(MB);const e=await IB.selectAsync();e&&t(e),FB.apply(bB.optionsButton),FB.apply(bB.instructionsButton),FB.apply(bB.changeDevicesButton),SB=!1}}async function OB(){await LB((t=>{BB.emote(wB.localUserID,t),bB.setEmojiButton(t)}))}function TB(){wB.audio.setAudioProperties(mB.audioDistanceMin=BB.audioDistanceMin=MB.audioDistanceMin,mB.audioDistanceMax=BB.audioDistanceMax=MB.audioDistanceMax,mB.audioRolloff=MB.audioRolloff,wB.audio.algorithm,mB.transitionSpeed)}function RB(){MB.gamepads=navigator.getGamepads(),MB.gamepadIndex=BB.gamepadIndex}function UB(t){BB.withUser("list user in directory",t,(t=>DB.set(t)))}Object.assign(window,{settings:mB,fetcher:fB,client:wB,game:BB,login:yB,directory:DB,controls:bB,devices:CB,options:MB,emoji:IB,instructions:PB}),window.addEventListener("gamepadconnected",RB),window.addEventListener("gamepaddisconnected",RB),window.addEventListener("resize",(()=>BB.resize())),bB.addEventListener("toggleOptions",kB(MB)),bB.addEventListener("toggleInstructions",kB(PB)),bB.addEventListener("toggleUserDirectory",kB(DB)),bB.addEventListener("changeDevices",kB(CB)),bB.addEventListener("tweet",(()=>{const t="https://twitter.com/intent/tweet?text="+encodeURIComponent(`Join my #TeleParty ${document.location.href}`);window.open(t)})),bB.addEventListener("leave",(async()=>{DB.clear(),await wB.leave()})),bB.addEventListener("selectEmoji",OB),bB.addEventListener("emote",(()=>{BB.emote(wB.localUserID,BB.currentEmoji)})),bB.addEventListener("toggleAudio",(async()=>{await wB.toggleAudioMuted()})),bB.addEventListener("toggleVideo",(async()=>{await wB.toggleVideoMuted()})),bB.addEventListener("zoomChanged",(()=>{mB.zoom=BB.zoom=bB.zoom})),yB.addEventListener("login",(async()=>{await wB.audio.createClip("join",!1,!1,!1,.5,"audio/door-open.mp3"),await wB.audio.createClip("leave",!1,!1,!0,.5,"audio/door-close.mp3"),TB();let t=yB.roomName;yB.roomSelectMode||(t=await async function(t){return await fB.postObjectForText("/Game/Rooms",t)}(t)),await async function(t,e,i){await fB.postObject("/Contacts",{Name:t,Email:e,Room:i})}(mB.userName=yB.userName,mB.email=yB.email,mB.roomName=t);const e=`Calla - chatting in ${t}`,i=`${window.location.pathname}#${t}`;window.history.replaceState({},e,i),await DB.startAsync(t,yB.userName),await wB.join(t),await wB.identify(yB.userName)})),MB.addEventListener("audioPropertiesChanged",TB),MB.addEventListener("selectAvatar",(async()=>{await LB((t=>{mB.avatarEmoji=t.value,wB.setAvatarEmoji(t),BB.me.setAvatarEmoji(t.value),UB(wB.localUserID)}))})),MB.addEventListener("avatarURLChanged",(()=>{mB.avatarURL=MB.avatarURL,wB.setAvatarURL(MB.avatarURL),BB.me.setAvatarImage(MB.avatarURL),UB(wB.localUserID)})),MB.addEventListener("toggleDrawHearing",(()=>{mB.drawHearing=BB.drawHearing=MB.drawHearing})),MB.addEventListener("fontSizeChanged",(()=>{mB.fontSize=BB.fontSize=MB.fontSize})),MB.addEventListener("gamepadChanged",(()=>{mB.gamepadIndex=BB.gamepadIndex=MB.gamepadIndex})),MB.addEventListener("inputBindingChanged",(()=>{mB.inputBinding=BB.inputBinding=MB.inputBinding})),MB.addEventListener("toggleVideo",(async()=>{await wB.toggleVideoMuted()})),CB.addEventListener("audioInputChanged",(async()=>{const t=CB.currentAudioInputDevice;await wB.setAudioInputDevice(t),mB.preferredAudioInputID=wB.preferredAudioInputID})),CB.addEventListener("audioOutputChanged",(async()=>{const t=CB.currentAudioOutputDevice;await wB.setAudioOutputDevice(t),mB.preferredAudioOutputID=wB.preferredAudioOutputID})),CB.addEventListener("videoInputChanged",(async()=>{const t=CB.currentVideoInputDevice;await wB.setVideoInputDevice(t),mB.preferredVideoInputID=wB.preferredVideoInputID})),BB.addEventListener("emojiNeeded",OB),BB.addEventListener("emote",(t=>{wB.emote(t.emoji)})),BB.addEventListener("userJoined",(t=>{UB(t.user.id)})),BB.addEventListener("toggleAudio",(async()=>{await wB.toggleAudioMuted(),mB.preferredAudioInputID=wB.preferredAudioInputID})),BB.addEventListener("toggleVideo",(async()=>{await wB.toggleVideoMuted(),mB.preferredVideoInputID=wB.preferredVideoInputID}));const QB=new xs(null,"");BB.addEventListener("gameStarted",(()=>{BB.resize(),qf(yB),Kf(bB),MB.user=BB.me,bB.enabled=!0,mB.avatarEmoji=mB.avatarEmoji||Lr.random().value,QB.value=mB.avatarEmoji,wB.setAvatarEmoji(QB),BB.me.setAvatarEmoji(mB.avatarEmoji),UB(wB.localUserID)})),BB.addEventListener("userMoved",(t=>{wB.setLocalPose(t.x,0,t.y,0,0,-1,0,1,0)})),BB.addEventListener("gameEnded",(()=>{yB.connected=!1,_B(yB)})),BB.addEventListener("zoomChanged",(()=>{mB.zoom=bB.zoom=BB.zoom})),DB.addEventListener("warpTo",(t=>{BB.visit(t.id)})),wB.addEventListener("conferenceJoined",(async t=>{yB.connected=!0,await BB.startAsync(t.id,yB.userName,t.pose,null,yB.roomName),MB.avatarURL=mB.avatarURL,wB.setAvatarURL(mB.avatarURL),BB.me.setAvatarImage(mB.avatarURL),CB.audioInputDevices=await wB.getAudioInputDevices(!0),CB.audioOutputDevices=await wB.getAudioOutputDevices(!0),CB.videoInputDevices=await wB.getVideoInputDevices(!0),mB.preferredAudioInputID=wB.preferredAudioInputID,mB.preferredAudioOutputID=wB.preferredAudioOutputID,mB.preferredVideoInputID=wB.preferredVideoInputID,CB.currentAudioInputDevice=await wB.getCurrentAudioInputDevice(),CB.currentAudioOutputDevice=await wB.getCurrentAudioOutputDevice(),CB.currentVideoInputDevice=await wB.getCurrentVideoInputDevice();const e=wB.isAudioMuted;BB.muteUserAudio(wB.localUserID,e),bB.audioEnabled=!e;const i=wB.isVideoMuted;BB.muteUserVideo(wB.localUserID,i),bB.videoEnabled=!i})),wB.addEventListener("conferenceLeft",(()=>{BB.end()})),wB.addEventListener("participantJoined",(t=>{wB.audio.playClip("join"),BB.addUser(t.id,t.displayName,t.source.pose)})),wB.addEventListener("participantLeft",(t=>{wB.audio.playClip("leave"),BB.removeUser(t.id),DB.delete(t.id)})),wB.addEventListener("audioAdded",(t=>UB(t.id))),wB.addEventListener("audioRemoved",(t=>UB(t.id))),wB.addEventListener("videoAdded",(t=>{BB.setAvatarVideo(t.id,t.stream),UB(t.id)})),wB.addEventListener("videoRemoved",(t=>{BB.setAvatarVideo(t.id,null),UB(t.id)})),wB.addEventListener("avatarChanged",(t=>{BB.setAvatarURL(t.id,t.url),UB(t.id)})),wB.addEventListener("userNameChanged",(t=>{BB.changeUserName(t.id,t.displayName),UB(t.id)})),wB.addEventListener("audioMuteStatusChanged",(async t=>{t.id===wB.localUserID&&(bB.audioEnabled=!t.muted,CB.currentAudioInputDevice=await wB.getCurrentAudioInputDevice(),mB.preferredAudioInputID=wB.preferredAudioInputID),BB.muteUserAudio(t.id,t.muted)})),wB.addEventListener("videoMuteStatusChanged",(async t=>{t.id===wB.localUserID&&(bB.videoEnabled=!t.muted,t.muted?MB.setAvatarVideo(null):MB.setAvatarVideo(BB.me.avatarVideo.element),CB.currentVideoInputDevice=await wB.getCurrentVideoInputDevice()),BB.muteUserVideo(t.id,t.muted),mB.preferredVideoInputID=wB.preferredVideoInputID}));const NB=new xs(null,"");wB.addEventListener("emote",(t=>{NB.value=t.emoji,BB.emote(t.id,NB)}));const HB=new xs(null,"");wB.addEventListener("setAvatarEmoji",(t=>{HB.value=t.emoji,BB.setAvatarEmoji(t.id,HB),UB(t.id)})),wB.addEventListener("audioActivity",(t=>{BB.updateAudioActivity(t.id,t.isActive)})),xB.addEventListener("tick",(t=>{wB.update(),MB.update(),DB.update(),BB.update(t.dt)})),MB.drawHearing=BB.drawHearing=mB.drawHearing,MB.audioDistanceMin=BB.audioDistanceMin=mB.audioDistanceMin,MB.audioDistanceMax=BB.audioDistanceMax=mB.audioDistanceMax,MB.audioRolloff=mB.audioRolloff,MB.fontSize=BB.fontSize=mB.fontSize,MB.gamepads=navigator.getGamepads(),MB.gamepadIndex=BB.gamepadIndex=mB.gamepadIndex,MB.inputBinding=BB.inputBinding=mB.inputBinding,bB.zoom=BB.zoom=mB.zoom,BB.cameraZ=BB.targetCameraZ,BB.transitionSpeed=mB.transitionSpeed=.5,yB.userName=mB.userName,yB.roomName=mB.roomName,yB.email=mB.email,bB.enabled=!1,_B(yB),yB.ready=!0,xB.start(),async function(){await Qf(Uf({fontFamily:"Noto Color Emoji",fontSize:100})),await wB.getMediaPermissions(),await wB.prepare(Gf,"tele.calla.chat","conference.tele.calla.chat"),await wB.connect()}()}();
//# sourceMappingURL=game.min.js.map
