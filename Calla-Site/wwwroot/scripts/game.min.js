/**
 * https://github.com/csnover/TraceKit
 * @license MIT
 * @namespace TraceKit
 */
!function(e,t){if(e){var n={},i=e.TraceKit,o=[].slice,r=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;n.noConflict=function(){return e.TraceKit=i,n},n.wrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){throw n.report(e),e}}},n.report=function(){var t,i,o=[],a=null,c=null;function l(e,t,i){var r=null;if(!t||n.collectWindowErrors){for(var a in o)if(s(o,a))try{o[a](e,t,i)}catch(e){r=e}if(r)throw r}}function u(e,i,o,s,a){if(c)n.computeStackTrace.augmentStackTraceWithInitialElement(c,i,o,e),h();else if(a)l(n.computeStackTrace(a),!0,a);else{var u,d={url:i,line:o,column:s},A=e;if("[object String]"==={}.toString.call(e)){var p=e.match(r);p&&(u=p[1],A=p[2])}d.func=n.computeStackTrace.guessFunctionName(d.url,d.line),d.context=n.computeStackTrace.gatherContext(d.url,d.line),l({name:u,message:A,mode:"onerror",stack:[d]},!0,null)}return!!t&&t.apply(this,arguments)}function h(){var e=c,t=a;c=null,a=null,l(e,!1,t)}function d(e){if(c){if(a===e)return;h()}var t=n.computeStackTrace(e);throw c=t,a=e,setTimeout((function(){a===e&&h()}),t.incomplete?2e3:0),e}return d.subscribe=function(n){!function(){if(!0===i)return;t=e.onerror,e.onerror=u,i=!0}(),o.push(n)},d.unsubscribe=function(n){for(var r=o.length-1;r>=0;--r)o[r]===n&&o.splice(r,1);0===o.length&&(e.onerror=t,i=!1)},d}(),n.computeStackTrace=function(){var t={};function i(i){if("string"!=typeof i)return[];if(!s(t,i)){var o="",r="";try{r=e.document.domain}catch(e){}var a=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(i);a&&a[2]===r&&(o=function(t){if(!n.remoteFetching)return"";try{var i=function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}}();return i.open("GET",t,!1),i.send(""),i.responseText}catch(e){return""}}(i)),t[i]=o?o.split("\n"):[]}return t[i]}function o(e,t){var n,o=/function ([^(]*)\(([^)]*)\)/,r=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,s="",c=i(e);if(!c.length)return"?";for(var l=0;l<10;++l)if(!a(s=c[t-l]+s)){if(n=r.exec(s))return n[1];if(n=o.exec(s))return n[1]}return"?"}function r(e,t){var o=i(e);if(!o.length)return null;var r=[],s=Math.floor(n.linesOfContext/2),c=s+n.linesOfContext%2,l=Math.max(0,t-s-1),u=Math.min(o.length,t+c-1);t-=1;for(var h=l;h<u;++h)a(o[h])||r.push(o[h]);return r.length>0?r:null}function c(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function l(e){return c(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function u(e,t){for(var n,o,r=0,s=t.length;r<s;++r)if((n=i(t[r])).length&&(n=n.join("\n"),o=e.exec(n)))return{url:t[r],line:n.substring(0,o.index).split("\n").length,column:o.index-n.lastIndexOf("\n",o.index)-1};return null}function h(e,t,n){var o,r=i(t),s=new RegExp("\\b"+c(e)+"\\b");return n-=1,r&&r.length>n&&(o=s.exec(r[n]))?o.index:null}function d(t){if(!a(e&&e.document)){for(var n,i,o,r,s=[e.location.href],h=e.document.getElementsByTagName("script"),d=""+t,A=0;A<h.length;++A){var p=h[A];p.src&&s.push(p.src)}if(o=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(d)){var g=o[1]?"\\s+"+o[1]:"",f=o[2].split(",").join("\\s*,\\s*");n=c(o[3]).replace(/;$/,";?"),i=new RegExp("function"+g+"\\s*\\(\\s*"+f+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=new RegExp(c(d).replace(/\s+/g,"\\s+"));if(r=u(i,s))return r;if(o=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(d)){var m=o[1];if(n=l(o[2]),r=u(i=new RegExp("on"+m+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),s[0]))return r;if(r=u(i=new RegExp(n),s))return r}return null}}function A(e){if(!e.stack)return null;for(var t,n,i,s=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,c=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d=/\((\S*)(?::(\d+))(?::(\d+))\)/,A=e.stack.split("\n"),p=[],g=/^(.*) is undefined$/.exec(e.message),f=0,m=A.length;f<m;++f){if(n=s.exec(A[f])){var v=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=d.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),i={url:v?null:n[2],func:n[1]||"?",args:v?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=l.exec(A[f]))i={url:n[2],func:n[1]||"?",args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=c.exec(A[f])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(t=u.exec(n[3]))?(n[3]=t[1],n[4]=t[2],n[5]=null):0!==f||n[5]||a(e.columnNumber)||(p[0].column=e.columnNumber+1),i={url:n[3],func:n[1]||"?",args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!i.func&&i.line&&(i.func=o(i.url,i.line)),i.context=i.line?r(i.url,i.line):null,p.push(i)}return p.length?(p[0]&&p[0].line&&!p[0].column&&g&&(p[0].column=h(g[1],p[0].url,p[0].line)),{mode:"stack",name:e.name,message:e.message,stack:p}):null}function p(e,t,n,i){var s={url:t,line:n};if(s.url&&s.line){e.incomplete=!1,s.func||(s.func=o(s.url,s.line)),s.context||(s.context=r(s.url,s.line));var a=/ '([^']+)' /.exec(i);if(a&&(s.column=h(a[1],s.url,s.line)),e.stack.length>0&&e.stack[0].url===s.url){if(e.stack[0].line===s.line)return!1;if(!e.stack[0].line&&e.stack[0].func===s.func)return e.stack[0].line=s.line,e.stack[0].context=s.context,!1}return e.stack.unshift(s),e.partial=!0,!0}return e.incomplete=!0,!1}function g(e,t){for(var i,r,s,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,c=[],l={},u=!1,A=g.caller;A&&!u;A=A.caller)if(A!==f&&A!==n.report){if(r={url:null,func:"?",args:[],line:null,column:null},A.name?r.func=A.name:(i=a.exec(A.toString()))&&(r.func=i[1]),void 0===r.func)try{r.func=i.input.substring(0,i.input.indexOf("{"))}catch(e){}if(s=d(A)){r.url=s.url,r.line=s.line,"?"===r.func&&(r.func=o(r.url,r.line));var m=/ '([^']+)' /.exec(e.message||e.description);m&&(r.column=h(m[1],s.url,s.line))}l[""+A]?u=!0:l[""+A]=!0,c.push(r)}t&&c.splice(0,t);var v={mode:"callers",name:e.name,message:e.message,stack:c};return p(v,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),v}function f(t,n){var a=null;n=null==n?0:+n;try{if(a=function(e){var t=e.stacktrace;if(t){for(var n,i=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,s=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,a=t.split("\n"),c=[],l=0;l<a.length;l+=2){var u=null;if((n=i.exec(a[l]))?u={url:n[2],line:+n[1],column:null,func:n[3],args:[]}:(n=s.exec(a[l]))&&(u={url:n[6],line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[]}),u){if(!u.func&&u.line&&(u.func=o(u.url,u.line)),u.line)try{u.context=r(u.url,u.line)}catch(e){}u.context||(u.context=[a[l+1]]),c.push(u)}}return c.length?{mode:"stacktrace",name:e.name,message:e.message,stack:c}:null}}(t))return a}catch(e){false}try{if(a=A(t))return a}catch(e){false}try{if(a=function(t){var n=t.message.split("\n");if(n.length<4)return null;var a,c=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,h=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,d=/^\s*Line (\d+) of function script\s*$/i,A=[],p=e&&e.document&&e.document.getElementsByTagName("script"),g=[];for(var f in p)s(p,f)&&!p[f].src&&g.push(p[f]);for(var m=2;m<n.length;m+=2){var v=null;if(a=c.exec(n[m]))v={url:a[2],func:a[3],args:[],line:+a[1],column:null};else if(a=h.exec(n[m])){v={url:a[3],func:a[4],args:[],line:+a[1],column:null};var w=+a[1],y=g[a[2]-1];if(y){var b=i(v.url);if(b){var C=(b=b.join("\n")).indexOf(y.innerText);C>=0&&(v.line=w+b.substring(0,C).split("\n").length)}}}else if(a=d.exec(n[m])){var D=e.location.href.replace(/#.*$/,""),x=u(new RegExp(l(n[m+1])),[D]);v={url:D,func:"",args:[],line:x?x.line:a[1],column:null}}if(v){v.func||(v.func=o(v.url,v.line));var S=r(v.url,v.line),E=S?S[Math.floor(S.length/2)]:null;S&&E.replace(/^\s*/,"")===n[m+1].replace(/^\s*/,"")?v.context=S:v.context=[n[m+1]],A.push(v)}}return A.length?{mode:"multiline",name:t.name,message:n[0],stack:A}:null}(t))return a}catch(e){false}try{if(a=g(t,n+1))return a}catch(e){false}return{name:t.name,message:t.message,mode:"failed"}}return f.augmentStackTraceWithInitialElement=p,f.computeStackTraceFromStackProp=A,f.guessFunctionName=o,f.gatherContext=r,f.ofCaller=function(e){e=1+(null==e?0:+e);try{throw new Error}catch(t){return f(t,e+1)}},f.getSource=i,f}(),n.extendToAsynchronousCallbacks=function(){var t=function(t){var i=e[t];e[t]=function(){var e=o.call(arguments),t=e[0];return"function"==typeof t&&(e[0]=n.wrap(t)),i.apply?i.apply(this,e):i(e[0],e[1])}};t("setTimeout"),t("setInterval")},n.remoteFetching||(n.remoteFetching=!0),n.collectWindowErrors||(n.collectWindowErrors=!0),(!n.linesOfContext||n.linesOfContext<1)&&(n.linesOfContext=11),"function"==typeof define&&define.amd?define("TraceKit",[],n):"undefined"!=typeof module&&module.exports&&e.module!==module?module.exports=n:e.TraceKit=n}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){return void 0===e}}("undefined"!=typeof window?window:global),TraceKit.report.subscribe(e=>{e.userAgent=navigator.userAgent;const t=new XMLHttpRequest;t.open("POST","/ErrorLog",!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(e))});try{function e(e){if(!(e instanceof Array))throw new Error("Must provide an array as the first parameter.");return e.splice(0)}function t(e,...t){if(!e||void 0===e.length)throw new Error("Must provide an array as the first parameter.");for(let n of t)for(let t of e)if(n(t))return t;return null}class xn extends Event{constructor(){super("audioActivity"),this.id=null,this.isActive=!1,Object.seal(this)}set(e,t){this.id=e,this.isActive=t}}function n(e,t,n){return typeof e===t||e instanceof n}function i(e){return n(e,"function",Function)}function o(e){return n(e,"string",String)}function r(e){return n(e,"number",Number)}function s(e){return n(e,"boolean",Boolean)}const Sn=function(){try{return new window.EventTarget,class extends EventTarget{constructor(){super()}}}catch(e){const t=new WeakMap;return class{constructor(){t.set(this,new Map)}addEventListener(e,n,o){if(i(n)){const i=t.get(this);i.has(e)||i.set(e,[]);const r=i.get(e);r.find(e=>e.callback===n)||r.push({target:this,callback:n,options:o})}}removeEventListener(e,n){if(i(n)){const i=t.get(this);if(i.has(e)){const t=i.get(e),o=t.findIndex(e=>e.callback===n);o>=0&&function(e,t){if(!(e instanceof Array))throw new Error("Must provide an array as the first parameter.");e.splice(t,1)}(t,o)}}}dispatchEvent(e){const n=t.get(this);if(n.has(e.type)){const t=n.get(e.type);for(let n of t)n.options&&n.options.once&&this.removeEventListener(e.type,n.callback),n.callback.call(n.target,e);return!e.defaultPrevented}return!0}}}}();function a(e){return r(e)&&!Number.isNaN(e)}function c(e,t,n){return Math.min(n,Math.max(t,e))}function l(e,t,n){const i=n-t;return 0===i?0:(e-t)/i}function u(e,t,n){return e*(n-t)+t}function h(e,t,n){return(1-n)*e+n*t}class En{constructor(){this.x=0,this.y=0,this.z=0,Object.seal(this)}set(e,t,n){this.x=e,this.y=t,this.z=n}copy(e){this.x=e.x,this.y=e.y,this.z=e.z}lerp(e,t,n){this.x=h(e.x,t.x,n),this.y=h(e.y,t.y,n),this.z=h(e.z,t.z,n)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}sub(e,t){this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z}slerp(e,t,n){const i=e.dot(t),o=Math.acos(i);if(0!==o){const i=Math.sin(o),r=Math.sin((1-n)*o)/i,s=Math.sin(n*o)/i;this.x=r*e.x+s*t.x,this.y=r*e.y+s*t.y,this.x=r*e.z+s*t.z}}get lenSq(){return this.dot(this)}get len(){return Math.sqrt(this.lenSq)}normalize(){const e=this.len;0!==e&&(this.x/=e,this.y/=e,this.z/=e)}}class Pn{constructor(){this.t=0,this.p=new En,this.f=new En,this.f.set(0,0,-1),this.u=new En,this.u.set(0,1,0),Object.seal(this)}set(e,t,n,i,o,r,s,a,c){this.p.set(e,t,n),this.f.set(i,o,r),this.u.set(s,a,c)}copy(e){this.p.copy(e.p),this.f.copy(e.f),this.u.copy(e.u)}interpolate(e,t,n){if(n<=e.t)this.copy(e);else if(t.t<=n)this.copy(t);else if(e.t<n){const i=l(n,e.t,t.t);this.p.lerp(e.p,t.p,i),this.f.slerp(e.f,t.f,i),this.u.slerp(e.u,t.u,i),this.t=n}}}class Bn{constructor(){this.start=new Pn,this.current=new Pn,this.end=new Pn,Object.seal(this)}setTarget(e,t,n,i,o,r,s,a,c,l,u){this.start.copy(this.current),this.start.t=l,this.end.set(e,t,n,i,o,r,s,a,c),this.end.t=l+u}setTargetPosition(e,t,n,i,o){this.setTarget(e,t,n,this.end.f.x,this.end.f.y,this.end.f.z,this.end.u.x,this.end.u.y,this.end.u.z,i,o)}setTargetOrientation(e,t,n,i,o,r,s,a){this.setTarget(this.end.p.x,this.end.p.y,this.end.p.z,e,t,n,i,o,r,s,a)}update(e){this.current.interpolate(this.start,this.end,e)}}class _n extends Sn{constructor(){super(),this.minDistance=1,this.minDistanceSq=1,this.maxDistance=10,this.maxDistanceSq=100,this.rolloff=1,this.transitionTime=.5}setAudioProperties(e,t,n,i){this.minDistance=e,this.maxDistance=t,this.transitionTime=i,this.rolloff=n}dispose(){}update(e){}}class Mn{constructor(){this.pose=new Bn,this.tracks=new Map,this._spatializer=null}get spatializer(){return this._spatializer}set spatializer(e){this.spatializer!==e&&(this._spatializer&&this._spatializer.dispose(),this._spatializer=e)}dispose(){this.spatializer=null}update(e){this.pose.update(e),this.spatializer&&this.spatializer.update(this.pose.current)}}class kn{constructor(){this._t=performance.now()/1e3,Object.seal(this)}get currentTime(){return performance.now()/1e3-this._t}get destination(){return null}}const Tn=HTMLAudioElement.prototype.setSinkId instanceof Function;class In extends _n{constructor(e,t){if(super(),this.id=e,this.audio=null,this.stream=null,this.volume=1,t instanceof HTMLAudioElement)this.audio=t;else if(t instanceof MediaStream)this.stream=t,this.audio=document.createElement("audio"),this.audio.srcObject=this.stream;else if(null!==t)throw new Error("Can't create a node from the given stream. Expected type HTMLAudioElement or MediaStream.");this.audio.playsInline=!0}play(){this.audio&&this.audio.play()}dispose(){this.audio&&(this.audio.pause(),this.audio=null),this.stream=null,super.dispose()}setAudioOutputDevice(e){this.audio&&Tn&&this.audio.setSinkId(e)}}const Fn=new xn,Ln=0,On=60,Rn=5;function d(e,t,n){var i=t/2;return c(Math.round(e/i*n),0,n)}class Nn extends In{constructor(e,t,n,i,o){super(e,t),this.bufferSize=n,!a(this.bufferSize)||this.bufferSize<=0?(this.buffer=null,this.analyser=null):(this.buffer=new Float32Array(this.bufferSize),this.analyser=i.createAnalyser(),this.analyser.fftSize=2*this.bufferSize,this.analyser.smoothingTimeConstant=.2),this.inNode=o,this.wasActive=!1,this.lastAudible=!0,this.activityCounter=0,this.source=null;const r=()=>{if(!this.source)if(this.stream)try{this.stream.active&&(this.source=i.createMediaStreamSource(this.stream),this.source.connect(this.analyser),this.source.connect(this.inNode),setTimeout(r,0))}catch(e){console.warn("Creating the media stream failed. Reason: ",e)}else if(this.audio)try{this.source=i.createMediaElementSource(this.audio),this.source.connect(this.inNode),this.analyser&&this.source.connect(this.analyser)}catch(e){console.warn("Creating the media stream failed. Reason: ",e)}};r()}update(e){if(super.update(e),this.analyser&&this.source){this.analyser.getFloatFrequencyData(this.buffer);const e=1.1+function(e,t,n,i,o){const r=e.context.sampleRate,s=d(n,r,o),a=d(i,r,o),c=a-s;let l=0;for(let e=s;e<a;++e)l+=t[e];return 0===c?0:l/c}(this.analyser,this.buffer,85,255,this.bufferSize)/100;e>=.5&&this.activityCounter<On?this.activityCounter++:e<.5&&this.activityCounter>Ln&&this.activityCounter--;const t=this.activityCounter>Rn;this.wasActive!==t&&(this.wasActive=t,Fn.id=this.id,Fn.isActive=t,this.dispatchEvent(Fn))}}dispose(){this.source&&(this.analyser&&this.source.disconnect(this.analyser),this.source.disconnect(this.inNode)),this.source=null,this.inNode=null,this.analyser=null,this.buffer=null,super.dispose()}}class Hn extends Nn{constructor(e,t,n,i,o,r=null){super(e,t,n,i,o),this.outNode=r||o,this.outNode.connect(i.destination),this.inNode!==this.outNode&&this.inNode.connect(this.outNode)}dispose(){this.inNode!==this.outNode&&this.inNode.disconnect(this.outNode),this.outNode.disconnect(this.outNode.context.destination),this.outNode=null,super.dispose()}}class jn extends Hn{constructor(e,t,n,i){const o=i.createPanner();super(e,t,n,i,o),this.inNode.panningModel="HRTF",this.inNode.distanceModel="inverse",this.inNode.coneInnerAngle=360,this.inNode.coneOuterAngle=0,this.inNode.coneOuterGain=0}update(e){super.update(e),this.inNode.refDistance=this.minDistance,this.inNode.rolloffFactor=this.rolloff}}class Qn extends jn{constructor(e,t,n,i){super(e,t,n,i),Object.seal(this)}update(e){super.update(e);const{p:t,f:n}=e;this.inNode.positionX.setValueAtTime(t.x,0),this.inNode.positionY.setValueAtTime(t.y,0),this.inNode.positionZ.setValueAtTime(t.z,0),this.inNode.orientationX.setValueAtTime(n.x,0),this.inNode.orientationY.setValueAtTime(n.y,0),this.inNode.orientationZ.setValueAtTime(n.z,0)}}class zn extends _n{constructor(){super()}createSource(e,t,n,i){throw new Error("Calla no longer supports manual volume scaling")}}class Un extends zn{constructor(e){super(),this.node=e}dispose(){this.node=null,super.dispose()}}class Wn extends Un{constructor(e){super(e),Object.seal(this)}update(e){super.update(e);const{p:t,f:n,u:i}=e;this.node.positionX.setValueAtTime(t.x,0),this.node.positionY.setValueAtTime(t.y,0),this.node.positionZ.setValueAtTime(t.z,0),this.node.forwardX.setValueAtTime(n.x,0),this.node.forwardY.setValueAtTime(n.y,0),this.node.forwardZ.setValueAtTime(n.z,0),this.node.upX.setValueAtTime(i.x,0),this.node.upY.setValueAtTime(i.y,0),this.node.upZ.setValueAtTime(i.z,0)}createSource(e,t,n,i){return new Qn(e,t,n,i)}}class Gn extends jn{constructor(e,t,n,i){super(e,t,n,i),Object.seal(this)}update(e){super.update(e);const{p:t,f:n}=e;this.inNode.setPosition(t.x,t.y,t.z),this.inNode.setOrientation(n.x,n.y,n.z)}}class qn extends Un{constructor(e){super(e),Object.seal(this)}update(e){super.update(e);const{p:t,f:n,u:i}=e;this.node.setPosition(t.x,t.y,t.z),this.node.setOrientation(n.x,n.y,n.z,i.x,i.y,i.z)}createSource(e,t,n,i){return new Gn(e,t,n,i)}}
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(){const e=`[Omnitone] ${Array.prototype.slice.call(arguments).join(" ")} (${performance.now().toFixed(2)}ms)`;window.console.log(e)}function p(){const e=`[Omnitone] ${Array.prototype.slice.call(arguments).join(" ")} (${performance.now().toFixed(2)}ms)`;throw window.console.error(e),new Error(e)}let Vn,Yn,Xn,Jn,Zn,Kn,$n,ei,ti,ni,ii,oi,ri,si,ai,ci,li,ui,hi,di,Ai,pi,gi,fi,mi,vi,wi,yi,bi;function g(e){return e instanceof AudioContext||e instanceof OfflineAudioContext}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ci={BASE64:"base64",URL:"url"};class Di{constructor(e,t,n){g(e)||p("BufferList: Invalid BaseAudioContext."),this._context=e,this._options={dataType:Ci.BASE64,verbose:!1},n&&(n.dataType&&function(e,t){for(let n in e)if(t===e[n])return!0;return!1}(Ci,n.dataType)&&(this._options.dataType=n.dataType),n.verbose&&(this._options.verbose=Boolean(n.verbose))),this._bufferData=this._options.dataType===Ci.BASE64?t:t.slice(0)}async load(){try{const e=this._bufferData.map((e,t)=>this._launchAsyncLoadTask(e,t)),t=await Promise.all(e);return A("BufferList: "+(this._options.dataType===Ci.BASE64?this._bufferData.length+" AudioBuffers from Base64-encoded HRIRs":this._bufferData.length+" files via XHR")+" loaded successfully."),t}catch(e){p('BufferList: error while loading "'+bData+'". ('+e.message+")")}}async _launchAsyncLoadTask(e,t){const n=await this._fetch(e),i=await this._context.decodeAudioData(n);return A("BufferList: "+(this._options.dataType===Ci.BASE64?"ArrayBuffer("+t+") from Base64-encoded HRIR":'"'+e+'"')+" successfully loaded."),i}async _fetch(e){if(this._options.dataType===Ci.BASE64)return function(e){const t=window.atob(e),n=new Uint8Array(t.length);return n.forEach((e,i)=>n[i]=t.charCodeAt(i)),n.buffer}(e);{const t=await fetch(e);return await t.arrayBuffer()}}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t){this._context=e,this._active=!1,this._isBufferLoaded=!1,this._buildAudioGraph(),t&&this.setHRIRBufferList(t),this.enable()}_buildAudioGraph(){this._splitterWYZX=this._context.createChannelSplitter(4),this._mergerWY=this._context.createChannelMerger(2),this._mergerZX=this._context.createChannelMerger(2),this._convolverWY=this._context.createConvolver(),this._convolverZX=this._context.createConvolver(),this._splitterWY=this._context.createChannelSplitter(2),this._splitterZX=this._context.createChannelSplitter(2),this._inverter=this._context.createGain(),this._mergerBinaural=this._context.createChannelMerger(2),this._summingBus=this._context.createGain(),this._splitterWYZX.connect(this._mergerWY,0,0),this._splitterWYZX.connect(this._mergerWY,1,1),this._splitterWYZX.connect(this._mergerZX,2,0),this._splitterWYZX.connect(this._mergerZX,3,1),this._mergerWY.connect(this._convolverWY),this._mergerZX.connect(this._convolverZX),this._convolverWY.connect(this._splitterWY),this._convolverZX.connect(this._splitterZX),this._splitterWY.connect(this._mergerBinaural,0,0),this._splitterWY.connect(this._mergerBinaural,0,1),this._splitterWY.connect(this._mergerBinaural,1,0),this._splitterWY.connect(this._inverter,1,0),this._inverter.connect(this._mergerBinaural,0,1),this._splitterZX.connect(this._mergerBinaural,0,0),this._splitterZX.connect(this._mergerBinaural,0,1),this._splitterZX.connect(this._mergerBinaural,1,0),this._splitterZX.connect(this._mergerBinaural,1,1),this._convolverWY.normalize=!1,this._convolverZX.normalize=!1,this._inverter.gain.value=-1,this.input=this._splitterWYZX,this.output=this._summingBus}dispose(){this._active&&this.disable(),this._splitterWYZX.disconnect(this._mergerWY,0,0),this._splitterWYZX.disconnect(this._mergerWY,1,1),this._splitterWYZX.disconnect(this._mergerZX,2,0),this._splitterWYZX.disconnect(this._mergerZX,3,1),this._mergerWY.disconnect(this._convolverWY),this._mergerZX.disconnect(this._convolverZX),this._convolverWY.disconnect(this._splitterWY),this._convolverZX.disconnect(this._splitterZX),this._splitterWY.disconnect(this._mergerBinaural,0,0),this._splitterWY.disconnect(this._mergerBinaural,0,1),this._splitterWY.disconnect(this._mergerBinaural,1,0),this._splitterWY.disconnect(this._inverter,1,0),this._inverter.disconnect(this._mergerBinaural,0,1),this._splitterZX.disconnect(this._mergerBinaural,0,0),this._splitterZX.disconnect(this._mergerBinaural,0,1),this._splitterZX.disconnect(this._mergerBinaural,1,0),this._splitterZX.disconnect(this._mergerBinaural,1,1)}setHRIRBufferList(e){this._isBufferLoaded||(this._convolverWY.buffer=e[0],this._convolverZX.buffer=e[1],this._isBufferLoaded=!0)}enable(){this._mergerBinaural.connect(this._summingBus),this._active=!0}disable(){this._mergerBinaural.disconnect(),this._active=!1}}const Si=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wIA9v8QAPv/CwD+/wcA/v8MAP//AQD7/wEACAAEAPj/+v8YABAA7v/n//v/9P/M/8D//f34/R38EvzxAfEBtA2lDTcBJQFJ9T71FP0D/cD1tfVo/Wv9uPTO9PPmOufc/U/+agL3Aisc/RxuGKEZBv3j/iYMzQ2gAzsEQQUABiQFrASzA5cB2QmyCy0AtgR4AeYGtfgAA2j5OQHP+scArPsMBJgEggIEBtz6+QVq/pj/aPg8BPP3gQEi+jEAof0fA1v9+/7S+8IBjvwd/xD4IADL/Pf9zvs+/l3+wgB7/+L+7fzFADH9kf6A+n3+DP6+/TP9xP68/pn+w/26/i39YgA0/u790Pt9/kD+7v1s/Wb+8f4C/1P+pf/x/cT+6/3p/Xz9ff5F/0f9G/4r/6v/4P5L/sL+ff7c/pj+Ov7X/UT+9P5G/oz+6v6A/2D+9/6P/8r/bP7m/ij+C//e/tj/Gf4e/9v+FwDP/lz/sP7F/2H+rv/G/s7/Hf7y/4P+NAD9/k0AK/6w/zP/hACh/sX/gf44AOP+dgCm/iUAk/5qAOD+PwC+/jEAWP4CAAr/bQBw/vv/zf5iACD/OgCS/uD/Cv9oAAb/CgDK/kwA//5tACH/TgCg/h4AHP9aABP/JADP/hEAYv9gAAj/3f8m/ysAYv8gACX/8/8k/ysAXv8bABH//v8j/ygAa/8qAAD/9f9g/1YAWf8JACH/AgB2/z4AXP/w/z3/FgB2/ykAX//9/z//EwCV/zUAS//n/1T/GACK/x4ATv/0/4P/QQB4//v/WP/2/3X/HAB8//P/V//3/2f/AQBh/9v/Tf/x/5P/IwCI/wMAf/8hAKP/JACZ/xUAiv8nAK//HgCr/yMAm/8uAMz/OACi/yQAqf87AMT/MwCY/yUAtP9FAMH/KgCu/ycAyP85AMv/IwCz/xoA1f8qAMn/FgC8/xQA4/8nAMX/CwDJ/xQA4f8ZAMH/BgDO/xQA4f8WAMP/BwDU/xQA4P8QAMH/AQDb/xQA3P8JAMP/AgDh/xIA2v8EAMj/AgDk/w0A1f/+/8v/AwDm/wwA0v/+/9H/BgDl/wkAzv/8/9T/BwDk/wcAzv/8/9r/CQDi/wQAzf/8/9//CADf////0P/9/+L/BwDd//7/0////+T/BgDb//z/1f8AAOf/BQDZ//v/2v8CAOb/AwDY//v/3v8EAOb/AgDY//3/4f8FAOX/AQDZ//7/5P8GAOP/AADb/wAA5/8GAOH////d/wIA5/8FAOD////f/wMA6P8FAOD////h/wQA6P8EAN7////h/wUA4v8DANv/AQDd/wQA3P8CANn/AgDb/wMA2/8CANv/AgDd/wIA3v8CAOH/AQDj/wEA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAA/f8CAP//AQD//wEA//8BAP3/AAACAP7/+f8AAAIA/P8FAAQA8/8AABoA+f/V/wQAHQDO/xoAQQBO/ocA0Px1/ucHW/4UCm8HLO6kAjv8/fCRDdAAYfPiBIgFXveUCM0GBvh6/nz7rf0J/QcQSRVdBgoBSgFR62r9NP8m+LoEAvriBVAAiAPmABEGMf2l+SwBjva6/G4A//8P/CYDMgXm/R0CKAE6/fcBBwAtAND+kQA0A5UDhwFs/8IB8fydAEP/A/8v/e7/mP8j/2YBIwE3Av0AYv+uAOD8lgAg/wwAIf/L/n0Ae//OAJMB3P/XAF//XwCM/08AB/8NAEf/rf4jAT3/lgAJAP4AHgDpAO8AUf9L/07/Qf8KAOD/x/+D/3sATQCDAMoA0f79/+L/EQDt/7EAqv+S/7IAuv/o/wgAc//X//H/SwCm/+3/Yf/B/yoAAADI/7X/AwBg/5EATgCX/xYA/P+q/00AVACY/6v/BADD/zwALQCN/8z/KQDu/ygAEgCZ/6f/VQDC//T/KQCs/7P/UgAfAO7/NgC8/57/awAZAPP/+P/V/8z/bQBBAL//DgD0/+T/TABBAMz/CwAxAPz/SQBqALn/BgALAPz/EAA7AIz/3/8iAAUA//8kALf/y/9VABQA+v81AOj/0P9cAB4A+f8WAOr/vv83ABgAw/8JAOj/4f8nACIAsf/y/w4A3v8gACQAxP/n/ycA7P8WAC0Ayf/U/ycA9v/7/yUA0P/P/zUABADc/xUA5P/J/zcACwDS/xUA9P/m/zAACQDX/+3/9v/2/yQACgDZ/+P/AwAKABYA///b/9j/EQALABkADgD6/+7/GwD4/w4A8P/w//j/EgAEAAUA9f/1/wQAGgD4/wAA5////wAAGQD1////7f8FAAUAFQDv/wAA6v8LAAcAFQDs/wEA9P8SAAYACwDr//7/AQASAAYABQDv/wIAAwAWAAIAAgDv/wAABgATAAEA/f/u/wQABgAQAPr/+P/z/wUACQALAPj/9//4/wgABwAKAPT/+f/5/w4ABwAIAPT/+//9/w4AAwADAPH//f///w8A//8BAPP///8BAA0A/f/+//X/AgACAA0A+//8//b/BAADAAoA+f/7//n/BgADAAcA+P/7//v/BwABAAQA+P/8//3/CQABAAIA9//9////CQD/////+P///wAACAD9//7/+f8AAAAABwD8//3/+v8CAAAABgD7//z//P8EAAAABAD6//3//P8FAP//AgD6//7//v8FAP7/AQD7//////8GAP7/AAD7/wEA//8EAP3/AAD9/wEA/v8DAP3/AAD9/wIA/v8CAP3/AQD9/wIA/v8CAP7/AQD+/wEA"];
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this._context=e,this._splitter=this._context.createChannelSplitter(4),this._inY=this._context.createGain(),this._inZ=this._context.createGain(),this._inX=this._context.createGain(),this._m0=this._context.createGain(),this._m1=this._context.createGain(),this._m2=this._context.createGain(),this._m3=this._context.createGain(),this._m4=this._context.createGain(),this._m5=this._context.createGain(),this._m6=this._context.createGain(),this._m7=this._context.createGain(),this._m8=this._context.createGain(),this._outY=this._context.createGain(),this._outZ=this._context.createGain(),this._outX=this._context.createGain(),this._merger=this._context.createChannelMerger(4),this._splitter.connect(this._inY,1),this._splitter.connect(this._inZ,2),this._splitter.connect(this._inX,3),this._inY.gain.value=-1,this._inX.gain.value=-1,this._inY.connect(this._m0),this._inY.connect(this._m1),this._inY.connect(this._m2),this._inZ.connect(this._m3),this._inZ.connect(this._m4),this._inZ.connect(this._m5),this._inX.connect(this._m6),this._inX.connect(this._m7),this._inX.connect(this._m8),this._m0.connect(this._outY),this._m1.connect(this._outZ),this._m2.connect(this._outX),this._m3.connect(this._outY),this._m4.connect(this._outZ),this._m5.connect(this._outX),this._m6.connect(this._outY),this._m7.connect(this._outZ),this._m8.connect(this._outX),this._splitter.connect(this._merger,0,0),this._outY.connect(this._merger,0,1),this._outZ.connect(this._merger,0,2),this._outX.connect(this._merger,0,3),this._outY.gain.value=-1,this._outX.gain.value=-1,this.setRotationMatrix3(new Float32Array([1,0,0,0,1,0,0,0,-1])),this.input=this._splitter,this.output=this._merger}dispose(){this._splitter.disconnect(this._inY,1),this._splitter.disconnect(this._inZ,2),this._splitter.disconnect(this._inX,3),this._inY.disconnect(this._m0),this._inY.disconnect(this._m1),this._inY.disconnect(this._m2),this._inZ.disconnect(this._m3),this._inZ.disconnect(this._m4),this._inZ.disconnect(this._m5),this._inX.disconnect(this._m6),this._inX.disconnect(this._m7),this._inX.disconnect(this._m8),this._m0.disconnect(this._outY),this._m1.disconnect(this._outZ),this._m2.disconnect(this._outX),this._m3.disconnect(this._outY),this._m4.disconnect(this._outZ),this._m5.disconnect(this._outX),this._m6.disconnect(this._outY),this._m7.disconnect(this._outZ),this._m8.disconnect(this._outX),this._splitter.disconnect(this._merger,0,0),this._outY.disconnect(this._merger,0,1),this._outZ.disconnect(this._merger,0,2),this._outX.disconnect(this._merger,0,3)}setRotationMatrix3(e){this._m0.gain.value=e[0],this._m1.gain.value=e[1],this._m2.gain.value=e[2],this._m3.gain.value=e[3],this._m4.gain.value=e[4],this._m5.gain.value=e[5],this._m6.gain.value=e[6],this._m7.gain.value=e[7],this._m8.gain.value=e[8]}setRotationMatrix4(e){this._m0.gain.value=e[0],this._m1.gain.value=e[1],this._m2.gain.value=e[2],this._m3.gain.value=e[4],this._m4.gain.value=e[5],this._m5.gain.value=e[6],this._m6.gain.value=e[8],this._m7.gain.value=e[9],this._m8.gain.value=e[10]}getRotationMatrix3(){const e=new Float32Array(9);return e[0]=this._m0.gain.value,e[1]=this._m1.gain.value,e[2]=this._m2.gain.value,e[3]=this._m3.gain.value,e[4]=this._m4.gain.value,e[5]=this._m5.gain.value,e[6]=this._m6.gain.value,e[7]=this._m7.gain.value,e[8]=this._m8.gain.value,e}getRotationMatrix4(){const e=new Float32Array(16);return e[0]=this._m0.gain.value,e[1]=this._m1.gain.value,e[2]=this._m2.gain.value,e[4]=this._m3.gain.value,e[5]=this._m4.gain.value,e[6]=this._m5.gain.value,e[8]=this._m6.gain.value,e[9]=this._m7.gain.value,e[10]=this._m8.gain.value,e}}
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi={DEFAULT:[0,1,2,3],SAFARI:[2,0,1,3],FUMA:[0,3,1,2]};class Bi{constructor(e,t){this._context=e,this._splitter=this._context.createChannelSplitter(4),this._merger=this._context.createChannelMerger(4),this.input=this._splitter,this.output=this._merger,this.setChannelMap(t||Pi.DEFAULT)}setChannelMap(e){Array.isArray(e)&&(this._channelMap=e,this._splitter.disconnect(),this._splitter.connect(this._merger,0,this._channelMap[0]),this._splitter.connect(this._merger,1,this._channelMap[1]),this._splitter.connect(this._merger,2,this._channelMap[2]),this._splitter.connect(this._merger,3,this._channelMap[3]))}dipose(){this._splitter.disconnect(this._merger,0,this._channelMap[0]),this._splitter.disconnect(this._merger,1,this._channelMap[1]),this._splitter.disconnect(this._merger,2,this._channelMap[2]),this._splitter.disconnect(this._merger,3,this._channelMap[3])}}Bi.ChannelMap=Pi;var f=Object.freeze({AMBISONIC:"ambisonic",BYPASS:"bypass",OFF:"off"});
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t){g(e)||p("FOARenderer: Invalid BaseAudioContext."),this._context=e,this._config={channelMap:Bi.ChannelMap.DEFAULT,renderingMode:f.AMBISONIC},t&&(t.channelMap&&(Array.isArray(t.channelMap)&&4===t.channelMap.length?this._config.channelMap=t.channelMap:p("FOARenderer: Invalid channel map. (got "+t.channelMap+")")),t.hrirPathList&&(Array.isArray(t.hrirPathList)&&2===t.hrirPathList.length?this._config.pathList=t.hrirPathList:p("FOARenderer: Invalid HRIR URLs. It must be an array with 2 URLs to HRIR files. (got "+t.hrirPathList+")")),t.renderingMode&&(Object.values(f).includes(t.renderingMode)?this._config.renderingMode=t.renderingMode:A("FOARenderer: Invalid rendering mode order. (got"+t.renderingMode+') Fallbacks to the mode "ambisonic".'))),this._buildAudioGraph(),this._tempMatrix4=new Float32Array(16)}_buildAudioGraph(){this.input=this._context.createGain(),this.output=this._context.createGain(),this._bypass=this._context.createGain(),this._foaRouter=new Bi(this._context,this._config.channelMap),this._foaRotator=new Ei(this._context),this._foaConvolver=new xi(this._context),this.input.connect(this._foaRouter.input),this.input.connect(this._bypass),this._foaRouter.output.connect(this._foaRotator.input),this._foaRotator.output.connect(this._foaConvolver.input),this._foaConvolver.output.connect(this.output),this.input.channelCount=4,this.input.channelCountMode="explicit",this.input.channelInterpretation="discrete"}dipose(){mode===f.BYPASS&&this._bypass.connect(this.output),this.input.disconnect(this._foaRouter.input),this.input.disconnect(this._bypass),this._foaRouter.output.disconnect(this._foaRotator.input),this._foaRotator.output.disconnect(this._foaConvolver.input),this._foaConvolver.output.disconnect(this.output),this._foaConvolver.dispose(),this._foaRotator.dispose(),this._foaRouter.dipose()}async initialize(){A("FOARenderer: Initializing... (mode: "+this._config.renderingMode+")");const e=this._config.pathList?new Di(this._context,this._config.pathList,{dataType:"url"}):new Di(this._context,Si);try{const t=await e.load();this._foaConvolver.setHRIRBufferList(t),this.setRenderingMode(this._config.renderingMode),A("FOARenderer: HRIRs loaded successfully. Ready.")}catch(e){p("FOARenderer: HRIR loading/decoding failed. Reason: "+e.message)}}setChannelMap(e){e.toString()!==this._config.channelMap.toString()&&(A("Remapping channels (["+this._config.channelMap.toString()+"] -> ["+e.toString()+"])."),this._config.channelMap=e.slice(),this._foaRouter.setChannelMap(this._config.channelMap))}setRotationMatrix3(e){this._foaRotator.setRotationMatrix3(e)}setRotationMatrix4(e){this._foaRotator.setRotationMatrix4(e)}setRotationMatrixFromCamera(e){var t,n;t=this._tempMatrix4,n=e.elements,Vn=n[0],Yn=n[1],Xn=n[2],Jn=n[3],Zn=n[4],Kn=n[5],$n=n[6],ei=n[7],ti=n[8],ni=n[9],ii=n[10],oi=n[11],ri=n[12],si=n[13],ai=n[14],ci=n[15],li=Vn*Kn-Yn*Zn,ui=Vn*$n-Xn*Zn,hi=Vn*ei-Jn*Zn,di=Yn*$n-Xn*Kn,Ai=Yn*ei-Jn*Kn,pi=Xn*ei-Jn*$n,gi=ti*si-ni*ri,fi=ti*ai-ii*ri,mi=ti*ci-oi*ri,vi=ni*ai-ii*si,wi=ni*ci-oi*si,yi=ii*ci-oi*ai,bi=li*yi-ui*wi+hi*vi+di*mi-Ai*fi+pi*gi,bi&&(bi=1/bi,t[0]=(Kn*yi-$n*wi+ei*vi)*bi,t[1]=(Xn*wi-Yn*yi-Jn*vi)*bi,t[2]=(si*pi-ai*Ai+ci*di)*bi,t[3]=(ii*Ai-ni*pi-oi*di)*bi,t[4]=($n*mi-Zn*yi-ei*fi)*bi,t[5]=(Vn*yi-Xn*mi+Jn*fi)*bi,t[6]=(ai*hi-ri*pi-ci*ui)*bi,t[7]=(ti*pi-ii*hi+oi*ui)*bi,t[8]=(Zn*wi-Kn*mi+ei*gi)*bi,t[9]=(Yn*mi-Vn*wi-Jn*gi)*bi,t[10]=(ri*Ai-si*hi+ci*li)*bi,t[11]=(ni*hi-ti*Ai-oi*li)*bi,t[12]=(Kn*fi-Zn*vi-$n*gi)*bi,t[13]=(Vn*vi-Yn*fi+Xn*gi)*bi,t[14]=(si*ui-ri*di-ai*li)*bi,t[15]=(ti*di-ni*ui+ii*li)*bi),this._foaRotator.setRotationMatrix4(this._tempMatrix4)}getRenderingMode(){return this._config.renderingMode}setRenderingMode(e){if(e!==this._config.renderingMode){switch(e){case f.AMBISONIC:this._foaConvolver.enable(),this._bypass.disconnect();break;case f.BYPASS:this._foaConvolver.disable(),this._bypass.connect(this.output);break;case f.OFF:this._foaConvolver.disable(),this._bypass.disconnect();break;default:return void A('FOARenderer: Rendering mode "'+e+'" is not supported.')}this._config.renderingMode=e,A("FOARenderer: Rendering mode changed. ("+e+")")}}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t,n){this._context=e,this._active=!1,this._isBufferLoaded=!1,this._ambisonicOrder=t,this._numberOfChannels=(this._ambisonicOrder+1)*(this._ambisonicOrder+1),this._buildAudioGraph(),n&&this.setHRIRBufferList(n),this.enable()}_buildAudioGraph(){const e=Math.ceil(this._numberOfChannels/2);this._inputSplitter=this._context.createChannelSplitter(this._numberOfChannels),this._stereoMergers=[],this._convolvers=[],this._stereoSplitters=[],this._positiveIndexSphericalHarmonics=this._context.createGain(),this._negativeIndexSphericalHarmonics=this._context.createGain(),this._inverter=this._context.createGain(),this._binauralMerger=this._context.createChannelMerger(2),this._outputGain=this._context.createGain();for(let t=0;t<e;++t)this._stereoMergers[t]=this._context.createChannelMerger(2),this._convolvers[t]=this._context.createConvolver(),this._stereoSplitters[t]=this._context.createChannelSplitter(2),this._convolvers[t].normalize=!1;for(let e=0;e<=this._ambisonicOrder;++e)for(let t=-e;t<=e;t++){const n=e*e+e+t,i=Math.floor(n/2);this._inputSplitter.connect(this._stereoMergers[i],n,n%2),this._stereoMergers[i].connect(this._convolvers[i]),this._convolvers[i].connect(this._stereoSplitters[i]),t>=0?this._stereoSplitters[i].connect(this._positiveIndexSphericalHarmonics,n%2):this._stereoSplitters[i].connect(this._negativeIndexSphericalHarmonics,n%2)}this._positiveIndexSphericalHarmonics.connect(this._binauralMerger,0,0),this._positiveIndexSphericalHarmonics.connect(this._binauralMerger,0,1),this._negativeIndexSphericalHarmonics.connect(this._binauralMerger,0,0),this._negativeIndexSphericalHarmonics.connect(this._inverter),this._inverter.connect(this._binauralMerger,0,1),this._inverter.gain.value=-1,this.input=this._inputSplitter,this.output=this._outputGain}dispose(){this._active&&this.disable();for(let e=0;e<=this._ambisonicOrder;++e)for(let t=-e;t<=e;t++){const n=e*e+e+t,i=Math.floor(n/2);this._inputSplitter.disconnect(this._stereoMergers[i],n,n%2),this._stereoMergers[i].disconnect(this._convolvers[i]),this._convolvers[i].disconnect(this._stereoSplitters[i]),t>=0?this._stereoSplitters[i].disconnect(this._positiveIndexSphericalHarmonics,n%2):this._stereoSplitters[i].disconnect(this._negativeIndexSphericalHarmonics,n%2)}this._positiveIndexSphericalHarmonics.disconnect(this._binauralMerger,0,0),this._positiveIndexSphericalHarmonics.disconnect(this._binauralMerger,0,1),this._negativeIndexSphericalHarmonics.disconnect(this._binauralMerger,0,0),this._negativeIndexSphericalHarmonics.disconnect(this._inverter),this._inverter.disconnect(this._binauralMerger,0,1)}setHRIRBufferList(e){if(!this._isBufferLoaded){for(let t=0;t<e.length;++t)this._convolvers[t].buffer=e[t];this._isBufferLoaded=!0}}enable(){this._binauralMerger.connect(this._outputGain),this._active=!0}disable(){this._binauralMerger.disconnect(),this._active=!1}}
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(e,t){return e===t?1:0}function v(e,t,n,i,o){const r=(i+t)*(2*t+1)+(n+t);e[t-1][r].gain.value=o}function w(e,t,n,i){const o=(i+t)*(2*t+1)+(n+t);return e[t-1][o].gain.value}function b(e,t,n,i,o){return i===o?w(e,1,t,1)*w(e,o-1,n,o-1)-w(e,1,t,-1)*w(e,o-1,n,1-o):i===-o?w(e,1,t,1)*w(e,o-1,n,1-o)+w(e,1,t,-1)*w(e,o-1,n,o-1):w(e,1,t,0)*w(e,o-1,n,i)}function C(e,t,n,i){return b(e,0,t,n,i)}function D(e,t,n,i){if(0===t)return b(e,1,1,n,i)+b(e,-1,-1,n,i);if(t>0){const o=m(t,1);return b(e,1,t-1,n,i)*Math.sqrt(1+o)-b(e,-1,1-t,n,i)*(1-o)}{const o=m(t,-1);return b(e,1,t+1,n,i)*(1-o)+b(e,-1,-t-1,n,i)*Math.sqrt(1+o)}}function S(e,t,n,i){return 0===t?0:t>0?b(e,1,t+1,n,i)+b(e,-1,-t-1,n,i):b(e,1,t-1,n,i)-b(e,-1,1-t,n,i)}function E(e,t,n){const i=m(e,0),o=Math.abs(t)===n?1/(2*n*(2*n-1)):1/((n+t)*(n-t));return[Math.sqrt((n+e)*(n-e)*o),.5*(1-2*i)*Math.sqrt((1+i)*(n+Math.abs(e)-1)*(n+Math.abs(e))*o),-.5*(1-i)*Math.sqrt((n-Math.abs(e)-1)*(n-Math.abs(e)))*o]}function P(e,t){for(let n=-t;n<=t;n++)for(let i=-t;i<=t;i++){const o=E(n,i,t);Math.abs(o[0])>0&&(o[0]*=C(e,n,i,t)),Math.abs(o[1])>0&&(o[1]*=D(e,n,i,t)),Math.abs(o[2])>0&&(o[2]*=S(e,n,i,t)),v(e,t,n,i,o[0]+o[1]+o[2])}}function B(e){for(let t=2;t<=e.length;t++)P(e,t)}class ki{constructor(e,t){this._context=e,this._ambisonicOrder=t;const n=(t+1)*(t+1);this._splitter=this._context.createChannelSplitter(n),this._merger=this._context.createChannelMerger(n),this._gainNodeMatrix=[];for(let e=1;e<=t;e++){const t=e*e,n=2*e+1;this._gainNodeMatrix[e-1]=[];for(let i=0;i<n;i++){const o=t+i;for(let r=0;r<n;r++){const s=t+r,a=i*n+r;this._gainNodeMatrix[e-1][a]=this._context.createGain(),this._splitter.connect(this._gainNodeMatrix[e-1][a],o),this._gainNodeMatrix[e-1][a].connect(this._merger,0,s)}}}this._splitter.connect(this._merger,0,0),this.setRotationMatrix3(new Float32Array([1,0,0,0,1,0,0,0,-1])),this.input=this._splitter,this.output=this._merger}dispose(){for(let e=1;e<=ambisonicOrder;e++){const t=e*e,n=2*e+1;for(let i=0;i<n;i++){const o=t+i;for(let r=0;r<n;r++){const s=t+r,a=i*n+r;this._splitter.disconnect(this._gainNodeMatrix[e-1][a],o),this._gainNodeMatrix[e-1][a].disconnect(this._merger,0,s)}}}this._splitter.disconnect(this._merger,0,0)}setRotationMatrix3(e){this._gainNodeMatrix[0][0].gain.value=e[0],this._gainNodeMatrix[0][1].gain.value=e[1],this._gainNodeMatrix[0][2].gain.value=e[2],this._gainNodeMatrix[0][3].gain.value=e[3],this._gainNodeMatrix[0][4].gain.value=e[4],this._gainNodeMatrix[0][5].gain.value=e[5],this._gainNodeMatrix[0][6].gain.value=e[6],this._gainNodeMatrix[0][7].gain.value=e[7],this._gainNodeMatrix[0][8].gain.value=e[8],B(this._gainNodeMatrix)}setRotationMatrix4(e){this._gainNodeMatrix[0][0].gain.value=e[0],this._gainNodeMatrix[0][1].gain.value=e[1],this._gainNodeMatrix[0][2].gain.value=e[2],this._gainNodeMatrix[0][3].gain.value=e[4],this._gainNodeMatrix[0][4].gain.value=e[5],this._gainNodeMatrix[0][5].gain.value=e[6],this._gainNodeMatrix[0][6].gain.value=e[8],this._gainNodeMatrix[0][7].gain.value=e[9],this._gainNodeMatrix[0][8].gain.value=e[10],B(this._gainNodeMatrix)}getRotationMatrix3(){const e=new Float32Array(9);return e[0]=this._gainNodeMatrix[0][0].gain.value,e[1]=this._gainNodeMatrix[0][1].gain.value,e[2]=this._gainNodeMatrix[0][2].gain.value,e[3]=this._gainNodeMatrix[0][3].gain.value,e[4]=this._gainNodeMatrix[0][4].gain.value,e[5]=this._gainNodeMatrix[0][5].gain.value,e[6]=this._gainNodeMatrix[0][6].gain.value,e[7]=this._gainNodeMatrix[0][7].gain.value,e[8]=this._gainNodeMatrix[0][8].gain.value,e}getRotationMatrix4(){const e=new Float32Array(16);return e[0]=this._gainNodeMatrix[0][0].gain.value,e[1]=this._gainNodeMatrix[0][1].gain.value,e[2]=this._gainNodeMatrix[0][2].gain.value,e[4]=this._gainNodeMatrix[0][3].gain.value,e[5]=this._gainNodeMatrix[0][4].gain.value,e[6]=this._gainNodeMatrix[0][5].gain.value,e[8]=this._gainNodeMatrix[0][6].gain.value,e[9]=this._gainNodeMatrix[0][7].gain.value,e[10]=this._gainNodeMatrix[0][8].gain.value,e}getAmbisonicOrder(){return this._ambisonicOrder}}const Ti=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wQA8/8YAP3/CgACAAAA//8CAAYA8/8AAPH/CgDv/97/e/+y/9P+UQDwAHUBEwV7/pP8P/y09bsDwAfNBGYIFf/Y+736+fP890Hv8AGcC3T/vwYy+S70AAICA3AD4AagBw0R4w3ZEAcN8RVYAV8Q8P2z+kECHwdK/jIG0QNKAYUElf8IClj7BgjX+/f8j/l3/5f/6fkK+xz8FP0v/nj/Mf/n/FcBPfvH/1H3+gBP/Hf8cfiCAR/54QBh+UQAcvkzAWL8TP13+iD/V/73+wv9Kv+Y/hv+xPz7/UL83//a/z/9AP6R/5L+jf26/P3+rP26/tD8nP7B/Pv+WP1V/sP9gv91/3P9xP3J/nv/GP5S/sb+IP8v/9j/dv7U/pr+6v+u/Z3/sv5cAOr9Q/83/+n/zP5x/57+2//k/nwA/v01//L+SACB/sD/Ff81AJT+TgDp/ocAm/5dAFT+MgD+/pMAW/7o/yH/xQDA/kkA9P6LAL3+pAC0/iQAz/5UALD+UwAt/3UAhf4UAA//pwC+/joAz/5aAAv/fwDY/iMAIf+uAPP+ZAAc/0QAy/4xAB7/TgDs/goADP8wAEL/NwDo/ub/Uf9BAC3/+v9F/y4ARP9HAFP/EQA3/xMATP81AG3/HQAu/wgAaP9FACb/9f9B/y0AUP8rAED/CwBV/z4AW/8TAGH/BQBK/xsAfv8eAFn/AgB3/zwAff8RAGj//v+E/yAAb//0/3n/FwBz/xcAiv8PAHn/FQCJ/xgAg//x/3j/EQCa/ycAff/w/47/HwCI//X/iv/7/43/JQCM/+n/kP8AAJb/JACj//7/oP8ZAML/SwCo/w4Atv8tAMb/PACr/xcAwP9HAMP/OADF/y4A0f9IANL/NwC//zEA0f9LAMb/MAC8/y4A3f9GAMH/FQDQ/yYA2/8sAMT/AwDX/xkA3v8SAM3/9v/c/w8A4f8LAMj/8f/h/xQA2P8CAMn/8//j/xQA0v/7/9H//P/i/xEA0v/1/9L//f/j/w0A0f/x/9f//v/k/wgAz//u/9z/AwDg/wMA0P/v/9//BQDf////0v/y/+D/CADc//3/0v/2/+L/CgDa//r/1v/5/+T/CgDY//j/2f/9/+T/CADY//f/3P8AAOT/BwDY//f/4P8EAOP/BADZ//j/4v8GAOL/AwDa//r/5f8IAOH/AQDc//3/5v8JAOD//v/f////5v8IAOD//v/h/wIA5/8HAOD//f/j/wMA5/8GAOD//f/l/wYA5v8EAOD//v/m/wYA5f8CAOL////n/wYA5P8BAOH/AADl/wUA4f///+H/AQDk/wMA4f///+T/AQDm/wEA5////+r/AADt/wAA7/////P/AAD1////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v///wAAAAAAAAAAAQAAAAAA///9/wAABAD+//n/AgAJAAAA+v/+//f/DAAdAPv/+v+l/8L+jf/4/vgAdwVPAQACLQBo+Qj/Ev7o/N3/VgCbA08Bxf+L+yn9J/2HCU8FmgBvDe30Rv5h/LT09gi5CxkA5gOi8/30kwEM+4YJMf2nBmkJJAQQBLoFtvvv+m4A7PF6/R0Bif3qAuf8WARAAf4GyABG/BIAwvr4Acv8U//c/yIC8AEn/B8Daf2CAgMBAf3MAN38vgLK/UT/QwCyAPYClPyvAW/+pQAoASD+zP+R/IYC1f7C/nEBQP96AZb+1QAIAM//yQE7/tkAZ/7TAXL/w/8+AIsAtwB7/24A4v9a/z4A7v4iADb/dwCj/23/kgBOANUAIv8lAKEAxP9gAK7/BwCP/5kA7/9v/0wAzv9DAGT/3/9vAHv/6P+q/xUA7P8XAO//uv/g/2UAEgCV/wEATADM/+7/+//j/+D/9v/i//j/IgD+/xoAxf/6/z4A5/+8/9D/QwDq/+3/OQDT/zUAIgA/APP/PgAjAPD/BwAGACAADAC3//b/HAA3AN//RgDN/w8AIAACAN//GQBDACEAIwA+ACoAJQAeAPz/KgAYAPr/DgAEABYAIgAcAMT/7f8OAOL/5P/2//L/9P8GAPT/7v/8/+7/6v/t//z/AgAUAOL//P8VAAMA4/8IAPb/+P8MAAoA5v8NAAsA9v///wEAAAD9//n/9/8JAAYA7v/6/wMA+f8GAAEA7f/7/xgACAD4/w8A///3/w0A+f8BAAIA/P/5/xIA///9//r/7v/+/xYACQD///H/CwDz/wEADgAHAPP/FADn/+3/AQD5//f/AgD7/wEABwAMAAEADQD8//n/8f8OAPX/BAD+//X/+v8WAAQA+f8CAAEA7/8QAAEA/P8DAAUA9f8KAAwA9v8DAAUA+f8OAAoA9f/7/w0A+v8EAAgA8P/6/woA+//8/wkA+P/3/woA+//8/wcA9//1/woAAwD5/wcA/P/3/w0AAwD3/wEABAD2/wkABgD3/wEABQD3/wUABQD3//v/BwD3/wMABQD3//r/CQD7////BQD6//n/CQD9//3/BAD9//j/BwAAAPv/AwD///j/BwABAPn/AQABAPn/BQACAPn///8DAPr/AwADAPr//v8EAPv/AQADAPv//P8FAP3///8DAPz/+/8FAP7//f8CAP7/+/8EAP///P8BAP//+/8DAAEA+/8AAAEA+/8CAAIA+////wIA/f8AAAIA/P/+/wIA/f8AAAIA/f/9/wMA/////wEA///+/wIA/////wAAAAD+/wAAAAD/////AAD//wAA//8AAP//AAD//wAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAP////8AAP//AAAAAPz//f8IAAMA9////w4AAQD6/wwA8//+/y8Afv/0/2H/UP5gAbH+2QG1B2cAVAIh/l32FPyM/nACPQDV/+UEo/Q6AQwCu/oLD9kF8QJA/Uz+Wf2KCOcC+wUKBsL5aQBQ97rwOPiPAvn5CAl8AHEDkQPcAA8Bn/lIAdz7HQF1+xz9cAM4/94E4gDKAun+cgPYAYr9JgJr/bf+ivxz/MoBgv5UA8EBSgAQAJ7/UgEk/cQB7f63/sD/vf4XAhT/BQFCADYAnQGI/9EBtv3hALD/vP+c/3H/TgIN/1sBpf8yAP3/4f8qABr+1f8OAJ3/dwAGADEBnv9JAPz/IQBwAIH/jgAS/4wAsACTAOn/DQDCALn/ZQCSAAIAAwD1/9//jv9aADQA/v9EAB0AfgA8AAQACgB9APr/IAARAPT/5v9xACAABAAHAGUAt/89AC4ACgAjAMP/+v/9/xYA7f/1/+D/7P87AC0Auv8RAAcA9/8FAC8A2//y/xIAEwAaADQAJADp/zoAAgAfABIA2f/e/zUA+P/6/w4A9//A/zcA4//P//T/5f/R////EwDb/w4A8/8BABkANADh/xEA+f/0/wIAHADc//j/GwD1//f/GADs/+v/EAAAAPz/EgD3/+r/FgAMAAkAGAD9/+z/IQAQAPH/GQD3//z/CgAfAOX/AgD8//H/BAATAOv/+v///wIABAAdAOj/BQAPAAcAAQATAOz/8/8JAAkA6f8VAOv/+f8QABUA/v8OAO3/+P8KABUA9f8FAPv/5/8TAA0A7f8XAAkAAQAJABYA4/8WAAcACgANABEA7v8EAP7/AAD+/wMA9//7/xAAAQD8/wQA+f/7/wMABgDq/wAA+v/3/wYACQD1//3/BAD9/wgADgDw//r/AgD6/wEACADv//j/BQD///X/BwDu//j/AgACAPP/BAD2//n/BAAGAPb/BAD8//3/BQAJAPL/AwD+//3/BAAIAPP//f8DAPz/AAAGAPP/+/8CAP7//f8FAPX/+f8DAAAA/P8EAPf/+v8GAAMA+/8EAPv/+/8GAAQA+v8CAP///P8EAAUA+f8AAP///f8CAAUA+P///wEA/v8BAAUA+f/+/wIAAAD//wUA+v/9/wMAAQD9/wQA+//9/wMAAgD8/wMA/P/9/wMAAwD7/wEA/v/+/wIAAwD6/wEA///+/wAABAD6/wAAAQD//wAAAwD7////AQAAAP//AwD8//7/AgABAP3/AgD9//7/AQABAP3/AQD+//7/AAACAPz/AAD+//////8BAP3/AAD//wAA//8BAP7/AAD//wAA/v8AAP7/AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////P/9//3//////wAAAAAAAAIAAgACAP//CAAEAEEA//+cAAUAb/8HAAH9+P9eARkAogQUAJn8BwCd/gX/+QQNAKoC9gFdAtb/b/vd/936TP/6AsD/nfqn/un1W/0dA8IEsQLvAJv2bP72+WMAkP8dAcX+nQO2AIr6bP/EABX+NgK/Bdj2IQv2AE4EUAiD/xQAnwIm/B0B/wGNAoH7sQaP/b8CiQakAqD+R/9xA477KQL//6r75v/O/pcCgQCtAiMCBQAkANAARwHf//39hgBl/kUAJgEtAUEATgA/AgoASADK/zUAJv29/vL+l/9c/0cAUwBBAE8A6QE5/87/Wv9NAOf+5v7P/5P/4/9BAKYAQwDD/zYB5v+r/zYATwAp/1v/WQAEAB0AhwA0AA0AIAA3AAEAzv/u/+//5v9m/zwAIADQ/8T/SABiANb/SwAbAFf/MQDX/7L/hP8TAPr/AgAMAAsAHwAZAI3/VgDC/9v/5//x/6P/AwBlAMv/yf82AB4A+P9WAPj/NwDi/1EA0v9JANj/JwAcAAEADABYANj/4f8MAEwAmP82AN//3P8UADYA7//6/wIACADU/ygAyv82AN7/9v/2/ygAxv/9/+3/5//n/zUA6//g/y4ADgD5/wsABwDv/xIADwAGACoAJQD3/zIA+/8FABsAFgDO/zAAHAAIABQALADp/xcACAAAAPH/GADs/wkACQAFAAgAFQDp/wIAHAD1//P/EQDw/+3/GAD9/+f/HAD8//T/DAAQAPH/HwD4//r/DwAPAOj/EQACAOn/DAAXAOX/BAAOANH/9/8MAO//9f8LANT/9f8EAO//6f8NANb/+P8KAOz/5v8MAOD/7f8UAO//7//+//7/9v8YAPj/9f/z/wsA+v8SAPD/+v/x/xYA+f8SAPb/9//3/xEABQACAPn/9//y/xQACQD///b//v/7/xIACQD9//H/AAD7/xEAAgD5//P/AwD9/w8AAgD3//D/BAD//wUA/v/0//D/BgADAAMA/P/2//f/BwAGAP7/+//2//j/CAAFAPv/+f/5//v/BwAHAPn/9//7//7/BQAFAPf/9//+/wEABAACAPf/+P8BAAIAAgAAAPj/9/8CAAMAAAD+//n/+f8EAAQA/v/8//r/+/8EAAMA/P/7//z//P8EAAIA/P/5//7//v8DAAEA+//5//////8CAAAA+//5/wEAAAABAP//+//6/wIAAQD///3//P/7/wMAAQD///3//f/9/wIAAQD9//3//v/9/wMAAQD9//z/AAD//wEAAAD9//z/AAAAAAAA///9//3/AAD//wAA/v////7/AAD//wAA////////AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+////+f////v//v///wAA/////wUAAQAIAAIABwACAHkATAAOAaMAAf9C/9X6QvwhArAAtghABW37nv/y+0wAWQNcAE8JRwSOC6AEJe8P8S/zrPWaBI/+LQA/+0L+P/4K8AgAb/8uCh78BQtC614GaQWfAin5UfzN8Tf+GQizAZ4MCQMbGJ4BoRS7AvcHyQARA6n9ZwHZ/z4DvwAZAlAB6gbNAS4GFADFATL7E/2K+j37C/xp/SD9Uv0VAOsDs//WAd3+bv7F/f79mP2X/KH+FwC0/1n+VgFcATABHQGaAET+nf8Y/hoAovpqAXj9CQKW/lsCl/4RApj+bAHk/RcAlv4BAG/+DgDi//3/GwAOAEIAq/+y/3z/8v8+/7T/Tv8//27/mgDZ/1sA+P+cAAAA/P/i/yMAi/85AMP/KgDM/9MA9P+QABoA4QAiACwACwBdAP7/TQDb/y0Ayf+SAA0AZwDg/4wA+/8/AAMAgQDp/w0ADAAQAAoANgAgAA4AKABIAB4A4v/3/+f/+v/c/+n/EADn/wgAFAAqAOz/IwDc/9//3f8XAND/2v/a/w0A5v8BANb/9P/m/wAA8P8ZAN3/RwAGAEsABgB/AP7/NAASAEgABAA3AP3/KgD9/1sA8P8lAOr/FgD1/xAA4/8kAOv/AwD4/xEA5f8NAPT/+v/3/x8A7f8PAPj/IwD5/yAA9/8ZAAEAGgD4/xoA9f8HAAMACAD0/xgA+P8AAPr/IQDp/w4A8v8HAPX/IgD1/wYA+P8GAPX/GgD3/woABQASAAcAGQDw/+v/9P8bAP3/HADs/+f/7/8LAPr//v/0//T/AgD2/wsA6P///+P/CADY//7/5v/3/wQA/v8LAPD/GgD1/yMA/P8QAOv/LADw/yQA+P8XAO7/MQD9/yEAAQAcAPD/IgD9/xMA+/8OAO//FQABAAoA+/8PAPP/FQABAAQA9/8PAPX/CAADAAEA+P8NAPv/CAAGAAUA9/8JAP//AAAFAPz/+f8HAAQA/f8FAP3//P8FAAYA+P8DAP7/+/8AAAcA9/8BAP///f///wgA9//+/wAA/v/8/wUA9//8/wIA///7/wUA+v/7/wIAAAD6/wMA/P/6/wEAAQD6/wEA/v/7/wIAAgD6////AAD7/wEAAgD7//7/AQD8/wAAAwD8//3/AwD9/wAAAgD9//z/AwD/////AgD+//z/AwAAAP7/AQD///3/AgABAP3/AAAAAP3/AgACAPz///8BAP3/AQACAP3//v8BAP7/AAABAP3//v8CAP7///8BAP7//f8CAP////8AAAAA/v8CAAAAAAAAAAAA/v8BAAAAAAD//wAA//8AAP//AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA/////wAAAQD+////AAAGAP3/OAABAIIAAwBv//f/E/0QAK0ADQCzA/7/8P4u/0cBDQCJA6ABbQDg/w7/z/9o+Vn/SPnL/1//Ef+2+jr9RfZgA5QFZwILDFj+PAb2/nEFKgKk/R0Dlv6b/FUDsP6YAoj9SgAT/iL/tAPwAv8A0P6zAr7/dwAnAf39uP22/skA2v///2YCoP4UAUsAZgF2AJH+4P70/rz9+f+U/Xv/8v7CAcb+TACS/kwAv/+x/tX9oP71/oL/1f8nAEUAZwGtAAgAIgC/AD4BaP8GAGH/dQDF/64Arf8nAakAhAH9/+kAQQD3AFb/q/8p/yIAR/8FAPD/ZAA/AIYA3v8tADQADQBp/3f/CwABAP3/Wf8OANj/WwDH/xoAe/8DAKz/zv96/z8A3f/J/5X/IAD5//j/q//c/+//RADq//D/vv8pADUAFQDI/y8ACAAbANb/OwD3/+3/9f/e/wcAIAAeAMH/8/8xAC0AEADW/+3/HAADAPv/8P8DAOL/OwD3/xcACQAHAM//5f8XAAcAz//T/9D/HgD9////yf/e//v/AgD//9H/6/////H/+/8hAAIA9//7/w0AFgAQAPL/2v/8/xsAGQABANz/9P8YAAQA/v/y/wMA5v8YAAkAAAAAAAMA7/8KABgADwDs//j/BwATABsA8P/1//z/BAAMAAAA9P/s/xAA/v8GAAkA/v/p/wMACwALAP7/9P/p/wcADQAFAPb/7//4/w0ACAD8//b//v/1/wMACwD1//T/8P/8/wAACQDz/+f/5P8GAAkABQD5//D/+v8FAA0AAwD///T/AgACABAA/v8CAPD/+/8FAAoA9f/3//f//v8GAP7/9v/t//z/+f8AAPj/+v/3/wEA+v8HAPr//P/5/wQA//8DAPr/+P/3/wYA///+//X/+//5/wQA/f/7//X/+//4/wMA/f/8//j//v/9/wYA///8//f/AgAAAAUA/f/6//n/AwACAAIA/f/7//z/AwACAAAA/f/6//3/AgADAP7//f/7/wAAAwAFAPz////8/wMAAgAEAPv//v/+/wMAAgADAPv//v///wMAAQABAPv//f8AAAIAAAD///v//f8BAAIA///+//z//v8CAAIA/v/9//3///8CAAEA/v/9//7/AAACAAAA/v/9////AAABAAAA/f/9/wAAAQABAP///f/+/wEAAQAAAP///v/+/wEAAQD///7//v///wEAAQD///7//v///wEAAAD+//7///8AAAAAAAD+//7///8AAAAA///+//7///8AAAAA////////AAAAAP////////////8AAP//////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAAAAABAAAAAAD//////////////v////3/////////+//8////AQD9//z/9f8BAAIA+f8dACgAWQBxAJX/qv+Y/uz9aP9k/7UDUQQBAiQA4Pgi/AkB0gKaBsD/+fxp/vz9CQSp/I/+ywDO+vMD0fzK/PABcgBeBfoBv/+uAuH9Sf5gAy39awMmBWUBuP9fA9/9fgDj/2/+EACaACcCSv9Z/2j/rv7hAA0AWf55/7L84P7E/SIAT/67AMv/tf+FAA7/1v+7/gv/IP+E/sQA+P5aAXz/tP9XAFX/tP8o/4r/j//e/yQAMv9mAJT/rgCr/9X/EwCb//H/9f7F/6D/EAAoAK3//v+e/zsAh/+B/7r/if/C/2r/4P/z/6//HwCy/0IA7/9ZALT/y/80ACgA9v/J/9//DgA5ADUALQARADIACwAfAOf/NgArACMACQBBAEcAGAAjAC4AWQBUAHcAAAAfACEAIAAcAPj/CADk/yQA7v89AEEAFwD5/xYA6f8aAOX/AADF/zQADwAUAOT/BQDr/yUA6P8XAOf/HADR/0AA8P8nAAgACQDt/ycAKAAHAPH/IQDz/xsACADn//n/DgADAA4A8P///8z/GgDN/yMA/f8QANj/MwACAC0ACwAOAO3/JgAZAAUACgAAAA4AIgAaAAkADwACAAAAHQATAAUABQACAAgACwAjAO////8AAA8ABQAPAPL//f8GAAsABgAGAPD/8v8GAPz/CAD6//H/6v8PAAgABgD4//3/9v8aAAgABwD1//7//v8QAAoACAD//wUA9v8QAAoABAAFAAgAAgAJAAoAAwD//w0AAgD//wcA/v8DAAoABQAFABUABAAKAAYABwAHAA8ACgAGAAwADwAMAAkAEAAJAAgADwAMAAgADgAJAAUACQAPAAUACwAHAAEABgAIAAEABAAGAP//AgAJAAAAAgAEAP7///8IAAIA//8GAAEAAQAJAAIA/v8EAAMA//8JAAEA/v8DAAMA/v8HAAMA/f8BAAUA/v8FAAMA/v8BAAcA//8DAAMA/v8BAAYA//8CAAMA/////wcAAAAAAAMAAAD//wYAAQD+/wMAAQD//wUAAQD+/wIAAgD//wQAAgD+/wEAAwD//wMAAwD+/wEAAwD//wIAAwD//wEABAAAAAEABAD//wAABAABAAAAAwAAAAAABAABAP//AwABAAAAAwACAP//AgACAAAAAwACAP//AgACAAAAAgACAAAAAQADAAAAAQACAAAAAQADAAAAAQACAAAAAAACAAEAAAACAAEAAAACAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAAAAAAAAAAAAAAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA//8AAP//AAACAAAA+f8BAAYA///4/wIA//8AAA8A/v/V/wEAEwA9AAEBRwA2AF7/kfog/3gBwv99CDYBU/qtAUX/AP7OAfkAX/o9B38FSfwaAuT14/60BAr8CQAI/tfyIQTzAXP+egdUBBwBof7TBMT8bAWi/5EEWwBRAAAKyfxE/8b88vp6ACP+PAF4/qD8MQNM/ygCJ/2XAPD9kP5gAVT/iP9I/lEB4P8qAD0BFAGa/+7/DgB2AOP98gFm/u/+Vv5/AG8ASP9gAM//qv9w//oAcv+2/jIBHgA7/6D/oAAGAKH/lADT/wAAggC8AAYAkP9yAEcAkf8BAOD/RAAr/zUANwDt/xQAJQAkAMT/zwA/AOH/xv9zAGsANQBTAIcALAAvACIATACy/xMADADg/xcAWABvAJL/7f9VAPb/EgDt/wcA4f8kAPP/5P+h/wgACQDy//r/LgAQAMn/8/9CAOX/5v/S/9//3P8pABYAuP/s/w8AFgDt/+3/7v/w/9j/5/8GAOf/2P/2//P//v8kABMAuf/m/xoADADZ/+r/3P8KAAUAKwDe/wsA3P8VAAAADgAfAB0ACAAMAF4AGgAhAPL/MwDz/0kABAAKAPX/LwAbAAkA9v/s/+3/8/8CABAAAADm//n/BQALAAUAAQDj//n/JQAVAPX/9v/+/wIAEQABAPP/8P/1/wAABgD6/+3/7//o//j/DAD8/+b/8P8IAAkABgD4//D/8P8UAAoAAwD4/wAA+f8OAAcAAAAFAPX/9v8TAAkA8v8EAPb/9/8dAA0A7/8CAPn/+f8SAAQA8/8CAOf/+v8DAAgA9P////H//P8IAAUA8//0/wIAAQAGAAgA9//7/wAA+/8EAP//+P/+////AgACAAsA8v/+/wIABQD7/wgA9v/7/wMABAD5/wAA/P/3/wEAAQD7//7//P/1/wQA///3//r////3/wMAAwD1//r/AwD6////AgD4//n/AwD8//7/AgD4//n/AwD+//3/AQD4//n/BQD///n/AAD6//j/BAABAPj/AAD9//v/AwADAPj//v/+//z/AwAEAPj//v8BAP7/AQADAPj//f8CAP////8EAPr//P8DAAAA/v8CAPv//P8DAAEA/f8BAP3//f8DAAIA/P8AAP7//f8DAAIA/P///wAA/f8BAAIA+//+/wEA//8AAAEA+//+/wEA/////wEA/P/+/wEA///+/wAA/f/9/wEAAAD9/wAA/f/+/wEAAQD8/////v/+/wAAAQD8////////////AQD9////AAD/////AAD+////AAAAAP//AAD///////8AAP//AAD//wAA//8AAP//"],Ii=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wQA8/8ZAPr/DAD+/wMA/v8KAAQA/f8DAAMABADs//z/8v/z/8f/R/90/ob+//zAAWsDAwY3DKn9//tu93DvkwI6An4CuwJ0/BH7VPux92X0Gu7N/EX9mgfqCkkIiRMgBd4NQQGL/c0G/xBxAKELZATUA/sIHRSx+fkCyAUmBNEJIARlAdHz2AjNACcIsAW4AlECsvtJ/P/7K/tf++n8aP4W+g0FXAElAMn8nQHn/sT+Zv7N+9X2xvzM/O3+EvpqBBD7SQLd+vb/sPlw/JD72/3n+Rr+L/wS/vz6UQGg/Nf+Av5L/5X9Gv2//SP+mf3j/lf+v/2B/ZH/5P05/iL9MP9F/uf9UP4v/qv9mv7o/Xn+wP2k/8L+uP5J/tD+Dv/Y/bL+mP72/n3+pP+7/hAA+/5zAGH+Z/+u/g8Azv2y/6L+//9o/iIADP8VACz/CwCN/pb/1v4yAFP+wf+4/jsAcf5VAP3+bADa/nMA6f4sAOT+IQBd/v7/7v6aAIL+QADe/nEA0P4yAKz+CQCo/moAuf5xAN7+mAC8/jcANf9eAPX+IAA1/1kAAP9hAMz+PQD5/m0A2/4gAPr+UQDh/jQAEv9BAPH+FABN/zkASv9DADP/BABe/1IAGf8oAE3/RQAw/zIAQf8mADn/GgBE/xIAR/8hAD7/BABy/zEAKP/0/07/GwBX/z4ARf8mAFr/QQBV/zUAVP8eAFz/JABt/0EAUP8MAHz/KgBr/ycAYv8EAH3/MABl/x8Agv8bAIj/GgBv//z/ff8AAJX/IABu/+T/jv/r/4z/9/9n/77/pP8JAJD/EQCJ//r/q/8WAJ//GQCU/xYAtv8qAKr/PQCW/ysAwf8+ALb/OgC3/ygAz/8uAM7/OgDH/ygAz/8kAMz/OgC//xsA1f8qAMn/LwDN/xcA1f8oAMv/JQDR/xMAzf8bAM//HgDU/wUA2v8ZANL/EwDW/wEA1f8ZAMz/BwDX/wIA0v8SANT/BQDW/wMA0/8PANT/AADY/wIA1f8MANX/+f/a/wUA0v8IANf/+//Y/wUA0/8DANr/+f/Y/wQA1v8BANr/+f/Z/wUA1//8/9z/+v/Y/wYA2f/8/93//v/Y/wUA2v/9/93////Z/wUA3P/8/97/AgDa/wMA3v/8/97/AwDb/wIA3//9/97/BADd/wEA4f///9//BQDf/wAA4v8AAN//BQDf/wAA4/8CAN//BADh/wAA4/8DAOD/BADi////4/8DAOH/AwDk/wAA5P8FAOL/AgDl/wEA5P8FAOL/AQDl/wEA4/8EAOL/AQDj/wIA4P8DAN//AADg/wIA3v8CAOD/AADh/wEA4v8AAOP/AADm/wAA6P8AAOz/AADu/wAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////f/+//7///8AAP////8BAAEA/f8AAAEAAQAFAAUA9//6/x0A2f/9/xMA3P+jAE//of9HAKP//gCj/77/Z/vi/28D9/ywDJAJIvr6AsX0Xec4BhcGzf23DZP7yfZ6C1//nwBDBIHyYgob/Tf3sQ41ANoKRA/A+E7yffAa9gD5EQUBDMwMygiqAHMAqPqhAGUB2/gE+a78H/+4APT6DwIUAA0HNwMhBfL8E/90A5n7dP9cALIC+v5C/q0AOv9kAogBHv01/+3/qAQD/ub8T/4vAOUA5P6KATv+ywEYAeT+KP6i/3gCFP6h/hr/+P83ACL/VADn/8UARQJI/4MAu/8qAlj+wf4iAPb/LgFJ/8QAUABAAI4ABf+k/3X/YgFK/ij/j/9HADoAi/+WAA0BVwC/ACL/LACe//cARv9i/xgAUgA0ACj/FgBgAIj/5P9M/7z/zv8/AKz/gv8sAEQA6/+I/yYAawDL/7T/xf8qAOv/FQCu/5n/EgAyAO3/i/9LAE4A+//R//P/FgDe/8z/u/8DADIALAAZALL/TAA8ABwAo//1/xwA/P/L/z0A6P8jAN7/7v+a/zAAwf/7/3//KQAuACwA9v8RAGYAIwBNADgAKgASAF0ADgANACEAMQDH//H/LQACAB0Ay////x0APAABAAQA2v8iAAcAEgDE/+v/FQD+/+P/DAD1/97/6v/4//X/EwD4/+7/5P8cAA0ACQDH//7/CQAXAAEA/P/5//j/CwAWAAEABQD9//n/AQAWAB0A7v/k/wAACQAmAP//9/8AAPn/8/8aAO//6/8fAOv/5v8hAP//5/8PAOf/AAAGAPn/6v8JAAYABgABAOv/1//1//L/+P8DABcA6f/8/wMACgD7/xAA3v/2//z/DADu//z/5v/5/wEA/P/6//7/7v/x/wQABgD5/wAA8v/w/wkAEQD2//j/+v8EAAcAEAD3//v/+v8CAAAACQD3//v//v/9/wUADAD2//X/AgAHAAAABwD2//T/BgAKAP7/AQD4//r/BAAIAPn/AAD3//f/BQAHAPv//v/7//n/BQAJAPj/+v/9//7/AgAGAPj/+f8BAAEAAgAFAPn/+v8BAAIAAAAEAPn/+f8CAAQA/v8BAPr/+v8CAAQA/P////v//P8CAAQA+//+//3//f8CAAUA+v/9//////8AAAQA+v/8////AAD//wIA+//8/wAAAQD+/wEA+//8/wAAAgD9/////P/9/wEAAgD8//7//f/9/wAAAgD8//3//v/+////AQD8//z/////////AAD8//3///8AAP7/AAD9//7///8AAP7////+//////8AAP7////+////////////////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v8AAP///////wAAAAAAAP7/AQABAAAABwD///X/BQAjAPL/CQDb/9D/GAAb/7sAYwCW/z0BcP/X/7T/2QDW+wH8yANCCCUJ5QT++UXmhPwhA78FuAxH+p78ifudBlAG9vmu/lAK2fdlB///cfjoCa0E7Akn9Yb/zvba+AkAHPywBGEBFwUNAL8AXAAGA20DFvmR/kz+F/06Ag/+GwHl/5EEKgJd/q0AP/ym/9n6EfxY/2H+/QFtAC4C6QBDAaMCo/20/+3/3f/p/fL9rv9V/6cBhQHuAX4AcwJYAaH/IP/P/gsApP0LAe7/sQBuAI0AAgGDAE4BzACe/5X//v+v/+f+Zf+gAOv/5QBhAOIApAANASYAuP+h/8b/HQBr/9//bACWAGEAFAB5AD0AWQDU/+D/Yf/p//D/s/+R/4QAMQBvABEAkQBfABQAJgDW/wwA8/8XALz/vf8zAFAAKwD1/zEAPwDJ/x0A7/8LAOX/FwDR//H/EQAdAO//6P8QAFEA2f8WABEAMgDy/xIA+f/s/xAALgDv////HQAvAPT/+f8iAAYAEgAFABoAGgD//w0A+f/0/xsAHgDx/9f/GAACAPH/8f8JAPf/GwALABEA7/8cAPT/CgD2//j/BQD8/+3/OgAgAAYA9f8PAN7/DgD9/9r/1//3/+3/9//1//b/8//5//f/AgAJAOf/+v8OAAMACwD9/+7/5f8eAAEA9//q//7/8P8WAP7/+//4/wIA+f8TAAIA9f/5/wcA+P8iAAgA9v/n/xoA//8gAAUABwDj/wAA9v8BAAUAFQDn/wMA7v8QABAAEQDm/wwA8f8aAAAABwDu/wcACgASAAEA7//w//f/BgARAAkA6P/3/wcADgAKAAYA4f/4/wYADgAAAPr/8P/9/xQACgAHAPn/7//9/xEAAgD+//L/8v/8/xUAAwDw//H/9f8CAAsA/v/q//L/+f8FAAYA/P/r//j///8GAAkA+//o//j/AQAIAP//+v/o//v/CAAIAPv/+P/w/wEACQAHAPj/+f/0/wIACwAFAPb/+f/4/wQACwACAPP/+f/+/wYACAD///L/+/8BAAYABQD9//P//P8FAAUAAgD7//T//f8HAAQA///7//f///8IAAMA/P/6//r/AQAIAAEA+v/6//3/AgAHAAAA+f/7/wAAAwAFAP7/+P/8/wIAAgACAP3/+f/9/wMAAwAAAPz/+v/+/wQAAgD+//z/+/8AAAQAAQD8//z//f8BAAQAAAD7//3///8BAAMA///7//3/AAACAAEA/v/7//7/AQABAAAA/v/9////AQAAAP///v/+////AAD/////////////////////////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAAAA/v/+/wAAAQD8//3/CQAJAP3/+v8PAAcApABlABkBkwCO/i//lfqa/HQAcf/3BdkCzwJcBCMC0wMN/9/9wgI7AaECYfxV/Tf83vhn/xrt8Owx/8n7cgHABYb43QcZDh4WugNrA7P74gHu/9z/zv0t/acCiQHY/iv4qQOl/ysCE/0//XT9Sf4O//j9xfupAn394gHO+rsCXAFIAxQC9wIXBgcD2AQuAnb/9gJh/6wAVfxEAI4Bvf7oAFv/bALsAMQBe/88/joAT/4dAH39/v9LAXn/gwDI//QBdABcAA0A7f4lAMn///+9/tv/iABp/13/pP/dALv/w/8MAHv//f+y/6////7U/5AAZP+Z/8r/nQDR/5r/DwDr/xAA4v+s/3z/+P9uAOv/t/82AGcAHgCb/yQAFQBGAM7/CgD3/xoAegAaAOz/CgBHAA8Adv8/AAAABQC2/xIAAAA7ABQAKgCj/z4AAQAXAJz/JAADAAcA8f/1/2AAAQAlAPD/NgDx/1wA7v/4/wMAZADv//3/HQAkAFoA8P9FAPv/FgBIAPf/WQAHAEUACQD0/xIAQwDu/wMAwP9VALn/XwCw/yEA5f8sAPj/FgDD/1YAyv8rAOX/HQDo//j/IQAQACAAHwD9/yQAHQBAABgABQAiAAUAKAD3/wkACwAKAAMABwAJAPb/+f8GAOr/JQAHABMA6P8TAA4AGgD//woA8/8ZAP//GADu/w0A9v8SAAMABwD4/wQA5P8XAAQACgDq/wUA+/8VAAcACADs/xIAAAATAPH/+v/1//T/7f///+z/+v/y/+//9/8KAAcACgAJAPT/BAAKAAAABgAIAPL/9v8KAAMABAACAPr/9v8OAAIA+P/x//v/+f8MAPb/+P/w/wQA9f8MAPn////7/woA/v8PAAEAAgD1/xAAAQAPAP//AwD//xQABwALAAAABgADABAAAgAHAAAACAABAA8ABQAFAAMABwAEAA4ABwADAAEACQAFAAoAAwD//wAACQADAAUAAQD/////CAABAAMAAAD/////BwACAAEAAAD/////BwACAP7///8BAAAABgABAP7///8CAAAABAAAAP7///8DAAAAAwAAAP3///8DAAAAAQAAAP3//v8EAAAAAAD+//////8EAP/////+/wAA/v8EAP/////+/wEA/v8EAP///v/+/wIA//8DAP///v/+/wIA//8BAP///v/+/wMA//8BAP/////+/wMA//8AAP//AAD+/wQA//8AAP7/AQD//wIA////////AQD//wIA////////AQAAAAEAAAAAAP//AQD//wEAAAAAAP//AQAAAAEAAAAAAAAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wAA+v8AAPz/AAD//wAA/f8AAAEAAAD+/wAACQAAAAQAAAAZAAAAtgAAAFsBAABW/gAAH/oAAGcBAABoBwAAlAAAAO3/AAARAQAA+wIAAEoEAACe/gAAiv4AALD0AADJ8wAAkQQAAF34AABi8QAAPQAAAAH2AAD19AAADAMAAJwGAACTEAAA0AwAAJkHAACOBwAAuQEAANcDAAC6AgAAHwUAAHEFAAB0AwAAbgEAADz+AADYAQAAGAAAAJwCAADgAAAA//0AAMn+AAAT/AAAwP8AAOn9AAAJAAAAewEAAOn+AACN/wAAOv0AAO3+AADN/gAAcP8AACj/AACq/gAA+f4AAML9AACa/wAA/f4AAN7/AABo/wAA6/4AAE//AAAC/wAAEQAAAHX/AAB0AAAA5f8AAEwAAAB3AAAA5/8AAMIAAABCAAAAzgAAAE8AAAB3AAAAKAAAADMAAACqAAAALwAAAK4AAAASAAAAVgAAACgAAAAtAAAATAAAAP3/AAA7AAAA2/8AACQAAADw/wAALQAAADEAAAAlAAAAbAAAADMAAABUAAAAEAAAACgAAAD1/wAA9v8AAPr/AADu/wAALgAAABIAAABUAAAARAAAAGUAAABGAAAAOAAAAGAAAAAuAAAARQAAACEAAAAfAAAAAAAAAAkAAAAQAAAAAwAAABIAAADs/wAAEAAAAAYAAAASAAAAIgAAABEAAAADAAAABAAAAA8AAAD4/wAAHQAAAAsAAAAIAAAADgAAAP//AAAcAAAADwAAAAYAAAASAAAAFwAAAAMAAAAYAAAAEgAAAPr/AAAQAAAADQAAAAoAAAD3/wAABgAAAPb/AADf/wAA/v8AAPL/AAD6/wAAFAAAAAQAAAAEAAAAGwAAAAEAAAAMAAAAIAAAAAIAAAAdAAAAGAAAAAIAAAAcAAAAEgAAAAcAAAAeAAAADwAAAAQAAAAeAAAABAAAAAYAAAAZAAAAAQAAAA4AAAATAAAA/v8AAAoAAAAOAAAA+/8AAAsAAAAJAAAA+f8AAAsAAAABAAAA+f8AAAoAAAD9/wAA+v8AAAcAAAD5/wAA+v8AAAUAAAD3/wAA/f8AAAQAAAD2/wAAAAAAAAEAAAD3/wAAAgAAAAAAAAD4/wAAAwAAAP7/AAD6/wAABAAAAP3/AAD8/wAABAAAAPv/AAD+/wAAAwAAAPv/AAD//wAAAQAAAPv/AAAAAAAAAAAAAPv/AAACAAAA//8AAPz/AAACAAAA/v8AAP3/AAACAAAA/f8AAP7/AAABAAAA/f8AAP//AAABAAAA/f8AAAAAAAAAAAAA/v8AAAEAAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAA"],Fi=[2,3];class Li{constructor(e,t){g(e)||p("HOARenderer: Invalid BaseAudioContext."),this._context=e,this._config={ambisonicOrder:3,renderingMode:f.AMBISONIC},t&&t.ambisonicOrder&&(Fi.includes(t.ambisonicOrder)?this._config.ambisonicOrder=t.ambisonicOrder:A("HOARenderer: Invalid ambisonic order. (got "+t.ambisonicOrder+") Fallbacks to 3rd-order ambisonic.")),this._config.numberOfChannels=(this._config.ambisonicOrder+1)*(this._config.ambisonicOrder+1),this._config.numberOfStereoChannels=Math.ceil(this._config.numberOfChannels/2),t&&t.hrirPathList&&(Array.isArray(t.hrirPathList)&&t.hrirPathList.length===this._config.numberOfStereoChannels?this._config.pathList=t.hrirPathList:p("HOARenderer: Invalid HRIR URLs. It must be an array with "+this._config.numberOfStereoChannels+" URLs to HRIR files. (got "+t.hrirPathList+")")),t&&t.renderingMode&&(Object.values(f).includes(t.renderingMode)?this._config.renderingMode=t.renderingMode:A("HOARenderer: Invalid rendering mode. (got "+t.renderingMode+') Fallbacks to "ambisonic".')),this._buildAudioGraph()}_buildAudioGraph(){this.input=this._context.createGain(),this.output=this._context.createGain(),this._bypass=this._context.createGain(),this._hoaRotator=new ki(this._context,this._config.ambisonicOrder),this._hoaConvolver=new Mi(this._context,this._config.ambisonicOrder),this.input.connect(this._hoaRotator.input),this.input.connect(this._bypass),this._hoaRotator.output.connect(this._hoaConvolver.input),this._hoaConvolver.output.connect(this.output),this.input.channelCount=this._config.numberOfChannels,this.input.channelCountMode="explicit",this.input.channelInterpretation="discrete"}dispose(){mode===f.BYPASS&&this._bypass.connect(this.output),this.input.disconnect(this._hoaRotator.input),this.input.disconnect(this._bypass),this._hoaRotator.output.disconnect(this._hoaConvolver.input),this._hoaConvolver.output.disconnect(this.output),this._hoaRotator.dispose(),this._hoaConvolver.dispose()}async initialize(){let e;A("HOARenderer: Initializing... (mode: "+this._config.renderingMode+", ambisonic order: "+this._config.ambisonicOrder+")"),e=this._config.pathList?new Di(this._context,this._config.pathList,{dataType:"url"}):2===this._config.ambisonicOrder?new Di(this._context,Ii):new Di(this._context,Ti);try{const t=await e.load();this._hoaConvolver.setHRIRBufferList(t),this.setRenderingMode(this._config.renderingMode),A("HOARenderer: HRIRs loaded successfully. Ready.")}catch(e){p("HOARenderer: HRIR loading/decoding failed. Reason: "+e.message)}}setRotationMatrix3(e){this._hoaRotator.setRotationMatrix3(e)}setRotationMatrix4(e){this._hoaRotator.setRotationMatrix4(e)}getRenderingMode(){return this._config.renderingMode}setRenderingMode(e){if(e!==this._config.renderingMode){switch(e){case f.AMBISONIC:this._hoaConvolver.enable(),this._bypass.disconnect();break;case f.BYPASS:this._hoaConvolver.disable(),this._bypass.connect(this.output);break;case f.OFF:this._hoaConvolver.disable(),this._bypass.disconnect();break;default:return void A('HOARenderer: Rendering mode "'+e+'" is not supported.')}this._config.renderingMode=e,A("HOARenderer: Rendering mode changed. ("+e+")")}}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Oi="1.4.2",Ri=function(){const e=navigator.userAgent;let t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];if(/trident/i.test(n[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:t[1]||""};if("Chrome"===n[1]&&(t=e.match(/\bOPR|Edge\/(\d+)/),null!=t))return{name:"Opera",version:t[1]};n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/([\d.]+)/i))&&n.splice(1,1,t[1]);let i=e.match(/android|ipad|iphone/i);return i||(i=e.match(/cros|linux|mac os x|windows/i)),{name:n[0],version:n[1],platform:i?i[0]:"unknown"}}();
/**
 * @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */A(`Version ${Oi} (running ${Ri.name} ${Ri.version} on ${Ri.platform})`),"safari"===Ri.name.toLowerCase()&&(window.webkitAudioContext&&window.webkitOfflineAudioContext&&(window.AudioContext=window.webkitAudioContext,window.OfflineAudioContext=window.webkitOfflineAudioContext),A(Ri.name+" detected. Polyfill applied."));const Ni=[[[0,0,0,1,1,1],[.052336,.034899,.017452,.999848,.999391,.99863],[.104528,.069756,.034899,.999391,.997564,.994522],[.156434,.104528,.052336,.99863,.994522,.987688],[.207912,.139173,.069756,.997564,.990268,.978148],[.258819,.173648,.087156,.996195,.984808,.965926],[.309017,.207912,.104528,.994522,.978148,.951057],[.358368,.241922,.121869,.992546,.970296,.93358],[.406737,.275637,.139173,.990268,.961262,.913545],[.45399,.309017,.156434,.987688,.951057,.891007],[.5,.34202,.173648,.984808,.939693,.866025],[.544639,.374607,.190809,.981627,.927184,.838671],[.587785,.406737,.207912,.978148,.913545,.809017],[.62932,.438371,.224951,.97437,.898794,.777146],[.669131,.469472,.241922,.970296,.882948,.743145],[.707107,.5,.258819,.965926,.866025,.707107],[.743145,.529919,.275637,.961262,.848048,.669131],[.777146,.559193,.292372,.956305,.829038,.62932],[.809017,.587785,.309017,.951057,.809017,.587785],[.838671,.615661,.325568,.945519,.788011,.544639],[.866025,.642788,.34202,.939693,.766044,.5],[.891007,.669131,.358368,.93358,.743145,.45399],[.913545,.694658,.374607,.927184,.71934,.406737],[.93358,.71934,.390731,.920505,.694658,.358368],[.951057,.743145,.406737,.913545,.669131,.309017],[.965926,.766044,.422618,.906308,.642788,.258819],[.978148,.788011,.438371,.898794,.615661,.207912],[.987688,.809017,.45399,.891007,.587785,.156434],[.994522,.829038,.469472,.882948,.559193,.104528],[.99863,.848048,.48481,.87462,.529919,.052336],[1,.866025,.5,.866025,.5,0],[.99863,.882948,.515038,.857167,.469472,-.052336],[.994522,.898794,.529919,.848048,.438371,-.104528],[.987688,.913545,.544639,.838671,.406737,-.156434],[.978148,.927184,.559193,.829038,.374607,-.207912],[.965926,.939693,.573576,.819152,.34202,-.258819],[.951057,.951057,.587785,.809017,.309017,-.309017],[.93358,.961262,.601815,.798636,.275637,-.358368],[.913545,.970296,.615661,.788011,.241922,-.406737],[.891007,.978148,.62932,.777146,.207912,-.45399],[.866025,.984808,.642788,.766044,.173648,-.5],[.838671,.990268,.656059,.75471,.139173,-.544639],[.809017,.994522,.669131,.743145,.104528,-.587785],[.777146,.997564,.681998,.731354,.069756,-.62932],[.743145,.999391,.694658,.71934,.034899,-.669131],[.707107,1,.707107,.707107,0,-.707107],[.669131,.999391,.71934,.694658,-.034899,-.743145],[.62932,.997564,.731354,.681998,-.069756,-.777146],[.587785,.994522,.743145,.669131,-.104528,-.809017],[.544639,.990268,.75471,.656059,-.139173,-.838671],[.5,.984808,.766044,.642788,-.173648,-.866025],[.45399,.978148,.777146,.62932,-.207912,-.891007],[.406737,.970296,.788011,.615661,-.241922,-.913545],[.358368,.961262,.798636,.601815,-.275637,-.93358],[.309017,.951057,.809017,.587785,-.309017,-.951057],[.258819,.939693,.819152,.573576,-.34202,-.965926],[.207912,.927184,.829038,.559193,-.374607,-.978148],[.156434,.913545,.838671,.544639,-.406737,-.987688],[.104528,.898794,.848048,.529919,-.438371,-.994522],[.052336,.882948,.857167,.515038,-.469472,-.99863],[0,.866025,.866025,.5,-.5,-1],[-.052336,.848048,.87462,.48481,-.529919,-.99863],[-.104528,.829038,.882948,.469472,-.559193,-.994522],[-.156434,.809017,.891007,.45399,-.587785,-.987688],[-.207912,.788011,.898794,.438371,-.615661,-.978148],[-.258819,.766044,.906308,.422618,-.642788,-.965926],[-.309017,.743145,.913545,.406737,-.669131,-.951057],[-.358368,.71934,.920505,.390731,-.694658,-.93358],[-.406737,.694658,.927184,.374607,-.71934,-.913545],[-.45399,.669131,.93358,.358368,-.743145,-.891007],[-.5,.642788,.939693,.34202,-.766044,-.866025],[-.544639,.615661,.945519,.325568,-.788011,-.838671],[-.587785,.587785,.951057,.309017,-.809017,-.809017],[-.62932,.559193,.956305,.292372,-.829038,-.777146],[-.669131,.529919,.961262,.275637,-.848048,-.743145],[-.707107,.5,.965926,.258819,-.866025,-.707107],[-.743145,.469472,.970296,.241922,-.882948,-.669131],[-.777146,.438371,.97437,.224951,-.898794,-.62932],[-.809017,.406737,.978148,.207912,-.913545,-.587785],[-.838671,.374607,.981627,.190809,-.927184,-.544639],[-.866025,.34202,.984808,.173648,-.939693,-.5],[-.891007,.309017,.987688,.156434,-.951057,-.45399],[-.913545,.275637,.990268,.139173,-.961262,-.406737],[-.93358,.241922,.992546,.121869,-.970296,-.358368],[-.951057,.207912,.994522,.104528,-.978148,-.309017],[-.965926,.173648,.996195,.087156,-.984808,-.258819],[-.978148,.139173,.997564,.069756,-.990268,-.207912],[-.987688,.104528,.99863,.052336,-.994522,-.156434],[-.994522,.069756,.999391,.034899,-.997564,-.104528],[-.99863,.034899,.999848,.017452,-.999391,-.052336],[-1,0,1,0,-1,-0],[-.99863,-.034899,.999848,-.017452,-.999391,.052336],[-.994522,-.069756,.999391,-.034899,-.997564,.104528],[-.987688,-.104528,.99863,-.052336,-.994522,.156434],[-.978148,-.139173,.997564,-.069756,-.990268,.207912],[-.965926,-.173648,.996195,-.087156,-.984808,.258819],[-.951057,-.207912,.994522,-.104528,-.978148,.309017],[-.93358,-.241922,.992546,-.121869,-.970296,.358368],[-.913545,-.275637,.990268,-.139173,-.961262,.406737],[-.891007,-.309017,.987688,-.156434,-.951057,.45399],[-.866025,-.34202,.984808,-.173648,-.939693,.5],[-.838671,-.374607,.981627,-.190809,-.927184,.544639],[-.809017,-.406737,.978148,-.207912,-.913545,.587785],[-.777146,-.438371,.97437,-.224951,-.898794,.62932],[-.743145,-.469472,.970296,-.241922,-.882948,.669131],[-.707107,-.5,.965926,-.258819,-.866025,.707107],[-.669131,-.529919,.961262,-.275637,-.848048,.743145],[-.62932,-.559193,.956305,-.292372,-.829038,.777146],[-.587785,-.587785,.951057,-.309017,-.809017,.809017],[-.544639,-.615661,.945519,-.325568,-.788011,.838671],[-.5,-.642788,.939693,-.34202,-.766044,.866025],[-.45399,-.669131,.93358,-.358368,-.743145,.891007],[-.406737,-.694658,.927184,-.374607,-.71934,.913545],[-.358368,-.71934,.920505,-.390731,-.694658,.93358],[-.309017,-.743145,.913545,-.406737,-.669131,.951057],[-.258819,-.766044,.906308,-.422618,-.642788,.965926],[-.207912,-.788011,.898794,-.438371,-.615661,.978148],[-.156434,-.809017,.891007,-.45399,-.587785,.987688],[-.104528,-.829038,.882948,-.469472,-.559193,.994522],[-.052336,-.848048,.87462,-.48481,-.529919,.99863],[-0,-.866025,.866025,-.5,-.5,1],[.052336,-.882948,.857167,-.515038,-.469472,.99863],[.104528,-.898794,.848048,-.529919,-.438371,.994522],[.156434,-.913545,.838671,-.544639,-.406737,.987688],[.207912,-.927184,.829038,-.559193,-.374607,.978148],[.258819,-.939693,.819152,-.573576,-.34202,.965926],[.309017,-.951057,.809017,-.587785,-.309017,.951057],[.358368,-.961262,.798636,-.601815,-.275637,.93358],[.406737,-.970296,.788011,-.615661,-.241922,.913545],[.45399,-.978148,.777146,-.62932,-.207912,.891007],[.5,-.984808,.766044,-.642788,-.173648,.866025],[.544639,-.990268,.75471,-.656059,-.139173,.838671],[.587785,-.994522,.743145,-.669131,-.104528,.809017],[.62932,-.997564,.731354,-.681998,-.069756,.777146],[.669131,-.999391,.71934,-.694658,-.034899,.743145],[.707107,-1,.707107,-.707107,-0,.707107],[.743145,-.999391,.694658,-.71934,.034899,.669131],[.777146,-.997564,.681998,-.731354,.069756,.62932],[.809017,-.994522,.669131,-.743145,.104528,.587785],[.838671,-.990268,.656059,-.75471,.139173,.544639],[.866025,-.984808,.642788,-.766044,.173648,.5],[.891007,-.978148,.62932,-.777146,.207912,.45399],[.913545,-.970296,.615661,-.788011,.241922,.406737],[.93358,-.961262,.601815,-.798636,.275637,.358368],[.951057,-.951057,.587785,-.809017,.309017,.309017],[.965926,-.939693,.573576,-.819152,.34202,.258819],[.978148,-.927184,.559193,-.829038,.374607,.207912],[.987688,-.913545,.544639,-.838671,.406737,.156434],[.994522,-.898794,.529919,-.848048,.438371,.104528],[.99863,-.882948,.515038,-.857167,.469472,.052336],[1,-.866025,.5,-.866025,.5,0],[.99863,-.848048,.48481,-.87462,.529919,-.052336],[.994522,-.829038,.469472,-.882948,.559193,-.104528],[.987688,-.809017,.45399,-.891007,.587785,-.156434],[.978148,-.788011,.438371,-.898794,.615661,-.207912],[.965926,-.766044,.422618,-.906308,.642788,-.258819],[.951057,-.743145,.406737,-.913545,.669131,-.309017],[.93358,-.71934,.390731,-.920505,.694658,-.358368],[.913545,-.694658,.374607,-.927184,.71934,-.406737],[.891007,-.669131,.358368,-.93358,.743145,-.45399],[.866025,-.642788,.34202,-.939693,.766044,-.5],[.838671,-.615661,.325568,-.945519,.788011,-.544639],[.809017,-.587785,.309017,-.951057,.809017,-.587785],[.777146,-.559193,.292372,-.956305,.829038,-.62932],[.743145,-.529919,.275637,-.961262,.848048,-.669131],[.707107,-.5,.258819,-.965926,.866025,-.707107],[.669131,-.469472,.241922,-.970296,.882948,-.743145],[.62932,-.438371,.224951,-.97437,.898794,-.777146],[.587785,-.406737,.207912,-.978148,.913545,-.809017],[.544639,-.374607,.190809,-.981627,.927184,-.838671],[.5,-.34202,.173648,-.984808,.939693,-.866025],[.45399,-.309017,.156434,-.987688,.951057,-.891007],[.406737,-.275637,.139173,-.990268,.961262,-.913545],[.358368,-.241922,.121869,-.992546,.970296,-.93358],[.309017,-.207912,.104528,-.994522,.978148,-.951057],[.258819,-.173648,.087156,-.996195,.984808,-.965926],[.207912,-.139173,.069756,-.997564,.990268,-.978148],[.156434,-.104528,.052336,-.99863,.994522,-.987688],[.104528,-.069756,.034899,-.999391,.997564,-.994522],[.052336,-.034899,.017452,-.999848,.999391,-.99863],[0,-0,0,-1,1,-1],[-.052336,.034899,-.017452,-.999848,.999391,-.99863],[-.104528,.069756,-.034899,-.999391,.997564,-.994522],[-.156434,.104528,-.052336,-.99863,.994522,-.987688],[-.207912,.139173,-.069756,-.997564,.990268,-.978148],[-.258819,.173648,-.087156,-.996195,.984808,-.965926],[-.309017,.207912,-.104528,-.994522,.978148,-.951057],[-.358368,.241922,-.121869,-.992546,.970296,-.93358],[-.406737,.275637,-.139173,-.990268,.961262,-.913545],[-.45399,.309017,-.156434,-.987688,.951057,-.891007],[-.5,.34202,-.173648,-.984808,.939693,-.866025],[-.544639,.374607,-.190809,-.981627,.927184,-.838671],[-.587785,.406737,-.207912,-.978148,.913545,-.809017],[-.62932,.438371,-.224951,-.97437,.898794,-.777146],[-.669131,.469472,-.241922,-.970296,.882948,-.743145],[-.707107,.5,-.258819,-.965926,.866025,-.707107],[-.743145,.529919,-.275637,-.961262,.848048,-.669131],[-.777146,.559193,-.292372,-.956305,.829038,-.62932],[-.809017,.587785,-.309017,-.951057,.809017,-.587785],[-.838671,.615661,-.325568,-.945519,.788011,-.544639],[-.866025,.642788,-.34202,-.939693,.766044,-.5],[-.891007,.669131,-.358368,-.93358,.743145,-.45399],[-.913545,.694658,-.374607,-.927184,.71934,-.406737],[-.93358,.71934,-.390731,-.920505,.694658,-.358368],[-.951057,.743145,-.406737,-.913545,.669131,-.309017],[-.965926,.766044,-.422618,-.906308,.642788,-.258819],[-.978148,.788011,-.438371,-.898794,.615661,-.207912],[-.987688,.809017,-.45399,-.891007,.587785,-.156434],[-.994522,.829038,-.469472,-.882948,.559193,-.104528],[-.99863,.848048,-.48481,-.87462,.529919,-.052336],[-1,.866025,-.5,-.866025,.5,0],[-.99863,.882948,-.515038,-.857167,.469472,.052336],[-.994522,.898794,-.529919,-.848048,.438371,.104528],[-.987688,.913545,-.544639,-.838671,.406737,.156434],[-.978148,.927184,-.559193,-.829038,.374607,.207912],[-.965926,.939693,-.573576,-.819152,.34202,.258819],[-.951057,.951057,-.587785,-.809017,.309017,.309017],[-.93358,.961262,-.601815,-.798636,.275637,.358368],[-.913545,.970296,-.615661,-.788011,.241922,.406737],[-.891007,.978148,-.62932,-.777146,.207912,.45399],[-.866025,.984808,-.642788,-.766044,.173648,.5],[-.838671,.990268,-.656059,-.75471,.139173,.544639],[-.809017,.994522,-.669131,-.743145,.104528,.587785],[-.777146,.997564,-.681998,-.731354,.069756,.62932],[-.743145,.999391,-.694658,-.71934,.034899,.669131],[-.707107,1,-.707107,-.707107,0,.707107],[-.669131,.999391,-.71934,-.694658,-.034899,.743145],[-.62932,.997564,-.731354,-.681998,-.069756,.777146],[-.587785,.994522,-.743145,-.669131,-.104528,.809017],[-.544639,.990268,-.75471,-.656059,-.139173,.838671],[-.5,.984808,-.766044,-.642788,-.173648,.866025],[-.45399,.978148,-.777146,-.62932,-.207912,.891007],[-.406737,.970296,-.788011,-.615661,-.241922,.913545],[-.358368,.961262,-.798636,-.601815,-.275637,.93358],[-.309017,.951057,-.809017,-.587785,-.309017,.951057],[-.258819,.939693,-.819152,-.573576,-.34202,.965926],[-.207912,.927184,-.829038,-.559193,-.374607,.978148],[-.156434,.913545,-.838671,-.544639,-.406737,.987688],[-.104528,.898794,-.848048,-.529919,-.438371,.994522],[-.052336,.882948,-.857167,-.515038,-.469472,.99863],[-0,.866025,-.866025,-.5,-.5,1],[.052336,.848048,-.87462,-.48481,-.529919,.99863],[.104528,.829038,-.882948,-.469472,-.559193,.994522],[.156434,.809017,-.891007,-.45399,-.587785,.987688],[.207912,.788011,-.898794,-.438371,-.615661,.978148],[.258819,.766044,-.906308,-.422618,-.642788,.965926],[.309017,.743145,-.913545,-.406737,-.669131,.951057],[.358368,.71934,-.920505,-.390731,-.694658,.93358],[.406737,.694658,-.927184,-.374607,-.71934,.913545],[.45399,.669131,-.93358,-.358368,-.743145,.891007],[.5,.642788,-.939693,-.34202,-.766044,.866025],[.544639,.615661,-.945519,-.325568,-.788011,.838671],[.587785,.587785,-.951057,-.309017,-.809017,.809017],[.62932,.559193,-.956305,-.292372,-.829038,.777146],[.669131,.529919,-.961262,-.275637,-.848048,.743145],[.707107,.5,-.965926,-.258819,-.866025,.707107],[.743145,.469472,-.970296,-.241922,-.882948,.669131],[.777146,.438371,-.97437,-.224951,-.898794,.62932],[.809017,.406737,-.978148,-.207912,-.913545,.587785],[.838671,.374607,-.981627,-.190809,-.927184,.544639],[.866025,.34202,-.984808,-.173648,-.939693,.5],[.891007,.309017,-.987688,-.156434,-.951057,.45399],[.913545,.275637,-.990268,-.139173,-.961262,.406737],[.93358,.241922,-.992546,-.121869,-.970296,.358368],[.951057,.207912,-.994522,-.104528,-.978148,.309017],[.965926,.173648,-.996195,-.087156,-.984808,.258819],[.978148,.139173,-.997564,-.069756,-.990268,.207912],[.987688,.104528,-.99863,-.052336,-.994522,.156434],[.994522,.069756,-.999391,-.034899,-.997564,.104528],[.99863,.034899,-.999848,-.017452,-.999391,.052336],[1,0,-1,-0,-1,0],[.99863,-.034899,-.999848,.017452,-.999391,-.052336],[.994522,-.069756,-.999391,.034899,-.997564,-.104528],[.987688,-.104528,-.99863,.052336,-.994522,-.156434],[.978148,-.139173,-.997564,.069756,-.990268,-.207912],[.965926,-.173648,-.996195,.087156,-.984808,-.258819],[.951057,-.207912,-.994522,.104528,-.978148,-.309017],[.93358,-.241922,-.992546,.121869,-.970296,-.358368],[.913545,-.275637,-.990268,.139173,-.961262,-.406737],[.891007,-.309017,-.987688,.156434,-.951057,-.45399],[.866025,-.34202,-.984808,.173648,-.939693,-.5],[.838671,-.374607,-.981627,.190809,-.927184,-.544639],[.809017,-.406737,-.978148,.207912,-.913545,-.587785],[.777146,-.438371,-.97437,.224951,-.898794,-.62932],[.743145,-.469472,-.970296,.241922,-.882948,-.669131],[.707107,-.5,-.965926,.258819,-.866025,-.707107],[.669131,-.529919,-.961262,.275637,-.848048,-.743145],[.62932,-.559193,-.956305,.292372,-.829038,-.777146],[.587785,-.587785,-.951057,.309017,-.809017,-.809017],[.544639,-.615661,-.945519,.325568,-.788011,-.838671],[.5,-.642788,-.939693,.34202,-.766044,-.866025],[.45399,-.669131,-.93358,.358368,-.743145,-.891007],[.406737,-.694658,-.927184,.374607,-.71934,-.913545],[.358368,-.71934,-.920505,.390731,-.694658,-.93358],[.309017,-.743145,-.913545,.406737,-.669131,-.951057],[.258819,-.766044,-.906308,.422618,-.642788,-.965926],[.207912,-.788011,-.898794,.438371,-.615661,-.978148],[.156434,-.809017,-.891007,.45399,-.587785,-.987688],[.104528,-.829038,-.882948,.469472,-.559193,-.994522],[.052336,-.848048,-.87462,.48481,-.529919,-.99863],[0,-.866025,-.866025,.5,-.5,-1],[-.052336,-.882948,-.857167,.515038,-.469472,-.99863],[-.104528,-.898794,-.848048,.529919,-.438371,-.994522],[-.156434,-.913545,-.838671,.544639,-.406737,-.987688],[-.207912,-.927184,-.829038,.559193,-.374607,-.978148],[-.258819,-.939693,-.819152,.573576,-.34202,-.965926],[-.309017,-.951057,-.809017,.587785,-.309017,-.951057],[-.358368,-.961262,-.798636,.601815,-.275637,-.93358],[-.406737,-.970296,-.788011,.615661,-.241922,-.913545],[-.45399,-.978148,-.777146,.62932,-.207912,-.891007],[-.5,-.984808,-.766044,.642788,-.173648,-.866025],[-.544639,-.990268,-.75471,.656059,-.139173,-.838671],[-.587785,-.994522,-.743145,.669131,-.104528,-.809017],[-.62932,-.997564,-.731354,.681998,-.069756,-.777146],[-.669131,-.999391,-.71934,.694658,-.034899,-.743145],[-.707107,-1,-.707107,.707107,-0,-.707107],[-.743145,-.999391,-.694658,.71934,.034899,-.669131],[-.777146,-.997564,-.681998,.731354,.069756,-.62932],[-.809017,-.994522,-.669131,.743145,.104528,-.587785],[-.838671,-.990268,-.656059,.75471,.139173,-.544639],[-.866025,-.984808,-.642788,.766044,.173648,-.5],[-.891007,-.978148,-.62932,.777146,.207912,-.45399],[-.913545,-.970296,-.615661,.788011,.241922,-.406737],[-.93358,-.961262,-.601815,.798636,.275637,-.358368],[-.951057,-.951057,-.587785,.809017,.309017,-.309017],[-.965926,-.939693,-.573576,.819152,.34202,-.258819],[-.978148,-.927184,-.559193,.829038,.374607,-.207912],[-.987688,-.913545,-.544639,.838671,.406737,-.156434],[-.994522,-.898794,-.529919,.848048,.438371,-.104528],[-.99863,-.882948,-.515038,.857167,.469472,-.052336],[-1,-.866025,-.5,.866025,.5,-0],[-.99863,-.848048,-.48481,.87462,.529919,.052336],[-.994522,-.829038,-.469472,.882948,.559193,.104528],[-.987688,-.809017,-.45399,.891007,.587785,.156434],[-.978148,-.788011,-.438371,.898794,.615661,.207912],[-.965926,-.766044,-.422618,.906308,.642788,.258819],[-.951057,-.743145,-.406737,.913545,.669131,.309017],[-.93358,-.71934,-.390731,.920505,.694658,.358368],[-.913545,-.694658,-.374607,.927184,.71934,.406737],[-.891007,-.669131,-.358368,.93358,.743145,.45399],[-.866025,-.642788,-.34202,.939693,.766044,.5],[-.838671,-.615661,-.325568,.945519,.788011,.544639],[-.809017,-.587785,-.309017,.951057,.809017,.587785],[-.777146,-.559193,-.292372,.956305,.829038,.62932],[-.743145,-.529919,-.275637,.961262,.848048,.669131],[-.707107,-.5,-.258819,.965926,.866025,.707107],[-.669131,-.469472,-.241922,.970296,.882948,.743145],[-.62932,-.438371,-.224951,.97437,.898794,.777146],[-.587785,-.406737,-.207912,.978148,.913545,.809017],[-.544639,-.374607,-.190809,.981627,.927184,.838671],[-.5,-.34202,-.173648,.984808,.939693,.866025],[-.45399,-.309017,-.156434,.987688,.951057,.891007],[-.406737,-.275637,-.139173,.990268,.961262,.913545],[-.358368,-.241922,-.121869,.992546,.970296,.93358],[-.309017,-.207912,-.104528,.994522,.978148,.951057],[-.258819,-.173648,-.087156,.996195,.984808,.965926],[-.207912,-.139173,-.069756,.997564,.990268,.978148],[-.156434,-.104528,-.052336,.99863,.994522,.987688],[-.104528,-.069756,-.034899,.999391,.997564,.994522],[-.052336,-.034899,-.017452,.999848,.999391,.99863]],[[-1,-0,1,-0,0,-1,-0,0,-0],[-.999848,.017452,.999543,-.030224,264e-6,-.999086,.042733,-59e-5,4e-6],[-.999391,.034899,.998173,-.060411,.001055,-.996348,.085356,-.002357,34e-6],[-.99863,.052336,.995891,-.090524,.002372,-.991791,.127757,-.005297,113e-6],[-.997564,.069756,.992701,-.120527,.004214,-.985429,.169828,-.0094,268e-6],[-.996195,.087156,.988606,-.150384,.006578,-.977277,.21146,-.014654,523e-6],[-.994522,.104528,.983611,-.180057,.009462,-.967356,.252544,-.021043,903e-6],[-.992546,.121869,.977722,-.209511,.012862,-.955693,.292976,-.028547,.001431],[-.990268,.139173,.970946,-.238709,.016774,-.942316,.332649,-.037143,.002131],[-.987688,.156434,.963292,-.267617,.021193,-.927262,.371463,-.046806,.003026],[-.984808,.173648,.954769,-.296198,.026114,-.910569,.409317,-.057505,.00414],[-.981627,.190809,.945388,-.324419,.03153,-.892279,.446114,-.069209,.005492],[-.978148,.207912,.935159,-.352244,.037436,-.872441,.481759,-.08188,.007105],[-.97437,.224951,.924096,-.379641,.043823,-.851105,.516162,-.095481,.008999],[-.970296,.241922,.912211,-.406574,.050685,-.828326,.549233,-.109969,.011193],[-.965926,.258819,.899519,-.433013,.058013,-.804164,.580889,-.1253,.013707],[-.961262,.275637,.886036,-.458924,.065797,-.77868,.61105,-.141427,.016556],[-.956305,.292372,.871778,-.484275,.074029,-.75194,.639639,-.158301,.019758],[-.951057,.309017,.856763,-.509037,.082698,-.724012,.666583,-.175868,.023329],[-.945519,.325568,.841008,-.533178,.091794,-.694969,.691816,-.194075,.027281],[-.939693,.34202,.824533,-.55667,.101306,-.664885,.715274,-.212865,.03163],[-.93358,.358368,.807359,-.579484,.111222,-.633837,.736898,-.23218,.036385],[-.927184,.374607,.789505,-.601592,.121529,-.601904,.756637,-.25196,.041559],[-.920505,.390731,.770994,-.622967,.132217,-.569169,.774442,-.272143,.04716],[-.913545,.406737,.751848,-.643582,.143271,-.535715,.79027,-.292666,.053196],[-.906308,.422618,.732091,-.663414,.154678,-.501627,.804083,-.313464,.059674],[-.898794,.438371,.711746,-.682437,.166423,-.466993,.81585,-.334472,.066599],[-.891007,.45399,.690839,-.700629,.178494,-.431899,.825544,-.355623,.073974],[-.882948,.469472,.669395,-.717968,.190875,-.396436,.833145,-.376851,.081803],[-.87462,.48481,.647439,-.734431,.203551,-.360692,.838638,-.398086,.090085],[-.866025,.5,.625,-.75,.216506,-.32476,.842012,-.419263,.098821],[-.857167,.515038,.602104,-.764655,.229726,-.288728,.843265,-.440311,.108009],[-.848048,.529919,.578778,-.778378,.243192,-.252688,.842399,-.461164,.117644],[-.838671,.544639,.555052,-.791154,.256891,-.21673,.839422,-.481753,.127722],[-.829038,.559193,.530955,-.802965,.270803,-.180944,.834347,-.502011,.138237],[-.819152,.573576,.506515,-.813798,.284914,-.14542,.827194,-.521871,.149181],[-.809017,.587785,.481763,-.823639,.299204,-.110246,.817987,-.541266,.160545],[-.798636,.601815,.456728,-.832477,.313658,-.075508,.806757,-.560132,.172317],[-.788011,.615661,.431441,-.840301,.328257,-.041294,.793541,-.578405,.184487],[-.777146,.62932,.405934,-.847101,.342984,-.007686,.778379,-.596021,.19704],[-.766044,.642788,.380236,-.852869,.357821,.025233,.761319,-.612921,.209963],[-.75471,.656059,.35438,-.857597,.372749,.057383,.742412,-.629044,.223238],[-.743145,.669131,.328396,-.861281,.387751,.088686,.721714,-.644334,.23685],[-.731354,.681998,.302317,-.863916,.402807,.119068,.699288,-.658734,.250778],[-.71934,.694658,.276175,-.865498,.417901,.148454,.675199,-.67219,.265005],[-.707107,.707107,.25,-.866025,.433013,.176777,.649519,-.684653,.279508],[-.694658,.71934,.223825,-.865498,.448125,.203969,.622322,-.696073,.294267],[-.681998,.731354,.197683,-.863916,.463218,.229967,.593688,-.706405,.309259],[-.669131,.743145,.171604,-.861281,.478275,.254712,.5637,-.715605,.324459],[-.656059,.75471,.14562,-.857597,.493276,.278147,.532443,-.723633,.339844],[-.642788,.766044,.119764,-.852869,.508205,.300221,.500009,-.730451,.355387],[-.62932,.777146,.094066,-.847101,.523041,.320884,.46649,-.736025,.371063],[-.615661,.788011,.068559,-.840301,.537768,.340093,.431982,-.740324,.386845],[-.601815,.798636,.043272,-.832477,.552367,.357807,.396584,-.74332,.402704],[-.587785,.809017,.018237,-.823639,.566821,.373991,.360397,-.744989,.418613],[-.573576,.819152,-.006515,-.813798,.581112,.388612,.323524,-.745308,.434544],[-.559193,.829038,-.030955,-.802965,.595222,.401645,.286069,-.744262,.450467],[-.544639,.838671,-.055052,-.791154,.609135,.413066,.24814,-.741835,.466352],[-.529919,.848048,-.078778,-.778378,.622833,.422856,.209843,-.738017,.482171],[-.515038,.857167,-.102104,-.764655,.6363,.431004,.171288,-.732801,.497894],[-.5,.866025,-.125,-.75,.649519,.4375,.132583,-.726184,.51349],[-.48481,.87462,-.147439,-.734431,.662474,.44234,.093837,-.718167,.528929],[-.469472,.882948,-.169395,-.717968,.67515,.445524,.05516,-.708753,.544183],[-.45399,.891007,-.190839,-.700629,.687531,.447059,.016662,-.69795,.55922],[-.438371,.898794,-.211746,-.682437,.699602,.446953,-.02155,-.685769,.574011],[-.422618,.906308,-.232091,-.663414,.711348,.445222,-.059368,-.672226,.588528],[-.406737,.913545,-.251848,-.643582,.722755,.441884,-.096684,-.657339,.602741],[-.390731,.920505,-.270994,-.622967,.733809,.436964,-.133395,-.64113,.616621],[-.374607,.927184,-.289505,-.601592,.744496,.430488,-.169397,-.623624,.630141],[-.358368,.93358,-.307359,-.579484,.754804,.422491,-.204589,-.604851,.643273],[-.34202,.939693,-.324533,-.55667,.76472,.413008,-.238872,-.584843,.65599],[-.325568,.945519,-.341008,-.533178,.774231,.402081,-.27215,-.563635,.668267],[-.309017,.951057,-.356763,-.509037,.783327,.389754,-.304329,-.541266,.680078],[-.292372,.956305,-.371778,-.484275,.791997,.376077,-.335319,-.517778,.691399],[-.275637,.961262,-.386036,-.458924,.800228,.361102,-.365034,-.493216,.702207],[-.258819,.965926,-.399519,-.433013,.808013,.344885,-.393389,-.467627,.712478],[-.241922,.970296,-.412211,-.406574,.81534,.327486,-.420306,-.441061,.722191],[-.224951,.97437,-.424096,-.379641,.822202,.308969,-.445709,-.413572,.731327],[-.207912,.978148,-.435159,-.352244,.828589,.289399,-.469527,-.385215,.739866],[-.190809,.981627,-.445388,-.324419,.834495,.268846,-.491693,-.356047,.74779],[-.173648,.984808,-.454769,-.296198,.839912,.247382,-.512145,-.326129,.755082],[-.156434,.987688,-.463292,-.267617,.844832,.225081,-.530827,-.295521,.761728],[-.139173,.990268,-.470946,-.238709,.849251,.20202,-.547684,-.264287,.767712],[-.121869,.992546,-.477722,-.209511,.853163,.178279,-.562672,-.232494,.773023],[-.104528,.994522,-.483611,-.180057,.856563,.153937,-.575747,-.200207,.777648],[-.087156,.996195,-.488606,-.150384,.859447,.129078,-.586872,-.167494,.781579],[-.069756,.997564,-.492701,-.120527,.861811,.103786,-.596018,-.134426,.784806],[-.052336,.99863,-.495891,-.090524,.863653,.078146,-.603158,-.101071,.787324],[-.034899,.999391,-.498173,-.060411,.864971,.052243,-.608272,-.0675,.789126],[-.017452,.999848,-.499543,-.030224,.865762,.026165,-.611347,-.033786,.790208],[0,1,-.5,0,.866025,-0,-.612372,0,.790569],[.017452,.999848,-.499543,.030224,.865762,-.026165,-.611347,.033786,.790208],[.034899,.999391,-.498173,.060411,.864971,-.052243,-.608272,.0675,.789126],[.052336,.99863,-.495891,.090524,.863653,-.078146,-.603158,.101071,.787324],[.069756,.997564,-.492701,.120527,.861811,-.103786,-.596018,.134426,.784806],[.087156,.996195,-.488606,.150384,.859447,-.129078,-.586872,.167494,.781579],[.104528,.994522,-.483611,.180057,.856563,-.153937,-.575747,.200207,.777648],[.121869,.992546,-.477722,.209511,.853163,-.178279,-.562672,.232494,.773023],[.139173,.990268,-.470946,.238709,.849251,-.20202,-.547684,.264287,.767712],[.156434,.987688,-.463292,.267617,.844832,-.225081,-.530827,.295521,.761728],[.173648,.984808,-.454769,.296198,.839912,-.247382,-.512145,.326129,.755082],[.190809,.981627,-.445388,.324419,.834495,-.268846,-.491693,.356047,.74779],[.207912,.978148,-.435159,.352244,.828589,-.289399,-.469527,.385215,.739866],[.224951,.97437,-.424096,.379641,.822202,-.308969,-.445709,.413572,.731327],[.241922,.970296,-.412211,.406574,.81534,-.327486,-.420306,.441061,.722191],[.258819,.965926,-.399519,.433013,.808013,-.344885,-.393389,.467627,.712478],[.275637,.961262,-.386036,.458924,.800228,-.361102,-.365034,.493216,.702207],[.292372,.956305,-.371778,.484275,.791997,-.376077,-.335319,.517778,.691399],[.309017,.951057,-.356763,.509037,.783327,-.389754,-.304329,.541266,.680078],[.325568,.945519,-.341008,.533178,.774231,-.402081,-.27215,.563635,.668267],[.34202,.939693,-.324533,.55667,.76472,-.413008,-.238872,.584843,.65599],[.358368,.93358,-.307359,.579484,.754804,-.422491,-.204589,.604851,.643273],[.374607,.927184,-.289505,.601592,.744496,-.430488,-.169397,.623624,.630141],[.390731,.920505,-.270994,.622967,.733809,-.436964,-.133395,.64113,.616621],[.406737,.913545,-.251848,.643582,.722755,-.441884,-.096684,.657339,.602741],[.422618,.906308,-.232091,.663414,.711348,-.445222,-.059368,.672226,.588528],[.438371,.898794,-.211746,.682437,.699602,-.446953,-.02155,.685769,.574011],[.45399,.891007,-.190839,.700629,.687531,-.447059,.016662,.69795,.55922],[.469472,.882948,-.169395,.717968,.67515,-.445524,.05516,.708753,.544183],[.48481,.87462,-.147439,.734431,.662474,-.44234,.093837,.718167,.528929],[.5,.866025,-.125,.75,.649519,-.4375,.132583,.726184,.51349],[.515038,.857167,-.102104,.764655,.6363,-.431004,.171288,.732801,.497894],[.529919,.848048,-.078778,.778378,.622833,-.422856,.209843,.738017,.482171],[.544639,.838671,-.055052,.791154,.609135,-.413066,.24814,.741835,.466352],[.559193,.829038,-.030955,.802965,.595222,-.401645,.286069,.744262,.450467],[.573576,.819152,-.006515,.813798,.581112,-.388612,.323524,.745308,.434544],[.587785,.809017,.018237,.823639,.566821,-.373991,.360397,.744989,.418613],[.601815,.798636,.043272,.832477,.552367,-.357807,.396584,.74332,.402704],[.615661,.788011,.068559,.840301,.537768,-.340093,.431982,.740324,.386845],[.62932,.777146,.094066,.847101,.523041,-.320884,.46649,.736025,.371063],[.642788,.766044,.119764,.852869,.508205,-.300221,.500009,.730451,.355387],[.656059,.75471,.14562,.857597,.493276,-.278147,.532443,.723633,.339844],[.669131,.743145,.171604,.861281,.478275,-.254712,.5637,.715605,.324459],[.681998,.731354,.197683,.863916,.463218,-.229967,.593688,.706405,.309259],[.694658,.71934,.223825,.865498,.448125,-.203969,.622322,.696073,.294267],[.707107,.707107,.25,.866025,.433013,-.176777,.649519,.684653,.279508],[.71934,.694658,.276175,.865498,.417901,-.148454,.675199,.67219,.265005],[.731354,.681998,.302317,.863916,.402807,-.119068,.699288,.658734,.250778],[.743145,.669131,.328396,.861281,.387751,-.088686,.721714,.644334,.23685],[.75471,.656059,.35438,.857597,.372749,-.057383,.742412,.629044,.223238],[.766044,.642788,.380236,.852869,.357821,-.025233,.761319,.612921,.209963],[.777146,.62932,.405934,.847101,.342984,.007686,.778379,.596021,.19704],[.788011,.615661,.431441,.840301,.328257,.041294,.793541,.578405,.184487],[.798636,.601815,.456728,.832477,.313658,.075508,.806757,.560132,.172317],[.809017,.587785,.481763,.823639,.299204,.110246,.817987,.541266,.160545],[.819152,.573576,.506515,.813798,.284914,.14542,.827194,.521871,.149181],[.829038,.559193,.530955,.802965,.270803,.180944,.834347,.502011,.138237],[.838671,.544639,.555052,.791154,.256891,.21673,.839422,.481753,.127722],[.848048,.529919,.578778,.778378,.243192,.252688,.842399,.461164,.117644],[.857167,.515038,.602104,.764655,.229726,.288728,.843265,.440311,.108009],[.866025,.5,.625,.75,.216506,.32476,.842012,.419263,.098821],[.87462,.48481,.647439,.734431,.203551,.360692,.838638,.398086,.090085],[.882948,.469472,.669395,.717968,.190875,.396436,.833145,.376851,.081803],[.891007,.45399,.690839,.700629,.178494,.431899,.825544,.355623,.073974],[.898794,.438371,.711746,.682437,.166423,.466993,.81585,.334472,.066599],[.906308,.422618,.732091,.663414,.154678,.501627,.804083,.313464,.059674],[.913545,.406737,.751848,.643582,.143271,.535715,.79027,.292666,.053196],[.920505,.390731,.770994,.622967,.132217,.569169,.774442,.272143,.04716],[.927184,.374607,.789505,.601592,.121529,.601904,.756637,.25196,.041559],[.93358,.358368,.807359,.579484,.111222,.633837,.736898,.23218,.036385],[.939693,.34202,.824533,.55667,.101306,.664885,.715274,.212865,.03163],[.945519,.325568,.841008,.533178,.091794,.694969,.691816,.194075,.027281],[.951057,.309017,.856763,.509037,.082698,.724012,.666583,.175868,.023329],[.956305,.292372,.871778,.484275,.074029,.75194,.639639,.158301,.019758],[.961262,.275637,.886036,.458924,.065797,.77868,.61105,.141427,.016556],[.965926,.258819,.899519,.433013,.058013,.804164,.580889,.1253,.013707],[.970296,.241922,.912211,.406574,.050685,.828326,.549233,.109969,.011193],[.97437,.224951,.924096,.379641,.043823,.851105,.516162,.095481,.008999],[.978148,.207912,.935159,.352244,.037436,.872441,.481759,.08188,.007105],[.981627,.190809,.945388,.324419,.03153,.892279,.446114,.069209,.005492],[.984808,.173648,.954769,.296198,.026114,.910569,.409317,.057505,.00414],[.987688,.156434,.963292,.267617,.021193,.927262,.371463,.046806,.003026],[.990268,.139173,.970946,.238709,.016774,.942316,.332649,.037143,.002131],[.992546,.121869,.977722,.209511,.012862,.955693,.292976,.028547,.001431],[.994522,.104528,.983611,.180057,.009462,.967356,.252544,.021043,903e-6],[.996195,.087156,.988606,.150384,.006578,.977277,.21146,.014654,523e-6],[.997564,.069756,.992701,.120527,.004214,.985429,.169828,.0094,268e-6],[.99863,.052336,.995891,.090524,.002372,.991791,.127757,.005297,113e-6],[.999391,.034899,.998173,.060411,.001055,.996348,.085356,.002357,34e-6],[.999848,.017452,.999543,.030224,264e-6,.999086,.042733,59e-5,4e-6],[1,-0,1,-0,0,1,-0,0,-0]]],Hi=(Ni[0].length,Ni[1].length,Ni[0][0].length/2),ji=[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1.003236,1.002156,.999152,.990038],[1.03237,1.021194,.990433,.898572],[1.062694,1.040231,.979161,.799806],[1.093999,1.058954,.964976,.693603],[1.126003,1.077006,.947526,.57989],[1.158345,1.093982,.926474,.45869],[1.19059,1.109437,.901512,.330158],[1.222228,1.12289,.87237,.194621],[1.252684,1.133837,.838839,.052614],[1.281987,1.142358,.801199,0],[1.312073,1.150207,.760839,0],[1.343011,1.157424,.717799,0],[1.374649,1.163859,.671999,0],[1.406809,1.169354,.623371,0],[1.439286,1.173739,.571868,0],[1.471846,1.176837,.517465,0],[1.504226,1.178465,.460174,0],[1.536133,1.178438,.400043,0],[1.567253,1.176573,.337165,0],[1.597247,1.172695,.271688,0],[1.625766,1.166645,.203815,0],[1.652455,1.158285,.133806,0],[1.676966,1.147506,.061983,0],[1.699006,1.134261,0,0],[1.720224,1.119789,0,0],[1.741631,1.10481,0,0],[1.763183,1.08933,0,0],[1.784837,1.073356,0,0],[1.806548,1.056898,0,0],[1.828269,1.039968,0,0],[1.849952,1.02258,0,0],[1.871552,1.004752,0,0],[1.893018,.986504,0,0],[1.914305,.967857,0,0],[1.935366,.948837,0,0],[1.956154,.929471,0,0],[1.976625,.90979,0,0],[1.996736,.889823,0,0],[2.016448,.869607,0,0],[2.035721,.849175,0,0],[2.054522,.828565,0,0],[2.072818,.807816,0,0],[2.090581,.786964,0,0],[2.107785,.766051,0,0],[2.124411,.745115,0,0],[2.140439,.724196,0,0],[2.155856,.703332,0,0],[2.170653,.682561,0,0],[2.184823,.661921,0,0],[2.198364,.641445,0,0],[2.211275,.621169,0,0],[2.223562,.601125,0,0],[2.23523,.581341,0,0],[2.246289,.561847,0,0],[2.256751,.542667,0,0],[2.266631,.523826,0,0],[2.275943,.505344,0,0],[2.284707,.487239,0,0],[2.292939,.469528,0,0],[2.300661,.452225,0,0],[2.307892,.435342,0,0],[2.314654,.418888,0,0],[2.320969,.40287,0,0],[2.326858,.387294,0,0],[2.332343,.372164,0,0],[2.337445,.357481,0,0],[2.342186,.343246,0,0],[2.346585,.329458,0,0],[2.350664,.316113,0,0],[2.354442,.303208,0,0],[2.357937,.290738,0,0],[2.361168,.278698,0,0],[2.364152,.26708,0,0],[2.366906,.255878,0,0],[2.369446,.245082,0,0],[2.371786,.234685,0,0],[2.37394,.224677,0,0],[2.375923,.215048,0,0],[2.377745,.20579,0,0],[2.379421,.196891,0,0],[2.380959,.188342,0,0],[2.382372,.180132,0,0],[2.383667,.172251,0,0],[2.384856,.164689,0,0],[2.385945,.157435,0,0],[2.386943,.150479,0,0],[2.387857,.143811,0,0],[2.388694,.137421,0,0],[2.38946,.131299,0,0],[2.39016,.125435,0,0],[2.390801,.11982,0,0],[2.391386,.114445,0,0],[2.391921,.1093,0,0],[2.39241,.104376,0,0],[2.392857,.099666,0,0],[2.393265,.09516,0,0],[2.393637,.090851,0,0],[2.393977,.086731,0,0],[2.394288,.082791,0,0],[2.394571,.079025,0,0],[2.394829,.075426,0,0],[2.395064,.071986,0,0],[2.395279,.068699,0,0],[2.395475,.065558,0,0],[2.395653,.062558,0,0],[2.395816,.059693,0,0],[2.395964,.056955,0,0],[2.396099,.054341,0,0],[2.396222,.051845,0,0],[2.396334,.049462,0,0],[2.396436,.047186,0,0],[2.396529,.045013,0,0],[2.396613,.042939,0,0],[2.396691,.040959,0,0],[2.396761,.039069,0,0],[2.396825,.037266,0,0],[2.396883,.035544,0,0],[2.396936,.033901,0,0],[2.396984,.032334,0,0],[2.397028,.030838,0,0],[2.397068,.02941,0,0],[2.397104,.028048,0,0],[2.397137,.026749,0,0],[2.397167,.025509,0,0],[2.397194,.024326,0,0],[2.397219,.023198,0,0],[2.397242,.022122,0,0],[2.397262,.021095,0,0],[2.397281,.020116,0,0],[2.397298,.019181,0,0],[2.397314,.01829,0,0],[2.397328,.017441,0,0],[2.397341,.01663,0,0],[2.397352,.015857,0,0],[2.397363,.015119,0,0],[2.397372,.014416,0,0],[2.397381,.013745,0,0],[2.397389,.013106,0,0],[2.397396,.012496,0,0],[2.397403,.011914,0,0],[2.397409,.01136,0,0],[2.397414,.010831,0,0],[2.397419,.010326,0,0],[2.397424,.009845,0,0],[2.397428,.009387,0,0],[2.397432,.008949,0,0],[2.397435,.008532,0,0],[2.397438,.008135,0,0],[2.397441,.007755,0,0],[2.397443,.007394,0,0],[2.397446,.007049,0,0],[2.397448,.006721,0,0],[2.39745,.006407,0,0],[2.397451,.006108,0,0],[2.397453,.005824,0,0],[2.397454,.005552,0,0],[2.397456,.005293,0,0],[2.397457,.005046,0,0],[2.397458,.004811,0,0],[2.397459,.004586,0,0],[2.39746,.004372,0,0],[2.397461,.004168,0,0],[2.397461,.003974,0,0],[2.397462,.003788,0,0],[2.397463,.003611,0,0],[2.397463,.003443,0,0],[2.397464,.003282,0,0],[2.397464,.003129,0,0],[2.397465,.002983,0,0],[2.397465,.002844,0,0],[2.397465,.002711,0,0],[2.397466,.002584,0,0],[2.397466,.002464,0,0],[2.397466,.002349,0,0],[2.397466,.002239,0,0],[2.397467,.002135,0,0],[2.397467,.002035,0,0],[2.397467,.00194,0,0],[2.397467,.001849,0,0],[2.397467,.001763,0,0],[2.397467,.001681,0,0],[2.397468,.001602,0,0],[2.397468,.001527,0,0],[2.397468,.001456,0,0],[2.397468,.001388,0,0],[2.397468,.001323,0,0],[2.397468,.001261,0,0],[2.397468,.001202,0,0],[2.397468,.001146,0,0],[2.397468,.001093,0,0],[2.397468,.001042,0,0],[2.397468,993e-6,0,0],[2.397468,947e-6,0,0],[2.397468,902e-6,0,0],[2.397468,86e-5,0,0],[2.397468,82e-5,0,0],[2.397469,782e-6,0,0],[2.397469,745e-6,0,0],[2.397469,71e-5,0,0],[2.397469,677e-6,0,0],[2.397469,646e-6,0,0],[2.397469,616e-6,0,0],[2.397469,587e-6,0,0],[2.397469,559e-6,0,0],[2.397469,533e-6,0,0],[2.397469,508e-6,0,0],[2.397469,485e-6,0,0],[2.397469,462e-6,0,0],[2.397469,44e-5,0,0],[2.397469,42e-5,0,0],[2.397469,4e-4,0,0],[2.397469,381e-6,0,0],[2.397469,364e-6,0,0],[2.397469,347e-6,0,0],[2.397469,33e-5,0,0],[2.397469,315e-6,0,0],[2.397469,3e-4,0,0],[2.397469,286e-6,0,0],[2.397469,273e-6,0,0],[2.397469,26e-5,0,0],[2.397469,248e-6,0,0],[2.397469,236e-6,0,0],[2.397469,225e-6,0,0],[2.397469,215e-6,0,0],[2.397469,205e-6,0,0],[2.397469,195e-6,0,0],[2.397469,186e-6,0,0],[2.397469,177e-6,0,0],[2.397469,169e-6,0,0],[2.397469,161e-6,0,0],[2.397469,154e-6,0,0],[2.397469,147e-6,0,0],[2.397469,14e-5,0,0],[2.397469,133e-6,0,0],[2.397469,127e-6,0,0],[2.397469,121e-6,0,0],[2.397469,115e-6,0,0],[2.397469,11e-5,0,0],[2.397469,105e-6,0,0],[2.397469,1e-4,0,0],[2.397469,95e-6,0,0],[2.397469,91e-6,0,0],[2.397469,87e-6,0,0],[2.397469,83e-6,0,0],[2.397469,79e-6,0,0],[2.397469,75e-6,0,0],[2.397469,71e-6,0,0],[2.397469,68e-6,0,0],[2.397469,65e-6,0,0],[2.397469,62e-6,0,0],[2.397469,59e-6,0,0],[2.397469,56e-6,0,0],[2.397469,54e-6,0,0],[2.397469,51e-6,0,0],[2.397469,49e-6,0,0],[2.397469,46e-6,0,0],[2.397469,44e-6,0,0],[2.397469,42e-6,0,0],[2.397469,4e-5,0,0],[2.397469,38e-6,0,0],[2.397469,37e-6,0,0],[2.397469,35e-6,0,0],[2.397469,33e-6,0,0],[2.397469,32e-6,0,0],[2.397469,3e-5,0,0],[2.397469,29e-6,0,0],[2.397469,27e-6,0,0],[2.397469,26e-6,0,0],[2.397469,25e-6,0,0],[2.397469,24e-6,0,0],[2.397469,23e-6,0,0],[2.397469,22e-6,0,0],[2.397469,21e-6,0,0],[2.397469,2e-5,0,0],[2.397469,19e-6,0,0],[2.397469,18e-6,0,0],[2.397469,17e-6,0,0],[2.397469,16e-6,0,0],[2.397469,15e-6,0,0],[2.397469,15e-6,0,0],[2.397469,14e-6,0,0],[2.397469,13e-6,0,0],[2.397469,13e-6,0,0],[2.397469,12e-6,0,0],[2.397469,12e-6,0,0],[2.397469,11e-6,0,0],[2.397469,11e-6,0,0],[2.397469,1e-5,0,0],[2.397469,1e-5,0,0],[2.397469,9e-6,0,0],[2.397469,9e-6,0,0],[2.397469,8e-6,0,0],[2.397469,8e-6,0,0],[2.397469,8e-6,0,0],[2.397469,7e-6,0,0],[2.397469,7e-6,0,0],[2.397469,7e-6,0,0],[2.397469,6e-6,0,0],[2.397469,6e-6,0,0],[2.397469,6e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,1e-6,0,0],[2.397469,1e-6,0,0],[2.397469,1e-6,0,0]],Qi=1,zi=1,Ui=1,Wi=[0,0,0],Gi=[0,0,-1],qi=[0,1,0],Vi=343,Yi=["logarithmic","linear","none"],Xi="logarithmic",Ji="ambisonic",Zi=1,Ki=1e3,$i=0,eo=1,to=0,no=0,io=1,oo=0,ro=.5,so=6400,ao={left:0,right:0,front:0,back:0,down:0,up:0},co=1,lo={width:0,height:0,depth:0},uo=1,ho=1,Ao=1,po=1.5,go=3.8,fo=.01,mo=3,vo=[31.25,62.5,125,250,500,1e3,2e3,4e3,8e3],wo=vo.length,yo=new Float32Array(wo),bo={transparent:[1,1,1,1,1,1,1,1,1],"acoustic-ceiling-tiles":[.672,.675,.7,.66,.72,.92,.88,.75,1],"brick-bare":[.03,.03,.03,.03,.03,.04,.05,.07,.14],"brick-painted":[.006,.007,.01,.01,.02,.02,.02,.03,.06],"concrete-block-coarse":[.36,.36,.36,.44,.31,.29,.39,.25,.5],"concrete-block-painted":[.092,.09,.1,.05,.06,.07,.09,.08,.16],"curtain-heavy":[.073,.106,.14,.35,.55,.72,.7,.65,1],"fiber-glass-insulation":[.193,.22,.22,.82,.99,.99,.99,.99,1],"glass-thin":[.18,.169,.18,.06,.04,.03,.02,.02,.04],"glass-thick":[.35,.35,.35,.25,.18,.12,.07,.04,.08],grass:[.05,.05,.15,.25,.4,.55,.6,.6,.6],"linoleum-on-concrete":[.02,.02,.02,.03,.03,.03,.03,.02,.04],marble:[.01,.01,.01,.01,.01,.01,.02,.02,.04],metal:[.03,.035,.04,.04,.05,.05,.05,.07,.09],"parquet-on-concrete":[.028,.03,.04,.04,.07,.06,.06,.07,.14],"plaster-rough":[.017,.018,.02,.03,.04,.05,.04,.03,.06],"plaster-smooth":[.011,.012,.013,.015,.02,.03,.04,.05,.1],"plywood-panel":[.4,.34,.28,.22,.17,.09,.1,.11,.22],"polished-concrete-or-tile":[.008,.008,.01,.01,.015,.02,.02,.02,.04],"sheet-rock":[.29,.279,.29,.1,.05,.04,.07,.09,.18],"water-or-ice-surface":[.006,.006,.008,.008,.013,.015,.02,.025,.05],"wood-ceiling":[.15,.147,.15,.11,.1,.07,.06,.07,.14],"wood-panel":[.28,.28,.28,.22,.17,.09,.1,.11,.22],uniform:[.5,.5,.5,.5,.5,.5,.5,.5,.5]},Co={left:"transparent",right:"transparent",front:"transparent",back:"transparent",down:"transparent",up:"transparent"},Do=3,xo=4,So=1e-4,Eo=[6e-4,6e-4,7e-4,8e-4,.001,.0015,.0026,.006,.0207],Po=1.38,Bo=6.28318530717959,_o=55.2620422318571,Mo=6.90775527898214,ko=.346573590279973,To=57.29577951308232,Io=1e-8,Fo=function(){window.console.log.apply(window.console,["%c[ResonanceAudio]%c "+Array.prototype.slice.call(arguments).join(" ")+" %c(@"+performance.now().toFixed(2)+"ms)","background: #BBDEFB; color: #FF5722; font-weight: 700","font-weight: 400","color: #AAA"])},Lo=function(e){let t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return t>Io&&(t=1/t,e[0]*=t,e[1]*=t,e[2]*=t),e},Oo=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]};
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ro{constructor(e,t){null==t&&(t={}),null==t.ambisonicOrder&&(t.ambisonicOrder=io),null==t.azimuth&&(t.azimuth=to),null==t.elevation&&(t.elevation=no),null==t.sourceWidth&&(t.sourceWidth=oo),this._context=e,this.input=e.createGain(),this._channelGain=[],this._merger=void 0,this.output=e.createGain(),this.setAmbisonicOrder(t.ambisonicOrder),this._azimuth=t.azimuth,this._elevation=t.elevation,this.setSourceWidth(t.sourceWidth)}setAmbisonicOrder(e){this._ambisonicOrder=Ro.validateAmbisonicOrder(e),this.input.disconnect();for(let e=0;e<this._channelGain.length;e++)this._channelGain[e].disconnect();null!=this._merger&&this._merger.disconnect(),delete this._channelGain,delete this._merger;let t=(this._ambisonicOrder+1)*(this._ambisonicOrder+1);this._merger=this._context.createChannelMerger(t),this._channelGain=new Array(t);for(let e=0;e<t;e++)this._channelGain[e]=this._context.createGain(),this.input.connect(this._channelGain[e]),this._channelGain[e].connect(this._merger,0,e);this._merger.connect(this.output)}dispose(){this._merger.disconnect(this.output);let e=(this._ambisonicOrder+1)*(this._ambisonicOrder+1);for(let t=0;t<e;++t)this._channelGain[t].disconnect(this._merger,0,t),this.input.disconnect(this._channelGain[t])}setDirection(e,t){(null==e||isNaN(e))&&(e=to),(null==t||isNaN(t))&&(t=no),this._azimuth=e,this._elevation=t,(e=Math.round(e%360))<0&&(e+=360),t=Math.round(Math.min(90,Math.max(-90,t)))+90,this._channelGain[0].gain.value=ji[this._spreadIndex][0];for(let n=1;n<=this._ambisonicOrder;n++){let i=ji[this._spreadIndex][n];for(let o=-n;o<=n;o++){let r=n*n+n+o,s=n*(n+1)/2+Math.abs(o)-1,a=Ni[1][t][s];if(0!=o){let t=Hi+o-1;o<0&&(t=Hi+o),a*=Ni[0][e][t]}this._channelGain[r].gain.value=a*i}}}setSourceWidth(e){this._spreadIndex=Math.min(359,Math.max(0,Math.round(e))),this.setDirection(this._azimuth,this._elevation)}}Ro.validateAmbisonicOrder=function(e){return isNaN(e)||null==e?(Fo("Error: Invalid ambisonic order",options.ambisonicOrder,"\nUsing ambisonicOrder=1 instead."),e=1):e<1?(Fo("Error: Unable to render ambisonic order",options.ambisonicOrder,"(Min order is 1)","\nUsing min order instead."),e=1):e>Hi&&(Fo("Error: Unable to render ambisonic order",options.ambisonicOrder,"(Max order is",Hi,")\nUsing max order instead."),options.ambisonicOrder=Hi),e};
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class No{constructor(e,t){null==t&&(t={}),null==t.ambisonicOrder&&(t.ambisonicOrder=io),null==t.position&&(t.position=Wi.slice()),null==t.forward&&(t.forward=Gi.slice()),null==t.up&&(t.up=qi.slice()),null==t.renderingMode&&(t.renderingMode=Ji),this.position=new Float32Array(3),this._tempMatrix3=new Float32Array(9),this._ambisonicOrder=Ro.validateAmbisonicOrder(t.ambisonicOrder),this._context=e,1==this._ambisonicOrder?this._renderer=function(e,t){return new _i(e,t)}(e,{renderingMode:t.renderingMode}):this._ambisonicOrder>1&&(this._renderer=function(e,t){return new Li(e,t)}(e,{ambisonicOrder:this._ambisonicOrder,renderingMode:t.renderingMode})),this.input=e.createGain(),this.output=e.createGain(),this.ambisonicOutput=e.createGain(),this._renderer.initialize().then(()=>{this.input.connect(this._renderer.input),this._ambisonicOrder>1?this._renderer._hoaRotator.output.connect(this.ambisonicOutput):this._renderer._foaRotator.output.connect(this.ambisonicOutput),this._renderer.output.connect(this.output)}),this.setOrientation(t.forward[0],t.forward[1],t.forward[2],t.up[0],t.up[1],t.up[2])}getRenderingMode(){return this._renderer.getRenderingMode()}setRenderingMode(e){this._renderer.setRenderingMode(e)}dispose(){this.input.disconnect(this._renderer.input),this._ambisonicOrder>1?this._renderer._hoaRotator.output.disconnect(this.ambisonicOutput):this._renderer._foaRotator.output.disconnect(this.ambisonicOutput),this._renderer.output.disconnect(this.output),this._renderer.dispose()}setOrientation(e,t,n,i,o,r){let s=Oo([e,t,n],[i,o,r]);this._tempMatrix3[0]=s[0],this._tempMatrix3[1]=s[1],this._tempMatrix3[2]=s[2],this._tempMatrix3[3]=i,this._tempMatrix3[4]=o,this._tempMatrix3[5]=r,this._tempMatrix3[6]=e,this._tempMatrix3[7]=t,this._tempMatrix3[8]=n,this._renderer.setRotationMatrix3(this._tempMatrix3)}setFromMatrix(e){this._renderer.setRotationMatrix4(e.elements),this.position[0]=e.elements[12],this.position[1]=e.elements[13],this.position[2]=e.elements[14]}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t){null==t&&(t={}),null==t.alpha&&(t.alpha=$i),null==t.sharpness&&(t.sharpness=eo),this._context=e,this._lowpass=e.createBiquadFilter(),this._lowpass.type="lowpass",this._lowpass.Q.value=0,this._lowpass.frequency.value=.5*e.sampleRate,this._cosTheta=0,this.setPattern(t.alpha,t.sharpness),this.input=this._lowpass,this.output=this._lowpass}computeAngle(e,t){let n=Lo(e),i=Lo(t),o=1;if(this._alpha>Io){let e=n[0]*i[0]+n[1]*i[1]+n[2]*i[2];o=1-this._alpha+this._alpha*e,o=Math.pow(Math.abs(o),this._sharpness)}this._lowpass.frequency.value=.5*this._context.sampleRate*o}setPattern(e,t){this._alpha=Math.min(1,Math.max(0,e)),this._sharpness=Math.max(1,t),this.computeAngle([this._cosTheta*this._cosTheta,0,0],[1,0,0])}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t){null==t&&(t={}),null==t.minDistance&&(t.minDistance=Zi),null==t.maxDistance&&(t.maxDistance=Ki),null==t.rolloff&&(t.rolloff=Xi),this.minDistance=t.minDistance,this.maxDistance=t.maxDistance,this.setRolloff(t.rolloff),this._gainNode=e.createGain(),this.setDistance(t.maxDistance),this.input=this._gainNode,this.output=this._gainNode}setDistance(e){let t=1;if("logarithmic"==this._rolloff){if(e>this.maxDistance)t=0;else if(e>this.minDistance){let n=this.maxDistance-this.minDistance;if(n>Io){let i=1/(n+1);t=(1/(e-this.minDistance+1)-i)/(1-i)}}}else if("linear"==this._rolloff)if(e>this.maxDistance)t=0;else if(e>this.minDistance){let n=this.maxDistance-this.minDistance;n>Io&&(t=(this.maxDistance-e)/n)}this._gainNode.gain.value=t}setRolloff(e){let t=~Yi.indexOf(e);null!=e&&t?e=e.toString().toLowerCase():(t||Fo('Invalid rolloff model ("'+e+'"). Using default: "'+Xi+'".'),e=Xi),this._rolloff=e}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){null==t&&(t={}),null==t.position&&(t.position=Wi.slice()),null==t.forward&&(t.forward=Gi.slice()),null==t.up&&(t.up=qi.slice()),null==t.minDistance&&(t.minDistance=Zi),null==t.maxDistance&&(t.maxDistance=Ki),null==t.rolloff&&(t.rolloff=Xi),null==t.gain&&(t.gain=Qi),null==t.alpha&&(t.alpha=$i),null==t.sharpness&&(t.sharpness=eo),null==t.sourceWidth&&(t.sourceWidth=oo),this._scene=e,this._position=t.position,this._forward=t.forward,this._up=t.up,this._dx=new Float32Array(3),this._right=Oo(this._forward,this._up);let n=e._context;this.input=n.createGain(),this._directivity=new Ho(n,{alpha:t.alpha,sharpness:t.sharpness}),this._toEarly=n.createGain(),this._toLate=n.createGain(),this._attenuation=new jo(n,{minDistance:t.minDistance,maxDistance:t.maxDistance,rolloff:t.rolloff}),this._encoder=new Ro(n,{ambisonicOrder:e._ambisonicOrder,sourceWidth:t.sourceWidth}),this.input.connect(this._toLate),this._toLate.connect(e._room.late.input),this.input.connect(this._attenuation.input),this._attenuation.output.connect(this._toEarly),this._toEarly.connect(e._room.early.input),this._attenuation.output.connect(this._directivity.input),this._directivity.output.connect(this._encoder.input),this._encoder.output.connect(e._listener.input),this.setPosition(t.position[0],t.position[1],t.position[2]),this.input.gain.value=t.gain}dispose(){this._encoder.output.disconnect(this._scene._listener.input),this._directivity.output.disconnect(this._encoder.input),this._attenuation.output.disconnect(this._directivity.input),this._toEarly.disconnect(this._scene._room.early.input),this._attenuation.output.disconnect(this._toEarly),this.input.disconnect(this._attenuation.input),this._toLate.disconnect(this._scene._room.late.input),this.input.disconnect(this._toLate),this._encoder.dispose()}setPosition(e,t,n){this._position[0]=e,this._position[1]=t,this._position[2]=n;let i=function(e){let t=1;return e>Io&&(t=1-e/Ui,t=Math.max(0,Math.min(1,t))),t}(this._scene._room.getDistanceOutsideRoom(this._position[0],this._position[1],this._position[2]));this._toLate.gain.value=i,this._toEarly.gain.value=i,this._update()}_update(){for(let e=0;e<3;e++)this._dx[e]=this._position[e]-this._scene._listener.position[e];let e=Math.sqrt(this._dx[0]*this._dx[0]+this._dx[1]*this._dx[1]+this._dx[2]*this._dx[2]);e>0&&(this._dx[0]/=e,this._dx[1]/=e,this._dx[2]/=e);let t=Math.atan2(-this._dx[0],this._dx[2])*To,n=Math.atan2(this._dx[1],Math.sqrt(this._dx[0]*this._dx[0]+this._dx[2]*this._dx[2]))*To;this._attenuation.setDistance(e),this._directivity.computeAngle(this._forward,this._dx),this._encoder.setDirection(t,n)}setRolloff(e){this._attenuation.setRolloff(e)}setMinDistance(e){this._attenuation.minDistance=e}setMaxDistance(e){this._attenuation.maxDistance=e}setGain(e){this.input.gain.value=e}setOrientation(e,t,n,i,o,r){this._forward[0]=e,this._forward[1]=t,this._forward[2]=n,this._up[0]=i,this._up[1]=o,this._up[2]=r,this._right=Oo(this._forward,this._up)}setFromMatrix(e){this._right[0]=e.elements[0],this._right[1]=e.elements[1],this._right[2]=e.elements[2],this._up[0]=e.elements[4],this._up[1]=e.elements[5],this._up[2]=e.elements[6],this._forward[0]=e.elements[8],this._forward[1]=e.elements[9],this._forward[2]=e.elements[10],this._right=Lo(this._right),this._up=Lo(this._up),this._forward=Lo(this._forward),this.setPosition(e.elements[12],e.elements[13],e.elements[14])}setSourceWidth(e){this._encoder.setSourceWidth(e),this.setPosition(this._position[0],this._position[1],this._position[2])}setDirectivityPattern(e,t){this._directivity.setPattern(e,t),this.setPosition(this._position[0],this._position[1],this._position[2])}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,t){null==t&&(t={}),null==t.durations&&(t.durations=yo.slice()),null==t.predelay&&(t.predelay=po),null==t.gain&&(t.gain=fo),null==t.bandwidth&&(t.bandwidth=ho),null==t.tailonset&&(t.tailonset=go);let n=t.predelay/1e3;this._bandwidthCoeff=t.bandwidth*ko,this._tailonsetSamples=t.tailonset/1e3,this._context=e,this.input=e.createGain(),this._predelay=e.createDelay(n),this._convolver=e.createConvolver(),this.output=e.createGain(),this.output.gain.value=t.gain,this._convolver.normalize=!1,this.input.connect(this._predelay),this._predelay.connect(this._convolver),this._convolver.connect(this.output),this.setDurations(t.durations)}dispose(){this.input.disconnect(this._predelay),this._predelay.disconnect(this._convolver),this._convolver.disconnect(this.output)}setDurations(e){if(e.length!==wo)return void Fo("Warning: invalid number of RT60 values provided to reverb.");let t=new Float32Array(wo),n=this._context.sampleRate;for(let i=0;i<e.length;i++)e[i]=Math.max(0,Math.min(mo,e[i])),t[i]=Math.round(e[i]*n*Ao);let i=0;for(let e=0;e<t.length;e++)t[e]>i&&(i=t[e]);i<1&&(i=1);let o=this._context.createBuffer(1,i,n),r=o.getChannelData(0),s=new Float32Array(i);for(let e=0;e<i;e++)s[e]=2*Math.random()-1;for(let e=0;e<wo;e++){let i=-Mo/t[e],o=Bo*vo[e]/n,a=Math.sin(o),c=a*Math.sinh(this._bandwidthCoeff*o/a),l=1/(1+c),u=c*l,h=-2*Math.cos(o)*l,d=(1-c)*l,A=0,p=0;for(let n=0;n<t[e];n++){let e=s[n]*Math.exp(i*n)-h*A-d*p;r[n]+=u*(e-p),p=A,A=e}}let a=Math.round(this._tailonsetSamples);for(let e=0;e<Math.min(r.length,a);e++){let t=.5*(1-Math.cos(Bo*e/(2*a-1)));r[e]*=t}this._convolver.buffer=o}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t){null==t&&(t={}),null==t.speedOfSound&&(t.speedOfSound=Vi),null==t.listenerPosition&&(t.listenerPosition=Wi.slice()),null==t.coefficients&&(t.coefficients={},Object.assign(t.coefficients,ao)),this.speedOfSound=t.speedOfSound,this.input=e.createGain(),this.output=e.createGain(),this._lowpass=e.createBiquadFilter(),this._delays={},this._gains={},this._inverters={},this._merger=e.createChannelMerger(4);for(let t in ao)ao.hasOwnProperty(t)&&(this._delays[t]=e.createDelay(ro),this._gains[t]=e.createGain());this._inverters.right=e.createGain(),this._inverters.down=e.createGain(),this._inverters.back=e.createGain(),this._lowpass.type="lowpass",this._lowpass.frequency.value=so,this._lowpass.Q.value=0;for(let e in ao)ao.hasOwnProperty(e)&&(this._delays[e].delayTime.value=0,this._gains[e].gain.value=0);this._inverters.right.gain.value=-1,this._inverters.down.gain.value=-1,this._inverters.back.gain.value=-1,this.input.connect(this._lowpass);for(let e in ao)ao.hasOwnProperty(e)&&(this._lowpass.connect(this._delays[e]),this._delays[e].connect(this._gains[e]),this._gains[e].connect(this._merger,0,0));this._gains.left.connect(this._merger,0,1),this._gains.right.connect(this._inverters.right),this._inverters.right.connect(this._merger,0,1),this._gains.up.connect(this._merger,0,2),this._gains.down.connect(this._inverters.down),this._inverters.down.connect(this._merger,0,2),this._gains.front.connect(this._merger,0,3),this._gains.back.connect(this._inverters.back),this._inverters.back.connect(this._merger,0,3),this._merger.connect(this.output),this._listenerPosition=t.listenerPosition,this.setRoomProperties(t.dimensions,t.coefficients)}dipose(){this.input.disconnect(this._lowpass);for(let e in ao)ao.hasOwnProperty(e)&&(this._lowpass.disconnect(this._delays[e]),this._delays[e].disconnect(this._gains[e]),this._gains[e].disconnect(this._merger,0,0));this._gains.left.disconnect(this._merger,0,1),this._gains.right.disconnect(this._inverters.right),this._inverters.right.disconnect(this._merger,0,1),this._gains.up.disconnect(this._merger,0,2),this._gains.down.disconnect(this._inverters.down),this._inverters.down.disconnect(this._merger,0,2),this._gains.front.disconnect(this._merger,0,3),this._gains.back.disconnect(this._inverters.back),this._inverters.back.disconnect(this._merger,0,3),this._merger.disconnect(this.output)}setListenerPosition(e,t,n){this._listenerPosition=[e,t,n];let i={left:uo*Math.max(0,this._halfDimensions.width+e)+co,right:uo*Math.max(0,this._halfDimensions.width-e)+co,front:uo*Math.max(0,this._halfDimensions.depth+n)+co,back:uo*Math.max(0,this._halfDimensions.depth-n)+co,down:uo*Math.max(0,this._halfDimensions.height+t)+co,up:uo*Math.max(0,this._halfDimensions.height-t)+co};for(let e in ao)if(ao.hasOwnProperty(e)){let t=i[e]/this.speedOfSound;this._delays[e].delayTime.value=t;let n=this._coefficients[e]/i[e];this._gains[e].gain.value=n}}setRoomProperties(e,t){null==e&&(e={},Object.assign(e,lo)),null==t&&(t={},Object.assign(t,ao)),this._coefficients=t,this._halfDimensions={},this._halfDimensions.width=.5*e.width,this._halfDimensions.height=.5*e.height,this._halfDimensions.depth=.5*e.depth,this.setListenerPosition(this._listenerPosition[0],this._listenerPosition[1],this._listenerPosition[2])}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(e){let t={};for(let e in Co)Co.hasOwnProperty(e)&&(t[e]=bo[Co[e]]);null==e&&(e={},Object.assign(e,Co));for(let n in Co)Co.hasOwnProperty(n)&&e.hasOwnProperty(n)?e[n]in bo?t[n]=bo[e[n]]:Fo('Material "'+e[n]+'" on wall "'+n+'" not found. Using "'+Co[n]+'".'):Fo('Wall "'+n+'" is not defined. Default used.');return t}function M(e){null==e&&(e={});for(let t in lo)e.hasOwnProperty(t)||(e[t]=lo[t]);return e}function k(e,t,n){let i=new Float32Array(wo);e=M(e),t=function(e){null==e&&(e={});for(let t in Co)e.hasOwnProperty(t)||(e[t]=bo[Co[t]]);return e}(t),null==n&&(n=Vi);let o=_o/n,r=e.width*e.height*e.depth;if(r<So)return i;let s=e.width*e.height,a=e.width*e.depth,c=e.depth*e.height,l=2*(s+a+c);for(let e=0;e<wo;e++){let n=((t.left[e]+t.right[e])*s+(t.down[e]+t.up[e])*a+(t.front[e]+t.back[e])*c)/l;i[e]=Po*o*r/(-l*Math.log(1-n)+4*Eo[e]*r)}return i}function T(e){let t=[];for(let n in ao)if(ao.hasOwnProperty(n)){t[n]=0;for(let i=0;i<Do;i++){let o=i+xo;t[n]+=e[n][o]}t[n]/=Do,t[n]=Math.sqrt(1-t[n])}return t}class Wo{constructor(e,t){null==t&&(t={}),null==t.listenerPosition&&(t.listenerPosition=Wi.slice()),null==t.dimensions&&(t.dimensions={},Object.assign(t.dimensions,lo)),null==t.materials&&(t.materials={},Object.assign(t.materials,Co)),null==t.speedOfSound&&(t.speedOfSound=Vi),t.dimensions=M(t.dimensions);let n=_(t.materials),i=T(n),o=k(t.dimensions,n,t.speedOfSound);this.early=new Uo(e,{dimensions:t.dimensions,coefficients:i,speedOfSound:t.speedOfSound,listenerPosition:t.listenerPosition}),this.late=new zo(e,{durations:o}),this.speedOfSound=t.speedOfSound,this.output=e.createGain(),this.early.output.connect(this.output),this._merger=e.createChannelMerger(4),this.late.output.connect(this._merger,0,0),this._merger.connect(this.output)}dispose(){this.early.output.disconnect(this.output),this.late.output.disconnect(this._merger,0,0),this._merger.disconnect(this.output)}setProperties(e,t){let n=_(t),i=k(e,n,this.speedOfSound);this.late.setDurations(i),this.early.speedOfSound=this.speedOfSound;let o=T(n);this.early.setRoomProperties(e,o)}setListenerPosition(e,t,n){this.early.speedOfSound=this.speedOfSound,this.early.setListenerPosition(e,t,n);let i=this.getDistanceOutsideRoom(e,t,n),o=1;i>Io&&(o=1-i/zi,o=Math.max(0,Math.min(1,o))),this.output.gain.value=o}getDistanceOutsideRoom(e,t,n){let i=Math.max(0,-this.early._halfDimensions.width-e,e-this.early._halfDimensions.width),o=Math.max(0,-this.early._halfDimensions.height-t,t-this.early._halfDimensions.height),r=Math.max(0,-this.early._halfDimensions.depth-n,n-this.early._halfDimensions.depth);return Math.sqrt(i*i+o*o+r*r)}}
/**
 * @license
 * Copyright 2017 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Go{constructor(e,t){null==t&&(t={}),null==t.ambisonicOrder&&(t.ambisonicOrder=io),null==t.listenerPosition&&(t.listenerPosition=Wi.slice()),null==t.listenerForward&&(t.listenerForward=Gi.slice()),null==t.listenerUp&&(t.listenerUp=qi.slice()),null==t.dimensions&&(t.dimensions={},Object.assign(t.dimensions,lo)),null==t.materials&&(t.materials={},Object.assign(t.materials,Co)),null==t.speedOfSound&&(t.speedOfSound=Vi),null==t.renderingMode&&(t.renderingMode=Ji),this._ambisonicOrder=Ro.validateAmbisonicOrder(t.ambisonicOrder),this._sources=[],this._room=new Wo(e,{listenerPosition:t.listenerPosition,dimensions:t.dimensions,materials:t.materials,speedOfSound:t.speedOfSound}),this._listener=new No(e,{ambisonicOrder:t.ambisonicOrder,position:t.listenerPosition,forward:t.listenerForward,up:t.listenerUp,renderingMode:t.renderingMode}),this._context=e,this.output=e.createGain(),this.ambisonicOutput=e.createGain(),this.ambisonicInput=this._listener.input,this._room.output.connect(this._listener.input),this._listener.output.connect(this.output),this._listener.ambisonicOutput.connect(this.ambisonicOutput)}getRenderingMode(){return this._listener.getRenderingMode()}setRenderingMode(e){this._listener.setRenderingMode(e)}dispose(){this._room.output.disconnect(this._listener.input),this._listener.output.disconnect(this.output),this._listener.ambisonicOutput.disconnect(this.ambisonicOutput)}createSource(e){let t=new Qo(this,e);return this._sources[this._sources.length]=t,t}removeSource(e){const t=this._sources.findIndex(t=>t===e);t>-1&&(this._sources.splice(t,1),e.dispose())}setAmbisonicOrder(e){this._ambisonicOrder=Ro.validateAmbisonicOrder(e)}setRoomProperties(e,t){this._room.setProperties(e,t)}setListenerPosition(e,t,n){this._listener.position[0]=e,this._listener.position[1]=t,this._listener.position[2]=n,this._room.setListenerPosition(e,t,n),this._sources.forEach((function(e){e._update()}))}setListenerOrientation(e,t,n,i,o,r){this._listener.setOrientation(e,t,n,i,o,r)}setListenerFromMatrix(e){this._listener.setFromMatrix(e),this.setListenerPosition(this._listener.position[0],this._listener.position[1],this._listener.position[2])}setSpeedOfSound(e){this._room.speedOfSound=e}}Go.Version="2.0.0";class qo extends Nn{constructor(e,t,n,i,o){const r=o.createSource();super(e,t,n,i,r.input),this.resScene=o,this.resNode=r,Object.seal(this)}update(e){super.update(e);const{p:t,f:n,u:i}=e;this.resNode.setMinDistance(this.minDistance),this.resNode.setMaxDistance(this.maxDistance),this.resNode.setPosition(t.x,t.y,t.z),this.resNode.setOrientation(n.x,n.y,n.z,i.x,i.y,i.z)}dispose(){this.resScene.removeSource(this.resNode),this.resNode=null,super.dispose()}}class Vo extends zn{constructor(e){super(),this.scene=new Go(e,{ambisonicOrder:3,renderingMode:"bypass"}),this.scene.output.connect(e.destination),this.scene.setRoomProperties({width:10,height:5,depth:10},{left:"transparent",right:"transparent",front:"transparent",back:"transparent",down:"grass",up:"transparent"}),Object.seal(this)}update(e){super.update(e);const{p:t,f:n,u:i}=e;this.scene.setListenerPosition(t.x,t.y,t.z),this.scene.setListenerOrientation(n.x,n.y,n.z,i.x,i.y,i.z)}createSource(e,t,n,i){return new qo(e,t,n,i,this.scene)}}const Yo=1024,Xo=new xn;let Jo=Object.prototype.hasOwnProperty.call(window,"AudioContext"),Zo=Jo&&Object.prototype.hasOwnProperty.call(window,"AudioListener"),Ko=Zo&&Object.prototype.hasOwnProperty.call(AudioListener.prototype,"setPosition"),$o=Zo&&Object.prototype.hasOwnProperty.call(AudioListener.prototype,"positionX"),er=Zo;class tr extends Sn{constructor(){super(),this.minDistance=1,this.minDistanceSq=1,this.maxDistance=10,this.maxDistanceSq=100,this.rolloff=1,this.transitionTime=.5,this.sources=new Map,this.clips=new Map,this.onAudioActivity=e=>{Xo.id=e.id,Xo.isActive=e.isActive,this.dispatchEvent(Xo)},this.audioContext=null,this.listener=null,Object.seal(this)}start(){this.createContext()}update(){if(this.audioContext){const e=this.currentTime;for(let t of this.sources.values())t.update(e);for(let t of this.clips.values())t.update(e)}}createContext(){if(!this.audioContext){if(Jo)try{this.audioContext=new AudioContext}catch(e){Jo=!1,console.warn("Could not create WebAudio AudioContext",e)}if(Jo||(this.audioContext=new kn),Jo&&er)try{this.listener=new Vo(this.audioContext)}catch(e){er=!1,console.warn("Resonance Audio API not available!",e)}if(Jo&&!er&&$o)try{this.listener=new Wn(this.audioContext.listener)}catch(e){$o=!1,console.warn("No AudioListener.positionX property!",e)}if(Jo&&!er&&!$o&&Ko)try{this.listener=new qn(this.audioContext.listener)}catch(e){Ko=!1,console.warn("No WebAudio API!",e)}Ko&&Jo||(this.listener=new zn)}}createSpatializer(e,t,n){if(!this.listener)throw new Error("Audio context isn't ready");if(!t)throw new Error("No stream or audio element given.");return this.listener.createSource(e,t,n,this.audioContext)}addClip(e,...t){const n=new Mn,i=t.map(e=>{const t=document.createElement("source");return t.src=e,t}),o=document.createElement("audio");o.controls=!1,o.playsInline=!0,o.append(...i),n.spatializer=this.createSpatializer(e,o),this.clips.set(e,n)}playClip(e,t=1){if(this.clips.has(e)){const n=this.clips.get(e);n.volume=t,n.spatializer.play()}}get currentTime(){return this.audioContext.currentTime}createSource(e){return this.sources.has(e)||this.sources.set(e,new Mn),this.sources.get(e)}getSource(e){return this.sources.get(e)||null}removeSource(e){if(this.sources.has(e)){const t=this.sources.get(e);this.sources.delete(e),t.dispose()}}setSourceStream(e,t){if(this.sources.has(e)){const n=this.sources.get(e);n.spatializer&&(n.spatializer.removeEventListener("audioActivity",this.onAudioActivity),n.spatializer=null),t&&(n.spatializer=this.createSpatializer(e,t,Yo),n.spatializer&&(n.spatializer.audio&&(n.spatializer.audio.autoPlay=!0,n.spatializer.audio.muted=!0,n.spatializer.audio.addEventListener("onloadedmetadata",()=>n.spatializer.audio.play()),n.spatializer.audio.play()),n.spatializer.setAudioProperties(this.minDistance,this.maxDistance,this.rolloff,this.transitionTime),n.spatializer.addEventListener("audioActivity",this.onAudioActivity)))}}setAudioProperties(e,t,n,i){this.minDistance=e,this.maxDistance=t,this.transitionTime=i,this.rolloff=n;for(let e of this.sources.values())e.spatializer&&e.spatializer.setAudioProperties(this.minDistance,this.maxDistance,this.rolloff,this.transitionTime);for(let e of this.clips.values())e.spatializer&&e.spatializer.setAudioProperties(this.minDistance,this.maxDistance,this.rolloff,this.transitionTime)}setUserPosition(e,t,n,i){if(this.sources.has(e)){this.sources.get(e).pose.setTargetPosition(t,n,i,this.currentTime,this.transitionTime)}}setUserOrientation(e,t,n,i,o,r,s){if(this.sources.has(e)){this.sources.get(e).pose.setTargetOrientation(t,n,i,o,r,s,this.currentTime,this.transitionTime)}}setUserPose(e,t,n,i,o,r,s,a,c,l){if(this.sources.has(e)){this.sources.get(e).pose.setTarget(t,n,i,o,r,s,a,c,l,this.currentTime,this.transitionTime)}}}function I(e,t){return n=>{e(n),t(n)}}function F(e,t){for(let n in t){let i=t[n],o=void 0;i instanceof Array&&(o=i[1],i=i[0]),e.addEventListener(n,i,o)}}function L(e,t,n,i){return void 0===i&&a(n)&&(i=n,n=void 0),new Promise((s,a)=>{const c=o(t);if(c){const n=s,i=()=>{e.removeEventListener(t,n)};s=I(i,s),a=I(i,a)}const l=o(n);if(l){const t=a,i=()=>{e.removeEventListener(n,t)};s=I(i,s),a=I(i,a)}if(r(i)){const e=setTimeout(a,i,`'${t}' has timed out.`),n=()=>clearTimeout(e);s=I(n,s),a=I(n,a)}c&&e.addEventListener(t,s),l&&e.addEventListener(n,()=>{a("Rejection event found")})})}
/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}(window,(function(e,t){var n=[],i=Object.getPrototypeOf,o=n.slice,r=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},s=n.push,a=n.indexOf,c={},l=c.toString,u=c.hasOwnProperty,h=u.toString,d=h.call(Object),A={},p=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},g=function(e){return null!=e&&e===e.window},f=e.document,m={type:!0,src:!0,nonce:!0,noModule:!0};function v(e,t,n){var i,o,r=(n=n||f).createElement("script");if(r.text=e,t)for(i in m)(o=t[i]||t.getAttribute&&t.getAttribute(i))&&r.setAttribute(i,o);n.head.appendChild(r).parentNode.removeChild(r)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[l.call(e)]||"object":typeof e}var y=function(e,t){return new y.fn.init(e,t)};function b(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!p(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}y.fn=y.prototype={jquery:"3.5.1",constructor:y,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=y.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return y.each(this,e)},map:function(e){return this.pushStack(y.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(y.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},y.extend=y.fn.extend=function(){var e,t,n,i,o,r,s=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||p(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)i=e[t],"__proto__"!==t&&s!==i&&(l&&i&&(y.isPlainObject(i)||(o=Array.isArray(i)))?(n=s[t],r=o&&!Array.isArray(n)?[]:o||y.isPlainObject(n)?n:{},o=!1,s[t]=y.extend(l,r,i)):void 0!==i&&(s[t]=i));return s},y.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==l.call(e))&&(!(t=i(e))||"function"==typeof(n=u.call(t,"constructor")&&t.constructor)&&h.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){v(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(b(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(b(Object(e))?y.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:a.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,s=!n;o<r;o++)!t(e[o],o)!==s&&i.push(e[o]);return i},map:function(e,t,n){var i,o,s=0,a=[];if(b(e))for(i=e.length;s<i;s++)null!=(o=t(e[s],s,n))&&a.push(o);else for(s in e)null!=(o=t(e[s],s,n))&&a.push(o);return r(a)},guid:1,support:A}),"function"==typeof Symbol&&(y.fn[Symbol.iterator]=n[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){c["[object "+t+"]"]=t.toLowerCase()}));var C=
/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
function(e){var t,n,i,o,r,s,a,c,l,u,h,d,A,p,g,f,m,v,w,y="sizzle"+1*new Date,b=e.document,C=0,D=0,x=ce(),S=ce(),E=ce(),P=ce(),B=function(e,t){return e===t&&(h=!0),0},_={}.hasOwnProperty,M=[],k=M.pop,T=M.push,I=M.push,F=M.slice,L=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",N="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",H="\\["+R+"*("+N+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+R+"*\\]",j=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",Q=new RegExp(R+"+","g"),z=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),U=new RegExp("^"+R+"*,"+R+"*"),W=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),G=new RegExp(R+"|>"),q=new RegExp(j),V=new RegExp("^"+N+"$"),Y={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){d()},se=ye((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{I.apply(M=F.call(b.childNodes),b.childNodes),M[b.childNodes.length].nodeType}catch(e){I={apply:M.length?function(e,t){T.apply(e,F.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ae(e,t,i,o){var r,a,l,u,h,p,m,v=t&&t.ownerDocument,b=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return i;if(!o&&(d(t),t=t||A,g)){if(11!==b&&(h=$.exec(e)))if(r=h[1]){if(9===b){if(!(l=t.getElementById(r)))return i;if(l.id===r)return i.push(l),i}else if(v&&(l=v.getElementById(r))&&w(t,l)&&l.id===r)return i.push(l),i}else{if(h[2])return I.apply(i,t.getElementsByTagName(e)),i;if((r=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(i,t.getElementsByClassName(r)),i}if(n.qsa&&!P[e+" "]&&(!f||!f.test(e))&&(1!==b||"object"!==t.nodeName.toLowerCase())){if(m=e,v=t,1===b&&(G.test(e)||W.test(e))){for((v=ee.test(e)&&me(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(ie,oe):t.setAttribute("id",u=y)),a=(p=s(e)).length;a--;)p[a]=(u?"#"+u:":scope")+" "+we(p[a]);m=p.join(",")}try{return I.apply(i,v.querySelectorAll(m)),i}catch(t){P(e,!0)}finally{u===y&&t.removeAttribute("id")}}}return c(e.replace(z,"$1"),t,i,o)}function ce(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function le(e){return e[y]=!0,e}function ue(e){var t=A.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=t}function de(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function Ae(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function fe(e){return le((function(t){return t=+t,le((function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))}))}))}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},r=ae.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!X.test(t||n&&n.nodeName||"HTML")},d=ae.setDocument=function(e){var t,o,s=e?e.ownerDocument||e:b;return s!=A&&9===s.nodeType&&s.documentElement?(p=(A=s).documentElement,g=!r(A),b!=A&&(o=A.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",re,!1):o.attachEvent&&o.attachEvent("onunload",re)),n.scope=ue((function(e){return p.appendChild(e).appendChild(A.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=K.test(A.getElementsByClassName),n.getById=ue((function(e){return p.appendChild(e).id=y,!A.getElementsByName||!A.getElementsByName(y).length})),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,i,o,r=t.getElementById(e);if(r){if((n=r.getAttributeNode("id"))&&n.value===e)return[r];for(o=t.getElementsByName(e),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===e)return[r]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],f=[],(n.qsa=K.test(A.querySelectorAll))&&(ue((function(e){var t;p.appendChild(e).innerHTML="<a id='"+y+"'></a><select id='"+y+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+R+"*(?:value|"+O+")"),e.querySelectorAll("[id~="+y+"-]").length||f.push("~="),(t=A.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+R+"*name"+R+"*="+R+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+y+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=A.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")}))),(n.matchesSelector=K.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),m.push("!=",j)})),f=f.length&&new RegExp(f.join("|")),m=m.length&&new RegExp(m.join("|")),t=K.test(p.compareDocumentPosition),w=t||K.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},B=t?function(e,t){if(e===t)return h=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e==A||e.ownerDocument==b&&w(b,e)?-1:t==A||t.ownerDocument==b&&w(b,t)?1:u?L(u,e)-L(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,s=[e],a=[t];if(!o||!r)return e==A?-1:t==A?1:o?-1:r?1:u?L(u,e)-L(u,t):0;if(o===r)return de(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?de(s[i],a[i]):s[i]==b?-1:a[i]==b?1:0},A):A},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(d(e),n.matchesSelector&&g&&!P[t+" "]&&(!m||!m.test(t))&&(!f||!f.test(t)))try{var i=v.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){P(t,!0)}return ae(t,A,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=A&&d(e),w(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=A&&d(e);var o=i.attrHandle[t.toLowerCase()],r=o&&_.call(i.attrHandle,t.toLowerCase())?o(e,t,!g):void 0;return void 0!==r?r:n.attributes||!g?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},ae.escape=function(e){return(e+"").replace(ie,oe)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,i=[],o=0,r=0;if(h=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(B),h){for(;t=e[r++];)t===e[r]&&(o=i.push(r));for(;o--;)e.splice(i[o],1)}return u=null,e},o=ae.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(i=ae.selectors={cacheLength:50,createPseudo:le,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&x(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var o=ae.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(Q," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,c){var l,u,h,d,A,p,g=r!==s?"nextSibling":"previousSibling",f=t.parentNode,m=a&&t.nodeName.toLowerCase(),v=!c&&!a,w=!1;if(f){if(r){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?f.firstChild:f.lastChild],s&&v){for(w=(A=(l=(u=(h=(d=f)[y]||(d[y]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===C&&l[1])&&l[2],d=A&&f.childNodes[A];d=++A&&d&&d[g]||(w=A=0)||p.pop();)if(1===d.nodeType&&++w&&d===t){u[e]=[C,A,w];break}}else if(v&&(w=A=(l=(u=(h=(d=t)[y]||(d[y]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===C&&l[1]),!1===w)for(;(d=++A&&d&&d[g]||(w=A=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++w||(v&&((u=(h=d[y]||(d[y]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[C,w]),d!==t)););return(w-=o)===i||w%i==0&&w/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return o[y]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?le((function(e,n){for(var i,r=o(e,t),s=r.length;s--;)e[i=L(e,r[s])]=!(n[i]=r[s])})):function(e){return o(e,0,n)}):o}},pseudos:{not:le((function(e){var t=[],n=[],i=a(e.replace(z,"$1"));return i[y]?le((function(e,t,n,o){for(var r,s=i(e,null,o,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))})):function(e,o,r){return t[0]=e,i(t,null,r,n),t[0]=null,!n.pop()}})),has:le((function(e){return function(t){return ae(e,t).length>0}})),contains:le((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:le((function(e){return V.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe((function(){return[0]})),last:fe((function(e,t){return[t-1]})),eq:fe((function(e,t,n){return[n<0?n+t:n]})),even:fe((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:fe((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:fe((function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:fe((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=Ae(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=pe(t);function ve(){}function we(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ye(e,t,n){var i=t.dir,o=t.next,r=o||i,s=n&&"parentNode"===r,a=D++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,o);return!1}:function(t,n,c){var l,u,h,d=[C,a];if(c){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,c))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(u=(h=t[y]||(t[y]={}))[t.uniqueID]||(h[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[i]||t;else{if((l=u[r])&&l[0]===C&&l[1]===a)return d[2]=l[2];if(u[r]=d,d[2]=e(t,n,c))return!0}return!1}}function be(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function Ce(e,t,n,i,o){for(var r,s=[],a=0,c=e.length,l=null!=t;a<c;a++)(r=e[a])&&(n&&!n(r,i,o)||(s.push(r),l&&t.push(a)));return s}function De(e,t,n,i,o,r){return i&&!i[y]&&(i=De(i)),o&&!o[y]&&(o=De(o,r)),le((function(r,s,a,c){var l,u,h,d=[],A=[],p=s.length,g=r||function(e,t,n){for(var i=0,o=t.length;i<o;i++)ae(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),f=!e||!r&&t?g:Ce(g,d,e,a,c),m=n?o||(r?e:p||i)?[]:s:f;if(n&&n(f,m,a,c),i)for(l=Ce(m,A),i(l,[],a,c),u=l.length;u--;)(h=l[u])&&(m[A[u]]=!(f[A[u]]=h));if(r){if(o||e){if(o){for(l=[],u=m.length;u--;)(h=m[u])&&l.push(f[u]=h);o(null,m=[],l,c)}for(u=m.length;u--;)(h=m[u])&&(l=o?L(r,h):d[u])>-1&&(r[l]=!(s[l]=h))}}else m=Ce(m===s?m.splice(p,m.length):m),o?o(null,s,m,c):I.apply(s,m)}))}function xe(e){for(var t,n,o,r=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],c=s?1:0,u=ye((function(e){return e===t}),a,!0),h=ye((function(e){return L(t,e)>-1}),a,!0),d=[function(e,n,i){var o=!s&&(i||n!==l)||((t=n).nodeType?u(e,n,i):h(e,n,i));return t=null,o}];c<r;c++)if(n=i.relative[e[c].type])d=[ye(be(d),n)];else{if((n=i.filter[e[c].type].apply(null,e[c].matches))[y]){for(o=++c;o<r&&!i.relative[e[o].type];o++);return De(c>1&&be(d),c>1&&we(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(z,"$1"),n,c<o&&xe(e.slice(c,o)),o<r&&xe(e=e.slice(o)),o<r&&we(e))}d.push(n)}return be(d)}return ve.prototype=i.filters=i.pseudos,i.setFilters=new ve,s=ae.tokenize=function(e,t){var n,o,r,s,a,c,l,u=S[e+" "];if(u)return t?0:u.slice(0);for(a=e,c=[],l=i.preFilter;a;){for(s in n&&!(o=U.exec(a))||(o&&(a=a.slice(o[0].length)||a),c.push(r=[])),n=!1,(o=W.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(z," ")}),a=a.slice(n.length)),i.filter)!(o=Y[s].exec(a))||l[s]&&!(o=l[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ae.error(e):S(e,c).slice(0)},a=ae.compile=function(e,t){var n,o=[],r=[],a=E[e+" "];if(!a){for(t||(t=s(e)),n=t.length;n--;)(a=xe(t[n]))[y]?o.push(a):r.push(a);(a=E(e,function(e,t){var n=t.length>0,o=e.length>0,r=function(r,s,a,c,u){var h,p,f,m=0,v="0",w=r&&[],y=[],b=l,D=r||o&&i.find.TAG("*",u),x=C+=null==b?1:Math.random()||.1,S=D.length;for(u&&(l=s==A||s||u);v!==S&&null!=(h=D[v]);v++){if(o&&h){for(p=0,s||h.ownerDocument==A||(d(h),a=!g);f=e[p++];)if(f(h,s||A,a)){c.push(h);break}u&&(C=x)}n&&((h=!f&&h)&&m--,r&&w.push(h))}if(m+=v,n&&v!==m){for(p=0;f=t[p++];)f(w,y,s,a);if(r){if(m>0)for(;v--;)w[v]||y[v]||(y[v]=k.call(c));y=Ce(y)}I.apply(c,y),u&&!r&&y.length>0&&m+t.length>1&&ae.uniqueSort(c)}return u&&(C=x,l=b),w};return n?le(r):r}(r,o))).selector=e}return a},c=ae.select=function(e,t,n,o){var r,c,l,u,h,d="function"==typeof e&&e,A=!o&&s(e=d.selector||e);if(n=n||[],1===A.length){if((c=A[0]=A[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&9===t.nodeType&&g&&i.relative[c[1].type]){if(!(t=(i.find.ID(l.matches[0].replace(te,ne),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(r=Y.needsContext.test(e)?0:c.length;r--&&(l=c[r],!i.relative[u=l.type]);)if((h=i.find[u])&&(o=h(l.matches[0].replace(te,ne),ee.test(c[0].type)&&me(t.parentNode)||t))){if(c.splice(r,1),!(e=o.length&&we(c)))return I.apply(n,o),n;break}}return(d||a(e,A))(o,t,!g,n,!t||ee.test(e)&&me(t.parentNode)||t),n},n.sortStable=y.split("").sort(B).join("")===y,n.detectDuplicates=!!h,d(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(A.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||he(O,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),ae}(e);y.find=C,y.expr=C.selectors,y.expr[":"]=y.expr.pseudos,y.uniqueSort=y.unique=C.uniqueSort,y.text=C.getText,y.isXMLDoc=C.isXML,y.contains=C.contains,y.escapeSelector=C.escape;var D=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&y(e).is(n))break;i.push(e)}return i},x=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},S=y.expr.match.needsContext;function E(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var P=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(e,t,n){return p(t)?y.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?y.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?y.grep(e,(function(e){return a.call(t,e)>-1!==n})):y.filter(t,e,n)}y.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?y.find.matchesSelector(i,e)?[i]:[]:y.find.matches(e,y.grep(t,(function(e){return 1===e.nodeType})))},y.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(y(e).filter((function(){for(t=0;t<i;t++)if(y.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)y.find(e,o[t],n);return i>1?y.uniqueSort(n):n},filter:function(e){return this.pushStack(B(this,e||[],!1))},not:function(e){return this.pushStack(B(this,e||[],!0))},is:function(e){return!!B(this,"string"==typeof e&&S.test(e)?y(e):e||[],!1).length}});var _,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(y.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||_,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:M.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof y?t[0]:t,y.merge(this,y.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:f,!0)),P.test(i[1])&&y.isPlainObject(t))for(i in t)p(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=f.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):p(e)?void 0!==n.ready?n.ready(e):e(y):y.makeArray(e,this)}).prototype=y.fn,_=y(f);var k=/^(?:parents|prev(?:Until|All))/,T={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}y.fn.extend({has:function(e){var t=y(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(y.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,o=this.length,r=[],s="string"!=typeof e&&y(e);if(!S.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&y.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?y.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?a.call(y(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),y.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return D(e,"parentNode")},parentsUntil:function(e,t,n){return D(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return D(e,"nextSibling")},prevAll:function(e){return D(e,"previousSibling")},nextUntil:function(e,t,n){return D(e,"nextSibling",n)},prevUntil:function(e,t,n){return D(e,"previousSibling",n)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(E(e,"template")&&(e=e.content||e),y.merge([],e.childNodes))}},(function(e,t){y.fn[e]=function(n,i){var o=y.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=y.filter(i,o)),this.length>1&&(T[e]||y.uniqueSort(o),k.test(e)&&o.reverse()),this.pushStack(o)}}));var F=/[^\x20\t\r\n\f]+/g;function L(e){return e}function O(e){throw e}function R(e,t,n,i){var o;try{e&&p(o=e.promise)?o.call(e).done(t).fail(n):e&&p(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}y.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return y.each(e.match(F)||[],(function(e,n){t[n]=!0})),t}(e):y.extend({},e);var t,n,i,o,r=[],s=[],a=-1,c=function(){for(o=o||e.once,i=t=!0;s.length;a=-1)for(n=s.shift();++a<r.length;)!1===r[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},l={add:function(){return r&&(n&&!t&&(a=r.length-1,s.push(n)),function t(n){y.each(n,(function(n,i){p(i)?e.unique&&l.has(i)||r.push(i):i&&i.length&&"string"!==w(i)&&t(i)}))}(arguments),n&&!t&&c()),this},remove:function(){return y.each(arguments,(function(e,t){for(var n;(n=y.inArray(t,r,n))>-1;)r.splice(n,1),n<=a&&a--})),this},has:function(e){return e?y.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||t||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},y.extend({Deferred:function(t){var n=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return y.Deferred((function(t){y.each(n,(function(n,i){var o=p(e[i[4]])&&e[i[4]];r[i[1]]((function(){var e=o&&o.apply(this,arguments);e&&p(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(t,i,o){var r=0;function s(t,n,i,o){return function(){var a=this,c=arguments,l=function(){var e,l;if(!(t<r)){if((e=i.apply(a,c))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,p(l)?o?l.call(e,s(r,n,L,o),s(r,n,O,o)):(r++,l.call(e,s(r,n,L,o),s(r,n,O,o),s(r,n,L,n.notifyWith))):(i!==L&&(a=void 0,c=[e]),(o||n.resolveWith)(a,c))}},u=o?l:function(){try{l()}catch(e){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(e,u.stackTrace),t+1>=r&&(i!==O&&(a=void 0,c=[e]),n.rejectWith(a,c))}};t?u():(y.Deferred.getStackHook&&(u.stackTrace=y.Deferred.getStackHook()),e.setTimeout(u))}}return y.Deferred((function(e){n[0][3].add(s(0,e,p(o)?o:L,e.notifyWith)),n[1][3].add(s(0,e,p(t)?t:L)),n[2][3].add(s(0,e,p(i)?i:O))})).promise()},promise:function(e){return null!=e?y.extend(e,o):o}},r={};return y.each(n,(function(e,t){var s=t[2],a=t[5];o[t[1]]=s.add,a&&s.add((function(){i=a}),n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),s.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=s.fireWith})),o.promise(r),t&&t.call(r,r),r},when:function(e){var t=arguments.length,n=t,i=Array(n),r=o.call(arguments),s=y.Deferred(),a=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?o.call(arguments):n,--t||s.resolveWith(i,r)}};if(t<=1&&(R(e,s.done(a(n)).resolve,s.reject,!t),"pending"===s.state()||p(r[n]&&r[n].then)))return s.then();for(;n--;)R(r[n],a(n),s.reject);return s.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&N.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},y.readyException=function(t){e.setTimeout((function(){throw t}))};var H=y.Deferred();function j(){f.removeEventListener("DOMContentLoaded",j),e.removeEventListener("load",j),y.ready()}y.fn.ready=function(e){return H.then(e).catch((function(e){y.readyException(e)})),this},y.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--y.readyWait:y.isReady)||(y.isReady=!0,!0!==e&&--y.readyWait>0||H.resolveWith(f,[y]))}}),y.ready.then=H.then,"complete"===f.readyState||"loading"!==f.readyState&&!f.documentElement.doScroll?e.setTimeout(y.ready):(f.addEventListener("DOMContentLoaded",j),e.addEventListener("load",j));var Q=function(e,t,n,i,o,r,s){var a=0,c=e.length,l=null==n;if("object"===w(n))for(a in o=!0,n)Q(e,t,a,n[a],!0,r,s);else if(void 0!==i&&(o=!0,p(i)||(s=!0),l&&(s?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(y(e),n)})),t))for(;a<c;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return o?e:l?t.call(e):c?t(e[0],n):r},z=/^-ms-/,U=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function G(e){return e.replace(z,"ms-").replace(U,W)}var q=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function V(){this.expando=y.expando+V.uid++}V.uid=1,V.prototype={cache:function(e){var t=e[this.expando];return t||(t={},q(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[G(t)]=n;else for(i in t)o[G(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in i?[t]:t.match(F)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||y.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!y.isEmptyObject(t)}};var Y=new V,X=new V,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function K(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:J.test(e)?JSON.parse(e):e)}(n)}catch(e){}X.set(e,t,n)}else n=void 0;return n}y.extend({hasData:function(e){return X.hasData(e)||Y.hasData(e)},data:function(e,t,n){return X.access(e,t,n)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),y.fn.extend({data:function(e,t){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=X.get(r),1===r.nodeType&&!Y.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=G(i.slice(5)),K(r,i,o[i]));Y.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){X.set(this,e)})):Q(this,(function(t){var n;if(r&&void 0===t)return void 0!==(n=X.get(r,e))||void 0!==(n=K(r,e))?n:void 0;this.each((function(){X.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){X.remove(this,e)}))}}),y.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Y.get(e,t),n&&(!i||Array.isArray(n)?i=Y.access(e,t,y.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=y.queue(e,t),i=n.length,o=n.shift(),r=y._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,(function(){y.dequeue(e,t)}),r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:y.Callbacks("once memory").add((function(){Y.remove(e,[t+"queue",n])}))})}}),y.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?y.queue(this[0],e):void 0===t?this:this.each((function(){var n=y.queue(this,e,t);y._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&y.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){y.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=y.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=Y.get(r[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(t)}});var $=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+$+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=f.documentElement,ie=function(e){return y.contains(e.ownerDocument,e)},oe={composed:!0};ne.getRootNode&&(ie=function(e){return y.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var re=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===y.css(e,"display")};function se(e,t,n,i){var o,r,s=20,a=i?function(){return i.cur()}:function(){return y.css(e,t,"")},c=a(),l=n&&n[3]||(y.cssNumber[t]?"":"px"),u=e.nodeType&&(y.cssNumber[t]||"px"!==l&&+c)&&ee.exec(y.css(e,t));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;s--;)y.style(e,t,u+l),(1-r)*(1-(r=a()/c||.5))<=0&&(s=0),u/=r;u*=2,y.style(e,t,u+l),n=n||[]}return n&&(u=+u||+c||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=u,i.end=o)),o}var ae={};function ce(e){var t,n=e.ownerDocument,i=e.nodeName,o=ae[i];return o||(t=n.body.appendChild(n.createElement(i)),o=y.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),ae[i]=o,o)}function le(e,t){for(var n,i,o=[],r=0,s=e.length;r<s;r++)(i=e[r]).style&&(n=i.style.display,t?("none"===n&&(o[r]=Y.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&re(i)&&(o[r]=ce(i))):"none"!==n&&(o[r]="none",Y.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}y.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){re(this)?y(this).show():y(this).hide()}))}});var ue,he,de=/^(?:checkbox|radio)$/i,Ae=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pe=/^$|^module$|\/(?:java|ecma)script/i;ue=f.createDocumentFragment().appendChild(f.createElement("div")),(he=f.createElement("input")).setAttribute("type","radio"),he.setAttribute("checked","checked"),he.setAttribute("name","t"),ue.appendChild(he),A.checkClone=ue.cloneNode(!0).cloneNode(!0).lastChild.checked,ue.innerHTML="<textarea>x</textarea>",A.noCloneChecked=!!ue.cloneNode(!0).lastChild.defaultValue,ue.innerHTML="<option></option>",A.option=!!ue.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function fe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&E(e,t)?y.merge([e],n):n}function me(e,t){for(var n=0,i=e.length;n<i;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,A.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var ve=/<|&#?\w+;/;function we(e,t,n,i,o){for(var r,s,a,c,l,u,h=t.createDocumentFragment(),d=[],A=0,p=e.length;A<p;A++)if((r=e[A])||0===r)if("object"===w(r))y.merge(d,r.nodeType?[r]:r);else if(ve.test(r)){for(s=s||h.appendChild(t.createElement("div")),a=(Ae.exec(r)||["",""])[1].toLowerCase(),c=ge[a]||ge._default,s.innerHTML=c[1]+y.htmlPrefilter(r)+c[2],u=c[0];u--;)s=s.lastChild;y.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(r));for(h.textContent="",A=0;r=d[A++];)if(i&&y.inArray(r,i)>-1)o&&o.push(r);else if(l=ie(r),s=fe(h.appendChild(r),"script"),l&&me(s),n)for(u=0;r=s[u++];)pe.test(r.type||"")&&n.push(r);return h}var ye=/^key/,be=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function De(){return!0}function xe(){return!1}function Se(e,t){return e===function(){try{return f.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,i,o,r){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=void 0),t)Ee(e,a,n,i,t[a],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=xe;else if(!o)return e;return 1===r&&(s=o,(o=function(e){return y().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=y.guid++)),e.each((function(){y.event.add(this,t,o,i,n)}))}function Pe(e,t,n){n?(Y.set(e,t,!1),y.event.add(e,t,{namespace:!1,handler:function(e){var i,r,s=Y.get(this,t);if(1&e.isTrigger&&this[t]){if(s.length)(y.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=o.call(arguments),Y.set(this,t,s),i=n(this,t),this[t](),s!==(r=Y.get(this,t))||i?Y.set(this,t,!1):r={},s!==r)return e.stopImmediatePropagation(),e.preventDefault(),r.value}else s.length&&(Y.set(this,t,{value:y.event.trigger(y.extend(s[0],y.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,t)&&y.event.add(e,t,De)}y.event={global:{},add:function(e,t,n,i,o){var r,s,a,c,l,u,h,d,A,p,g,f=Y.get(e);if(q(e))for(n.handler&&(n=(r=n).handler,o=r.selector),o&&y.find.matchesSelector(ne,o),n.guid||(n.guid=y.guid++),(c=f.events)||(c=f.events=Object.create(null)),(s=f.handle)||(s=f.handle=function(t){return void 0!==y&&y.event.triggered!==t.type?y.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(F)||[""]).length;l--;)A=g=(a=Ce.exec(t[l])||[])[1],p=(a[2]||"").split(".").sort(),A&&(h=y.event.special[A]||{},A=(o?h.delegateType:h.bindType)||A,h=y.event.special[A]||{},u=y.extend({type:A,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&y.expr.match.needsContext.test(o),namespace:p.join(".")},r),(d=c[A])||((d=c[A]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,p,s)||e.addEventListener&&e.addEventListener(A,s)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,u):d.push(u),y.event.global[A]=!0)},remove:function(e,t,n,i,o){var r,s,a,c,l,u,h,d,A,p,g,f=Y.hasData(e)&&Y.get(e);if(f&&(c=f.events)){for(l=(t=(t||"").match(F)||[""]).length;l--;)if(A=g=(a=Ce.exec(t[l])||[])[1],p=(a[2]||"").split(".").sort(),A){for(h=y.event.special[A]||{},d=c[A=(i?h.delegateType:h.bindType)||A]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)u=d[r],!o&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,f.handle)||y.removeEvent(e,A,f.handle),delete c[A])}else for(A in c)y.event.remove(e,A+t[l],n,i,!0);y.isEmptyObject(c)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,r,s,a=new Array(arguments.length),c=y.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[c.type]||[],u=y.event.special[c.type]||{};for(a[0]=c,t=1;t<arguments.length;t++)a[t]=arguments[t];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(s=y.event.handlers.call(this,c,l),t=0;(o=s[t++])&&!c.isPropagationStopped();)for(c.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==r.namespace&&!c.rnamespace.test(r.namespace)||(c.handleObj=r,c.data=r.data,void 0!==(i=((y.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,i,o,r,s,a=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(r=[],s={},n=0;n<c;n++)void 0===s[o=(i=t[n]).selector+" "]&&(s[o]=i.needsContext?y(o,this).index(l)>-1:y.find(o,this,null,[l]).length),s[o]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return l=this,c<t.length&&a.push({elem:l,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(y.Event.prototype,e,{enumerable:!0,configurable:!0,get:p(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[y.expando]?e:new y.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return de.test(t.type)&&t.click&&E(t,"input")&&Pe(t,"click",De),!1},trigger:function(e){var t=this||e;return de.test(t.type)&&t.click&&E(t,"input")&&Pe(t,"click"),!0},_default:function(e){var t=e.target;return de.test(t.type)&&t.click&&E(t,"input")&&Y.get(t,"click")||E(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},y.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},y.Event=function(e,t){if(!(this instanceof y.Event))return new y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?De:xe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&y.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:xe,isPropagationStopped:xe,isImmediatePropagationStopped:xe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=De,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=De,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=De,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ye.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&be.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},(function(e,t){y.event.special[e]={setup:function(){return Pe(this,e,Se),!1},trigger:function(){return Pe(this,e),!0},delegateType:t}})),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===i||y.contains(i,o))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}})),y.fn.extend({on:function(e,t,n,i){return Ee(this,e,t,n,i)},one:function(e,t,n,i){return Ee(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=xe),this.each((function(){y.event.remove(this,e,n,t)}))}});var Be=/<script|<style|<link/i,_e=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ke(e,t){return E(e,"table")&&E(11!==t.nodeType?t:t.firstChild,"tr")&&y(e).children("tbody")[0]||e}function Te(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,i,o,r,s,a;if(1===t.nodeType){if(Y.hasData(e)&&(a=Y.get(e).events))for(o in Y.remove(t,"handle events"),a)for(n=0,i=a[o].length;n<i;n++)y.event.add(t,o,a[o][n]);X.hasData(e)&&(r=X.access(e),s=y.extend({},r),X.set(t,s))}}function Le(e,t){var n=t.nodeName.toLowerCase();"input"===n&&de.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Oe(e,t,n,i){t=r(t);var o,s,a,c,l,u,h=0,d=e.length,g=d-1,f=t[0],m=p(f);if(m||d>1&&"string"==typeof f&&!A.checkClone&&_e.test(f))return e.each((function(o){var r=e.eq(o);m&&(t[0]=f.call(this,o,r.html())),Oe(r,t,n,i)}));if(d&&(s=(o=we(t,e[0].ownerDocument,!1,e,i)).firstChild,1===o.childNodes.length&&(o=s),s||i)){for(c=(a=y.map(fe(o,"script"),Te)).length;h<d;h++)l=o,h!==g&&(l=y.clone(l,!0,!0),c&&y.merge(a,fe(l,"script"))),n.call(e[h],l,h);if(c)for(u=a[a.length-1].ownerDocument,y.map(a,Ie),h=0;h<c;h++)l=a[h],pe.test(l.type||"")&&!Y.access(l,"globalEval")&&y.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?y._evalUrl&&!l.noModule&&y._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):v(l.textContent.replace(Me,""),l,u))}return e}function Re(e,t,n){for(var i,o=t?y.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||y.cleanData(fe(i)),i.parentNode&&(n&&ie(i)&&me(fe(i,"script")),i.parentNode.removeChild(i));return e}y.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,o,r,s,a=e.cloneNode(!0),c=ie(e);if(!(A.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||y.isXMLDoc(e)))for(s=fe(a),i=0,o=(r=fe(e)).length;i<o;i++)Le(r[i],s[i]);if(t)if(n)for(r=r||fe(e),s=s||fe(a),i=0,o=r.length;i<o;i++)Fe(r[i],s[i]);else Fe(e,a);return(s=fe(a,"script")).length>0&&me(s,!c&&fe(e,"script")),a},cleanData:function(e){for(var t,n,i,o=y.event.special,r=0;void 0!==(n=e[r]);r++)if(q(n)){if(t=n[Y.expando]){if(t.events)for(i in t.events)o[i]?y.event.remove(n,i):y.removeEvent(n,i,t.handle);n[Y.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),y.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return Q(this,(function(e){return void 0===e?y.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Oe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ke(this,e).appendChild(e)}))},prepend:function(){return Oe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ke(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Oe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Oe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(y.cleanData(fe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return y.clone(this,e,t)}))},html:function(e){return Q(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Be.test(e)&&!ge[(Ae.exec(e)||["",""])[1].toLowerCase()]){e=y.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(y.cleanData(fe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Oe(this,arguments,(function(t){var n=this.parentNode;y.inArray(this,e)<0&&(y.cleanData(fe(this)),n&&n.replaceChild(t,this))}),e)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){y.fn[e]=function(e){for(var n,i=[],o=y(e),r=o.length-1,a=0;a<=r;a++)n=a===r?this:this.clone(!0),y(o[a])[t](n),s.apply(i,n.get());return this.pushStack(i)}}));var Ne=new RegExp("^("+$+")(?!px)[a-z%]+$","i"),He=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},je=function(e,t,n){var i,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];for(o in i=n.call(e),t)e.style[o]=r[o];return i},Qe=new RegExp(te.join("|"),"i");function ze(e,t,n){var i,o,r,s,a=e.style;return(n=n||He(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||ie(e)||(s=y.style(e,t)),!A.pixelBoxStyles()&&Ne.test(s)&&Qe.test(t)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(l).appendChild(u);var t=e.getComputedStyle(u);i="1%"!==t.top,c=12===n(t.marginLeft),u.style.right="60%",s=36===n(t.right),o=36===n(t.width),u.style.position="absolute",r=12===n(u.offsetWidth/3),ne.removeChild(l),u=null}}function n(e){return Math.round(parseFloat(e))}var i,o,r,s,a,c,l=f.createElement("div"),u=f.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",A.clearCloneStyle="content-box"===u.style.backgroundClip,y.extend(A,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),r},reliableTrDimensions:function(){var t,n,i,o;return null==a&&(t=f.createElement("table"),n=f.createElement("tr"),i=f.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",i.style.height="9px",ne.appendChild(t).appendChild(n).appendChild(i),o=e.getComputedStyle(n),a=parseInt(o.height)>3,ne.removeChild(t)),a}}))}();var We=["Webkit","Moz","ms"],Ge=f.createElement("div").style,qe={};function Ve(e){var t=y.cssProps[e]||qe[e];return t||(e in Ge?e:qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=We.length;n--;)if((e=We[n]+t)in Ge)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function Ke(e,t,n){var i=ee.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function $e(e,t,n,i,o,r){var s="width"===t?1:0,a=0,c=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(c+=y.css(e,n+te[s],!0,o)),i?("content"===n&&(c-=y.css(e,"padding"+te[s],!0,o)),"margin"!==n&&(c-=y.css(e,"border"+te[s]+"Width",!0,o))):(c+=y.css(e,"padding"+te[s],!0,o),"padding"!==n?c+=y.css(e,"border"+te[s]+"Width",!0,o):a+=y.css(e,"border"+te[s]+"Width",!0,o));return!i&&r>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-c-a-.5))||0),c}function et(e,t,n){var i=He(e),o=(!A.boxSizingReliable()||n)&&"border-box"===y.css(e,"boxSizing",!1,i),r=o,s=ze(e,t,i),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ne.test(s)){if(!n)return s;s="auto"}return(!A.boxSizingReliable()&&o||!A.reliableTrDimensions()&&E(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===y.css(e,"display",!1,i))&&e.getClientRects().length&&(o="border-box"===y.css(e,"boxSizing",!1,i),(r=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+$e(e,t,n||(o?"border":"content"),r,i,s)+"px"}function tt(e,t,n,i,o){return new tt.prototype.init(e,t,n,i,o)}y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=G(t),c=Xe.test(t),l=e.style;if(c||(t=Ve(a)),s=y.cssHooks[t]||y.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:l[t];"string"===(r=typeof n)&&(o=ee.exec(n))&&o[1]&&(n=se(e,t,o),r="number"),null!=n&&n==n&&("number"!==r||c||(n+=o&&o[3]||(y.cssNumber[a]?"":"px")),A.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(c?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,i){var o,r,s,a=G(t);return Xe.test(t)||(t=Ve(a)),(s=y.cssHooks[t]||y.cssHooks[a])&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=ze(e,t,i)),"normal"===o&&t in Ze&&(o=Ze[t]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),y.each(["height","width"],(function(e,t){y.cssHooks[t]={get:function(e,n,i){if(n)return!Ye.test(y.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,i):je(e,Je,(function(){return et(e,t,i)}))},set:function(e,n,i){var o,r=He(e),s=!A.scrollboxSize()&&"absolute"===r.position,a=(s||i)&&"border-box"===y.css(e,"boxSizing",!1,r),c=i?$e(e,t,i,a,r):0;return a&&s&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-$e(e,t,"border",!1,r)-.5)),c&&(o=ee.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=y.css(e,t)),Ke(0,n,c)}}})),y.cssHooks.marginLeft=Ue(A.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-je(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),y.each({margin:"",padding:"",border:"Width"},(function(e,t){y.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+te[i]+t]=r[i]||r[i-2]||r[0];return o}},"margin"!==e&&(y.cssHooks[e+t].set=Ke)})),y.fn.extend({css:function(e,t){return Q(this,(function(e,t,n){var i,o,r={},s=0;if(Array.isArray(t)){for(i=He(e),o=t.length;s<o;s++)r[t[s]]=y.css(e,t[s],!1,i);return r}return void 0!==n?y.style(e,t,n):y.css(e,t)}),e,t,arguments.length>1)}}),y.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||y.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(y.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=y.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){y.fx.step[e.prop]?y.fx.step[e.prop](e):1!==e.elem.nodeType||!y.cssHooks[e.prop]&&null==e.elem.style[Ve(e.prop)]?e.elem[e.prop]=e.now:y.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},y.fx=tt.prototype.init,y.fx.step={};var nt,it,ot=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;function st(){it&&(!1===f.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(st):e.setTimeout(st,y.fx.interval),y.fx.tick())}function at(){return e.setTimeout((function(){nt=void 0})),nt=Date.now()}function ct(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=te[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function lt(e,t,n){for(var i,o=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,t,e))return i}function ut(e,t,n){var i,o,r=0,s=ut.prefilters.length,a=y.Deferred().always((function(){delete c.elem})),c=function(){if(o)return!1;for(var t=nt||at(),n=Math.max(0,l.startTime+l.duration-t),i=1-(n/l.duration||0),r=0,s=l.tweens.length;r<s;r++)l.tweens[r].run(i);return a.notifyWith(e,[l,i,n]),i<1&&s?n:(s||a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:y.extend({},t),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||at(),duration:n.duration,tweens:[],createTween:function(t,n){var i=y.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),u=l.props;for(!function(e,t){var n,i,o,r,s;for(n in e)if(o=t[i=G(n)],r=e[n],Array.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(s=y.cssHooks[i])&&"expand"in s)for(n in r=s.expand(r),delete e[i],r)n in e||(e[n]=r[n],t[n]=o);else t[i]=o}(u,l.opts.specialEasing);r<s;r++)if(i=ut.prefilters[r].call(l,e,u,l.opts))return p(i.stop)&&(y._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return y.map(u,lt,l),p(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),y.fx.timer(y.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}y.Animation=y.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,ee.exec(t),n),n}]},tweener:function(e,t){p(e)?(t=e,e=["*"]):e=e.match(F);for(var n,i=0,o=e.length;i<o;i++)n=e[i],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,o,r,s,a,c,l,u,h="width"in t||"height"in t,d=this,A={},p=e.style,g=e.nodeType&&re(e),f=Y.get(e,"fxshow");for(i in n.queue||(null==(s=y._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,y.queue(e,"fx").length||s.empty.fire()}))}))),t)if(o=t[i],ot.test(o)){if(delete t[i],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!f||void 0===f[i])continue;g=!0}A[i]=f&&f[i]||y.style(e,i)}if((c=!y.isEmptyObject(t))||!y.isEmptyObject(A))for(i in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=f&&f.display)&&(l=Y.get(e,"display")),"none"===(u=y.css(e,"display"))&&(l?u=l:(le([e],!0),l=e.style.display||l,u=y.css(e,"display"),le([e]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===y.css(e,"float")&&(c||(d.done((function(){p.display=l})),null==l&&(u=p.display,l="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),c=!1,A)c||(f?"hidden"in f&&(g=f.hidden):f=Y.access(e,"fxshow",{display:l}),r&&(f.hidden=!g),g&&le([e],!0),d.done((function(){for(i in g||le([e]),Y.remove(e,"fxshow"),A)y.style(e,i,A[i])}))),c=lt(g?f[i]:0,i,d),i in f||(f[i]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),y.speed=function(e,t,n){var i=e&&"object"==typeof e?y.extend({},e):{complete:n||!n&&t||p(e)&&e,duration:e,easing:n&&t||t&&!p(t)&&t};return y.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in y.fx.speeds?i.duration=y.fx.speeds[i.duration]:i.duration=y.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){p(i.old)&&i.old.call(this),i.queue&&y.dequeue(this,i.queue)},i},y.fn.extend({fadeTo:function(e,t,n,i){return this.filter(re).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=y.isEmptyObject(e),r=y.speed(t,n,i),s=function(){var t=ut(this,y.extend({},e),r);(o||Y.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",r=y.timers,s=Y.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&rt.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||y.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Y.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=y.timers,s=i?i.length:0;for(n.finish=!0,y.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),y.each(["toggle","show","hide"],(function(e,t){var n=y.fn[t];y.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ct(t,!0),e,i,o)}})),y.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){y.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),y.timers=[],y.fx.tick=function(){var e,t=0,n=y.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||y.fx.stop(),nt=void 0},y.fx.timer=function(e){y.timers.push(e),y.fx.start()},y.fx.interval=13,y.fx.start=function(){it||(it=!0,st())},y.fx.stop=function(){it=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(t,n){return t=y.fx&&y.fx.speeds[t]||t,n=n||"fx",this.queue(n,(function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}}))},function(){var e=f.createElement("input"),t=f.createElement("select").appendChild(f.createElement("option"));e.type="checkbox",A.checkOn=""!==e.value,A.optSelected=t.selected,(e=f.createElement("input")).value="t",e.type="radio",A.radioValue="t"===e.value}();var ht,dt=y.expr.attrHandle;y.fn.extend({attr:function(e,t){return Q(this,y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){y.removeAttr(this,e)}))}}),y.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?y.prop(e,t,n):(1===r&&y.isXMLDoc(e)||(o=y.attrHooks[t.toLowerCase()]||(y.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void y.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=y.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!A.radioValue&&"radio"===t&&E(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(F);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?y.removeAttr(e,n):e.setAttribute(n,n),n}},y.each(y.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=dt[t]||y.find.attr;dt[t]=function(e,t,i){var o,r,s=t.toLowerCase();return i||(r=dt[s],dt[s]=o,o=null!=n(e,t,i)?s:null,dt[s]=r),o}}));var At=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;function gt(e){return(e.match(F)||[]).join(" ")}function ft(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(F)||[]}y.fn.extend({prop:function(e,t){return Q(this,y.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[y.propFix[e]||e]}))}}),y.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&y.isXMLDoc(e)||(t=y.propFix[t]||t,o=y.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=y.find.attr(e,"tabindex");return t?parseInt(t,10):At.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),A.optSelected||(y.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){y.propFix[this.toLowerCase()]=this})),y.fn.extend({addClass:function(e){var t,n,i,o,r,s,a,c=0;if(p(e))return this.each((function(t){y(this).addClass(e.call(this,t,ft(this)))}));if((t=mt(e)).length)for(;n=this[c++];)if(o=ft(n),i=1===n.nodeType&&" "+gt(o)+" "){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o!==(a=gt(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,o,r,s,a,c=0;if(p(e))return this.each((function(t){y(this).removeClass(e.call(this,t,ft(this)))}));if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[c++];)if(o=ft(n),i=1===n.nodeType&&" "+gt(o)+" "){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");o!==(a=gt(i))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):p(e)?this.each((function(n){y(this).toggleClass(e.call(this,n,ft(this),t),t)})):this.each((function(){var t,o,r,s;if(i)for(o=0,r=y(this),s=mt(e);t=s[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||((t=ft(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Y.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+gt(ft(n))+" ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g;y.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=p(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,y(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=y.map(o,(function(e){return null==e?"":e+""}))),(t=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=y.valHooks[o.type]||y.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(vt,""):null==n?"":n:void 0}}),y.extend({valHooks:{option:{get:function(e){var t=y.find.attr(e,"value");return null!=t?t:gt(y.text(e))}},select:{get:function(e){var t,n,i,o=e.options,r=e.selectedIndex,s="select-one"===e.type,a=s?null:[],c=s?r+1:o.length;for(i=r<0?c:s?r:0;i<c;i++)if(((n=o[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!E(n.parentNode,"optgroup"))){if(t=y(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,i,o=e.options,r=y.makeArray(t),s=o.length;s--;)((i=o[s]).selected=y.inArray(y.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),y.each(["radio","checkbox"],(function(){y.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=y.inArray(y(e).val(),t)>-1}},A.checkOn||(y.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),A.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,yt=function(e){e.stopPropagation()};y.extend(y.event,{trigger:function(t,n,i,o){var r,s,a,c,l,h,d,A,m=[i||f],v=u.call(t,"type")?t.type:t,w=u.call(t,"namespace")?t.namespace.split("."):[];if(s=A=a=i=i||f,3!==i.nodeType&&8!==i.nodeType&&!wt.test(v+y.event.triggered)&&(v.indexOf(".")>-1&&(w=v.split("."),v=w.shift(),w.sort()),l=v.indexOf(":")<0&&"on"+v,(t=t[y.expando]?t:new y.Event(v,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=w.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:y.makeArray(n,[t]),d=y.event.special[v]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!g(i)){for(c=d.delegateType||v,wt.test(c+v)||(s=s.parentNode);s;s=s.parentNode)m.push(s),a=s;a===(i.ownerDocument||f)&&m.push(a.defaultView||a.parentWindow||e)}for(r=0;(s=m[r++])&&!t.isPropagationStopped();)A=s,t.type=r>1?c:d.bindType||v,(h=(Y.get(s,"events")||Object.create(null))[t.type]&&Y.get(s,"handle"))&&h.apply(s,n),(h=l&&s[l])&&h.apply&&q(s)&&(t.result=h.apply(s,n),!1===t.result&&t.preventDefault());return t.type=v,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(m.pop(),n)||!q(i)||l&&p(i[v])&&!g(i)&&((a=i[l])&&(i[l]=null),y.event.triggered=v,t.isPropagationStopped()&&A.addEventListener(v,yt),i[v](),t.isPropagationStopped()&&A.removeEventListener(v,yt),y.event.triggered=void 0,a&&(i[l]=a)),t.result}},simulate:function(e,t,n){var i=y.extend(new y.Event,n,{type:e,isSimulated:!0});y.event.trigger(i,null,t)}}),y.fn.extend({trigger:function(e,t){return this.each((function(){y.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return y.event.trigger(e,t,n,!0)}}),A.focusin||y.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){y.event.simulate(t,e.target,y.event.fix(e))};y.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,o=Y.access(i,t);o||i.addEventListener(e,n,!0),Y.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,o=Y.access(i,t)-1;o?Y.access(i,t,o):(i.removeEventListener(e,n,!0),Y.remove(i,t))}}}));var bt=e.location,Ct={guid:Date.now()},Dt=/\?/;y.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||y.error("Invalid XML: "+t),n};var xt=/\[\]$/,St=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function Bt(e,t,n,i){var o;if(Array.isArray(t))y.each(t,(function(t,o){n||xt.test(e)?i(e,o):Bt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)}));else if(n||"object"!==w(t))i(e,t);else for(o in t)Bt(e+"["+o+"]",t[o],n,i)}y.param=function(e,t){var n,i=[],o=function(e,t){var n=p(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,(function(){o(this.name,this.value)}));else for(n in e)Bt(n,e[n],t,o);return i.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&Pt.test(this.nodeName)&&!Et.test(e)&&(this.checked||!de.test(e))})).map((function(e,t){var n=y(this).val();return null==n?null:Array.isArray(n)?y.map(n,(function(e){return{name:t.name,value:e.replace(St,"\r\n")}})):{name:t.name,value:n.replace(St,"\r\n")}})).get()}});var _t=/%20/g,Mt=/#.*$/,kt=/([?&])_=[^&]*/,Tt=/^(.*?):[ \t]*([^\r\n]*)$/gm,It=/^(?:GET|HEAD)$/,Ft=/^\/\//,Lt={},Ot={},Rt="*/".concat("*"),Nt=f.createElement("a");function Ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(F)||[];if(p(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function jt(e,t,n,i){var o={},r=e===Ot;function s(a){var c;return o[a]=!0,y.each(e[a]||[],(function(e,a){var l=a(t,n,i);return"string"!=typeof l||r||o[l]?r?!(c=l):void 0:(t.dataTypes.unshift(l),s(l),!1)})),c}return s(t.dataTypes[0])||!o["*"]&&s("*")}function Qt(e,t){var n,i,o=y.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&y.extend(!0,e,i),e}Nt.href=bt.href,y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Qt(Qt(e,y.ajaxSettings),t):Qt(y.ajaxSettings,e)},ajaxPrefilter:Ht(Lt),ajaxTransport:Ht(Ot),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,r,s,a,c,l,u,h,d,A=y.ajaxSetup({},n),p=A.context||A,g=A.context&&(p.nodeType||p.jquery)?y(p):y.event,m=y.Deferred(),v=y.Callbacks("once memory"),w=A.statusCode||{},b={},C={},D="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=Tt.exec(r);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?r:null},setRequestHeader:function(e,t){return null==l&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==l&&(A.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)x.always(e[x.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||D;return i&&i.abort(t),S(0,t),this}};if(m.promise(x),A.url=((t||A.url||bt.href)+"").replace(Ft,bt.protocol+"//"),A.type=n.method||n.type||A.method||A.type,A.dataTypes=(A.dataType||"*").toLowerCase().match(F)||[""],null==A.crossDomain){c=f.createElement("a");try{c.href=A.url,c.href=c.href,A.crossDomain=Nt.protocol+"//"+Nt.host!=c.protocol+"//"+c.host}catch(e){A.crossDomain=!0}}if(A.data&&A.processData&&"string"!=typeof A.data&&(A.data=y.param(A.data,A.traditional)),jt(Lt,A,n,x),l)return x;for(h in(u=y.event&&A.global)&&0==y.active++&&y.event.trigger("ajaxStart"),A.type=A.type.toUpperCase(),A.hasContent=!It.test(A.type),o=A.url.replace(Mt,""),A.hasContent?A.data&&A.processData&&0===(A.contentType||"").indexOf("application/x-www-form-urlencoded")&&(A.data=A.data.replace(_t,"+")):(d=A.url.slice(o.length),A.data&&(A.processData||"string"==typeof A.data)&&(o+=(Dt.test(o)?"&":"?")+A.data,delete A.data),!1===A.cache&&(o=o.replace(kt,"$1"),d=(Dt.test(o)?"&":"?")+"_="+Ct.guid+++d),A.url=o+d),A.ifModified&&(y.lastModified[o]&&x.setRequestHeader("If-Modified-Since",y.lastModified[o]),y.etag[o]&&x.setRequestHeader("If-None-Match",y.etag[o])),(A.data&&A.hasContent&&!1!==A.contentType||n.contentType)&&x.setRequestHeader("Content-Type",A.contentType),x.setRequestHeader("Accept",A.dataTypes[0]&&A.accepts[A.dataTypes[0]]?A.accepts[A.dataTypes[0]]+("*"!==A.dataTypes[0]?", "+Rt+"; q=0.01":""):A.accepts["*"]),A.headers)x.setRequestHeader(h,A.headers[h]);if(A.beforeSend&&(!1===A.beforeSend.call(p,x,A)||l))return x.abort();if(D="abort",v.add(A.complete),x.done(A.success),x.fail(A.error),i=jt(Ot,A,n,x)){if(x.readyState=1,u&&g.trigger("ajaxSend",[x,A]),l)return x;A.async&&A.timeout>0&&(a=e.setTimeout((function(){x.abort("timeout")}),A.timeout));try{l=!1,i.send(b,S)}catch(e){if(l)throw e;S(-1,e)}}else S(-1,"No Transport");function S(t,n,s,c){var h,d,f,b,C,D=n;l||(l=!0,a&&e.clearTimeout(a),i=void 0,r=c||"",x.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(b=function(e,t,n){for(var i,o,r,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){c.unshift(o);break}if(c[0]in n)r=c[0];else{for(o in n){if(!c[0]||e.converters[o+" "+c[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==c[0]&&c.unshift(r),n[r]}(A,x,s)),!h&&y.inArray("script",A.dataTypes)>-1&&(A.converters["text script"]=function(){}),b=function(e,t,n,i){var o,r,s,a,c,l={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=r,r=u.shift())if("*"===r)r=c;else if("*"!==c&&c!==r){if(!(s=l[c+" "+r]||l["* "+r]))for(o in l)if((a=o.split(" "))[1]===r&&(s=l[c+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[o]:!0!==l[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+r}}}return{state:"success",data:t}}(A,b,x,h),h?(A.ifModified&&((C=x.getResponseHeader("Last-Modified"))&&(y.lastModified[o]=C),(C=x.getResponseHeader("etag"))&&(y.etag[o]=C)),204===t||"HEAD"===A.type?D="nocontent":304===t?D="notmodified":(D=b.state,d=b.data,h=!(f=b.error))):(f=D,!t&&D||(D="error",t<0&&(t=0))),x.status=t,x.statusText=(n||D)+"",h?m.resolveWith(p,[d,D,x]):m.rejectWith(p,[x,D,f]),x.statusCode(w),w=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[x,A,h?d:f]),v.fireWith(p,[x,D]),u&&(g.trigger("ajaxComplete",[x,A]),--y.active||y.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return y.get(e,t,n,"json")},getScript:function(e,t){return y.get(e,void 0,t,"script")}}),y.each(["get","post"],(function(e,t){y[t]=function(e,n,i,o){return p(n)&&(o=o||i,i=n,n=void 0),y.ajax(y.extend({url:e,type:t,dataType:o,data:n,success:i},y.isPlainObject(e)&&e))}})),y.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),y._evalUrl=function(e,t,n){return y.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){y.globalEval(e,t,n)}})},y.fn.extend({wrapAll:function(e){var t;return this[0]&&(p(e)&&(e=e.call(this[0])),t=y(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return p(e)?this.each((function(t){y(this).wrapInner(e.call(this,t))})):this.each((function(){var t=y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=p(e);return this.each((function(n){y(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){y(this).replaceWith(this.childNodes)})),this}}),y.expr.pseudos.hidden=function(e){return!y.expr.pseudos.visible(e)},y.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var zt={0:200,1223:204},Ut=y.ajaxSettings.xhr();A.cors=!!Ut&&"withCredentials"in Ut,A.ajax=Ut=!!Ut,y.ajaxTransport((function(t){var n,i;if(A.cors||Ut&&!t.crossDomain)return{send:function(o,r){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(s,o[s]);n=function(e){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(zt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=a.ontimeout=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout((function(){n&&i()}))},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}})),y.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return y.globalEval(e),e}}}),y.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),y.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,o){t=y("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),f.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Wt,Gt=[],qt=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||y.expando+"_"+Ct.guid++;return this[e]=!0,e}}),y.ajaxPrefilter("json jsonp",(function(t,n,i){var o,r,s,a=!1!==t.jsonp&&(qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=p(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(qt,"$1"+o):!1!==t.jsonp&&(t.url+=(Dt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||y.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},i.always((function(){void 0===r?y(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,Gt.push(o)),s&&p(r)&&r(s[0]),s=r=void 0})),"script"})),A.createHTMLDocument=((Wt=f.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),y.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(A.createHTMLDocument?((i=(t=f.implementation.createHTMLDocument("")).createElement("base")).href=f.location.href,t.head.appendChild(i)):t=f),r=!n&&[],(o=P.exec(e))?[t.createElement(o[1])]:(o=we([e],t,r),r&&r.length&&y(r).remove(),y.merge([],o.childNodes)));var i,o,r},y.fn.load=function(e,t,n){var i,o,r,s=this,a=e.indexOf(" ");return a>-1&&(i=gt(e.slice(a)),e=e.slice(0,a)),p(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&y.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){r=arguments,s.html(i?y("<div>").append(y.parseHTML(e)).find(i):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,r||[e.responseText,t,e])}))}),this},y.expr.pseudos.animated=function(e){return y.grep(y.timers,(function(t){return e===t.elem})).length},y.offset={setOffset:function(e,t,n){var i,o,r,s,a,c,l=y.css(e,"position"),u=y(e),h={};"static"===l&&(e.style.position="relative"),a=u.offset(),r=y.css(e,"top"),c=y.css(e,"left"),("absolute"===l||"fixed"===l)&&(r+c).indexOf("auto")>-1?(s=(i=u.position()).top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(c)||0),p(t)&&(t=t.call(e,n,y.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+o),"using"in t?t.using.call(e,h):("number"==typeof h.top&&(h.top+="px"),"number"==typeof h.left&&(h.left+="px"),u.css(h))}},y.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){y.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],o={top:0,left:0};if("fixed"===y.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===y.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((o=y(e).offset()).top+=y.css(e,"borderTopWidth",!0),o.left+=y.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-y.css(i,"marginTop",!0),left:t.left-o.left-y.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===y.css(e,"position");)e=e.offsetParent;return e||ne}))}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;y.fn[e]=function(i){return Q(this,(function(e,i,o){var r;if(g(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o)return r?r[t]:e[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o}),e,i,arguments.length)}})),y.each(["top","left"],(function(e,t){y.cssHooks[t]=Ue(A.pixelPosition,(function(e,n){if(n)return n=ze(e,t),Ne.test(n)?y(e).position()[t]+"px":n}))})),y.each({Height:"height",Width:"width"},(function(e,t){y.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){y.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===r?"margin":"border");return Q(this,(function(t,n,o){var r;return g(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?y.css(t,n,a):y.style(t,n,o,a)}),t,s?o:void 0,s)}}))})),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){y.fn[t]=function(e){return this.on(t,e)}})),y.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){y.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Vt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;y.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),p(e))return i=o.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(o.call(arguments)))}).guid=e.guid=e.guid||y.guid++,r},y.holdReady=function(e){e?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=E,y.isFunction=p,y.isWindow=g,y.camelCase=G,y.type=w,y.now=Date.now,y.isNumeric=function(e){var t=y.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},y.trim=function(e){return null==e?"":(e+"").replace(Vt,"")},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return y}));var Yt=e.jQuery,Xt=e.$;return y.noConflict=function(t){return e.$===y&&(e.$=Xt),t&&e.jQuery===y&&(e.jQuery=Yt),y},void 0===t&&(e.jQuery=e.$=y),y}));const nr="v0.7.3";console.info("Calla",nr);class ir extends Event{constructor(e,t,n){super(e),this.id=t;for(let e in n)"isTrusted"===e||Object.prototype.hasOwnProperty.call(Event.prototype,e)||(this[e]=n[e])}}const or=["userMoved","userTurned","userPosed","emote","userInitRequest","userInitResponse","audioMuteStatusChanged","videoMuteStatusChanged","localAudioMuteStatusChanged","localVideoMuteStatusChanged","videoConferenceJoined","videoConferenceLeft","participantJoined","participantLeft","avatarChanged","displayNameChange","audioActivity","setAvatarEmoji","deviceListChanged","participantRoleChanged","audioAdded","videoAdded","audioRemoved","videoRemoved","audioChanged","videoChanged"],rr=new xn;function O(e,t){if("localhost"===window.location.hostname){const n=(...e)=>{"conference.endpoint_message_received"===t&&e.length>=2&&("e2e-ping-request"===e[1].type||"e2e-ping-response"===e[1].type||"stats"===e[1].type)||console.log(t,...e)};e.addEventListener(t,n)}}function R(e,t){for(let n of Object.values(t))-1===n.indexOf("audioLevelsChanged")&&O(e,n)}class sr extends Sn{constructor(e,t,n){super(),this.host=e,this.bridgeHost=t,this.bridgeMUC=n,this._prepTask=null,this.joined=!1,this.connection=null,this.conference=null,this.audio=new tr,this.audio.addEventListener("audioActivity",e=>{rr.id=e.id,rr.isActive=e.isActive,this.dispatchEvent(rr)}),this.hasAudioPermission=!1,this.hasVideoPermission=!1,this.localUserID=null,this.preferredAudioOutputID=null,this.preferredAudioInputID=null,this.preferredVideoInputID=null,this.addEventListener("participantJoined",e=>{this.userInitRequest(e.id)}),this.addEventListener("userInitRequest",e=>{const t=this.audio.getSource(this.localUserID),{p:n,f:i,u:o}=t.pose.end;this.userInitResponse(e.id,{id:this.localUserID,px:n.x,py:n.y,pz:n.z,fx:i.x,fy:i.y,fz:i.z,ux:o.x,uy:o.y,uz:o.z})}),this.addEventListener("userInitResponse",e=>{r(e.x)&&r(e.y)&&r(e.z)?this.audio.setUserPosition(e.id,e.x,e.y,e.z):r(e.fx)&&r(e.fy)&&r(e.fz)&&r(e.ux)&&r(e.uy)&&r(e.uz)&&(r(e.px)&&r(e.py)&&r(e.pz)?this.audio.setUserPose(e.id,e.px,e.py,e.pz,e.fx,e.fy,e.fz,e.ux,e.uy,e.uz):this.audio.setUserOrientation(e.id,e.fx,e.fy,e.fz,e.ux,e.uy,e.uz))}),this.addEventListener("userMoved",e=>{this.audio.setUserPosition(e.id,e.x,e.y,e.z)}),this.addEventListener("userTurned",e=>{this.audio.setUserOrientation(e.id,e.fx,e.fy,e.fz,e.ux,e.uy,e.uz)}),this.addEventListener("userPosed",e=>{this.audio.setUserPose(e.id,e.px,e.py,e.pz,e.fx,e.fy,e.fz,e.ux,e.uy,e.uz)}),this.addEventListener("participantLeft",e=>{this.removeUser(e.id)});const i=e=>{const t=Object.assign(new Event("audioChanged"),{id:e.id,stream:e.stream});this.dispatchEvent(t)},o=e=>{const t=Object.assign(new Event("videoChanged"),{id:e.id,stream:e.stream});this.dispatchEvent(t)};this.addEventListener("audioAdded",i),this.addEventListener("audioRemoved",i),this.addEventListener("videoAdded",o),this.addEventListener("videoRemoved",o),this.addEventListener("audioMuteStatusChanged",e=>{if(e.id===this.localUserID){const t=Object.assign(new Event("localAudioMuteStatusChanged"),{id:e.id,muted:e.muted});this.dispatchEvent(t)}}),this.addEventListener("videoMuteStatusChanged",e=>{if(e.id===this.localUserID){const t=Object.assign(new Event("localVideoMuteStatusChanged"),{id:e.id,muted:e.muted});this.dispatchEvent(t)}});const s=()=>this.dispose();window.addEventListener("beforeunload",s),window.addEventListener("unload",s),window.addEventListener("pagehide",s),Object.seal(this)}get appFingerPrint(){return"Calla"}userIDs(){return Object.keys(this.conference.participants)}userExists(e){return!!this.conference.participants[e]}users(){return Object.keys(this.conference.participants).map(e=>[e,this.conference.participants[e].getDisplayName()])}update(){this.audio.update()}_prepareAsync(){return this._prepTask||(console.info("Connecting to:",this.host),this._prepTask=import(`https://${this.host}/libs/lib-jitsi-meet.min.js`)),this._prepTask}async join(e,t){await this.leaveAsync(),await this._prepareAsync(),e=e.toLocaleLowerCase(),JitsiMeetJS.setLogLevel(JitsiMeetJS.logLevels.ERROR),JitsiMeetJS.init(),this.connection=new JitsiMeetJS.JitsiConnection(null,null,{hosts:{domain:this.bridgeHost,muc:this.bridgeMUC},serviceUrl:`https://${this.host}/http-bind`,enableLipSync:!0});const{CONNECTION_ESTABLISHED:n,CONNECTION_FAILED:i,CONNECTION_DISCONNECTED:o}=JitsiMeetJS.events.connection;R(this.connection,JitsiMeetJS.events.connection);const r=()=>{this.dispatchEvent(Object.assign(new Event("videoConferenceLeft"),{roomName:e})),this.localUserID=null,this.conference=null,this.joined=!1},s=e=>{console.error("Connection failed",e),this.dispose(),r(),a()},a=()=>{this.connection.removeEventListener(n,c),this.connection.removeEventListener(i,s),this.connection.removeEventListener(o,a),this.connection=null},c=n=>{this.conference=this.connection.initJitsiConference(e,{openBridgeChannel:!0});const{TRACK_ADDED:i,TRACK_REMOVED:o,CONFERENCE_JOINED:a,CONFERENCE_LEFT:c,USER_JOINED:l,USER_LEFT:u,DISPLAY_NAME_CHANGED:h,ENDPOINT_MESSAGE_RECEIVED:d,CONNECTION_INTERRUPTED:A}=JitsiMeetJS.events.conference;R(this.conference,JitsiMeetJS.events.conference),this.conference.addEventListener(a,async()=>{this.localUserID=this.conference.myUserId(),console.log("======== CONFERENCE_JOINED ::",this.localUserID);const n=this.audio.createSource(this.localUserID);n.spatializer=this.audio.listener,this.joined=!0,this.setDisplayName(t),this.dispatchEvent(Object.assign(new Event("videoConferenceJoined"),{id:this.localUserID,roomName:e,displayName:t,pose:n.pose})),await this.setPreferredDevicesAsync()}),this.conference.addEventListener(c,r);const p=(e,t)=>{const n=e.getParticipantId()||this.localUserID,i=e.getType()+"MuteStatusChanged",o=Object.assign(new Event(i),{id:n,muted:t});this.dispatchEvent(o)},g=e=>{p(e,e.isMuted())};this.conference.addEventListener(l,(e,t)=>{console.log("======== USER_JOINED ::",e);const n=this.audio.createSource(e),i=Object.assign(new Event("participantJoined"),{id:e,displayName:t.getDisplayName(),pose:n.pose});this.dispatchEvent(i)}),this.conference.addEventListener(u,e=>{const t=Object.assign(new Event("participantLeft"),{id:e});this.dispatchEvent(t)}),this.conference.addEventListener(h,(e,t)=>{const n=Object.assign(new Event("displayNameChange"),{id:e,displayName:t});this.dispatchEvent(n)}),this.conference.addEventListener(i,e=>{const t=e.getParticipantId()||this.localUserID,n=e.isLocal(),i=e.getType(),o=Object.assign(new Event(i+"Added"),{id:t,stream:e.stream}),r=this.audio.getSource(t);R(e,JitsiMeetJS.events.track),e.addEventListener(JitsiMeetJS.events.track.TRACK_MUTE_CHANGED,g),r.tracks.has(i)&&(r.tracks.get(i).dispose(),r.tracks.delete(i)),r.tracks.set(i,e),"audio"!==i||n||this.audio.setSourceStream(t,e.stream),this.dispatchEvent(o),p(e,!1)}),this.conference.addEventListener(o,e=>{const t=e.getParticipantId()||this.localUserID,n=e.isLocal(),i=e.getType(),o=Object.assign(new Event(i+"Removed"),{id:t,stream:null}),r=this.audio.getSource(t);r&&r.tracks.has(i)&&(r.tracks.get(i).dispose(),r.tracks.delete(i)),"audio"!==i||n||this.audio.setSourceStream(t,null),e.dispose(),p(e,!0),this.dispatchEvent(o)}),this.conference.addEventListener(d,(e,t)=>{this.rxGameData({user:e,data:t})}),this.conference.addEventListener(A,(...e)=>{console.log("CONNECTION_INTERRUPTED"),s(e)}),this.conference.join()};this.connection.addEventListener(n,c),this.connection.addEventListener(i,s),this.connection.addEventListener(o,a),R(JitsiMeetJS.mediaDevices,JitsiMeetJS.events.mediaDevices),this.connection.connect()}dispatchEvent(e){null!==e.id&&void 0!==e.id&&"local"!==e.id||(e.id=this.localUserID,console.warn("Jitsi didn't give use the local user id"),null===this.localUserID&&console.warn("BUT I DON'T KNOW THE LOCAL USER ID YET!")),super.dispatchEvent(e)}async setPreferredDevicesAsync(){await this.setPreferredAudioInputAsync(!0),await this.setPreferredVideoInputAsync(!1),await this.setPreferredAudioOutputAsync(!0)}async getPreferredAudioOutputAsync(e){return t(await this.getAudioOutputDevicesAsync(),e=>e.deviceId===this.preferredAudioOutputID,e=>"communications"===e.deviceId,e=>"default"===e.deviceId,t=>e&&t&&t.deviceId)}async setPreferredAudioOutputAsync(e){const t=await this.getPreferredAudioOutputAsync(e);t&&await this.setAudioOutputDeviceAsync(t)}async getPreferredAudioInputAsync(e){return t(await this.getAudioInputDevicesAsync(),e=>e.deviceId===this.preferredAudioInputID,e=>"communications"===e.deviceId,e=>"default"===e.deviceId,t=>e&&t&&t.deviceId)}async setPreferredAudioInputAsync(e){const t=await this.getPreferredAudioInputAsync(e);t&&await this.setAudioInputDeviceAsync(t)}async getPreferredVideoInputAsync(e){return t(await this.getVideoInputDevicesAsync(),e=>e.deviceId===this.preferredVideoInputID,t=>e&&t&&/front/i.test(t.label),t=>e&&t&&t.deviceId)}async setPreferredVideoInputAsync(e){const t=await this.getPreferredVideoInputAsync(e);t&&await this.setVideoInputDeviceAsync(t)}dispose(){if(this.localUserID){const e=this.audio.getSource(this.localUserID);if(e)for(let t of e.tracks.values())t.dispose()}}setDisplayName(e){this.conference.setDisplayName(e)}async leaveAsync(){if(this.conference){if(null!==this.localUserID){const e=this.audio.getSource(this.localUserID);if(e){if(e.tracks.has("video")){const t=L(this,"videoRemoved");this.conference.removeTrack(e.tracks.get("video")),await t}if(e.tracks.has("audio")){const t=L(this,"audioRemoved");this.conference.removeTrack(e.tracks.get("audio")),await t}}}await this.conference.leave(),await this.connection.disconnect()}}async _getDevicesAsync(){await this._prepareAsync();const e=await navigator.mediaDevices.enumerateDevices();for(let t of e)t.deviceId.length>0&&(this.hasAudioPermission|="audioinput"===t.kind&&t.label.length>0,this.hasVideoPermission|="videoinput"===t.kind&&t.label.length>0);return e}async getAvailableDevicesAsync(){let e=await this._getDevicesAsync();for(let t=0;t<3&&!this.hasAudioPermission;++t){e=null;try{await navigator.mediaDevices.getUserMedia({audio:!this.hasAudioPermission,video:!this.hasVideoPermission})}catch(e){console.warn(e)}e=await this._getDevicesAsync()}return{audioOutput:Tn?e.filter(e=>"audiooutput"===e.kind):[],audioInput:e.filter(e=>"audioinput"===e.kind),videoInput:e.filter(e=>"videoinput"===e.kind)}}async getAudioOutputDevicesAsync(){if(!Tn)return[];const e=await this.getAvailableDevicesAsync();return e&&e.audioOutput||[]}async getAudioInputDevicesAsync(){const e=await this.getAvailableDevicesAsync();return e&&e.audioInput||[]}async getVideoInputDevicesAsync(){const e=await this.getAvailableDevicesAsync();return e&&e.videoInput||[]}async setAudioOutputDeviceAsync(e){Tn&&(this.preferredAudioOutputID=e&&e.deviceId||null,await JitsiMeetJS.mediaDevices.setAudioOutputDevice(this.preferredAudioOutputID))}taskOf(e){return function(e,t,n,s){if(!o(t))throw new Error("Need an event name on which to resolve the operation.");if(!i(n))throw new Error("Filtering tests function is required. Otherwise, use `once`.");return new Promise((n,i)=>{const o=()=>{e.removeEventListener(t,n)};if(n=I(o,n),i=I(o,i),r(s)){const e=setTimeout(i,s,`'${t}' has timed out.`),o=()=>clearTimeout(e);n=I(o,n),i=I(o,i)}e.addEventListener(t,n)})}(this,e,e=>e.id===this.localUserID,5e3)}getCurrentMediaTrack(e){if(null===this.localUserID)return null;const t=this.audio.getSource(this.localUserID);return t&&t.tracks.has(e)?t.tracks.get(e):null}async setAudioInputDeviceAsync(e){this.preferredAudioInputID=e&&e.deviceId||null;const t=this.getCurrentMediaTrack("audio");if(t){const e=this.taskOf("audioRemoved");this.conference.removeTrack(t),await e}if(this.joined&&this.preferredAudioInputID){const e=this.taskOf("audioAdded"),t=await JitsiMeetJS.createLocalTracks({devices:["audio"],micDeviceId:this.preferredAudioInputID});for(let e of t)this.conference.addTrack(e);await e}}async setVideoInputDeviceAsync(e){this.preferredVideoInputID=e&&e.deviceId||null;const t=this.getCurrentMediaTrack("video");if(t){const e=this.taskOf("videoRemoved");this.conference.removeTrack(t),await e}if(this.joined&&this.preferredVideoInputID){const e=this.taskOf("videoAdded"),t=await JitsiMeetJS.createLocalTracks({devices:["video"],cameraDeviceId:this.preferredVideoInputID});for(let e of t)this.conference.addTrack(e);await e}}async getCurrentAudioInputDeviceAsync(){const e=this.getCurrentMediaTrack("audio"),t=(await this.getAudioInputDevicesAsync()).filter(t=>null!==e&&t.deviceId===e.deviceId);return 0===t.length?null:t[0]}async getCurrentAudioOutputDeviceAsync(){if(!Tn)return null;const e=JitsiMeetJS.mediaDevices.getAudioOutputDevice(),t=(await this.getAudioOutputDevicesAsync()).filter(t=>t.deviceId===e);return 0===t.length?null:t[0]}async getCurrentVideoInputDeviceAsync(){const e=this.getCurrentMediaTrack("video"),t=(await this.getVideoInputDevicesAsync()).filter(t=>null!==e&&t.deviceId===e.deviceId);return 0===t.length?null:t[0]}async toggleAudioMutedAsync(){const e=this.taskOf("audioMuteStatusChanged"),t=this.getCurrentMediaTrack("audio");if(t){t.isMuted()?await t.unmute():await t.mute()}else await this.setPreferredAudioInputAsync(!0);return(await e).muted}async toggleVideoMutedAsync(){const e=this.taskOf("videoMuteStatusChanged");this.getCurrentMediaTrack("video")?await this.setVideoInputDeviceAsync(null):await this.setPreferredVideoInputAsync(!0);return(await e).muted}isMediaMuted(e){const t=this.getCurrentMediaTrack(e);return null===t||t.isMuted()}get isAudioMuted(){return this.isMediaMuted("audio")}get isVideoMuted(){return this.isMediaMuted("video")}txGameData(e,t){this.conference.sendMessage(t,e)}rxGameData(e){e.data.hax===this.appFingerPrint&&this.receiveMessageFrom(e.user.getId(),e.data.command,e.data.value)}sendMessageTo(e,t,n){this.txGameData(e,{hax:this.appFingerPrint,command:t,value:n})}receiveMessageFrom(e,t,n){const i=new ir(t,e,n);this.dispatchEvent(i)}setAudioProperties(e,t,n,i){this.audio.setAudioProperties(e,t,n,i)}setLocalPosition(e,t,n){this.audio.setUserPosition(this.localUserID,e,t,n);for(let i of this.userIDs())this.sendMessageTo(i,"userMoved",{x:e,y:t,z:n})}setLocalOrientation(e,t,n,i,o,r){this.audio.setUserOrientation(this.localUserID,e,t,n,i,o,r);for(let e of this.userIDs())this.sendMessageTo(e,"userTurned",{x:x,y:y,z:z})}setLocalPose(e,t,n,i,o,r,s,a,c){this.audio.setUserPose(this.localUserID,e,t,n,i,o,r,s,a,c);for(let l of this.userIDs())this.sendMessageTo(l,"userPosed",{px:e,py:t,pz:n,fx:i,fy:o,fz:r,ux:s,uy:a,uz:c})}removeUser(e){this.audio.removeSource(e)}async setAudioMutedAsync(e){let t=this.isAudioMuted;return e!==t&&(t=await this.toggleAudioMutedAsync()),t}async setVideoMutedAsync(e){let t=this.isVideoMuted;return e!==t&&(t=await this.toggleVideoMutedAsync()),t}addEventListener(e,t,n){if(-1===or.indexOf(e))throw new Error("Unsupported event type: "+e);super.addEventListener(e,t,n)}userInitRequest(e){this.sendMessageTo(e,"userInitRequest")}async userInitRequestAsync(e){return await(t=this,n="userInitResponse",i=()=>this.userInitRequest(e),o=t=>t.id===e&&a(t.x)&&a(t.y)&&a(t.z),r=1e3,new Promise((e,a)=>{let c=null,l=null;const u=()=>{null!==c&&clearTimeout(c),null!==l&&clearTimeout(l),t.removeEventListener(n,h)};function h(t){o(t)&&(u(),e(t))}if(t.addEventListener(n,h),void 0!==r){void 0!==s&&(l=setTimeout(()=>{u(),a(`'${n}' has timed out.`)},s));const e=()=>{i(),c=setTimeout(e,r)};c=setTimeout(e,0)}}));var t,n,i,o,r,s}userInitResponse(e,t){this.sendMessageTo(e,"userInitResponse",t)}set avatarEmoji(e){for(let t of this.userIDs())this.sendMessageTo(t,"setAvatarEmoji",e)}set avatarURL(e){for(let t of this.userIDs())this.sendMessageTo(t,"avatarChanged",{url:e})}emote(e){for(let t of this.userIDs())this.sendMessageTo(t,"emote",e)}startAudio(){this.audio.start()}}const ar="tele.calla.chat",cr=ar,lr="conference."+ar;class ur{constructor(e,t,...n){this.key=e,this.value=t,this.tags=n.map(e=>e.toLocaleUpperCase()),Object.freeze(this)}apply(e){0===this.tags.length||this.tags.indexOf(e.tagName)>-1?"style"===this.key?Object.assign(e[this.key],this.value):s(ee)?this.value?e.setAttribute(this.key,""):e.removeAttribute(this.key):e[this.key]=this.value:console.warn(`Element ${e.tagName} does not support Attribute ${this.key}`)}}function N(e){return new ur("autoplay",e,"audio","video")}function H(e){return new ur("className",e)}function j(e){return new ur("disabled",e,"button","command","fieldset","input","keygen","optgroup","option","select","textarea")}function Q(e){return new ur("htmlFor",e,"label","output")}function U(e){return new ur("height",e,"canvas","embed","iframe","img","input","object","video")}function W(e){return new ur("href",e,"a","area","base","link")}function G(e){return new ur("id",e)}function q(e){return new ur("max",e,"input","meter","progress")}function V(e){return new ur("min",e,"input","meter")}function Y(e){return new ur("muted",e,"audio","video")}function X(e){return new ur("placeholder",e,"input","textarea")}function J(e){return new ur("playsInline",e,"audio","video")}function Z(e){return new ur("step",e,"input")}function K(e){return new ur("title",e)}function $(e){return new ur("type",e,"button","input","command","embed","object","script","source","style","menu")}function ee(e){return new ur("value",e,"button","data","input","li","meter","option","progress","param")}function te(e){return new ur("width",e,"canvas","embed","iframe","img","input","object","video")}function ne(e){return e.isOpen?e.isOpen():"none"!==e.style.display}function ie(e,t,n=""){e.setOpen?e.setOpen(t,n):t?se(e,n):ae(e)}function oe(e,t,n,i,o){o=o||"",e.accessKey&&(o+=` <kbd>(ALT+${e.accessKey.toUpperCase()})</kbd>`),e.updateLabel?e.updateLabel(t,n,i,o):e.innerHTML=(t?n:i)+o}function re(e,t=""){e.toggleOpen?e.toggleOpen(t):ne(e)?ae(e):se(e)}function se(e,t=""){e.show?e.show():e.style.display=t}function ae(e){e.hide?e.hide():e.style.display="none"}const hr=j(!0),dr=j(!1);function ce(e,t){e.setLocked?e.setLocked(t):t?hr.apply(e):dr.apply(e)}class Ar{constructor(e,t){this.value=e,this.desc=t}contains(e){return this.value.indexOf(e.value)>=0}}function le(e,t,n=null){return Object.assign(new Ar(e,t),n)}class pr extends Ar{constructor(e,t,...n){super(e,t),this.alts=n,this.width=null}random(){const e=function(e,t){if(!(e instanceof Array))throw new Error("Must provide an array as the first parameter.");const n=t?1:0,i=Math.floor(Math.random()*(e.length+n))-n;return i<0?t:e[i]}(this.alts);return e instanceof pr?e.random():e}contains(e){return super.contains(e)||this.alts.reduce((t,n)=>t||n.contains(e),!1)}}function ue(e,t,...n){return new pr(e,t,...n)}function he(e,t,n,...i){return Object.assign(ue(e,t,...Object.values(n).filter(e=>e instanceof Ar),...i),n)}const gr=le("","Variation Selector-15: text style"),fr=le("","Variation Selector-16: emoji style"),mr=le("","Zero Width Joiner"),vr=(le("","Combining Enclosing Circle Backslash"),le("","Combining Enclosing Keycap"),le("","Female")),wr=le("","Male"),yr=le("","Light Skin Tone"),br=le("","Medium-Light Skin Tone"),Cr=le("","Medium Skin Tone"),Dr=le("","Medium-Dark Skin Tone"),xr=le("","Dark Skin Tone"),Sr=le("","Red Hair"),Er=le("","Curly Hair"),Pr=le("","White Hair"),Br=le("","Bald");function de(e,t){if(e instanceof Array)return e.map(e=>de(e,t));if(e instanceof pr){const{value:n,desc:i}=de(le(e.value,e.desc),t);return ue(n,i,...de(e.alts,t))}return t instanceof Array?t.map(t=>de(e,t)):le(e.value+t.value,e.desc+": "+t.desc)}function Ae(e,t){if(e instanceof Array)return e.map(e=>Ae(e,t));if(e instanceof pr){const{value:n,desc:i}=Ae(le(e.value,e.desc),t);return ue(n,i,...Ae(e.alts,t))}return t instanceof Array?t.map(t=>Ae(e,t)):le(e.value+mr.value+t.value,e.desc+": "+t.desc)}function pe(e,t,...n){const i=le(e,t),o=de(i,yr),r=de(i,br),s=de(i,Cr),a=de(i,Dr),c=de(i,xr);return he(i.value,i.desc,{default:i,light:o,mediumLight:r,medium:s,mediumDark:a,dark:c},...n)}function ge(e){const t=Ae(e,wr),n=Ae(e,vr);return he(e.value,e.desc,{default:e,man:t,woman:n})}function fe(e,t){return ge(pe(e,t))}function me(e,t,...n){const i=pe(e,t),o=Ae(i,Sr),r=Ae(i,Er),s=Ae(i,Pr),a=Ae(i,Br);return he(i.value,i.desc,{default:i,red:o,curly:r,white:s,bald:a},...n)}function ve(e,t){const n=le(e.value,t),i=Ae(ps.default,n),o=Ae(ws.default,n);return he(e.value,e.desc,{symbol:e,men:i,women:o})}const _r=fe("","Frowning"),Mr=fe("","Pouting"),kr=fe("","Gesturing NO"),Tr=fe("","Gesturing OK"),Ir=fe("","Tipping Hand"),Fr=fe("","Raising Hand"),Lr=fe("","Bowing"),Or=fe("","Facepalming"),Rr=fe("","Shrugging"),Nr=fe("","Can't Hear"),Hr=fe("","Getting Massage"),jr=fe("","Getting Haircut"),Qr=fe("","Construction Worker"),zr=fe("","Guard"),Ur=fe("","Spy"),Wr=(fe("","Police"),fe("","Wearing Turban")),Gr=fe("","Superhero"),qr=fe("","Supervillain"),Vr=fe("","Mage"),Yr=fe("","Fairy"),Xr=fe("","Vampire"),Jr=fe("","Merperson"),Zr=fe("","Elf"),Kr=fe("","Walking"),$r=fe("","Standing"),es=fe("","Kneeling"),ts=fe("","Running"),ns=ue("Gestures","Gestures",_r,Mr,kr,Tr,Ir,Fr,Lr,Or,Rr,Nr,Hr,jr),is=pe("","Baby"),os=pe("","Child"),rs=pe("","Boy"),ss=pe("","Girl"),as=he(os.value,os.desc,{default:os,male:rs,female:ss}),cs=fe("","Blond Person"),ls=pe("","Person",cs.default,Wr.default),us=pe("","Bearded Man"),hs=le("","Man in Suit, Levitating"),ds=pe("","Man With Chinese Cap"),As=pe("","Man in Tuxedo"),ps=me("","Man",cs.man,us,hs,ds,Wr.man,As),gs=pe("","Pregnant Woman"),fs=pe("","Breast-Feeding"),ms=pe("","Woman With Headscarf"),vs=pe("","Bride With Veil"),ws=me("","Woman",cs.woman,gs,fs,ms,Wr.woman,vs),ys=he(ls.value,"Adult",{default:ls,male:ps,female:ws}),bs=pe("","Older Person"),Cs=pe("","Old Man"),Ds=pe("","Old Woman"),xs=he(bs.value,bs.desc,{default:bs,male:Cs,female:Ds}),Ss=le("","Medical"),Es=ve(Ss,"Health Care"),Ps=le("","Graduation Cap"),Bs=ve(Ps,"Student"),_s=le("","School"),Ms=ve(_s,"Teacher"),ks=le("","Balance Scale"),Ts=ve(ks,"Judge"),Is=le("","Sheaf of Rice"),Fs=ve(Is,"Farmer"),Ls=le("","Cooking"),Os=ve(Ls,"Cook"),Rs=le("","Wrench"),Ns=ve(Rs,"Mechanic"),Hs=le("","Factory"),js=ve(Hs,"Factory Worker"),Qs=le("","Briefcase"),zs=ve(Qs,"Office Worker"),Us=le("","Fire Engine"),Ws=ve(Us,"Fire Fighter"),Gs=le("","Rocket"),qs=ve(Gs,"Astronaut"),Vs=le("","Airplane"),Ys=ve(Vs,"Pilot"),Xs=le("","Artist Palette"),Js=ve(Xs,"Artist"),Zs=le("","Microphone"),Ks=ve(Zs,"Singer"),$s=le("","Laptop"),ea=ve($s,"Technologist"),ta=le("","Microscope"),na=ve(ta,"Scientist"),ia=le("","Crown"),oa=pe("","Prince"),ra=pe("","Princess"),sa=he(ia.value,ia.desc,{symbol:ia,male:oa,female:ra}),aa=he("Roles","Depictions of people working",{healthCareWorkers:Es,students:Bs,teachers:Ms,judges:Ts,farmers:Fs,cooks:Os,mechanics:Ns,factoryWorkers:js,officeWorkers:zs,scientists:na,technologists:ea,singers:Ks,artists:Js,pilots:Ys,astronauts:qs,fireFighters:Ws,spies:Ur,guards:zr,constructionWorkers:Qr,royalty:sa}),ca=pe("","Cherub"),la=pe("","Santa Claus"),ua=pe("","Mrs. Claus"),ha=ge(le("","Genie")),da=ge(le("","Zombie")),Aa=he("Fantasy","Depictions of fantasy characters",{cherub:ca,santaClaus:la,mrsClaus:ua,superheroes:Gr,supervillains:qr,mages:Vr,fairies:Yr,vampires:Xr,merpeople:Jr,elves:Zr,genies:ha,zombies:da}),pa=le("","Probing Cane"),ga=ve(pa,"Probing"),fa=le("","Motorized Wheelchair"),ma=ve(fa,"In Motorized Wheelchair"),va=le("","Manual Wheelchair"),wa=ve(va,"In Manual Wheelchair"),ya=pe("","Man Dancing"),ba=pe("","Woman Dancing"),Ca=he(ya.value,"Dancing",{male:ya,female:ba}),Da=fe("","Juggler"),xa=fe("","Climber"),Sa=le("","Fencer"),Ea=pe("","Jockey"),Pa=le("","Skier"),Ba=pe("","Snowboarder"),_a=fe("","Golfer"),Ma=fe("","Surfing"),ka=fe("","Rowing Boat"),Ta=fe("","Swimming"),Ia=fe("","Basket Baller"),Fa=fe("","Weight Lifter"),La=fe("","Biker"),Oa=fe("","Mountain Biker"),Ra=fe("","Cartwheeler"),Na=ge(le("","Wrestler")),Ha=fe("","Water Polo Player"),ja=fe("","Hand Baller"),Qa=he("In Motion","Depictions of people in motion",{walking:Kr,standing:$r,kneeling:es,withProbingCane:ga,inMotorizedWheelchair:ma,inManualWheelchair:wa,dancers:Ca,jugglers:Da,climbers:xa,fencer:Sa,jockeys:Ea,skier:Pa,snowboarders:Ba,golfers:_a,surfers:Ma,rowers:ka,swimmers:Ta,runners:ts,basketballers:Ia,weightLifters:Fa,bikers:La,mountainBikers:Oa,cartwheelers:Ra,wrestlers:Na,waterPoloers:Ha,handBallers:ja}),za=fe("","In Lotus Position"),Ua=pe("","In Bath"),Wa=pe("","In Bed"),Ga=fe("","In Sauna"),qa=he("Resting","Depictions of people at rest",{inLotusPosition:za,inBath:Ua,inBed:Wa,inSauna:Ga}),Va=ue(is.value,is.desc,is,ca),Ya=he("People","People",{babies:Va,children:as,adults:ys,elderly:xs}),Xa=he("All People","All People",{people:Ya,gestures:ns,inMotion:Qa,resting:qa,roles:aa,fantasy:Aa}),Ja=le("","Ogre"),Za=le("","Goblin"),Ka=le("","Ghost"),$a=le("","Alien"),ec=le("","Alien Monster"),tc=le("","Angry Face with Horns"),nc=le("","Skull"),ic=le("","Pile of Poo"),oc=le("","Grinning Face"),rc=le("","Beaming Face with Smiling Eyes"),sc=le("","Face with Tears of Joy"),ac=le("","Grinning Face with Big Eyes"),cc=le("","Grinning Face with Smiling Eyes"),lc=le("","Grinning Face with Sweat"),uc=le("","Grinning Squinting Face"),hc=le("","Smiling Face with Halo"),dc=le("","Smiling Face with Horns"),Ac=le("","Winking Face"),pc=le("","Smiling Face with Smiling Eyes"),gc=le("","Face Savoring Food"),fc=le("","Relieved Face"),mc=le("","Smiling Face with Heart-Eyes"),vc=le("","Smiling Face with Sunglasses"),wc=le("","Smirking Face"),yc=le("","Neutral Face"),bc=le("","Expressionless Face"),Cc=le("","Unamused Face"),Dc=le("","Downcast Face with Sweat"),xc=le("","Pensive Face"),Sc=le("","Confused Face"),Ec=le("","Confounded Face"),Pc=le("","Kissing Face"),Bc=le("","Face Blowing a Kiss"),_c=le("","Kissing Face with Smiling Eyes"),Mc=le("","Kissing Face with Closed Eyes"),kc=le("","Face with Tongue"),Tc=le("","Winking Face with Tongue"),Ic=le("","Squinting Face with Tongue"),Fc=le("","Disappointed Face"),Lc=le("","Worried Face"),Oc=le("","Angry Face"),Rc=le("","Pouting Face"),Nc=le("","Crying Face"),Hc=le("","Persevering Face"),jc=le("","Face with Steam From Nose"),Qc=le("","Sad but Relieved Face"),zc=le("","Frowning Face with Open Mouth"),Uc=le("","Anguished Face"),Wc=le("","Fearful Face"),Gc=le("","Weary Face"),qc=le("","Sleepy Face"),Vc=le("","Tired Face"),Yc=le("","Grimacing Face"),Xc=le("","Loudly Crying Face"),Jc=le("","Face with Open Mouth"),Zc=le("","Hushed Face"),Kc=le("","Anxious Face with Sweat"),$c=le("","Face Screaming in Fear"),el=le("","Astonished Face"),tl=le("","Flushed Face"),nl=le("","Sleeping Face"),il=le("","Dizzy Face"),ol=le("","Face Without Mouth"),rl=le("","Face with Medical Mask"),sl=le("","Grinning Cat with Smiling Eyes"),al=le("","Cat with Tears of Joy"),cl=le("","Grinning Cat"),ll=le("","Smiling Cat with Heart-Eyes"),ul=le("","Cat with Wry Smile"),hl=le("","Kissing Cat"),dl=le("","Pouting Cat"),Al=le("","Crying Cat"),pl=le("","Weary Cat"),gl=le("","Slightly Frowning Face"),fl=le("","Slightly Smiling Face"),ml=le("","Upside-Down Face"),vl=le("","Face with Rolling Eyes"),wl=le("","See-No-Evil Monkey"),yl=le("","Hear-No-Evil Monkey"),bl=le("","Speak-No-Evil Monkey"),Cl=le("","Zipper-Mouth Face"),Dl=le("","Money-Mouth Face"),xl=le("","Face with Thermometer"),Sl=le("","Nerd Face"),El=le("","Thinking Face"),Pl=le("","Face with Head-Bandage"),Bl=le("","Robot"),_l=le("","Hugging Face"),Ml=le("","Cowboy Hat Face"),kl=le("","Clown Face"),Tl=le("","Nauseated Face"),Il=le("","Rolling on the Floor Laughing"),Fl=le("","Drooling Face"),Ll=le("","Lying Face"),Ol=le("","Sneezing Face"),Rl=le("","Face with Raised Eyebrow"),Nl=le("","Star-Struck"),Hl=le("","Zany Face"),jl=le("","Shushing Face"),Ql=le("","Face with Symbols on Mouth"),zl=le("","Face with Hand Over Mouth"),Ul=le("","Face Vomiting"),Wl=le("","Exploding Head"),Gl=le("","Smiling Face with Hearts"),ql=le("","Yawning Face"),Vl=le("","Smiling Face with Tear"),Yl=le("","Partying Face"),Xl=le("","Woozy Face"),Jl=le("","Hot Face"),Zl=le("","Cold Face"),Kl=le("","Disguised Face"),$l=le("","Pleading Face"),eu=le("","Face with Monocle"),tu=le("","Skull and Crossbones"),nu=le("","Frowning Face"),iu=le("","Smiling Face"),ou=le("","Speaking Head"),ru=le("","Bust in Silhouette"),su=he("Faces","Round emoji faces",{ogre:Ja,goblin:Za,ghost:Ka,alien:$a,alienMonster:ec,angryFaceWithHorns:tc,skull:nc,pileOfPoo:ic,grinningFace:oc,beamingFaceWithSmilingEyes:rc,faceWithTearsOfJoy:sc,grinningFaceWithBigEyes:ac,grinningFaceWithSmilingEyes:cc,grinningFaceWithSweat:lc,grinningSquitingFace:uc,smillingFaceWithHalo:hc,smilingFaceWithHorns:dc,winkingFace:Ac,smilingFaceWithSmilingEyes:pc,faceSavoringFood:gc,relievedFace:fc,smilingFaceWithHeartEyes:mc,smilingFaceWithSunglasses:vc,smirkingFace:wc,neutralFace:yc,expressionlessFace:bc,unamusedFace:Cc,downcastFaceWithSweat:Dc,pensiveFace:xc,confusedFace:Sc,confoundedFace:Ec,kissingFace:Pc,faceBlowingAKiss:Bc,kissingFaceWithSmilingEyes:_c,kissingFaceWithClosedEyes:Mc,faceWithTongue:kc,winkingFaceWithTongue:Tc,squintingFaceWithTongue:Ic,disappointedFace:Fc,worriedFace:Lc,angryFace:Oc,poutingFace:Rc,cryingFace:Nc,perseveringFace:Hc,faceWithSteamFromNose:jc,sadButRelievedFace:Qc,frowningFaceWithOpenMouth:zc,anguishedFace:Uc,fearfulFace:Wc,wearyFace:Gc,sleepyFace:qc,tiredFace:Vc,grimacingFace:Yc,loudlyCryingFace:Xc,faceWithOpenMouth:Jc,hushedFace:Zc,anxiousFaceWithSweat:Kc,faceScreamingInFear:$c,astonishedFace:el,flushedFace:tl,sleepingFace:nl,dizzyFace:il,faceWithoutMouth:ol,faceWithMedicalMask:rl,grinningCatWithSmilingEyes:sl,catWithTearsOfJoy:al,grinningCat:cl,smilingCatWithHeartEyes:ll,catWithWrySmile:ul,kissingCat:hl,poutingCat:dl,cryingCat:Al,wearyCat:pl,slightlyFrowningFace:gl,slightlySmilingFace:fl,updisdeDownFace:ml,faceWithRollingEyes:vl,seeNoEvilMonkey:wl,hearNoEvilMonkey:yl,speakNoEvilMonkey:bl,zipperMouthFace:Cl,moneyMouthFace:Dl,faceWithThermometer:xl,nerdFace:Sl,thinkingFace:El,faceWithHeadBandage:Pl,robot:Bl,huggingFace:_l,cowboyHatFace:Ml,clownFace:kl,nauseatedFace:Tl,rollingOnTheFloorLaughing:Il,droolingFace:Fl,lyingFace:Ll,sneezingFace:Ol,faceWithRaisedEyebrow:Rl,starStruck:Nl,zanyFace:Hl,shushingFace:jl,faceWithSymbolsOnMouth:Ql,faceWithHandOverMouth:zl,faceVomitting:Ul,explodingHead:Wl,smilingFaceWithHearts:Gl,yawningFace:ql,smilingFaceWithTear:Vl,partyingFace:Yl,woozyFace:Xl,hotFace:Jl,coldFace:Zl,disguisedFace:Kl,pleadingFace:$l,faceWithMonocle:eu,skullAndCrossbones:tu,frowningFace:nu,fmilingFace:iu,speakingHead:ou,bust:ru}),au=le("","Kiss Mark"),cu=le("","Love Letter"),lu=le("","Beating Heart"),uu=le("","Broken Heart"),hu=le("","Two Hearts"),du=le("","Sparkling Heart"),Au=le("","Growing Heart"),pu=le("","Heart with Arrow"),gu=le("","Blue Heart"),fu=le("","Green Heart"),mu=le("","Yellow Heart"),vu=le("","Purple Heart"),wu=le("","Heart with Ribbon"),yu=le("","Revolving Hearts"),bu=le("","Heart Decoration"),Cu=le("","Black Heart"),Du=le("","White Heart"),xu=le("","Brown Heart"),Su=le("","Orange Heart"),Eu=le("","Heart Exclamation"),Pu=le("","Red Heart"),Bu=he("Love","Hearts and kisses",{kissMark:au,loveLetter:cu,beatingHeart:lu,brokenHeart:uu,twoHearts:hu,sparklingHeart:du,growingHeart:Au,heartWithArrow:pu,blueHeart:gu,greenHeart:fu,yellowHeart:mu,purpleHeart:vu,heartWithRibbon:wu,revolvingHearts:yu,heartDecoration:bu,blackHeart:Cu,whiteHeart:Du,brownHeart:xu,orangeHeart:Su,heartExclamation:Eu,redHeart:Pu}),_u=ue("Cartoon","Cartoon symbols",le("","Anger Symbol"),le("","Bomb"),le("","Zzz"),le("","Collision"),le("","Sweat Droplets"),le("","Dashing Away"),le("","Dizzy"),le("","Speech Balloon"),le("","Thought Balloon"),le("","Hundred Points"),le("","Hole"),le("","Left Speech Bubble"),le("","Right Anger Bubble")),Mu=ue("Hands","Hands pointing at things",le("","Backhand Index Pointing Up"),le("","Backhand Index Pointing Down"),le("","Backhand Index Pointing Left"),le("","Backhand Index Pointing Right"),le("","Oncoming Fist"),le("","Waving Hand"),le("","OK Hand"),le("","Thumbs Up"),le("","Thumbs Down"),le("","Clapping Hands"),le("","Open Hands"),le("","Nail Polish"),le("","Hand with Fingers Splayed"),le("","Middle Finger"),le("","Vulcan Salute"),le("","Raising Hands"),le("","Folded Hands"),le("","Pinched Fingers"),le("","Pinching Hand"),le("","Sign of the Horns"),le("","Call Me Hand"),le("","Raised Back of Hand"),le("","Left-Facing Fist"),le("","Right-Facing Fist"),le("","Handshake"),le("","Crossed Fingers"),le("","Love-You Gesture"),le("","Palms Up Together"),le("","Index Pointing Up"),le("","Raised Fist"),le("","Raised Hand"),le("","Victory Hand"),le("","Writing Hand")),ku=ue("Body Parts","General body parts",le("","Eyes"),le("","Eye"),le("","Eye in Speech Bubble"),le("","Ear"),le("","Nose"),le("","Mouth"),le("","Tongue"),le("","Flexed Biceps"),le("","Selfie"),le("","Bone"),le("","Leg"),le("","Foot"),le("","Tooth"),le("","Ear with Hearing Aid"),le("","Mechanical Arm"),le("","Mechanical Leg"),le("","Brain"),le("","Anatomical Heart"),le("","Lungs")),Tu=ue("Animals","Animals and insects",le("","Rat"),le("","Mouse"),le("","Ox"),le("","Water Buffalo"),le("","Cow"),le("","Tiger"),le("","Leopard"),le("","Rabbit"),le("","Cat"),le("","Black Cat"),le("","Dragon"),le("","Crocodile"),le("","Whale"),le("","Snail"),le("","Snake"),le("","Horse"),le("","Ram"),le("","Goat"),le("","Ewe"),le("","Monkey"),le("","Rooster"),le("","Chicken"),le("","Dog"),le("","Service Dog"),le("","Pig"),le("","Boar"),le("","Elephant"),le("","Octopus"),le("","Spiral Shell"),le("","Bug"),le("","Ant"),le("","Honeybee"),le("","Lady Beetle"),le("","Fish"),le("","Tropical Fish"),le("","Blowfish"),le("","Turtle"),le("","Hatching Chick"),le("","Baby Chick"),le("","Front-Facing Baby Chick"),le("","Bird"),le("","Penguin"),le("","Koala"),le("","Poodle"),le("","Camel"),le("","Two-Hump Camel"),le("","Dolphin"),le("","Mouse Face"),le("","Cow Face"),le("","Tiger Face"),le("","Rabbit Face"),le("","Cat Face"),le("","Dragon Face"),le("","Spouting Whale"),le("","Horse Face"),le("","Monkey Face"),le("","Dog Face"),le("","Pig Face"),le("","Frog"),le("","Hamster"),le("","Wolf"),le("","Bear"),le("","Polar Bear"),le("","Panda"),le("","Pig Nose"),le("","Paw Prints"),le("","Chipmunk"),le("","Dove"),le("","Spider"),le("","Spider Web"),le("","Lion"),le("","Scorpion"),le("","Turkey"),le("","Unicorn"),le("","Eagle"),le("","Duck"),le("","Bat"),le("","Shark"),le("","Owl"),le("","Fox"),le("","Butterfly"),le("","Deer"),le("","Gorilla"),le("","Lizard"),le("","Rhinoceros"),le("","Giraffe"),le("","Zebra"),le("","Hedgehog"),le("","Sauropod"),le("","T-Rex"),le("","Cricket"),le("","Kangaroo"),le("","Llama"),le("","Peacock"),le("","Hippopotamus"),le("","Parrot"),le("","Raccoon"),le("","Mosquito"),le("","Microbe"),le("","Badger"),le("","Swan"),le("","Mammoth"),le("","Dodo"),le("","Sloth"),le("","Otter"),le("","Orangutan"),le("","Skunk"),le("","Flamingo"),le("","Beaver"),le("","Bison"),le("","Seal"),le("","Guide Dog"),le("","Fly"),le("","Worm"),le("","Beetle"),le("","Cockroach"),le("","Feather")),Iu=le("","White Flower"),Fu=ue("Plants","Flowers, trees, and things",le("","Seedling"),le("","Evergreen Tree"),le("","Deciduous Tree"),le("","Palm Tree"),le("","Cactus"),le("","Tulip"),le("","Cherry Blossom"),le("","Rose"),le("","Hibiscus"),le("","Sunflower"),le("","Blossom"),Is,le("","Herb"),le("","Four Leaf Clover"),le("","Maple Leaf"),le("","Fallen Leaf"),le("","Leaf Fluttering in Wind"),le("","Rosette"),le("","Bouquet"),Iu,le("","Wilted Flower"),le("","Potted Plant"),le("","Shamrock")),Lu=le("","Banana"),Ou=ue("Food","Food, drink, and utensils",le("","Hot Dog"),le("","Taco"),le("","Burrito"),le("","Chestnut"),le("","Hot Pepper"),le("","Ear of Corn"),le("","Mushroom"),le("","Tomato"),le("","Eggplant"),le("","Grapes"),le("","Melon"),le("","Watermelon"),le("","Tangerine"),le("","Lemon"),Lu,le("","Pineapple"),le("","Red Apple"),le("","Green Apple"),le("","Pear"),le("","Peach"),le("","Cherries"),le("","Strawberry"),le("","Hamburger"),le("","Pizza"),le("","Meat on Bone"),le("","Poultry Leg"),le("","Rice Cracker"),le("","Rice Ball"),le("","Cooked Rice"),le("","Curry Rice"),le("","Steaming Bowl"),le("","Spaghetti"),le("","Bread"),le("","French Fries"),le("","Roasted Sweet Potato"),le("","Dango"),le("","Oden"),le("","Sushi"),le("","Fried Shrimp"),le("","Fish Cake with Swirl"),le("","Bento Box"),le("","Pot of Food"),Ls,le("","Popcorn"),le("","Croissant"),le("","Avocado"),le("","Cucumber"),le("","Bacon"),le("","Potato"),le("","Carrot"),le("","Baguette Bread"),le("","Green Salad"),le("","Shallow Pan of Food"),le("","Stuffed Flatbread"),le("","Egg"),le("","Peanuts"),le("","Kiwi Fruit"),le("","Pancakes"),le("","Dumpling"),le("","Fortune Cookie"),le("","Takeout Box"),le("","Bowl with Spoon"),le("","Coconut"),le("","Broccoli"),le("","Pretzel"),le("","Cut of Meat"),le("","Sandwich"),le("","Canned Food"),le("","Leafy Green"),le("","Mango"),le("","Moon Cake"),le("","Bagel"),le("","Crab"),le("","Shrimp"),le("","Squid"),le("","Lobster"),le("","Oyster"),le("","Cheese Wedge"),le("","Salt"),le("","Garlic"),le("","Onion"),le("","Falafel"),le("","Waffle"),le("","Butter"),le("","Blueberries"),le("","Bell Pepper"),le("","Olive"),le("","Flatbread"),le("","Tamale"),le("","Fondue"),le("","Soft Ice Cream"),le("","Shaved Ice"),le("","Ice Cream"),le("","Doughnut"),le("","Cookie"),le("","Chocolate Bar"),le("","Candy"),le("","Lollipop"),le("","Custard"),le("","Honey Pot"),le("","Shortcake"),le("","Birthday Cake"),le("","Pie"),le("","Cupcake"),le("","Teacup Without Handle"),le("","Sake"),le("","Wine Glass"),le("","Cocktail Glass"),le("","Tropical Drink"),le("","Beer Mug"),le("","Clinking Beer Mugs"),le("","Baby Bottle"),le("","Bottle with Popping Cork"),le("","Clinking Glasses"),le("","Tumbler Glass"),le("","Glass of Milk"),le("","Cup with Straw"),le("","Beverage Box"),le("","Mate"),le("","Ice"),le("","Bubble Tea"),le("","Teapot"),le("","Hot Beverage"),le("","Fork and Knife"),le("","Fork and Knife with Plate"),le("","Amphora"),le("","Kitchen Knife"),le("","Spoon"),le("","Chopsticks")),Ru=(ue("National Flags","Flags of countries from around the world",le("","Flag: Ascension Island"),le("","Flag: Andorra"),le("","Flag: United Arab Emirates"),le("","Flag: Afghanistan"),le("","Flag: Antigua & Barbuda"),le("","Flag: Anguilla"),le("","Flag: Albania"),le("","Flag: Armenia"),le("","Flag: Angola"),le("","Flag: Antarctica"),le("","Flag: Argentina"),le("","Flag: American Samoa"),le("","Flag: Austria"),le("","Flag: Australia"),le("","Flag: Aruba"),le("","Flag: land Islands"),le("","Flag: Azerbaijan"),le("","Flag: Bosnia & Herzegovina"),le("","Flag: Barbados"),le("","Flag: Bangladesh"),le("","Flag: Belgium"),le("","Flag: Burkina Faso"),le("","Flag: Bulgaria"),le("","Flag: Bahrain"),le("","Flag: Burundi"),le("","Flag: Benin"),le("","Flag: St. Barthlemy"),le("","Flag: Bermuda"),le("","Flag: Brunei"),le("","Flag: Bolivia"),le("","Flag: Caribbean Netherlands"),le("","Flag: Brazil"),le("","Flag: Bahamas"),le("","Flag: Bhutan"),le("","Flag: Bouvet Island"),le("","Flag: Botswana"),le("","Flag: Belarus"),le("","Flag: Belize"),le("","Flag: Canada"),le("","Flag: Cocos (Keeling) Islands"),le("","Flag: Congo - Kinshasa"),le("","Flag: Central African Republic"),le("","Flag: Congo - Brazzaville"),le("","Flag: Switzerland"),le("","Flag: Cte dIvoire"),le("","Flag: Cook Islands"),le("","Flag: Chile"),le("","Flag: Cameroon"),le("","Flag: China"),le("","Flag: Colombia"),le("","Flag: Clipperton Island"),le("","Flag: Costa Rica"),le("","Flag: Cuba"),le("","Flag: Cape Verde"),le("","Flag: Curaao"),le("","Flag: Christmas Island"),le("","Flag: Cyprus"),le("","Flag: Czechia"),le("","Flag: Germany"),le("","Flag: Diego Garcia"),le("","Flag: Djibouti"),le("","Flag: Denmark"),le("","Flag: Dominica"),le("","Flag: Dominican Republic"),le("","Flag: Algeria"),le("","Flag: Ceuta & Melilla"),le("","Flag: Ecuador"),le("","Flag: Estonia"),le("","Flag: Egypt"),le("","Flag: Western Sahara"),le("","Flag: Eritrea"),le("","Flag: Spain"),le("","Flag: Ethiopia"),le("","Flag: European Union"),le("","Flag: Finland"),le("","Flag: Fiji"),le("","Flag: Falkland Islands"),le("","Flag: Micronesia"),le("","Flag: Faroe Islands"),le("","Flag: France"),le("","Flag: Gabon"),le("","Flag: United Kingdom"),le("","Flag: Grenada"),le("","Flag: Georgia"),le("","Flag: French Guiana"),le("","Flag: Guernsey"),le("","Flag: Ghana"),le("","Flag: Gibraltar"),le("","Flag: Greenland"),le("","Flag: Gambia"),le("","Flag: Guinea"),le("","Flag: Guadeloupe"),le("","Flag: Equatorial Guinea"),le("","Flag: Greece"),le("","Flag: South Georgia & South Sandwich Islands"),le("","Flag: Guatemala"),le("","Flag: Guam"),le("","Flag: Guinea-Bissau"),le("","Flag: Guyana"),le("","Flag: Hong Kong SAR China"),le("","Flag: Heard & McDonald Islands"),le("","Flag: Honduras"),le("","Flag: Croatia"),le("","Flag: Haiti"),le("","Flag: Hungary"),le("","Flag: Canary Islands"),le("","Flag: Indonesia"),le("","Flag: Ireland"),le("","Flag: Israel"),le("","Flag: Isle of Man"),le("","Flag: India"),le("","Flag: British Indian Ocean Territory"),le("","Flag: Iraq"),le("","Flag: Iran"),le("","Flag: Iceland"),le("","Flag: Italy"),le("","Flag: Jersey"),le("","Flag: Jamaica"),le("","Flag: Jordan"),le("","Flag: Japan"),le("","Flag: Kenya"),le("","Flag: Kyrgyzstan"),le("","Flag: Cambodia"),le("","Flag: Kiribati"),le("","Flag: Comoros"),le("","Flag: St. Kitts & Nevis"),le("","Flag: North Korea"),le("","Flag: South Korea"),le("","Flag: Kuwait"),le("","Flag: Cayman Islands"),le("","Flag: Kazakhstan"),le("","Flag: Laos"),le("","Flag: Lebanon"),le("","Flag: St. Lucia"),le("","Flag: Liechtenstein"),le("","Flag: Sri Lanka"),le("","Flag: Liberia"),le("","Flag: Lesotho"),le("","Flag: Lithuania"),le("","Flag: Luxembourg"),le("","Flag: Latvia"),le("","Flag: Libya"),le("","Flag: Morocco"),le("","Flag: Monaco"),le("","Flag: Moldova"),le("","Flag: Montenegro"),le("","Flag: St. Martin"),le("","Flag: Madagascar"),le("","Flag: Marshall Islands"),le("","Flag: North Macedonia"),le("","Flag: Mali"),le("","Flag: Myanmar (Burma)"),le("","Flag: Mongolia"),le("","Flag: Macao Sar China"),le("","Flag: Northern Mariana Islands"),le("","Flag: Martinique"),le("","Flag: Mauritania"),le("","Flag: Montserrat"),le("","Flag: Malta"),le("","Flag: Mauritius"),le("","Flag: Maldives"),le("","Flag: Malawi"),le("","Flag: Mexico"),le("","Flag: Malaysia"),le("","Flag: Mozambique"),le("","Flag: Namibia"),le("","Flag: New Caledonia"),le("","Flag: Niger"),le("","Flag: Norfolk Island"),le("","Flag: Nigeria"),le("","Flag: Nicaragua"),le("","Flag: Netherlands"),le("","Flag: Norway"),le("","Flag: Nepal"),le("","Flag: Nauru"),le("","Flag: Niue"),le("","Flag: New Zealand"),le("","Flag: Oman"),le("","Flag: Panama"),le("","Flag: Peru"),le("","Flag: French Polynesia"),le("","Flag: Papua New Guinea"),le("","Flag: Philippines"),le("","Flag: Pakistan"),le("","Flag: Poland"),le("","Flag: St. Pierre & Miquelon"),le("","Flag: Pitcairn Islands"),le("","Flag: Puerto Rico"),le("","Flag: Palestinian Territories"),le("","Flag: Portugal"),le("","Flag: Palau"),le("","Flag: Paraguay"),le("","Flag: Qatar"),le("","Flag: Runion"),le("","Flag: Romania"),le("","Flag: Serbia"),le("","Flag: Russia"),le("","Flag: Rwanda"),le("","Flag: Saudi Arabia"),le("","Flag: Solomon Islands"),le("","Flag: Seychelles"),le("","Flag: Sudan"),le("","Flag: Sweden"),le("","Flag: Singapore"),le("","Flag: St. Helena"),le("","Flag: Slovenia"),le("","Flag: Svalbard & Jan Mayen"),le("","Flag: Slovakia"),le("","Flag: Sierra Leone"),le("","Flag: San Marino"),le("","Flag: Senegal"),le("","Flag: Somalia"),le("","Flag: Suriname"),le("","Flag: South Sudan"),le("","Flag: So Tom & Prncipe"),le("","Flag: El Salvador"),le("","Flag: Sint Maarten"),le("","Flag: Syria"),le("","Flag: Eswatini"),le("","Flag: Tristan Da Cunha"),le("","Flag: Turks & Caicos Islands"),le("","Flag: Chad"),le("","Flag: French Southern Territories"),le("","Flag: Togo"),le("","Flag: Thailand"),le("","Flag: Tajikistan"),le("","Flag: Tokelau"),le("","Flag: Timor-Leste"),le("","Flag: Turkmenistan"),le("","Flag: Tunisia"),le("","Flag: Tonga"),le("","Flag: Turkey"),le("","Flag: Trinidad & Tobago"),le("","Flag: Tuvalu"),le("","Flag: Taiwan"),le("","Flag: Tanzania"),le("","Flag: Ukraine"),le("","Flag: Uganda"),le("","Flag: U.S. Outlying Islands"),le("","Flag: United Nations"),le("","Flag: United States"),le("","Flag: Uruguay"),le("","Flag: Uzbekistan"),le("","Flag: Vatican City"),le("","Flag: St. Vincent & Grenadines"),le("","Flag: Venezuela"),le("","Flag: British Virgin Islands"),le("","Flag: U.S. Virgin Islands"),le("","Flag: Vietnam"),le("","Flag: Vanuatu"),le("","Flag: Wallis & Futuna"),le("","Flag: Samoa"),le("","Flag: Kosovo"),le("","Flag: Yemen"),le("","Flag: Mayotte"),le("","Flag: South Africa"),le("","Flag: Zambia"),le("","Flag: Zimbabwe")),ue("Flags","Basic flags",le("","Crossed Flags"),le("","Chequered Flag"),le("","White Flag"),le("","Rainbow Flag"),le("","Transgender Flag"),le("","Black Flag"),le("","Pirate Flag"),le("","Flag: England"),le("","Flag: Scotland"),le("","Flag: Wales"),le("","Triangular Flag"))),Nu=le("","Motorcycle"),Hu=le("","Racing Car"),ju=le("","Seat"),Qu=le("","Helicopter"),zu=le("","Locomotive"),Uu=le("","Railway Car"),Wu=le("","High-Speed Train"),Gu=le("","Bullet Train"),qu=le("","Train"),Vu=le("","Metro"),Yu=le("","Light Rail"),Xu=le("","Station"),Ju=le("","Tram"),Zu=le("","Tram Car"),Ku=le("","Bus"),$u=le("","Oncoming Bus"),eh=le("","Trolleybus"),th=le("","Bus Stop"),nh=le("","Minibus"),ih=le("","Ambulance"),oh=(le("","Police Car"),le("","Oncoming Police Car"),le("","Taxi")),rh=le("","Oncoming Taxi"),sh=le("","Automobile"),ah=le("","Oncoming Automobile"),ch=le("","Sport Utility Vehicle"),lh=le("","Delivery Truck"),uh=le("","Articulated Lorry"),hh=le("","Tractor"),dh=le("","Monorail"),Ah=le("","Mountain Railway"),ph=le("","Suspension Railway"),gh=le("","Mountain Cableway"),fh=le("","Aerial Tramway"),mh=le("","Ship"),vh=le("","Speedboat"),wh=le("","Horizontal Traffic Light"),yh=le("","Vertical Traffic Light"),bh=le("","Construction"),Ch=(le("","Police Car Light"),le("","Bicycle")),Dh=le("","Stop Sign"),xh=le("","Oil Drum"),Sh=le("","Motorway"),Eh=le("","Railway Track"),Ph=le("","Motor Boat"),Bh=le("","Small Airplane"),_h=le("","Airplane Departure"),Mh=le("","Airplane Arrival"),kh=le("","Satellite"),Th=le("","Passenger Ship"),Ih=le("","Kick Scooter"),Fh=le("","Motor Scooter"),Lh=le("","Canoe"),Oh=le("","Flying Saucer"),Rh=le("","Skateboard"),Nh=le("","Auto Rickshaw"),Hh=le("","Pickup Truck"),jh=le("","Roller Skate"),Qh=le("","Parachute"),zh=le("","Anchor"),Uh=le("","Ferry"),Wh=le("","Sailboat"),Gh=le("","Fuel Pump"),qh=ue("Vehicles","Things that go",Nu,Hu,ju,Gs,Qu,zu,Uu,Wu,Gu,qu,Vu,Yu,Xu,Ju,Zu,Ku,$u,eh,th,nh,ih,Us,oh,rh,sh,ah,ch,lh,uh,hh,dh,Ah,ph,gh,fh,mh,vh,wh,yh,bh,Ch,Dh,xh,Sh,Eh,Ph,Bh,_h,Mh,kh,Th,Ih,Fh,Lh,Oh,Rh,Nh,Hh,jh,fa,va,Qh,zh,Uh,Wh,Gh,Vs),Vh=(ue("Blood Types","Blood types",le("","A Button (Blood Type)"),le("","B Button (Blood Type)"),le("","O Button (Blood Type)"),le("","AB Button (Blood Type)")),ue("Regions","Region indicators",le("","Regional Indicator Symbol Letter A"),le("","Regional Indicator Symbol Letter B"),le("","Regional Indicator Symbol Letter C"),le("","Regional Indicator Symbol Letter D"),le("","Regional Indicator Symbol Letter E"),le("","Regional Indicator Symbol Letter F"),le("","Regional Indicator Symbol Letter G"),le("","Regional Indicator Symbol Letter H"),le("","Regional Indicator Symbol Letter I"),le("","Regional Indicator Symbol Letter J"),le("","Regional Indicator Symbol Letter K"),le("","Regional Indicator Symbol Letter L"),le("","Regional Indicator Symbol Letter M"),le("","Regional Indicator Symbol Letter N"),le("","Regional Indicator Symbol Letter O"),le("","Regional Indicator Symbol Letter P"),le("","Regional Indicator Symbol Letter Q"),le("","Regional Indicator Symbol Letter R"),le("","Regional Indicator Symbol Letter S"),le("","Regional Indicator Symbol Letter T"),le("","Regional Indicator Symbol Letter U"),le("","Regional Indicator Symbol Letter V"),le("","Regional Indicator Symbol Letter W"),le("","Regional Indicator Symbol Letter X"),le("","Regional Indicator Symbol Letter Y"),le("","Regional Indicator Symbol Letter Z")),ue("Japanese","Japanse symbology",le("","Japanese Symbol for Beginner"),le("","Japanese Here Button"),le("","Japanese Service Charge Button"),le("","Japanese Free of Charge Button"),le("","Japanese Reserved Button"),le("","Japanese Prohibited Button"),le("","Japanese Vacancy Button"),le("","Japanese Passing Grade Button"),le("","Japanese No Vacancy Button"),le("","Japanese Not Free of Charge Button"),le("","Japanese Monthly Amount Button"),le("","Japanese Application Button"),le("","Japanese Discount Button"),le("","Japanese Open for Business Button"),le("","Japanese Bargain Button"),le("","Japanese Acceptable Button"),le("","Japanese Congratulations Button"),le("","Japanese Secret Button")),ue("Clocks","Time-keeping pieces",le("","One OClock"),le("","Two OClock"),le("","Three OClock"),le("","Four OClock"),le("","Five OClock"),le("","Six OClock"),le("","Seven OClock"),le("","Eight OClock"),le("","Nine OClock"),le("","Ten OClock"),le("","Eleven OClock"),le("","Twelve OClock"),le("","One-Thirty"),le("","Two-Thirty"),le("","Three-Thirty"),le("","Four-Thirty"),le("","Five-Thirty"),le("","Six-Thirty"),le("","Seven-Thirty"),le("","Eight-Thirty"),le("","Nine-Thirty"),le("","Ten-Thirty"),le("","Eleven-Thirty"),le("","Twelve-Thirty"),le("","Mantelpiece Clock"),le("","Watch"),le("","Alarm Clock"),le("","Stopwatch"),le("","Timer Clock"),le("","Hourglass Done"),le("","Hourglass Not Done"))),Yh=le("","Down-Right Arrow"),Xh=(le("","Down-Right Arrow"),le("","Down-Right Arrow")),Jh=ue("Arrows","Arrows pointing in different directions",le("","Clockwise Vertical Arrows"),le("","Counterclockwise Arrows Button"),le("","Left-Right Arrow"),le("","Up-Down Arrow"),le("","Up-Left Arrow"),le("","Up-Right Arrow"),Xh,le("","Down-Left Arrow"),le("","Right Arrow Curving Left"),le("","Left Arrow Curving Right"),le("","Right Arrow"),le("","Right Arrow Curving Up"),le("","Right Arrow Curving Down"),le("","Left Arrow"),le("","Up Arrow"),le("","Down Arrow")),Zh=ue("Shapes","Colored shapes",le("","Red Circle"),le("","Blue Circle"),le("","Large Orange Diamond"),le("","Large Blue Diamond"),le("","Small Orange Diamond"),le("","Small Blue Diamond"),le("","Red Triangle Pointed Up"),le("","Red Triangle Pointed Down"),le("","Orange Circle"),le("","Yellow Circle"),le("","Green Circle"),le("","Purple Circle"),le("","Brown Circle"),le("","Hollow Red Circle"),le("","White Circle"),le("","Black Circle"),le("","Red Square"),le("","Blue Square"),le("","Orange Square"),le("","Yellow Square"),le("","Green Square"),le("","Purple Square"),le("","Brown Square"),le("","Black Square Button"),le("","White Square Button"),le("","Black Small Square"),le("","White Small Square"),le("","White Medium-Small Square"),le("","Black Medium-Small Square"),le("","White Medium Square"),le("","Black Medium Square"),le("","Black Large Square"),le("","White Large Square"),le("","Star"),le("","Diamond with a Dot")),Kh=le("","Shuffle Tracks Button"),$h=le("","Repeat Button"),ed=le("","Repeat Single Button"),td=le("","Upwards Button"),nd=le("","Downwards Button"),id=(le("","Play Button"),le("","Reverse Button")),od=le("","Eject Button"),rd=le("","Fast-Forward Button"),sd=le("","Fast Reverse Button"),ad=le("","Fast Up Button"),cd=le("","Fast Down Button"),ld=le("","Next Track Button"),ud=le("","Last Track Button"),hd=le("","Play or Pause Button"),dd=le("","Pause Button"),Ad=le("","Stop Button"),pd=le("","Record Button"),gd=ue("Buttons","Buttons",le("","CL Button"),le("","Cool Button"),le("","Free Button"),le("","ID Button"),le("","New Button"),le("","NG Button"),le("","OK Button"),le("","SOS Button"),le("","Up! Button"),le("","Vs Button"),le("","Radio Button"),le("","Back Arrow"),le("","End Arrow"),le("","On! Arrow"),le("","Soon Arrow"),le("","Top Arrow"),le("","Check Box with Check"),le("","Input Latin Uppercase"),le("","Input Latin Lowercase"),le("","Input Numbers"),le("","Input Symbols"),le("","Input Latin Letters"),Kh,$h,ed,td,nd,dd,id,od,rd,sd,ad,cd,ld,ud,hd,dd,Ad,pd),fd=ue("Zodiac","The symbology of astrology",le("","Aries"),le("","Taurus"),le("","Gemini"),le("","Cancer"),le("","Leo"),le("","Virgo"),le("","Libra"),le("","Scorpio"),le("","Sagittarius"),le("","Capricorn"),le("","Aquarius"),le("","Pisces"),le("","Ophiuchus")),md=(ue("Numbers","Numbers",le("0","Digit Zero"),le("1","Digit One"),le("2","Digit Two"),le("3","Digit Three"),le("4","Digit Four"),le("5","Digit Five"),le("6","Digit Six"),le("7","Digit Seven"),le("8","Digit Eight"),le("9","Digit Nine"),le("*","Asterisk"),le("#","Number Sign"),le("0","Keycap Digit Zero"),le("1","Keycap Digit One"),le("2","Keycap Digit Two"),le("3","Keycap Digit Three"),le("4","Keycap Digit Four"),le("5","Keycap Digit Five"),le("6","Keycap Digit Six"),le("7","Keycap Digit Seven"),le("8","Keycap Digit Eight"),le("9","Keycap Digit Nine"),le("*","Keycap Asterisk"),le("#","Keycap Number Sign"),le("","Keycap: 10")),le("","Tag Plus Sign")),vd=le("","Tag Hyphen-Minus"),wd=(ue("Tags","Tags",le("","Tag Space"),le("","Tag Exclamation Mark"),le("","Tag Quotation Mark"),le("","Tag Number Sign"),le("","Tag Dollar Sign"),le("","Tag Percent Sign"),le("","Tag Ampersand"),le("","Tag Apostrophe"),le("","Tag Left Parenthesis"),le("","Tag Right Parenthesis"),le("","Tag Asterisk"),md,le("","Tag Comma"),vd,le("","Tag Full Stop"),le("","Tag Solidus"),le("","Tag Digit Zero"),le("","Tag Digit One"),le("","Tag Digit Two"),le("","Tag Digit Three"),le("","Tag Digit Four"),le("","Tag Digit Five"),le("","Tag Digit Six"),le("","Tag Digit Seven"),le("","Tag Digit Eight"),le("","Tag Digit Nine"),le("","Tag Colon"),le("","Tag Semicolon"),le("","Tag Less-Than Sign"),le("","Tag Equals Sign"),le("","Tag Greater-Than Sign"),le("","Tag Question Mark"),le("","Tag Commercial at"),le("","Tag Latin Capital Letter a"),le("","Tag Latin Capital Letter B"),le("","Tag Latin Capital Letter C"),le("","Tag Latin Capital Letter D"),le("","Tag Latin Capital Letter E"),le("","Tag Latin Capital Letter F"),le("","Tag Latin Capital Letter G"),le("","Tag Latin Capital Letter H"),le("","Tag Latin Capital Letter I"),le("","Tag Latin Capital Letter J"),le("","Tag Latin Capital Letter K"),le("","Tag Latin Capital Letter L"),le("","Tag Latin Capital Letter M"),le("","Tag Latin Capital Letter N"),le("","Tag Latin Capital Letter O"),le("","Tag Latin Capital Letter P"),le("","Tag Latin Capital Letter Q"),le("","Tag Latin Capital Letter R"),le("","Tag Latin Capital Letter S"),le("","Tag Latin Capital Letter T"),le("","Tag Latin Capital Letter U"),le("","Tag Latin Capital Letter V"),le("","Tag Latin Capital Letter W"),le("","Tag Latin Capital Letter X"),le("","Tag Latin Capital Letter Y"),le("","Tag Latin Capital Letter Z"),le("","Tag Left Square Bracket"),le("","Tag Reverse Solidus"),le("","Tag Right Square Bracket"),le("","Tag Circumflex Accent"),le("","Tag Low Line"),le("","Tag Grave Accent"),le("","Tag Latin Small Letter a"),le("","Tag Latin Small Letter B"),le("","Tag Latin Small Letter C"),le("","Tag Latin Small Letter D"),le("","Tag Latin Small Letter E"),le("","Tag Latin Small Letter F"),le("","Tag Latin Small Letter G"),le("","Tag Latin Small Letter H"),le("","Tag Latin Small Letter I"),le("","Tag Latin Small Letter J"),le("","Tag Latin Small Letter K"),le("","Tag Latin Small Letter L"),le("","Tag Latin Small Letter M"),le("","Tag Latin Small Letter N"),le("","Tag Latin Small Letter O"),le("","Tag Latin Small Letter P"),le("","Tag Latin Small Letter Q"),le("","Tag Latin Small Letter R"),le("","Tag Latin Small Letter S"),le("","Tag Latin Small Letter T"),le("","Tag Latin Small Letter U"),le("","Tag Latin Small Letter V"),le("","Tag Latin Small Letter W"),le("","Tag Latin Small Letter X"),le("","Tag Latin Small Letter Y"),le("","Tag Latin Small Letter Z"),le("","Tag Left Curly Bracket"),le("","Tag Vertical Line"),le("","Tag Right Curly Bracket"),le("","Tag Tilde"),le("","Cancel Tag")),ue("Math","Math",le("","Multiply"),le("","Plus"),le("","Minus"),le("","Divide"))),yd=ue("Games","Games",le("","Spade Suit"),le("","Club Suit"),le("","Heart Suit",{color:"red"}),le("","Diamond Suit",{color:"red"}),le("","Mahjong Red Dragon"),le("","Joker"),le("","Direct Hit"),le("","Slot Machine"),le("","Pool 8 Ball"),le("","Game Die"),le("","Bowling"),le("","Flower Playing Cards"),le("","Puzzle Piece"),le("","Chess Pawn"),le("","Yo-Yo"),le("","Kite"),le("","Boomerang"),le("","Nesting Dolls")),bd=ue("Sports Equipment","Sports equipment",le("","Running Shirt"),le("","Tennis"),le("","Skis"),le("","Basketball"),le("","Sports Medal"),le("","Trophy"),le("","American Football"),le("","Rugby Football"),le("","Cricket Game"),le("","Volleyball"),le("","Field Hockey"),le("","Ice Hockey"),le("","Ping Pong"),le("","Badminton"),le("","Sled"),le("","Goal Net"),le("","1st Place Medal"),le("","2nd Place Medal"),le("","3rd Place Medal"),le("","Boxing Glove"),le("","Curling Stone"),le("","Lacrosse"),le("","Softball"),le("","Flying Disc"),le("","Soccer Ball"),le("","Baseball"),le("","Ice Skate")),Cd=ue("Clothing","Clothing",le("","Top Hat"),le("","Diving Mask"),le("","Womans Hat"),le("","Glasses"),le("","Sunglasses"),le("","Necktie"),le("","T-Shirt"),le("","Jeans"),le("","Dress"),le("","Kimono"),le("","Bikini"),le("","Womans Clothes"),le("","Purse"),le("","Handbag"),le("","Clutch Bag"),le("","Mans Shoe"),le("","Running Shoe"),le("","High-Heeled Shoe"),le("","Womans Sandal"),le("","Womans Boot"),le("","Martial Arts Uniform"),le("","Sari"),le("","Lab Coat"),le("","Goggles"),le("","Hiking Boot"),le("","Flat Shoe"),pa,le("","Safety Vest"),le("","Billed Cap"),le("","Scarf"),le("","Gloves"),le("","Coat"),le("","Socks"),le("","Nazar Amulet"),le("","Ballet Shoes"),le("","One-Piece Swimsuit"),le("","Briefs"),le("","Shorts"),le("","Thong Sandal")),Dd=ue("Town","Town",le("","Building Construction"),le("","Houses"),le("","Cityscape"),le("","Derelict House"),le("","Classical Building"),le("","Desert"),le("","Desert Island"),le("","National Park"),le("","Stadium"),le("","House"),le("","House with Garden"),le("","Office Building"),le("","Japanese Post Office"),le("","Post Office"),le("","Hospital"),le("","Bank"),le("","ATM Sign"),le("","Hotel"),le("","Love Hotel"),le("","Convenience Store"),_s,le("","Department Store"),Hs,le("","Bridge at Night"),le("","Fountain"),le("","Shopping Bags"),le("","Receipt"),le("","Shopping Cart"),le("","Barber Pole"),le("","Wedding"),le("","Hut"),le("","Elevator"),le("","Ballot Box with Ballot")),xd=ue("Music","Music",le("","Musical Score"),le("","Musical Notes"),le("","Musical Note"),le("","Saxophone"),le("","Guitar"),le("","Musical Keyboard"),le("","Trumpet"),le("","Violin"),le("","Drum"),le("","Banjo"),le("","Accordion"),le("","Long Drum")),Sd=ue("Weather","Weather",le("","Sunrise Over Mountains"),le("","Sunrise"),le("","Cityscape at Dusk"),le("","Sunset"),le("","Night with Stars"),le("","Closed Umbrella"),le("","Umbrella"),le("","Umbrella with Rain Drops"),le("","Snowman"),le("","Snowman Without Snow"),le("","Sun"),le("","Cloud"),le("","Sun Behind Small Cloud"),le("","Sun Behind Cloud"),le("","Sun Behind Large Cloud"),le("","Sun Behind Rain Cloud"),le("","Cloud with Rain"),le("","Cloud with Snow"),le("","Cloud with Lightning"),le("","Cloud with Lightning and Rain"),le("","Snowflake"),le("","Cyclone"),le("","Tornado"),le("","Wind Face"),le("","Water Wave"),le("","Fog"),le("","Foggy"),le("","Rainbow"),le("","Thermometer")),Ed=ue("Astronomy","Astronomy",le("","Milky Way"),le("","Globe Showing Europe-Africa"),le("","Globe Showing Americas"),le("","Globe Showing Asia-Australia"),le("","Globe with Meridians"),le("","New Moon"),le("","Waxing Crescent Moon"),le("","First Quarter Moon"),le("","Waxing Gibbous Moon"),le("","Full Moon"),le("","Waning Gibbous Moon"),le("","Last Quarter Moon"),le("","Waning Crescent Moon"),le("","Crescent Moon"),le("","New Moon Face"),le("","First Quarter Moon Face"),le("","Last Quarter Moon Face"),le("","Full Moon Face"),le("","Sun with Face"),le("","Glowing Star"),le("","Shooting Star"),le("","Comet"),le("","Ringed Planet")),Pd=ue("Finance","Finance",le("","Money Bag"),le("","Currency Exchange"),le("","Heavy Dollar Sign"),le("","Credit Card"),le("","Yen Banknote"),le("","Dollar Banknote"),le("","Euro Banknote"),le("","Pound Banknote"),le("","Money with Wings"),le("","Chart Increasing with Yen"),le("","Coin")),Bd=ue("Writing","Writing",le("","Pen"),le("","Fountain Pen"),le("","Paintbrush"),le("","Crayon"),le("","Pencil"),le("","Black Nib")),_d=le("","Alembic"),Md=le("","Gear"),kd=le("","Atom Symbol"),Td=le("","Keyboard"),Id=le("","Telephone"),Fd=le("","Studio Microphone"),Ld=le("","Level Slider"),Od=le("","Control Knobs"),Rd=le("","Movie Camera"),Nd=le("","Headphone"),Hd=le("","Video Game"),jd=le("","Light Bulb"),Qd=le("","Computer Disk"),zd=le("","Floppy Disk"),Ud=le("","Optical Disk"),Wd=le("","DVD"),Gd=le("","Telephone Receiver"),qd=le("","Pager"),Vd=le("","Fax Machine"),Yd=le("","Satellite Antenna"),Xd=le("","Loudspeaker"),Jd=le("","Megaphone"),Zd=le("","Mobile Phone"),Kd=le("","Mobile Phone with Arrow"),$d=le("","Mobile Phone Vibrating"),eA=le("","Mobile Phone Off"),tA=le("","No Mobile Phone"),nA=le("","Antenna Bars"),iA=le("","Camera"),oA=le("","Camera with Flash"),rA=le("","Video Camera"),sA=le("","Television"),aA=le("","Radio"),cA=le("","Videocassette"),lA=le("","Film Projector"),uA=(le("","Portable Stereo"),le("","Dim Button")),hA=le("","Bright Button"),dA=le("","Muted Speaker"),AA=le("","Speaker Low Volume"),pA=le("","Speaker Medium Volume"),gA=le("","Speaker High Volume"),fA=le("","Battery"),mA=le("","Electric Plug"),vA=le("","Magnifying Glass Tilted Left"),wA=le("","Magnifying Glass Tilted Right"),yA=le("","Locked with Pen"),bA=le("","Locked with Key"),CA=le("","Key"),DA=le("","Locked"),xA=le("","Unlocked"),SA=le("","Bell"),EA=le("","Bell with Slash"),PA=le("","Bookmark"),BA=le("","Link"),_A=le("","Joystick"),MA=le("","Desktop Computer"),kA=le("","Printer"),TA=le("","Computer Mouse"),IA=le("","Trackball"),FA=(le("","Black Folder"),le("","Folder"),le("","Open Folder"),le("","Card Index Dividers")),LA=le("","Card File Box"),OA=le("","File Cabinet"),RA=(le("","Empty Note"),le("","Empty Note Page"),le("","Empty Note Pad"),le("","Note"),le("","Note Page"),le("","Note Pad"),le("","Empty Document"),le("","Empty Page"),le("","Empty Pages"),le("","Document"),le("","Page"),le("","Pages"),le("","Wastebasket")),NA=le("","Spiral Note Pad"),HA=le("","Spiral Calendar"),jA=(le("","Desktop Window"),le("","Minimize"),le("","Maximize"),le("","Overlap"),le("","Reload"),le("","Close"),le("","Increase Font Size"),le("","Decrease Font Size"),le("","Compression")),QA=le("","Old Key"),zA=ue("Technology","Technology",_A,Hd,jd,$s,Qs,Qd,zd,Ud,Wd,MA,Td,kA,TA,IA,Id,Gd,qd,Vd,Yd,Xd,Jd,sA,aA,cA,lA,Fd,Ld,Od,Zs,Rd,Nd,iA,oA,rA,Zd,eA,Kd,yA,bA,DA,xA,SA,EA,PA,BA,$d,nA,uA,hA,dA,AA,pA,gA,fA,mA),UA=ue("Mail","Mail",le("","Outbox Tray"),le("","Inbox Tray"),le("","Package"),le("","E-Mail"),le("","Incoming Envelope"),le("","Envelope with Arrow"),le("","Closed Mailbox with Lowered Flag"),le("","Closed Mailbox with Raised Flag"),le("","Open Mailbox with Raised Flag"),le("","Open Mailbox with Lowered Flag"),le("","Postbox"),le("","Postal Horn")),WA=ue("Celebration","Celebration",le("","Piata"),le("","Ribbon"),le("","Wrapped Gift"),le("","Jack-O-Lantern"),le("","Christmas Tree"),le("","Firecracker"),le("","Fireworks"),le("","Sparkler"),le("","Sparkles"),le("","Sparkle"),le("","Balloon"),le("","Party Popper"),le("","Confetti Ball"),le("","Tanabata Tree"),le("","Pine Decoration"),le("","Japanese Dolls"),le("","Carp Streamer"),le("","Wind Chime"),le("","Moon Viewing Ceremony"),le("","Backpack"),Ps,le("","Red Envelope"),le("","Red Paper Lantern"),le("","Military Medal")),GA=ue("Tools","Tools",le("","Fishing Pole"),le("","Flashlight"),Rs,le("","Hammer"),le("","Nut and Bolt"),le("","Hammer and Wrench"),le("","Compass"),le("","Fire Extinguisher"),le("","Toolbox"),le("","Brick"),le("","Axe"),le("","Hammer and Pick"),le("","Pick"),le("","Rescue Workers Helmet"),le("","Chains"),jA,le("","Carpentry Saw"),le("","Screwdriver"),le("","Ladder"),le("","Hook")),qA=ue("Office","Office",le("","File Folder"),le("","Open File Folder"),le("","Page with Curl"),le("","Page Facing Up"),le("","Calendar"),le("","Tear-Off Calendar"),le("","Card Index"),FA,LA,OA,RA,NA,HA,le("","Chart Increasing"),le("","Chart Decreasing"),le("","Bar Chart"),le("","Clipboard"),le("","Pushpin"),le("","Round Pushpin"),le("","Paperclip"),le("","Linked Paperclips"),le("","Straight Ruler"),le("","Triangular Ruler"),le("","Bookmark Tabs"),le("","Ledger"),le("","Notebook"),le("","Notebook with Decorative Cover"),le("","Closed Book"),le("","Open Book"),le("","Green Book"),le("","Blue Book"),le("","Orange Book"),le("","Books"),le("","Name Badge"),le("","Scroll"),le("","Memo"),le("","Scissors"),le("","Envelope")),VA=ue("Signs","Signs",le("","Cinema"),tA,le("","No One Under Eighteen"),le("","Prohibited"),le("","Cigarette"),le("","No Smoking"),le("","Litter in Bin Sign"),le("","No Littering"),le("","Potable Water"),le("","Non-Potable Water"),le("","No Bicycles"),le("","No Pedestrians"),le("","Children Crossing"),le("","Mens Room"),le("","Womens Room"),le("","Restroom"),le("","Baby Symbol"),le("","Water Closet"),le("","Passport Control"),le("","Customs"),le("","Baggage Claim"),le("","Left Luggage"),le("","Parking Button"),le("","Wheelchair Symbol"),le("","Radioactive"),le("","Biohazard"),le("","Warning"),le("","High Voltage"),le("","No Entry"),le("","Recycling Symbol"),vr,wr,le("","Transgender Symbol")),YA=ue("Religion","Religion",le("","Dotted Six-Pointed Star"),le("","Star of David"),le("","Om"),le("","Kaaba"),le("","Mosque"),le("","Synagogue"),le("","Menorah"),le("","Place of Worship"),le("","Hindu Temple"),le("","Orthodox Cross"),le("","Latin Cross"),le("","Star and Crescent"),le("","Peace Symbol"),le("","Yin Yang"),le("","Wheel of Dharma"),le("","Infinity"),le("","Diya Lamp"),le("","Shinto Shrine"),le("","Church"),le("","Eight-Pointed Star"),le("","Prayer Beads")),XA=le("","Door"),JA=ue("Household","Household",le("","Lipstick"),le("","Ring"),le("","Gem Stone"),le("","Newspaper"),CA,le("","Fire"),le("","Rock"),le("","Wood"),le("","Pistol"),le("","Candle"),le("","Framed Picture"),QA,le("","Rolled-Up Newspaper"),le("","World Map"),XA,le("","Toilet"),le("","Shower"),le("","Bathtub"),le("","Couch and Lamp"),le("","Bed"),le("","Lotion Bottle"),le("","Thread"),le("","Yarn"),le("","Safety Pin"),le("","Teddy Bear"),le("","Broom"),le("","Basket"),le("","Roll of Paper"),le("","Soap"),le("","Sponge"),le("","Chair"),le("","Razor"),le("","Mirror"),le("","Window"),le("","Plunger"),le("","Sewing Needle"),le("","Knot"),le("","Bucket"),le("","Mouse Trap"),le("","Toothbrush"),le("","Headstone"),le("","Placard"),le("","Reminder Ribbon")),ZA=ue("Activities","Activities",le("","Film Frames"),le("","Admission Tickets"),le("","Carousel Horse"),le("","Ferris Wheel"),le("","Roller Coaster"),Xs,le("","Circus Tent"),le("","Ticket"),le("","Clapper Board"),le("","Performing Arts")),KA=ue("Travel","Travel",le("","Label"),le("","Volcano"),le("","Snow-Capped Mountain"),le("","Mountain"),le("","Camping"),le("","Beach with Umbrella"),le("","Umbrella on Ground"),le("","Japanese Castle"),le("","Footprints"),le("","Mount Fuji"),le("","Tokyo Tower"),le("","Statue of Liberty"),le("","Map of Japan"),le("","Moai"),le("","Bellhop Bell"),le("","Luggage"),le("","Flag in Hole"),le("","Tent"),le("","Hot Springs")),$A=ue("Medieval","Medieval",le("","Castle"),le("","Bow and Arrow"),ia,le("","Trident Emblem"),le("","Dagger"),le("","Shield"),le("","Crystal Ball"),le("","Magic Wand"),le("","Crossed Swords"),le("","Fleur-de-lis"),le("","Military Helmet")),ep=le("","Double Exclamation Mark"),tp=le("","Exclamation Question Mark"),np=le("","Information"),ip=le("","Circled M"),op=le("","Check Mark Button"),rp=le("","Check Mark"),sp=le("","Eight-Spoked Asterisk"),ap=le("","Cross Mark"),cp=le("","Cross Mark Button"),lp=le("","Question Mark"),up=le("","White Question Mark"),hp=le("","White Exclamation Mark"),dp=le("","Exclamation Mark"),Ap=le("","Curly Loop"),pp=le("","Double Curly Loop"),gp=le("","Wavy Dash"),fp=le("","Part Alternation Mark"),mp=le("","Trade Mark"),vp=le("","Copyright"),wp=le("","Registered"),yp=le("","Square: Four Corners"),bp=(he("Marks","Marks",{doubleExclamationMark:ep,interrobang:tp,information:np,circledM:ip,checkMarkButton:op,checkMark:rp,eightSpokedAsterisk:sp,crossMark:ap,crossMarkButton:cp,questionMark:lp,whiteQuestionMark:up,whiteExclamationMark:hp,exclamationMark:dp,curlyLoop:Ap,doubleCurlyLoop:pp,wavyDash:gp,partAlternationMark:fp,tradeMark:mp,copyright:vp,registered:wp}),le("","Droplet")),Cp=le("","Drop of Blood"),Dp=le("","Adhesive Bandage"),xp=le("","Stethoscope"),Sp=le("","Syringe"),Ep=le("","Pill"),Pp=le("","Test Tube"),Bp=le("","Petri Dish"),_p=le("","DNA"),Mp=le("","Abacus"),kp=le("","Magnet"),Tp=he("Science","Science",{droplet:bp,dropOfBlood:Cp,adhesiveBandage:Dp,stethoscope:xp,syringe:Sp,pill:Ep,microscope:ta,testTube:Pp,petriDish:Bp,dna:_p,abacus:Mp,magnet:kp,telescope:le("","Telescope"),medical:Ss,balanceScale:ks,alembic:_d,gear:Md,atomSymbol:kd,magnifyingGlassTiltedLeft:vA,magnifyingGlassTiltedRight:wA}),Ip=le("","White Chess King"),Fp=le("","White Chess Queen"),Lp=le("","White Chess Rook"),Op=le("","White Chess Bishop"),Rp=le("","White Chess Knight"),Np=le("","White Chess Pawn"),Hp=he(Ip.value+Fp.value+Lp.value+Op.value+Rp.value+Np.value,"White Chess Pieces",{width:"auto",king:Ip,queen:Fp,rook:Lp,bishop:Op,knight:Rp,pawn:Np}),jp=le("","Black Chess King"),Qp=le("","Black Chess Queen"),zp=le("","Black Chess Rook"),Up=le("","Black Chess Bishop"),Wp=le("","Black Chess Knight"),Gp=le("","Black Chess Pawn"),qp=he(jp.value+Qp.value+zp.value+Up.value+Wp.value+Gp.value,"Black Chess Pieces",{width:"auto",king:jp,queen:Qp,rook:zp,bishop:Up,knight:Wp,pawn:Gp}),Vp=he(Np.value+Gp.value,"Chess Pawns",{width:"auto",white:Np,black:Gp}),Yp=he(Lp.value+zp.value,"Chess Rooks",{width:"auto",white:Lp,black:zp}),Xp=he(Op.value+Up.value,"Chess Bishops",{width:"auto",white:Op,black:Up}),Jp=he(Rp.value+Wp.value,"Chess Knights",{width:"auto",white:Rp,black:Wp}),Zp=he(Fp.value+Qp.value,"Chess Queens",{width:"auto",white:Fp,black:Qp}),Kp=he(Ip.value+jp.value,"Chess Kings",{width:"auto",white:Ip,black:jp}),$p=he("Chess Pieces","Chess Pieces",{width:"auto",white:Hp,black:qp,pawns:Vp,rooks:Yp,bishops:Xp,knights:Jp,queens:Zp,kings:Kp}),eg=le("","Dice: Side 1"),tg=le("","Dice: Side 2"),ng=le("","Dice: Side 3"),ig=le("","Dice: Side 4"),og=le("","Dice: Side 5"),rg=he("Dice","Dice",{dice1:eg,dice2:tg,dice3:ng,dice4:ig,dice5:og,dice6:le("","Dice: Side 6")}),sg=he("All Icons","All Icons",{faces:su,love:Bu,cartoon:_u,hands:Mu,bodyParts:ku,people:Ya,gestures:ns,inMotion:Qa,resting:qa,roles:aa,fantasy:Aa,animals:Tu,plants:Fu,food:Ou,flags:Ru,vehicles:qh,clocks:Vh,arrows:Jh,shapes:Zh,buttons:gd,zodiac:fd,chess:$p,dice:rg,math:wd,games:yd,sportsEquipment:bd,clothing:Cd,town:Dd,music:xd,weather:Sd,astro:Ed,finance:Pd,writing:Bd,science:Tp,tech:zA,mail:UA,celebration:WA,tools:GA,office:qA,signs:VA,religion:YA,household:JA,activities:ZA,travel:KA,medieval:$A});class ag{constructor(e,t){this.key=e,this.value=t,Object.freeze(this)}apply(e){e.style[this.key]=this.value}}class cg{constructor(...e){this.set=new Map;const t=(e,t)=>{t||s(t)?this.set.set(e,t):this.set.has(e)&&this.set.delete(e)};for(let n of e)if(n instanceof ag){const{key:e,value:i}=n;t(e,i)}else if(n instanceof cg)for(let e of n.set.entries()){const[n,i]=e;t(n,i)}}apply(e){for(let t of this.set.entries()){const[n,i]=t;e.style[n]=i}}}function we(e){return new ag("backgroundColor",e)}function ye(e){return new ag("fontFamily",e)}function be(e){return new ag("margin",e)}function Ce(e){return new ag("width",e)}function De(e){return new ag("zIndex",e)}ye("'Droid Sans Mono', 'Consolas', 'Lucida Console', 'Courier New', 'Courier', monospace"),ye("-apple-system, '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', sans-serif");class lg{constructor(e,t,n){if(!i(t))throw new Error("A function instance is required for this parameter");this.name=e,this.callback=t,this.opts=n,Object.freeze(this)}add(e){e.addEventListener(this.name,this.callback,this.opts)}remove(e){e.removeEventListener(this.name,this.callback)}}function xe(e,t){return new lg("blur",e,t)}function Se(e,t){return new lg("click",e,t)}function Ee(e,t){return new lg("focus",e,t)}function Pe(e,t){return new lg("input",e,t)}function Be(e,t){return new lg("mouseout",e,t)}function _e(e,...t){let n=null;for(let e=0;e<t.length;++e){const o=t[e];i(o)&&(t[e]=o(!0)),o instanceof ur&&"id"===o.key&&(n=document.getElementById(o.value))}null===n&&(n=document.createElement(e));for(let e of t)null!=e&&(o(e)||r(e)||s(e)||e instanceof Date?n.appendChild(document.createTextNode(e)):e instanceof Node?n.appendChild(e):e.element instanceof Node?n.appendChild(e.element):e instanceof ur||e instanceof ag||e instanceof cg?e.apply(n):e instanceof lg?e.add(n):console.trace(`Skipping ${e}: unsupported value type.`,e));return n}function Me(...e){return _e("a",...e)}function ke(...e){return function(...e){return _e("button",...e)}(...e,$("button"))}function Te(...e){return _e("canvas",...e)}function Ie(...e){return _e("div",...e)}function Fe(...e){return _e("h1",...e)}function Le(...e){return _e("input",...e)}function Oe(...e){return Le($("text"),...e)}function Re(...e){return Le($("url"),...e)}function Ne(...e){return _e("label",...e)}function He(...e){return _e("li",...e)}function je(...e){return _e("option",...e)}function Qe(...e){return _e("p",...e)}function ze(...e){return _e("span",...e)}function Ue(...e){return _e("ul",...e)}function We(e,t,...n){return window.OffscreenCanvas?new OffscreenCanvas(e,t):Te(...n,te(e),U(t))}function Ge(...e){return Ie(be("auto"),...e)}const ug=new Event("toggleOptions"),hg=new Event("tweet"),dg=new Event("leave"),Ag=new Event("toggleFullscreen"),pg=new Event("toggleInstructions"),gg=new Event("toggleUserDirectory"),fg=new Event("toggleAudio"),mg=new Event("toggleVideo"),vg=new Event("changeDevices"),wg=new Event("emote"),yg=new Event("selectEmoji"),bg=new Event("zoomChanged");class Cg extends Sn{constructor(e,t,n){super();const i=e=>()=>this.dispatchEvent(e),o=e=>{this.zoom+=e,this.dispatchEvent(bg)};this.element=Ie(G("controls")),this.element.append(this.optionsButton=ke(G("optionsButton"),K("Show/hide options"),Se(i(ug)),Ge(Md.value),Ge("Options")),this.instructionsButton=ke(G("instructionsButton"),K("Show/hide instructions"),Se(i(pg)),Ge(lp.value),Ge("Info")),this.shareButton=ke(G("shareButton"),K("Share your current room to twitter"),Se(i(hg)),function(...e){return _e("img",...e)}(function(e){return new ur("src",e,"audio","embed","iframe","img","input","script","source","track","video")}("https://cdn2.iconfinder.com/data/icons/minimalism/512/twitter.png"),function(e){return new ur("alt",e,"applet","area","img","input")}("icon"),function(e){return new ur("role",e)}("presentation"),new ag("height","25px"),be("2px auto -2px auto")),Ge("Tweet")),this.showUsersButton=ke(G("showUsersButton"),K("View user directory"),Se(i(gg)),Ge(ou.value),Ge("Users")),this.fullscreenButton=ke(G("fullscreenButton"),K("Toggle fullscreen"),Se(i(Ag)),Se(()=>this.isFullscreen=!this.isFullscreen),Ge(yp.value),Ge("Expand")),this.leaveButton=ke(G("leaveButton"),K("Leave the room"),Se(i(dg)),Ge(XA.value),Ge("Leave")),Ie(G("toggleAudioControl"),H("comboButton"),this.toggleAudioButton=ke(G("toggleAudioButton"),K("Toggle audio mute/unmute"),Se(i(fg)),this.toggleAudioLabel=Ge(gA.value),Ge("Audio")),this.toggleVideoButton=ke(G("toggleVideoButton"),K("Toggle video mute/unmute"),Se(i(mg)),this.toggleVideoLabel=Ge(tA.value),Ge("Video")),this.changeDevicesButton=ke(G("changeDevicesButton"),K("Change devices"),Se(i(vg)),Ge(td.value),Ge("Change"))),Ie(G("emojiControl"),H("comboButton"),function(e){return new ag("textAlign",e)}("center"),ke(G("emoteButton"),K("Emote"),Se(i(wg)),this.emoteButton=Ge(Iu.value),Ge("Emote")),ke(G("selectEmoteButton"),K("Select Emoji"),Se(i(yg)),Ge(td.value),Ge("Change"))),this.zoomInButton=ke(G("zoomInButton"),K("Zoom in"),Se(()=>o(.5)),Ge(vA.value),Ge("+")),Ie(G("zoomSliderContainer"),this.slider=function(...e){return Le($("range"),...e)}(G("zoomSlider"),K("Zoom"),V(t),q(n),Z(.1),ee(0),Pe(()=>this.dispatchEvent(bg)))),this.zoomOutButton=ke(G("zoomOutButton"),K("Zoom out"),Se(()=>o(-.5)),Ge(wA.value),Ge("-"))),this._audioEnabled=!0,this._videoEnabled=!1,Object.seal(this)}get isFullscreen(){return null!==document.fullscreenElement}set isFullscreen(e){e?document.body.requestFullscreen():document.exitFullscreen(),oe(this.fullscreenButton,e,Yh.value,yp.value)}hide(){this.element.style.display="none"}show(){this.element.style.display=""}get enabled(){return!this.instructionsButton.disabled}set enabled(e){for(let t of this.element.querySelectorAll("button"))t.disabled=!e}get audioEnabled(){return this._audioEnabled}set audioEnabled(e){this._audioEnabled=e,oe(this.toggleAudioLabel,e,gA.value,dA.value)}get videoEnabled(){return this._videoEnabled}set videoEnabled(e){this._videoEnabled=e,oe(this.toggleVideoLabel,e,rA.value,tA.value)}setEmojiButton(e,t){this.emoteButton.innerHTML=t.value}get zoom(){return parseFloat(this.slider.value)}set zoom(e){this.slider.value=e}}class Dg extends Sn{constructor(e,...t){super(),this.element=_e(e,...t)}get id(){return this.element.id}get eventTarget(){return this.element}isForwardedEvent(e){return!0}addEventListener(e,t,n){this.isForwardedEvent(e)?this.eventTarget.addEventListener(e,t,n):super.addEventListener(e,t,n)}removeEventListener(e,t){this.isForwardedEvent(e)?this.eventTarget.removeEventListener(e,t):super.removeEventListener(e,t)}get style(){return this.element.style}get tagName(){return this.element.tagName}get disabled(){return this.element.disabled}set disabled(e){this.element.disabled=e}focus(){this.element.focus()}blur(){this.element.blur()}}const xg=j(!0),Sg=j(!1),Eg=new WeakMap;function qe(e){if(function(e){for(;e.lastChild;)e.lastChild.remove()}(e.element),0===e.values.length)e.element.append(je(e.noSelectionText)),xg.apply(e.element);else{e.emptySelectionEnabled&&e.element.append(je(e.noSelectionText));for(let t of e.values)e.element.append(je(ee(e.makeID(t)),e.makeLabel(t)));Sg.apply(e.element)}}function Ve(e,t,n,i,...o){return new Pg(e,t,n,i,...o)}class Pg extends Dg{constructor(e,t,n,o,...r){if(super("select",G(e),...r),!i(n))throw new Error("makeID parameter must be a Function");if(!i(o))throw new Error("makeLabel parameter must be a Function");this.noSelectionText=t,this.makeID=e=>null!==e&&n(e)||null,this.makeLabel=e=>null!==e&&o(e)||"None",this.emptySelectionEnabled=!0,Object.seal(this)}get emptySelectionEnabled(){return this._emptySelectionEnabled}set emptySelectionEnabled(e){this._emptySelectionEnabled=e,qe(this)}get values(){return Eg.has(this)||Eg.set(this,[]),Eg.get(this)}set values(e){const t=this.selectedValue,n=this.values;n.splice(0,n.length,...e),qe(this),this.selectedValue=t}get options(){return this.element.options}get selectedIndex(){let e=this.element.selectedIndex;return this.emptySelectionEnabled&&--e,e}set selectedIndex(e){this.emptySelectionEnabled&&++e,this.element.selectedIndex=e}get selectedValue(){return 0<=this.selectedIndex&&this.selectedIndex<this.values.length?this.values[this.selectedIndex]:null}set selectedValue(e){this.selectedIndex=this.indexOf(e)}get selectedText(){const e=this.element.selectedOptions;if(1===e.length)return e[0].textContent||e[0].innerText}set selectedText(e){const t=this.values.findIndex(t=>null!==e&&this.makeLabel(t)===e);this.selectedIndex=t}indexOf(e){return this.values.findIndex(t=>null!==e&&this.makeID(e)===this.makeID(t))}contains(e){return this.indexOf(e)>=0}}const Bg=new Event("hidden"),_g=new Event("shown");class Mg extends Sn{constructor(e){super(),this.element=Ie(G(e)),this.header=this.element.querySelector(".header"),this.content=this.element.querySelector(".content"),this.footer=this.element.querySelector(".footer");const t=this.element.querySelector(".dialogTitle > button.closeButton");t&&t.addEventListener("click",()=>ae(this))}get tagName(){return this.element.tagName}get disabled(){return this.element.disabled}set disabled(e){this.element.disabled=e}get style(){return this.element.style}appendChild(e){return this.element.appendChild(e)}append(...e){this.element.append(...e)}show(){se(this.element),this.dispatchEvent(_g)}async showAsync(){se(this),await L(this,"hidden")}hide(){ae(this.element),this.dispatchEvent(Bg)}}const kg=new Event("audioInputChanged"),Tg=new Event("audioOutputChanged"),Ig=new Event("videoInputChanged");class Fg extends Mg{constructor(){super("devices");const e=e=>()=>this.dispatchEvent(e);this.videoInputSelect=Ve("videoInputDevices","No video input",e=>e.deviceId,e=>e.label,Pe(e(Ig))),this.audioInputSelect=Ve("audioInputDevices","No audio input",e=>e.deviceId,e=>e.label,Pe(e(kg))),this.audioOutputSelect=Ve("audioOutputDevices","No audio output",e=>e.deviceId,e=>e.label,Pe(e(Tg))),this.audioInputDevices=[],this.audioOutputDevices=[],this.videoInputDevices=[],Object.seal(this)}get audioInputDevices(){return this.audioInputSelect.values}set audioInputDevices(e){this.audioInputSelect.values=e}get currentAudioInputDevice(){return this.audioInputSelect.selectedValue}set currentAudioInputDevice(e){this.audioInputSelect.selectedValue=e}get audioOutputDevices(){return this.audioOutputSelect.values}set audioOutputDevices(e){this.audioOutputSelect.values=e}get currentAudioOutputDevice(){return this.audioOutputSelect.selectedValue}set currentAudioOutputDevice(e){this.audioOutputSelect.selectedValue=e}get videoInputDevices(){return this.videoInputSelect.values}set videoInputDevices(e){this.videoInputSelect.values=e}get currentVideoInputDevice(){return this.videoInputSelect.selectedValue}set currentVideoInputDevice(e){this.videoInputSelect.selectedValue=e}}function Ye(e,t,n=null,i=null){return null===n&&(n=1),null===i&&(i=1),new ag("gridArea",`${t}/${e}/${t+i}/${e+n}`)}function Xe(e,t=null){return null===t&&(t=1),new ag("gridRow",`${e}/${e+t}`)}const Lg=new ag("display","grid");function Je(...e){return function(...e){return new cg(...e)}(Lg,function(e){return new ag("gridTemplateColumns",e)}(e.join(" ")))}const Og=j(!0),Rg=j(!1),Ng=new Event("emojiCanceled");class Hg extends Mg{constructor(){super("emoji"),this.header.append(function(...e){return _e("h2",...e)}("Recent"),this.recent=Qe("(None)"));const e=[],t=[];let n=null,i=0;function o(e,t){let n=e.value,i=n.indexOf(fr.value);return-1===i&&(i=n.indexOf(gr.value)),i>=0&&(n=n.substring(0,i)),{value:n+t.value,desc:e.desc+"/"+t.desc}}const r=(e,s,a)=>{const c=e.alts||e;for(let e of c){const c=ke(K(e.desc),Se(t=>{n=n&&t.ctrlKey?o(n,e):e,this.preview.innerHTML=`${n.value} - ${n.desc}`,Rg.apply(this.confirmButton),l&&(re(l),c.innerHTML=e.value+(ne(l)?"-":"+"))}),e.value);let l=null,u=null;a?(c.id="emoji-with-alt-"+i++,u=Ue(He(c,Ne(Q(c.id),e.desc)))):u=ze(c),e.alts&&(l=Ie(),t.push(l),r(e,l,!0),ae(l),u.appendChild(l),c.style.width="3em",c.innerHTML+="+"),e.width&&(c.style.width=e.width),e.color&&(c.style.color=e.color),s.appendChild(u)}};for(let e of Object.values(sg))if(e instanceof pr){const t=Fe(),n=Qe(),i=Me(W("javascript:undefined"),K(e.desc),Se(()=>{re(n),i.innerHTML=e.value+(ne(n)?" -":" +")}),e.value+" -");r(e,n),t.appendChild(i),this.content.appendChild(t),this.content.appendChild(n)}this.footer.append(this.confirmButton=ke(H("confirm"),"OK",Se(()=>{-1===e.indexOf(n)&&(e.push(n),this.recent.innerHTML="",r(e,this.recent)),this.dispatchEvent(new jg(n)),ae(this)})),ke(H("cancel"),"Cancel",Se(()=>{Og.apply(this.confirmButton),this.dispatchEvent(Ng),ae(this)})),this.preview=ze(Ye(1,4,3,1))),Og.apply(this.confirmButton),this.selectAsync=()=>new Promise((e,n)=>{let i=null,o=null;const r=()=>{this.removeEventListener("emojiSelected",i),this.removeEventListener("emojiCanceled",o),this.removeEventListener("hidden",o)};i=t=>{r();try{e(t.emoji)}catch(e){n(e)}},o=()=>{r(),e(null)},this.addEventListener("emojiSelected",i),this.addEventListener("emojiCanceled",o),this.addEventListener("hidden",o),(()=>{for(let e of t)ae(e)})(),se(this)})}}class jg extends Event{constructor(e){super("emojiSelected"),this.emoji=e}}const Qg=new WeakMap;class zg{constructor(e){this.ready=!1,this.connecting=!1,this.connected=!1,this.parent=e}validate(){const e=this.parent.roomName.length>0&&this.parent.userName.length>0;ce(this.parent.connectButton,!this.ready||this.connecting||this.connected||!e),this.parent.connectButton.innerHTML=this.connected?"Connected":this.connecting?"Connecting...":this.ready?"Connect":"Loading..."}}class Ug extends Mg{constructor(){super("login");const e=new zg(this);Qg.set(this,e);const t=()=>e.validate();this.addEventListener("shown",()=>e.ready=!0),this.roomSelectControl=Ie(G("roomSelectorControl")),this.roomEntryControl=Ie(G("roomEntryControl"));const n=Array.prototype.map.call(this.element.querySelectorAll("#roomSelector option"),e=>({Name:e.textContent||e.innerText,ShortName:e.value}));this.roomSelect=Ve("roomSelector","No rooms available",e=>e.ShortName,e=>e.Name),this.roomSelect.addEventListener("input",t),this.roomSelect.emptySelectionEnabled=!1,this.roomSelect.values=n,this.roomSelect.selectedIndex=0,this.roomInput=Oe(G("roomName")),this.roomInput.addEventListener("input",t),this.roomInput.addEventListener("keypress",e=>{"Enter"===e.key&&(0===this.userName.length?this.userNameInput.focus():0===this.email.length&&this.emailInput.focus())}),this.userNameInput=Oe(G("userName")),this.userNameInput.addEventListener("input",t),this.userNameInput.addEventListener("keypress",e=>{"Enter"===e.key&&(0===this.userName.length?this.userNameInput.focus():0===this.roomName.length&&(this.roomSelectMode?this.roomSelect.focus():this.roomInput.focus()))}),this.emailInput=function(...e){return Le($("email"),...e)}(G("email")),this.emailInput.addEventListener("keypress",e=>{"Enter"===e.key&&(0===this.userName.length?this.userNameInput.focus():0===this.roomName.length&&(this.roomSelectMode?this.roomSelect.focus():this.roomInput.focus()))});ke(G("createNewRoom")).addEventListener("click",()=>{this.roomSelectMode=!1});ke(G("selectRoom")).addEventListener("click",()=>{this.roomSelectMode=!0}),this.connectButton=ke(G("connect")),this.addEventListener("login",()=>{this.connecting=!0}),this.roomSelectMode=!0,e.validate()}_checkInput(e,t){!e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&"Enter"===e.key&&this.userName.length>0&&this.roomName.length>0&&t(e)}addEventListener(e,t,n){"login"===e?(this.connectButton.addEventListener("click",t,n),this.roomInput.addEventListener("keypress",e=>this._checkInput(e,t)),this.userNameInput.addEventListener("keypress",e=>this._checkInput(e,t))):super.addEventListener(e,t,n)}removeEventListener(e,t){"login"===e?this.connectButton.removeEventListener("click",t):super.removeEventListener(e,t)}get roomSelectMode(){return"none"!==this.roomSelectControl.style.display}set roomSelectMode(e){const t=Qg.get(this);ie(this.roomSelectControl,e),ie(this.roomEntryControl,!e),e?this.roomSelect.selectedValue={ShortName:this.roomInput.value}:this.roomSelect.selectedIndex>=0&&(this.roomInput.value=this.roomSelect.selectedValue.ShortName),t.validate()}get roomName(){return(this.roomSelectMode?this.roomSelect.selectedValue&&this.roomSelect.selectedValue.ShortName:this.roomInput.value)||""}set roomName(e){null!=e&&0!==e.length||(e=this.roomSelect.values[0].ShortName),this.roomInput.value=e,this.roomSelect.selectedValue={ShortName:e},this.roomSelectMode=this.roomSelect.selectedIndex>-1,Qg.get(this).validate()}set userName(e){this.userNameInput.value=e,Qg.get(this).validate()}get userName(){return this.userNameInput.value}set email(e){this.emailInput.value=e}get email(){return this.emailInput.value}get connectButtonText(){return this.connectButton.innerText||this.connectButton.textContent}set connectButtonText(e){this.connectButton.innerHTML=e}get ready(){return Qg.get(this).ready}set ready(e){const t=Qg.get(this);t.ready=e,t.validate()}get connecting(){return Qg.get(this).connecting}set connecting(e){const t=Qg.get(this);t.connecting=e,t.validate()}get connected(){return Qg.get(this).connected}set connected(e){Qg.get(this).connected=e,this.connecting=!1}}function Ze(e,t,n,...i){return new Wg(e,t,n,...i)}class Wg extends Dg{constructor(e,t,n,...i){super("div"),this.label=Ne(Q(e),n),this.input=Le($(t),...i),this.element.append(this.label,this.input),this.element.style.display="grid",Object.seal(this)}get eventTarget(){return this.input}get value(){return this.input.value}set value(e){this.input.value=e}get checked(){return this.input.checked}set checked(e){this.input.checked=e}setLocked(e){ce(this.input,e)}}const Gg=new Event("select");function Ke(e,t,...n){return new qg(e,t,...n)}class qg extends Dg{constructor(e,t,...n){super("div",G(e),Qe(...n)),this.button=ke(G(e+"Btn"),Se(()=>this.dispatchEvent(Gg)),t)}isForwardedEvent(e){return"select"!==e}get visible(){return null!==this.element.style.display}set visible(e){ie(this.element,e),this.button.className=e?"tabSelected":"tabUnselected",this.element.className=e?"tabSelected":"tabUnselected"}}const Vg=new WeakMap;class Yg extends Sn{constructor(e){if(super(),!(e instanceof Gamepad))throw new Error("Value must be a Gamepad");this.id=e.id,this.displayId=e.displayId,this.connected=e.connected,this.hand=e.hand,this.pose=e.pose;const t={btnDownEvts:[],btnUpEvts:[],btnState:[],axisMaxed:[],axisMaxEvts:[],sticks:[]};this.lastButtons=[],this.buttons=[],this.axes=[],this.hapticActuators=[],this.axisThresholdMax=.9,this.axisThresholdMin=.1,this._isStick=t=>t%2==0&&t<e.axes.length-1;for(let n=0;n<e.buttons.length;++n)t.btnDownEvts[n]=Object.assign(new Event("gamepadbuttondown"),{button:n}),t.btnUpEvts[n]=Object.assign(new Event("gamepadbuttonup"),{button:n}),t.btnState[n]=!1,this.lastButtons[n]=null,this.buttons[n]=e.buttons[n];for(let n=0;n<e.axes.length;++n)t.axisMaxEvts[n]=Object.assign(new Event("gamepadaxismaxed"),{axis:n}),t.axisMaxed[n]=!1,this._isStick(n)&&(t.sticks[n/2]={x:0,y:0}),this.axes[n]=e.axes[n];if(void 0!==e.hapticActuators)for(let t=0;t<e.hapticActuators.length;++t)this.hapticActuators[t]=e.hapticActuators[t];Object.seal(this),Vg.set(this,t)}update(e){if(!(e instanceof Gamepad))throw new Error("Value must be a Gamepad");this.connected=e.connected,this.hand=e.hand,this.pose=e.pose;const t=Vg.get(this);for(let n=0;n<e.buttons.length;++n){const i=t.btnState[n],o=e.buttons[n].pressed;o!==i&&(t.btnState[n]=o,this.dispatchEvent((o?t.btnDownEvts:t.btnUpEvts)[n])),this.lastButtons[n]=this.buttons[n],this.buttons[n]=e.buttons[n]}for(let n=0;n<e.axes.length;++n){const i=t.axisMaxed[n],o=e.axes[n],r=Math.sign(o),s=Math.abs(o),a=s>=this.axisThresholdMax,c=s<=this.axisThresholdMin;a&&!i&&this.dispatchEvent(t.axisMaxEvts[n]),this.axes[n]=r*(a?1:c?0:s)}for(let e=0;e<this.axes.length-1;e+=2){const n=t.sticks[e/2];n.x=this.axes[e],n.y=this.axes[e+1]}if(void 0!==e.hapticActuators)for(let t=0;t<e.hapticActuators.length;++t)this.hapticActuators[t]=e.hapticActuators[t]}}const Xg=Object.freeze({none:null,emoji:"emoji",photo:"photo",video:"video"});class Jg{constructor(e){this.canSwim=e,this.element=Te(128,128),this.g=this.element.getContext("2d")}draw(e,t,n,i){const o=this.element.width/this.element.height,r=o>1?t:o*n,s=o>1?t/o:n,a=(t-r)/2,c=(n-s)/2;e.drawImage(this.element,a,c,r,s)}}function $e(e,t,n,i=1){return t=Math.floor(t*i),n=Math.floor(n*i),(e.width!=t||e.height!=n)&&(e.width=t,e.height=n,!0)}function et(e,t,n,i=1){const o=e.imageSmoothingEnabled,r=e.textBaseline,s=e.textAlign,a=e.font,c=$e(e.canvas,t,n,i);return c&&(e.imageSmoothingEnabled=o,e.textBaseline=r,e.textAlign=s,e.font=a),c}const Zg=new WeakMap,Kg="The quick brown fox jumps over the lazy dog",$g=new Event("redrawn");function tt(e){const t=[];return e.fontStyle&&"normal"!==e.fontStyle&&t.push(e.fontStyle),e.fontVariant&&"normal"!==e.fontVariant&&t.push(e.fontVariant),e.fontWeight&&"normal"!==e.fontWeight&&t.push(e.fontWeight),t.push(e.fontSize+"px"),t.push(e.fontFamily),t.join(" ")}class ef{constructor(){this.color="black",this.bgColor=null,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="sans-serif",this.fontSize=20,this.scale=1,this.padding={top:0,right:0,bottom:0,left:0},this.value=null,this.canvas=We(10,10),this.g=this.canvas.getContext("2d"),this.g.textBaseline="top"}redraw(e){if(this.g.clearRect(0,0,this.canvas.width,this.canvas.height),this.fontFamily&&this.fontSize&&this.color&&this.scale&&this.value){const t=this.fontSize*this.scale,n=tt(this);this.g.font=n;const i=this.g.measureText(this.value);let o=0,r=0,s=i.width,a=t;void 0!==i.actualBoundingBoxLeft&&(r=i.actualBoundingBoxAscent,s=i.actualBoundingBoxRight-i.actualBoundingBoxLeft,a=i.actualBoundingBoxDescent+i.actualBoundingBoxAscent),o+=this.padding.left,r+=this.padding.top,s+=this.padding.right+this.padding.left,a+=this.padding.top+this.padding.bottom,et(this.g,s,a),this.bgColor?(this.g.fillStyle=this.bgColor,this.g.fillRect(0,0,this.canvas.width,this.canvas.height)):this.g.clearRect(0,0,this.canvas.width,this.canvas.height),this.g.fillStyle=this.color,this.g.fillText(this.value,o,r),e.dispatchEvent($g)}}}class tf extends Sn{constructor(){super(),Zg.set(this,new ef)}async loadFontAndSetText(e=null){const t=e||Kg,n=tt(this);0===(await document.fonts.load(n,t)).length&&console.warn(`Failed to load font "${n}". If this is a system font, just set the object's \`value\` property, instead of calling \`loadFontAndSetText\`.`),this.value=e}get canvas(){return Zg.get(this).canvas}get width(){const e=Zg.get(this);return e.canvas.width/e.scale}get height(){const e=Zg.get(this);return e.canvas.height/e.scale}get scale(){return Zg.get(this).scale}set scale(e){if(this.scale!==e){const t=Zg.get(this);t.scale=e,t.redraw(this)}}get padding(){return Zg.get(this).padding}set padding(e){if(e instanceof Array)if(1===e.length)e={top:e[0],right:e[0],bottom:e[0],left:e[0]};else if(2===e.length)e={top:e[0],right:e[1],bottom:e[0],left:e[1]};else{if(4!==e.length)return;e={top:e[0],right:e[1],bottom:e[2],left:e[3]}}else r(e)&&(e={top:e,right:e,bottom:e,left:e});if(this.padding.top!==e.top||this.padding.right!=e.right||this.padding.bottom!=e.bottom||this.padding.left!=e.left){const t=Zg.get(this);t.padding=e,t.redraw(this)}}get fontStyle(){return Zg.get(this).fontStyle}set fontStyle(e){if(this.fontStyle!==e){const t=Zg.get(this);t.fontStyle=e,t.redraw(this)}}get fontVariant(){return Zg.get(this).fontVariant}set fontVariant(e){if(this.fontVariant!==e){const t=Zg.get(this);t.fontVariant=e,t.redraw(this)}}get fontWeight(){return Zg.get(this).fontWeight}set fontWeight(e){if(this.fontWeight!==e){const t=Zg.get(this);t.fontWeight=e,t.redraw(this)}}get fontSize(){return Zg.get(this).fontSize}set fontSize(e){if(this.fontSize!==e){const t=Zg.get(this);t.fontSize=e,t.redraw(this)}}get fontFamily(){return Zg.get(this).fontFamily}set fontFamily(e){if(this.fontFamily!==e){const t=Zg.get(this);t.fontFamily=e,t.redraw(this)}}get color(){return Zg.get(this).color}set color(e){if(this.color!==e){const t=Zg.get(this);t.color=e,t.redraw(this)}}get bgColor(){return Zg.get(this).bgColor}set bgColor(e){if(this.bgColor!==e){const t=Zg.get(this);t.bgColor=e,t.redraw(this)}}get value(){return Zg.get(this).value}set value(e){if(this.value!==e){const t=Zg.get(this);t.value=e,t.redraw(this)}}draw(e,t,n){const i=Zg.get(this);i.canvas.width>0&&i.canvas.height>0&&e.drawImage(i.canvas,t,n,this.width,this.height)}}class nf extends Jg{constructor(e){super(function(e){return Ma.contains(e)||ka.contains(e)||Ta.contains(e)||Jr.contains(e)}(e)),this.value=e.value,this.desc=e.desc;const t=new tf;t.color=e.color||"black",t.fontSize=256,t.value=this.value,et(this.g,t.width,t.height),t.draw(this.g,0,0)}}class of extends Jg{constructor(e){super(!1);const t=new Image;t.addEventListener("load",()=>{const e=(t.width-t.height)/2,n=Math.max(0,e),i=Math.max(0,-e),o=Math.min(t.width,t.height);et(this.g,o,o),this.g.drawImage(t,n,i,o,o,0,0,o,o)}),this.url=t.src=e&&e.href||e}}const rf="undefined"!=typeof InstallTrigger,sf=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0;class af extends Jg{constructor(e){super(!1);let t=null;if(e instanceof HTMLVideoElement)t=e;else{if(!(e instanceof MediaStream))throw new Error("Can only create a video avatar from an HTMLVideoElement or MediaStream.");t=function(...e){return _e("video",...e)}(N,J,Y,function(e){return new ur("volume",e,"audio","video")}(0),function(e){return new ur("srcObject",e,"audio","video")}(e))}this.video=t,sf||(t.play(),L(t,"canplay").then(()=>t.play()))}draw(e,t,n,i){if(this.video.videoWidth>0&&this.video.videoHeight>0){const e=(this.video.videoWidth-this.video.videoHeight)/2,t=Math.max(0,e),n=Math.max(0,-e),o=Math.min(this.video.videoWidth,this.video.videoHeight);et(this.g,o,o),this.g.save(),i&&(this.g.translate(o,0),this.g.scale(-1,1)),this.g.drawImage(this.video,t,n,o,o,0,0,o,o),this.g.restore()}super.draw(e,t,n,i)}}let cf=null;if(!Object.prototype.hasOwnProperty.call(CanvasRenderingContext2D.prototype,"getTransform")&&Object.prototype.hasOwnProperty.call(CanvasRenderingContext2D.prototype,"mozCurrentTransform")){class e{constructor(e){this.a=e[0],this.b=e[1],this.c=e[2],this.d=e[3],this.e=e[4],this.f=e[5]}get is2D(){return!0}get isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}transformPoint(e){return{x:e.x*this.a+e.y*this.c+this.e,y:e.x*this.b+e.y*this.d+this.f}}}cf=t=>new e(t.mozCurrentTransform)}else cf=e=>e.getTransform();function nt(e){return cf(e)}const lf=1,uf=5,hf=5,df=["userMoved","userPositionNeeded"],Af=new tf,pf=new tf;Af.value=dA.value,pf.value=pA.value;class gf extends Sn{constructor(e,t,n,i){super(),this.id=e,this.pose=n,this.label=i?"(Me)":`(${this.id})`,this.setAvatarVideo(null),this.avatarImage=null,this.avatarEmoji=ru,this.audioMuted=!1,this.videoMuted=!0,this.isMe=i,this.isActive=!1,this.stackUserCount=1,this.stackIndex=0,this.stackAvatarHeight=0,this.stackAvatarWidth=0,this.stackOffsetX=0,this.stackOffsetY=0,this.lastPositionRequestTime=performance.now()/1e3-lf,this.visible=!0,this.userNameText=new tf,this.userNameText.color="white",this.userNameText.fontSize=128,this._displayName=null,this.displayName=t,Object.seal(this)}get x(){return this.pose.current.p.x}get y(){return this.pose.current.p.z}get gridX(){return this.pose.end.p.x}get gridY(){return this.pose.end.p.z}deserialize(e){switch(e.avatarMode){case Xg.emoji:this.avatarEmoji=e.avatarID;break;case Xg.photo:this.avatarImage=e.avatarID}}serialize(){return{id:this.id,avatarMode:this.avatarMode,avatarID:this.avatarID}}get avatarVideo(){return this._avatarVideo}setAvatarVideo(e){e instanceof MediaStream?this._avatarVideo=new af(e):this._avatarVideo=null}get avatarImage(){return this._avatarImage&&this._avatarImage.url||null}set avatarImage(e){o(e)&&e.length>0?this._avatarImage=new of(e):this._avatarImage=null}get avatarEmoji(){return this._avatarEmoji}set avatarEmoji(e){e&&e.value&&e.desc?this._avatarEmoji=new nf(e):this._avatarEmoji=null}get avatarMode(){return this._avatarVideo?Xg.video:this._avatarImage?Xg.photo:this._avatarEmoji?Xg.emoji:Xg.none}get avatarID(){switch(this.avatarMode){case Xg.emoji:return{value:this.avatarEmoji.value,desc:this.avatarEmoji.desc};case Xg.photo:return this.avatarImage;default:return null}}get avatar(){switch(this.avatarMode){case Xg.emoji:return this._avatarEmoji;case Xg.photo:return this._avatarImage;case Xg.video:return this._avatarVideo;default:return null}}addEventListener(e,t,n){if(-1===df.indexOf(e))throw new Error("Unrecognized event type: "+e);super.addEventListener(e,t,n)}get displayName(){return this._displayName||this.label}set displayName(e){this._displayName=e,this.userNameText.value=this.displayName}moveTo(e,t){this.isMe&&(this.moveEvent.x=e,this.moveEvent.y=t,this.dispatchEvent(this.moveEvent))}update(e,t){performance.now();this.stackUserCount=0,this.stackIndex=0;for(let e of t.values())e.gridX===this.gridX&&e.gridY===this.gridY&&(e.id===this.id&&(this.stackIndex=this.stackUserCount),++this.stackUserCount);this.stackAvatarWidth=e.tileWidth-(this.stackUserCount-1)*uf,this.stackAvatarHeight=e.tileHeight-(this.stackUserCount-1)*hf,this.stackOffsetX=this.stackIndex*uf,this.stackOffsetY=this.stackIndex*hf}drawShadow(e,t){const n=nt(e).a,i=this.x*t.tileWidth,o=this.y*t.tileHeight,r=nt(e).transformPoint({x:i,y:o});this.visible=-t.tileWidth<=r.x&&r.x<e.canvas.width&&-t.tileHeight<=r.y&&r.y<e.canvas.height,this.visible&&(e.save(),e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowOffsetX=3*n,e.shadowOffsetY=3*n,e.shadowBlur=3*n,this.innerDraw(e,t),e.restore())}drawAvatar(e,t){if(this.visible){if(e.save(),this.innerDraw(e,t),this.isActive&&!this.audioMuted){const t=this.stackAvatarHeight/2,n=nt(e).a;pf.fontSize=t,pf.scale=n,pf.draw(e,this.stackAvatarWidth-pf.width,0)}e.restore()}}innerDraw(e,t){if(e.translate(this.x*t.tileWidth+this.stackOffsetX,this.y*t.tileHeight+this.stackOffsetY),e.fillStyle="black",e.textBaseline="top",this.avatar&&this.avatar.draw(e,this.stackAvatarWidth,this.stackAvatarHeight,this.isMe),this.audioMuted||!this.videoMuted){const t=this.stackAvatarHeight/2,n=nt(e).a;this.audioMuted&&(Af.fontSize=t,Af.scale=n,Af.draw(e,this.stackAvatarWidth-Af.width,0))}}drawName(e,t,n){if(this.visible){const i=nt(e).a;e.save();{e.translate(this.x*t.tileWidth+this.stackOffsetX,this.y*t.tileHeight+this.stackOffsetY),e.shadowColor="black",e.shadowOffsetX=3*i,e.shadowOffsetY=3*i,e.shadowBlur=3*i;const o=n/this.userNameText.fontSize;e.scale(o,o),this.userNameText.draw(e,0,-this.userNameText.height)}e.restore()}}drawHearingTile(e,t,n,i,o){e.save(),e.translate((this.gridX+n)*t.tileWidth,(this.gridY+i)*t.tileHeight),e.strokeStyle=`rgba(0, 255, 0, ${(1-o)/2})`,e.strokeRect(0,0,t.tileWidth,t.tileHeight),e.restore()}drawHearingRange(e,t,n,i){const o=nt(e).a,r=Math.min(i,Math.ceil(e.canvas.width/(2*t.tileWidth*o))),s=Math.min(i,Math.ceil(e.canvas.height/(2*t.tileHeight*o)));for(let o=0;o<s;++o)for(let s=0;s<r;++s){const r=l(Math.sqrt(s*s+o*o),n,i);r<=1&&(this.drawHearingTile(e,t,s,o,r),0!=o&&this.drawHearingTile(e,t,s,-o,r),0!=s&&this.drawHearingTile(e,t,-s,o,r),0!=s&&0!=o&&this.drawHearingTile(e,t,-s,-o,r))}}}const ff=new Event("inputBindingChanged");class mf extends Sn{constructor(){super();const e=new Map([["keyButtonUp","ArrowUp"],["keyButtonDown","ArrowDown"],["keyButtonLeft","ArrowLeft"],["keyButtonRight","ArrowRight"],["keyButtonEmote","e"],["keyButtonToggleAudio","a"],["keyButtonZoomOut","["],["keyButtonZoomIn","]"],["gpAxisLeftRight",0],["gpAxisUpDown",1],["gpButtonEmote",0],["gpButtonToggleAudio",1],["gpButtonZoomIn",6],["gpButtonZoomOut",7],["gpButtonUp",12],["gpButtonDown",13],["gpButtonLeft",14],["gpButtonRight",15]]);for(let t of e.keys())Object.defineProperty(this,t,{get:()=>e.get(t),set:n=>{e.has(t)&&n!==e.get(t)&&(e.set(t,n),this.dispatchEvent(ff))}});this.clone=()=>{const t={};for(let n of e.entries())t[n[0]]=n[1];return t},Object.freeze(this)}}const vf=Ce("7em"),wf=Ce("3em"),yf=new Event("avatarURLChanged"),bf=new Event("gamepadChanged"),Cf=new Event("selectAvatar"),Df=new Event("fontSizeChanged"),xf=new Event("inputBindingChanged"),Sf=new Event("audioPropertiesChanged"),Ef=new Event("toggleDrawHearing"),Pf=new Event("toggleVideo"),Bf=Object.assign(new Event("gamepadbuttonup"),{button:0}),_f=Object.assign(new Event("gamepadaxismaxed"),{axis:0}),Mf=j(!0),kf=j(!1),Tf=new WeakMap;class If{constructor(){this.inputBinding=new mf,this.pad=null}}class Ff extends Mg{constructor(){super("options");const e=e=>()=>this.dispatchEvent(e),t=new If;Tf.set(this,t);const n=Pe(e(Sf)),i=(e,n)=>{const i=Ze(e,"text",n,vf,new lg("keyup",n=>{"Tab"!==n.key&&"Shift"!==n.key&&(i.value=t.inputBinding[e]=n.key,this.dispatchEvent(xf))},o));var o;return i.value=t.inputBinding[e],i},o=(e,n)=>{const i=Ze(e,"text",n,wf);return this.addEventListener("gamepadbuttonup",n=>{document.activeElement===i.input&&(i.value=t.inputBinding[e]=n.button,this.dispatchEvent(xf))}),i.value=t.inputBinding[e],i},r=(e,n)=>{const i=Ze(e,"text",n,wf);return this.addEventListener("gamepadaxismaxed",n=>{document.activeElement===i.input&&(i.value=t.inputBinding[e]=n.axis,this.dispatchEvent(xf))}),i.value=t.inputBinding[e],i},s=[Ke("avatar","Avatar",Ie(Ne(Q("selectAvatarEmoji"),"Emoji: "),ke(G("selectAvatarEmoji"),"Select",Se(e(Cf))))," or ",Ie(Ne(Q("setAvatarURL"),"Photo: "),this.avatarURLInput=Re(X("https://example.com/me.png")),ke(G("setAvatarURL"),"Set",Se(()=>{this.avatarURL=this.avatarURLInput.value,this.dispatchEvent(yf)})),this.clearAvatarURLButton=ke(j,"Clear",Se(()=>{this.avatarURL=null,this.dispatchEvent(yf)})))," or ",Ie(Ne(Q("videoAvatarButton"),"Video: "),this.useVideoAvatarButton=ke(G("videoAvatarButton"),"Use video",Se(e(Pf)))),this.avatarPreview=Te(te(256),U(256))),Ke("interface","Interface",this.fontSizeInput=Ze("fontSize","number","Font size: ",ee(10),V(5),q(32),wf,Pe(e(Df))),Qe(this.drawHearingCheck=Ze("drawHearing","checkbox","Draw hearing range: ",Pe(()=>{this.drawHearing=!this.drawHearing,this.dispatchEvent(Ef)})),this.audioMinInput=Ze("minAudio","number","Min: ",ee(1),V(0),q(100),wf,n),this.audioMaxInput=Ze("maxAudio","number","Min: ",ee(10),V(0),q(100),wf,n),this.audioRolloffInput=Ze("rollof","number","Rollof: ",ee(1),V(.1),q(10),Z(.1),wf,n))),Ke("keyboard","Keyboard",this.keyButtonUp=i("keyButtonUp","Up: "),this.keyButtonDown=i("keyButtonDown","Down: "),this.keyButtonLeft=i("keyButtonLeft","Left: "),this.keyButtonRight=i("keyButtonRight","Right: "),this.keyButtonEmote=i("keyButtonEmote","Emote: "),this.keyButtonToggleAudio=i("keyButtonToggleAudio","Toggle audio: ")),Ke("gamepad","Gamepad",Ie(Ne(Q("gamepads"),"Use gamepad: "),this.gpSelect=Ve("gamepads","No gamepad",e=>e.id,e=>e.id,Pe(e(bf)))),this.gpAxisLeftRight=r("gpAxisLeftRight","Left/Right axis:"),this.gpAxisUpDown=r("gpAxisUpDown","Up/Down axis:"),this.gpButtonUp=o("gpButtonUp","Up button: "),this.gpButtonDown=o("gpButtonDown","Down button: "),this.gpButtonLeft=o("gpButtonLeft","Left button: "),this.gpButtonRight=o("gpButtonRight","Right button: "),this.gpButtonEmote=o("gpButtonEmote","Emote button: "),this.gpButtonToggleAudio=o("gpButtonToggleAudio","Toggle audio button: "))],a=[];for(let e=0;e<s.length;++e)a[e]="1fr",s[e].element.style.gridColumnStart=e+1;Je(...a).apply(this.header),this.header.append(...s.map(e=>e.button)),this.content.append(...s.map(e=>e.element));const c=e=>()=>{for(let t=0;t<s.length;++t)s[t].visible=t===e};for(let e=0;e<s.length;++e)s[e].visible=0===e,s[e].addEventListener("select",c(e));t.inputBinding.addEventListener("inputBindingChanged",()=>{for(let e of Object.getOwnPropertyNames(t.inputBinding))void 0!==ee[e]&&null!=this[e]&&(this[e].value=ee[e])}),this.gamepads=[],this._drawHearing=!1,this.user=null,this._avatarG=this.avatarPreview.getContext("2d"),Object.seal(this)}update(){if(ne(this)){const e=this.currentGamepad;e&&(self.pad?self.pad.update(e):(self.pad=new Yg(e),self.pad.addEventListener("gamepadbuttonup",e=>{Bf.button=e.button,this.dispatchEvent(Bf)}),self.pad.addEventListener("gamepadaxismaxed",e=>{_f.axis=e.axis,this.dispatchEvent(_f)}))),this.user&&this.user.avatar&&(this._avatarG.clearRect(0,0,this.avatarPreview.width,this.avatarPreview.height),this.user.avatar.draw(this._avatarG,this.avatarPreview.width,this.avatarPreview.height,!0))}}get avatarURL(){return 0===this.avatarURLInput.value.length?null:this.avatarURLInput.value}set avatarURL(e){o(e)?(this.avatarURLInput.value=e,kf.apply(this.clearAvatarURLButton)):(this.avatarURLInput.value="",Mf.apply(this.clearAvatarURLButton))}setAvatarVideo(e){this.useVideoAvatarButton.innerHTML=null!==e?"Remove video":"Use video"}get inputBinding(){return Tf.get(this).inputBinding.clone()}set inputBinding(e){const t=Tf.get(this);for(let n of Object.getOwnPropertyNames(e))void 0!==t.inputBinding[n]&&void 0!==e[n]&&null!=this[n]&&(t.inputBinding[n]=this[n].value=e[n])}get gamepads(){return this.gpSelect.values}set gamepads(e){const t=0===e.length;this.gpSelect.values=e,ce(this.gpAxisLeftRight,t),ce(this.gpAxisUpDown,t),ce(this.gpButtonUp,t),ce(this.gpButtonDown,t),ce(this.gpButtonLeft,t),ce(this.gpButtonRight,t),ce(this.gpButtonEmote,t),ce(this.gpButtonToggleAudio,t)}get currentGamepadIndex(){return this.gpSelect.selectedIndex}get currentGamepad(){return this.currentGamepadIndex<0?null:navigator.getGamepads()[this.currentGamepadIndex]}get gamepadIndex(){return this.gpSelect.selectedIndex}set gamepadIndex(e){this.gpSelect.selectedIndex=e}get drawHearing(){return this._drawHearing}set drawHearing(e){this._drawHearing=e,this.drawHearingCheck.checked=e}get audioDistanceMin(){const e=parseFloat(this.audioMinInput.value);return a(e)?e:1}set audioDistanceMin(e){a(e)&&e>0&&(this.audioMinInput.value=e,this.audioDistanceMin>this.audioDistanceMax&&(this.audioDistanceMax=this.audioDistanceMin))}get audioDistanceMax(){const e=parseFloat(this.audioMaxInput.value);return a(e)?e:10}set audioDistanceMax(e){a(e)&&e>0&&(this.audioMaxInput.value=e,this.audioDistanceMin>this.audioDistanceMax&&(this.audioDistanceMin=this.audioDistanceMax))}get audioRolloff(){const e=parseFloat(this.audioRolloffInput.value);return a(e)?e:1}set audioRolloff(e){a(e)&&e>0&&(this.audioRolloffInput.value=e)}get fontSize(){const e=parseFloat(this.fontSizeInput.value);return a(e)?e:16}set fontSize(e){a(e)&&e>0&&(this.fontSizeInput.value=e)}}var it,ot=(Dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}Dn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),rt=function(e){function t(t,n){var i=this,o=this.constructor.prototype;return(i=e.call(this,t)||this).statusCode=n,i.__proto__=o,i}return ot(t,e),t}(Error),st=function(e){function t(t){void 0===t&&(t="A timeout occurred.");var n=this,i=this.constructor.prototype;return(n=e.call(this,t)||this).__proto__=i,n}return ot(t,e),t}(Error),at=function(e){function t(t){void 0===t&&(t="An abort occurred.");var n=this,i=this.constructor.prototype;return(n=e.call(this,t)||this).__proto__=i,n}return ot(t,e),t}(Error),ct=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lt=function(e,t,n){this.statusCode=e,this.statusText=t,this.content=n},ut=function(){function e(){}return e.prototype.get=function(e,t){return this.send(ct({},t,{method:"GET",url:e}))},e.prototype.post=function(e,t){return this.send(ct({},t,{method:"POST",url:e}))},e.prototype.delete=function(e,t){return this.send(ct({},t,{method:"DELETE",url:e}))},e.prototype.getCookieString=function(e){return""},e}();!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(it||(it={}));var ht=function(){function e(){}return e.prototype.log=function(e,t){},e.instance=new e,e}(),dt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((i=i.apply(e,t||[])).next())}))},At=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},pt=function(){function e(){}return e.isRequired=function(e,t){if(null==e)throw new Error("The '"+t+"' argument is required.")},e.isIn=function(e,t,n){if(!(e in t))throw new Error("Unknown "+n+" value: "+e+".")},e}(),gt=function(){function e(){}return Object.defineProperty(e,"isBrowser",{get:function(){return"object"==typeof window},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebWorker",{get:function(){return"object"==typeof self&&"importScripts"in self},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isNode",{get:function(){return!this.isBrowser&&!this.isWebWorker},enumerable:!0,configurable:!0}),e}();function ft(e,t){var n="";return mt(e)?(n="Binary data of length "+e.byteLength,t&&(n+=". Content: '"+function(e){var t=new Uint8Array(e),n="";return t.forEach((function(e){n+="0x"+(e<16?"0":"")+e.toString(16)+" "})),n.substr(0,n.length-1)}(e)+"'")):"string"==typeof e&&(n="String data of length "+e.length,t&&(n+=". Content: '"+e+"'")),n}function mt(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function vt(e,t,n,i,o,r,s){return dt(this,void 0,void 0,(function(){var a,c,l,u,h;return At(this,(function(d){switch(d.label){case 0:return o?[4,o()]:[3,2];case 1:(l=d.sent())&&((a={}).Authorization="Bearer "+l,c=a),d.label=2;case 2:return e.log(it.Trace,"("+t+" transport) sending data. "+ft(r,s)+"."),u=mt(r)?"arraybuffer":"text",[4,n.post(i,{content:r,headers:c,responseType:u})];case 3:return h=d.sent(),e.log(it.Trace,"("+t+" transport) request complete. Response status: "+h.statusCode+"."),[2]}}))}))}var wt,yt=function(){function e(e,t){this.subject=e,this.observer=t}return e.prototype.dispose=function(){var e=this.subject.observers.indexOf(this.observer);e>-1&&this.subject.observers.splice(e,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch((function(e){}))},e}(),bt=function(){function e(e){this.minimumLogLevel=e,this.outputConsole=console}return e.prototype.log=function(e,t){if(e>=this.minimumLogLevel)switch(e){case it.Critical:case it.Error:this.outputConsole.error("["+(new Date).toISOString()+"] "+it[e]+": "+t);break;case it.Warning:this.outputConsole.warn("["+(new Date).toISOString()+"] "+it[e]+": "+t);break;case it.Information:this.outputConsole.info("["+(new Date).toISOString()+"] "+it[e]+": "+t);break;default:this.outputConsole.log("["+(new Date).toISOString()+"] "+it[e]+": "+t)}},e}(),Ct=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Dt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};if("undefined"==typeof XMLHttpRequest){var xt="function"==typeof __webpack_require__?__non_webpack_require__:require;wt=xt("request")}var St,Et=function(e){function t(t){var n=e.call(this)||this;if(void 0===wt)throw new Error("The 'request' module could not be loaded.");return n.logger=t,n.cookieJar=wt.jar(),n.request=wt.defaults({jar:n.cookieJar}),n}return Ct(t,e),t.prototype.send=function(e){var t=this;return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new at):new Promise((function(n,i){var o;o=mt(e.content)?Buffer.from(e.content):e.content||"";var r=t.request(e.url,{body:o,encoding:"arraybuffer"===e.responseType?null:"utf8",headers:Dt({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,timeout:e.timeout},(function(o,r,s){if(e.abortSignal&&(e.abortSignal.onabort=null),o)return"ETIMEDOUT"===o.code&&(t.logger.log(it.Warning,"Timeout from HTTP request."),i(new st)),t.logger.log(it.Warning,"Error from HTTP request. "+o),void i(o);r.statusCode>=200&&r.statusCode<300?n(new lt(r.statusCode,r.statusMessage||"",s)):i(new rt(r.statusMessage||"",r.statusCode||0))}));e.abortSignal&&(e.abortSignal.onabort=function(){r.abort(),i(new at)})}))},t.prototype.getCookieString=function(e){return this.cookieJar.getCookieString(e)},t}(ut),Pt=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Bt=function(e){function t(t){var n=e.call(this)||this;return n.logger=t,n}return Pt(t,e),t.prototype.send=function(e){var t=this;return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new at):e.method?e.url?new Promise((function(n,i){var o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.withCredentials=!0,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var r=e.headers;r&&Object.keys(r).forEach((function(e){o.setRequestHeader(e,r[e])})),e.responseType&&(o.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=function(){o.abort(),i(new at)}),e.timeout&&(o.timeout=e.timeout),o.onload=function(){e.abortSignal&&(e.abortSignal.onabort=null),o.status>=200&&o.status<300?n(new lt(o.status,o.statusText,o.response||o.responseText)):i(new rt(o.statusText,o.status))},o.onerror=function(){t.logger.log(it.Warning,"Error from HTTP request. "+o.status+": "+o.statusText+"."),i(new rt(o.statusText,o.status))},o.ontimeout=function(){t.logger.log(it.Warning,"Timeout from HTTP request."),i(new st)},o.send(e.content||"")})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t}(ut),_t=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Mt=function(e){function t(t){var n=e.call(this)||this;return"undefined"!=typeof XMLHttpRequest?n.httpClient=new Bt(t):n.httpClient=new Et(t),n}return _t(t,e),t.prototype.send=function(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new at):e.method?e.url?this.httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t.prototype.getCookieString=function(e){return this.httpClient.getCookieString(e)},t}(ut),kt=function(){function e(){}return e.write=function(t){return""+t+e.RecordSeparator},e.parse=function(t){if(t[t.length-1]!==e.RecordSeparator)throw new Error("Message is incomplete.");var n=t.split(e.RecordSeparator);return n.pop(),n},e.RecordSeparatorCode=30,e.RecordSeparator=String.fromCharCode(e.RecordSeparatorCode),e}(),Tt=function(){function e(){}return e.prototype.writeHandshakeRequest=function(e){return kt.write(JSON.stringify(e))},e.prototype.parseHandshakeResponse=function(e){var t,n;if(mt(e)||"undefined"!=typeof Buffer&&e instanceof Buffer){var i=new Uint8Array(e);if(-1===(r=i.indexOf(kt.RecordSeparatorCode)))throw new Error("Message is incomplete.");var o=r+1;t=String.fromCharCode.apply(null,i.slice(0,o)),n=i.byteLength>o?i.slice(o).buffer:null}else{var r,s=e;if(-1===(r=s.indexOf(kt.RecordSeparator)))throw new Error("Message is incomplete.");o=r+1;t=s.substring(0,o),n=s.length>o?s.substring(o):null}var a=kt.parse(t),c=JSON.parse(a[0]);if(c.type)throw new Error("Expected a handshake response from the server.");return[n,c]},e}();!function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close"}(St||(St={}));var It,Ft=function(){function e(){this.observers=[]}return e.prototype.next=function(e){for(var t=0,n=this.observers;t<n.length;t++){n[t].next(e)}},e.prototype.error=function(e){for(var t=0,n=this.observers;t<n.length;t++){var i=n[t];i.error&&i.error(e)}},e.prototype.complete=function(){for(var e=0,t=this.observers;e<t.length;e++){var n=t[e];n.complete&&n.complete()}},e.prototype.subscribe=function(e){return this.observers.push(e),new yt(this,e)},e}(),Lt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((i=i.apply(e,t||[])).next())}))},Ot=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(It||(It={}));var Rt,Nt,Ht=function(){function e(e,t,n,i){var o=this;pt.isRequired(e,"connection"),pt.isRequired(t,"logger"),pt.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.logger=t,this.protocol=n,this.connection=e,this.reconnectPolicy=i,this.handshakeProtocol=new Tt,this.connection.onreceive=function(e){return o.processIncomingData(e)},this.connection.onclose=function(e){return o.connectionClosed(e)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.reconnectingCallbacks=[],this.reconnectedCallbacks=[],this.invocationId=0,this.receivedHandshakeResponse=!1,this.connectionState=It.Disconnected,this.connectionStarted=!1,this.cachedPingMessage=this.protocol.writeMessage({type:St.Ping})}return e.create=function(t,n,i,o){return new e(t,n,i,o)},Object.defineProperty(e.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectionId",{get:function(){return this.connection&&this.connection.connectionId||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this.connection.baseUrl||""},set:function(e){if(this.connectionState!==It.Disconnected&&this.connectionState!==It.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e},enumerable:!0,configurable:!0}),e.prototype.start=function(){return this.startPromise=this.startWithStateTransitions(),this.startPromise},e.prototype.startWithStateTransitions=function(){return Lt(this,void 0,void 0,(function(){var e;return Ot(this,(function(t){switch(t.label){case 0:if(this.connectionState!==It.Disconnected)return[2,Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."))];this.connectionState=It.Connecting,this.logger.log(it.Debug,"Starting HubConnection."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startInternal()];case 2:return t.sent(),this.connectionState=It.Connected,this.connectionStarted=!0,this.logger.log(it.Debug,"HubConnection connected successfully."),[3,4];case 3:return e=t.sent(),this.connectionState=It.Disconnected,this.logger.log(it.Debug,"HubConnection failed to start successfully because of error '"+e+"'."),[2,Promise.reject(e)];case 4:return[2]}}))}))},e.prototype.startInternal=function(){return Lt(this,void 0,void 0,(function(){var e,t,n,i=this;return Ot(this,(function(o){switch(o.label){case 0:return this.stopDuringStartError=void 0,this.receivedHandshakeResponse=!1,e=new Promise((function(e,t){i.handshakeResolver=e,i.handshakeRejecter=t})),[4,this.connection.start(this.protocol.transferFormat)];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,7]),t={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(it.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(t))];case 3:return o.sent(),this.logger.log(it.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,e];case 4:if(o.sent(),this.stopDuringStartError)throw this.stopDuringStartError;return[3,7];case 5:return n=o.sent(),this.logger.log(it.Debug,"Hub handshake failed with error '"+n+"' during start(). Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),[4,this.connection.stop(n)];case 6:throw o.sent(),n;case 7:return[2]}}))}))},e.prototype.stop=function(){return Lt(this,void 0,void 0,(function(){var e;return Ot(this,(function(t){switch(t.label){case 0:return e=this.startPromise,this.stopPromise=this.stopInternal(),[4,this.stopPromise];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,e];case 3:return t.sent(),[3,5];case 4:return t.sent(),[3,5];case 5:return[2]}}))}))},e.prototype.stopInternal=function(e){return this.connectionState===It.Disconnected?(this.logger.log(it.Debug,"Call to HubConnection.stop("+e+") ignored because it is already in the disconnected state."),Promise.resolve()):this.connectionState===It.Disconnecting?(this.logger.log(it.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnecting state."),this.stopPromise):(this.connectionState=It.Disconnecting,this.logger.log(it.Debug,"Stopping HubConnection."),this.reconnectDelayHandle?(this.logger.log(it.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this.reconnectDelayHandle),this.reconnectDelayHandle=void 0,this.completeClose(),Promise.resolve()):(this.cleanupTimeout(),this.cleanupPingTimer(),this.stopDuringStartError=e||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))},e.prototype.stream=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o,r=this.replaceStreamingParams(n),s=r[0],a=r[1],c=this.createStreamInvocation(e,n,a),l=new Ft;return l.cancelCallback=function(){var e=t.createCancelInvocation(c.invocationId);return delete t.callbacks[c.invocationId],o.then((function(){return t.sendWithProtocol(e)}))},this.callbacks[c.invocationId]=function(e,t){t?l.error(t):e&&(e.type===St.Completion?e.error?l.error(new Error(e.error)):l.complete():l.next(e.item))},o=this.sendWithProtocol(c).catch((function(e){l.error(e),delete t.callbacks[c.invocationId]})),this.launchStreams(s,o),l},e.prototype.sendMessage=function(e){return this.resetKeepAliveInterval(),this.connection.send(e)},e.prototype.sendWithProtocol=function(e){return this.sendMessage(this.protocol.writeMessage(e))},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this.replaceStreamingParams(t),o=i[0],r=i[1],s=this.sendWithProtocol(this.createInvocation(e,t,!0,r));return this.launchStreams(o,s),s},e.prototype.invoke=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this.replaceStreamingParams(n),r=o[0],s=o[1],a=this.createInvocation(e,n,!1,s),c=new Promise((function(e,n){t.callbacks[a.invocationId]=function(t,i){i?n(i):t&&(t.type===St.Completion?t.error?n(new Error(t.error)):e(t.result):n(new Error("Unexpected message type: "+t.type)))};var i=t.sendWithProtocol(a).catch((function(e){n(e),delete t.callbacks[a.invocationId]}));t.launchStreams(r,i)}));return c},e.prototype.on=function(e,t){e&&t&&(e=e.toLowerCase(),this.methods[e]||(this.methods[e]=[]),-1===this.methods[e].indexOf(t)&&this.methods[e].push(t))},e.prototype.off=function(e,t){if(e){e=e.toLowerCase();var n=this.methods[e];if(n)if(t){var i=n.indexOf(t);-1!==i&&(n.splice(i,1),0===n.length&&delete this.methods[e])}else delete this.methods[e]}},e.prototype.onclose=function(e){e&&this.closedCallbacks.push(e)},e.prototype.onreconnecting=function(e){e&&this.reconnectingCallbacks.push(e)},e.prototype.onreconnected=function(e){e&&this.reconnectedCallbacks.push(e)},e.prototype.processIncomingData=function(e){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(e=this.processHandshakeResponse(e),this.receivedHandshakeResponse=!0),e)for(var t=0,n=this.protocol.parseMessages(e,this.logger);t<n.length;t++){var i=n[t];switch(i.type){case St.Invocation:this.invokeClientMethod(i);break;case St.StreamItem:case St.Completion:var o=this.callbacks[i.invocationId];o&&(i.type===St.Completion&&delete this.callbacks[i.invocationId],o(i));break;case St.Ping:break;case St.Close:this.logger.log(it.Information,"Close message received from server.");var r=i.error?new Error("Server returned an error on close: "+i.error):void 0;!0===i.allowReconnect?this.connection.stop(r):this.stopPromise=this.stopInternal(r);break;default:this.logger.log(it.Warning,"Invalid message type: "+i.type+".")}}this.resetTimeoutPeriod()},e.prototype.processHandshakeResponse=function(e){var t,n,i;try{i=(t=this.handshakeProtocol.parseHandshakeResponse(e))[0],n=t[1]}catch(e){var o="Error parsing handshake response: "+e;this.logger.log(it.Error,o);var r=new Error(o);throw this.handshakeRejecter(r),r}if(n.error){o="Server returned handshake error: "+n.error;this.logger.log(it.Error,o);r=new Error(o);throw this.handshakeRejecter(r),r}return this.logger.log(it.Debug,"Server handshake complete."),this.handshakeResolver(),i},e.prototype.resetKeepAliveInterval=function(){var e=this;this.cleanupPingTimer(),this.pingServerHandle=setTimeout((function(){return Lt(e,void 0,void 0,(function(){return Ot(this,(function(e){switch(e.label){case 0:if(this.connectionState!==It.Connected)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}}))}))}),this.keepAliveIntervalInMilliseconds)},e.prototype.resetTimeoutPeriod=function(){var e=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout((function(){return e.serverTimeout()}),this.serverTimeoutInMilliseconds))},e.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},e.prototype.invokeClientMethod=function(e){var t=this,n=this.methods[e.target.toLowerCase()];if(n){try{n.forEach((function(n){return n.apply(t,e.arguments)}))}catch(t){this.logger.log(it.Error,"A callback for the method "+e.target.toLowerCase()+" threw error '"+t+"'.")}if(e.invocationId){var i="Server requested a response, which is not supported in this version of the client.";this.logger.log(it.Error,i),this.stopPromise=this.stopInternal(new Error(i))}}else this.logger.log(it.Warning,"No client method with the name '"+e.target+"' found.")},e.prototype.connectionClosed=function(e){this.logger.log(it.Debug,"HubConnection.connectionClosed("+e+") called while in state "+this.connectionState+"."),this.stopDuringStartError=this.stopDuringStartError||e||new Error("The underlying connection was closed before the hub handshake could complete."),this.handshakeResolver&&this.handshakeResolver(),this.cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this.cleanupTimeout(),this.cleanupPingTimer(),this.connectionState===It.Disconnecting?this.completeClose(e):this.connectionState===It.Connected&&this.reconnectPolicy?this.reconnect(e):this.connectionState===It.Connected&&this.completeClose(e)},e.prototype.completeClose=function(e){var t=this;if(this.connectionStarted){this.connectionState=It.Disconnected,this.connectionStarted=!1;try{this.closedCallbacks.forEach((function(n){return n.apply(t,[e])}))}catch(t){this.logger.log(it.Error,"An onclose callback called with error '"+e+"' threw error '"+t+"'.")}}},e.prototype.reconnect=function(e){return Lt(this,void 0,void 0,(function(){var t,n,i,o,r,s=this;return Ot(this,(function(a){switch(a.label){case 0:if(t=Date.now(),n=0,i=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),null===(o=this.getNextRetryDelay(n++,0,i)))return this.logger.log(it.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this.completeClose(e),[2];if(this.connectionState=It.Reconnecting,e?this.logger.log(it.Information,"Connection reconnecting because of error '"+e+"'."):this.logger.log(it.Information,"Connection reconnecting."),this.onreconnecting){try{this.reconnectingCallbacks.forEach((function(t){return t.apply(s,[e])}))}catch(t){this.logger.log(it.Error,"An onreconnecting callback called with error '"+e+"' threw error '"+t+"'.")}if(this.connectionState!==It.Reconnecting)return this.logger.log(it.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."),[2]}a.label=1;case 1:return null===o?[3,7]:(this.logger.log(it.Information,"Reconnect attempt number "+n+" will start in "+o+" ms."),[4,new Promise((function(e){s.reconnectDelayHandle=setTimeout(e,o)}))]);case 2:if(a.sent(),this.reconnectDelayHandle=void 0,this.connectionState!==It.Reconnecting)return this.logger.log(it.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."),[2];a.label=3;case 3:return a.trys.push([3,5,,6]),[4,this.startInternal()];case 4:if(a.sent(),this.connectionState=It.Connected,this.logger.log(it.Information,"HubConnection reconnected successfully."),this.onreconnected)try{this.reconnectedCallbacks.forEach((function(e){return e.apply(s,[s.connection.connectionId])}))}catch(e){this.logger.log(it.Error,"An onreconnected callback called with connectionId '"+this.connection.connectionId+"; threw error '"+e+"'.")}return[2];case 5:return r=a.sent(),this.logger.log(it.Information,"Reconnect attempt failed because of error '"+r+"'."),this.connectionState!==It.Reconnecting?(this.logger.log(it.Debug,"Connection left the reconnecting state during reconnect attempt. Done reconnecting."),[2]):(i=r instanceof Error?r:new Error(r.toString()),o=this.getNextRetryDelay(n++,Date.now()-t,i),[3,6]);case 6:return[3,1];case 7:return this.logger.log(it.Information,"Reconnect retries have been exhausted after "+(Date.now()-t)+" ms and "+n+" failed attempts. Connection disconnecting."),this.completeClose(),[2]}}))}))},e.prototype.getNextRetryDelay=function(e,t,n){try{return this.reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(n){return this.logger.log(it.Error,"IRetryPolicy.nextRetryDelayInMilliseconds("+e+", "+t+") threw error '"+n+"'."),null}},e.prototype.cancelCallbacksWithError=function(e){var t=this.callbacks;this.callbacks={},Object.keys(t).forEach((function(n){(0,t[n])(null,e)}))},e.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},e.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},e.prototype.createInvocation=function(e,t,n,i){if(n)return{arguments:t,streamIds:i,target:e,type:St.Invocation};var o=this.invocationId;return this.invocationId++,{arguments:t,invocationId:o.toString(),streamIds:i,target:e,type:St.Invocation}},e.prototype.launchStreams=function(e,t){var n=this;if(0!==e.length){t||(t=Promise.resolve());var i=function(i){e[i].subscribe({complete:function(){t=t.then((function(){return n.sendWithProtocol(n.createCompletionMessage(i))}))},error:function(e){var o;o=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then((function(){return n.sendWithProtocol(n.createCompletionMessage(i,o))}))},next:function(e){t=t.then((function(){return n.sendWithProtocol(n.createStreamItemMessage(i,e))}))}})};for(var o in e)i(o)}},e.prototype.replaceStreamingParams=function(e){for(var t=[],n=[],i=0;i<e.length;i++){var o=e[i];if(this.isObservable(o)){var r=this.invocationId;this.invocationId++,t[r]=o,n.push(r.toString()),e.splice(i,1)}}return[t,n]},e.prototype.isObservable=function(e){return e&&e.subscribe&&"function"==typeof e.subscribe},e.prototype.createStreamInvocation=function(e,t,n){var i=this.invocationId;return this.invocationId++,{arguments:t,invocationId:i.toString(),streamIds:n,target:e,type:St.StreamInvocation}},e.prototype.createCancelInvocation=function(e){return{invocationId:e,type:St.CancelInvocation}},e.prototype.createStreamItemMessage=function(e,t){return{invocationId:e,item:t,type:St.StreamItem}},e.prototype.createCompletionMessage=function(e,t,n){return t?{error:t,invocationId:e,type:St.Completion}:{invocationId:e,result:n,type:St.Completion}},e}(),jt=[0,2e3,1e4,3e4,null],Qt=function(){function e(e){this.retryDelays=void 0!==e?e.concat([null]):jt}return e.prototype.nextRetryDelayInMilliseconds=function(e){return this.retryDelays[e.previousRetryCount]},e}();!function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}(Rt||(Rt={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(Nt||(Nt={}));var zt=function(){function e(){this.isAborted=!1,this.onabort=null}return e.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(e.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),e}(),Ut=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((i=i.apply(e,t||[])).next())}))},Wt=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},Gt=function(){function e(e,t,n,i){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.pollAbort=new zt,this.logMessageContent=i,this.running=!1,this.onreceive=null,this.onclose=null}return Object.defineProperty(e.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),e.prototype.connect=function(e,t){return Ut(this,void 0,void 0,(function(){var n,i,o,r;return Wt(this,(function(s){switch(s.label){case 0:if(pt.isRequired(e,"url"),pt.isRequired(t,"transferFormat"),pt.isIn(t,Nt,"transferFormat"),this.url=e,this.logger.log(it.Trace,"(LongPolling transport) Connecting."),t===Nt.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return n={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},t===Nt.Binary&&(n.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return i=s.sent(),this.updateHeaderToken(n,i),o=e+"&_="+Date.now(),this.logger.log(it.Trace,"(LongPolling transport) polling: "+o+"."),[4,this.httpClient.get(o,n)];case 2:return 200!==(r=s.sent()).statusCode?(this.logger.log(it.Error,"(LongPolling transport) Unexpected response code: "+r.statusCode+"."),this.closeError=new rt(r.statusText||"",r.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,n),[2]}}))}))},e.prototype.getAccessToken=function(){return Ut(this,void 0,void 0,(function(){return Wt(this,(function(e){switch(e.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,null]}}))}))},e.prototype.updateHeaderToken=function(e,t){e.headers||(e.headers={}),t?e.headers.Authorization="Bearer "+t:e.headers.Authorization&&delete e.headers.Authorization},e.prototype.poll=function(e,t){return Ut(this,void 0,void 0,(function(){var n,i,o,r;return Wt(this,(function(s){switch(s.label){case 0:s.trys.push([0,,8,9]),s.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:n=s.sent(),this.updateHeaderToken(t,n),s.label=3;case 3:return s.trys.push([3,5,,6]),i=e+"&_="+Date.now(),this.logger.log(it.Trace,"(LongPolling transport) polling: "+i+"."),[4,this.httpClient.get(i,t)];case 4:return 204===(o=s.sent()).statusCode?(this.logger.log(it.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==o.statusCode?(this.logger.log(it.Error,"(LongPolling transport) Unexpected response code: "+o.statusCode+"."),this.closeError=new rt(o.statusText||"",o.statusCode),this.running=!1):o.content?(this.logger.log(it.Trace,"(LongPolling transport) data received. "+ft(o.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(o.content)):this.logger.log(it.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return r=s.sent(),this.running?r instanceof st?this.logger.log(it.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=r,this.running=!1):this.logger.log(it.Trace,"(LongPolling transport) Poll errored after shutdown: "+r.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(it.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}}))}))},e.prototype.send=function(e){return Ut(this,void 0,void 0,(function(){return Wt(this,(function(t){return this.running?[2,vt(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},e.prototype.stop=function(){return Ut(this,void 0,void 0,(function(){var e,t;return Wt(this,(function(n){switch(n.label){case 0:this.logger.log(it.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),n.label=1;case 1:return n.trys.push([1,,5,6]),[4,this.receiving];case 2:return n.sent(),this.logger.log(it.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),e={headers:{}},[4,this.getAccessToken()];case 3:return t=n.sent(),this.updateHeaderToken(e,t),[4,this.httpClient.delete(this.url,e)];case 4:return n.sent(),this.logger.log(it.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(it.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}}))}))},e.prototype.raiseOnClose=function(){if(this.onclose){var e="(LongPolling transport) Firing onclose event.";this.closeError&&(e+=" Error: "+this.closeError),this.logger.log(it.Trace,e),this.onclose(this.closeError)}},e}(),qt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((i=i.apply(e,t||[])).next())}))},Vt=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},Yt=function(){function e(e,t,n,i,o){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.logMessageContent=i,this.eventSourceConstructor=o,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return qt(this,void 0,void 0,(function(){var n,i=this;return Vt(this,(function(o){switch(o.label){case 0:return pt.isRequired(e,"url"),pt.isRequired(t,"transferFormat"),pt.isIn(t,Nt,"transferFormat"),this.logger.log(it.Trace,"(SSE transport) Connecting."),this.url=e,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=o.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),o.label=2;case 2:return[2,new Promise((function(n,o){var r=!1;if(t===Nt.Text){var s;if(gt.isBrowser||gt.isWebWorker)s=new i.eventSourceConstructor(e,{withCredentials:!0});else{var a=i.httpClient.getCookieString(e);s=new i.eventSourceConstructor(e,{withCredentials:!0,headers:{Cookie:a}})}try{s.onmessage=function(e){if(i.onreceive)try{i.logger.log(it.Trace,"(SSE transport) data received. "+ft(e.data,i.logMessageContent)+"."),i.onreceive(e.data)}catch(e){return void i.close(e)}},s.onerror=function(e){var t=new Error(e.data||"Error occurred");r?i.close(t):o(t)},s.onopen=function(){i.logger.log(it.Information,"SSE connected to "+i.url),i.eventSource=s,r=!0,n()}}catch(e){return void o(e)}}else o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))]}}))}))},e.prototype.send=function(e){return qt(this,void 0,void 0,(function(){return Vt(this,(function(t){return this.eventSource?[2,vt(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},e.prototype.stop=function(){return this.close(),Promise.resolve()},e.prototype.close=function(e){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(e))},e}(),Xt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((i=i.apply(e,t||[])).next())}))},Jt=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},Zt=function(){function e(e,t,n,i,o){this.logger=n,this.accessTokenFactory=t,this.logMessageContent=i,this.webSocketConstructor=o,this.httpClient=e,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return Xt(this,void 0,void 0,(function(){var n,i=this;return Jt(this,(function(o){switch(o.label){case 0:return pt.isRequired(e,"url"),pt.isRequired(t,"transferFormat"),pt.isIn(t,Nt,"transferFormat"),this.logger.log(it.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=o.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),o.label=2;case 2:return[2,new Promise((function(n,o){var r;e=e.replace(/^http/,"ws");var s=i.httpClient.getCookieString(e),a=!1;gt.isNode&&s&&(r=new i.webSocketConstructor(e,void 0,{headers:{Cookie:""+s}})),r||(r=new i.webSocketConstructor(e)),t===Nt.Binary&&(r.binaryType="arraybuffer"),r.onopen=function(t){i.logger.log(it.Information,"WebSocket connected to "+e+"."),i.webSocket=r,a=!0,n()},r.onerror=function(e){var t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:new Error("There was an error with the transport."),o(t)},r.onmessage=function(e){i.logger.log(it.Trace,"(WebSockets transport) data received. "+ft(e.data,i.logMessageContent)+"."),i.onreceive&&i.onreceive(e.data)},r.onclose=function(e){if(a)i.close(e);else{var t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:new Error("There was an error with the transport."),o(t)}}}))]}}))}))},e.prototype.send=function(e){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(it.Trace,"(WebSockets transport) sending data. "+ft(e,this.logMessageContent)+"."),this.webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},e.prototype.stop=function(){return this.webSocket&&this.close(void 0),Promise.resolve()},e.prototype.close=function(e){this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0),this.logger.log(it.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!e||!1!==e.wasClean&&1e3===e.code?this.onclose():this.onclose(new Error("WebSocket closed with status code: "+e.code+" ("+e.reason+").")))},e}(),Kt=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((i=i.apply(e,t||[])).next())}))},$t=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},en=null,tn=null;if(gt.isNode&&"undefined"!=typeof require){var nn="function"==typeof __webpack_require__?__non_webpack_require__:require;en=nn("ws"),tn=nn("eventsource")}var on=function(){function e(e,t){void 0===t&&(t={}),this.features={},this.negotiateVersion=1,pt.isRequired(e,"url"),this.logger=function(e){return void 0===e?new bt(it.Information):null===e?ht.instance:e.log?e:new bt(e)}(t.logger),this.baseUrl=this.resolveUrl(e),(t=t||{}).logMessageContent=t.logMessageContent||!1,gt.isNode||"undefined"==typeof WebSocket||t.WebSocket?gt.isNode&&!t.WebSocket&&en&&(t.WebSocket=en):t.WebSocket=WebSocket,gt.isNode||"undefined"==typeof EventSource||t.EventSource?gt.isNode&&!t.EventSource&&void 0!==tn&&(t.EventSource=tn):t.EventSource=EventSource,this.httpClient=t.httpClient||new Mt(this.logger),this.connectionState="Disconnected",this.connectionStarted=!1,this.options=t,this.onreceive=null,this.onclose=null}return e.prototype.start=function(e){return Kt(this,void 0,void 0,(function(){var t;return $t(this,(function(n){switch(n.label){case 0:return e=e||Nt.Binary,pt.isIn(e,Nt,"transferFormat"),this.logger.log(it.Debug,"Starting connection with transfer format '"+Nt[e]+"'."),"Disconnected"!==this.connectionState?[2,Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."))]:(this.connectionState="Connecting ",this.startInternalPromise=this.startInternal(e),[4,this.startInternalPromise]);case 1:return n.sent(),"Disconnecting"!==this.connectionState?[3,3]:(t="Failed to start the HttpConnection before stop() was called.",this.logger.log(it.Error,t),[4,this.stopPromise]);case 2:return n.sent(),[2,Promise.reject(new Error(t))];case 3:if("Connected"!==this.connectionState)return t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",this.logger.log(it.Error,t),[2,Promise.reject(new Error(t))];n.label=4;case 4:return this.connectionStarted=!0,[2]}}))}))},e.prototype.send=function(e){return"Connected"!==this.connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this.sendQueue||(this.sendQueue=new rn(this.transport)),this.sendQueue.send(e))},e.prototype.stop=function(e){return Kt(this,void 0,void 0,(function(){var t=this;return $t(this,(function(n){switch(n.label){case 0:return"Disconnected"===this.connectionState?(this.logger.log(it.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnected state."),[2,Promise.resolve()]):"Disconnecting"===this.connectionState?(this.logger.log(it.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnecting state."),[2,this.stopPromise]):(this.connectionState="Disconnecting",this.stopPromise=new Promise((function(e){t.stopPromiseResolver=e})),[4,this.stopInternal(e)]);case 1:return n.sent(),[4,this.stopPromise];case 2:return n.sent(),[2]}}))}))},e.prototype.stopInternal=function(e){return Kt(this,void 0,void 0,(function(){var t;return $t(this,(function(n){switch(n.label){case 0:this.stopError=e,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.startInternalPromise];case 2:return n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:if(!this.transport)return[3,9];n.label=5;case 5:return n.trys.push([5,7,,8]),[4,this.transport.stop()];case 6:return n.sent(),[3,8];case 7:return t=n.sent(),this.logger.log(it.Error,"HttpConnection.transport.stop() threw error '"+t+"'."),this.stopConnection(),[3,8];case 8:return this.transport=void 0,[3,10];case 9:this.logger.log(it.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed."),this.stopConnection(),n.label=10;case 10:return[2]}}))}))},e.prototype.startInternal=function(e){return Kt(this,void 0,void 0,(function(){var t,n,i,o,r,s;return $t(this,(function(a){switch(a.label){case 0:t=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,a.label=1;case 1:return a.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==Rt.WebSockets?[3,3]:(this.transport=this.constructTransport(Rt.WebSockets),[4,this.startTransport(t,e)]):[3,5];case 2:return a.sent(),[3,4];case 3:throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:n=null,i=0,o=function(){var e;return $t(this,(function(o){switch(o.label){case 0:return[4,r.getNegotiationResponse(t)];case 1:if(n=o.sent(),"Disconnecting"===r.connectionState||"Disconnected"===r.connectionState)throw new Error("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return n.url&&(t=n.url),n.accessToken&&(e=n.accessToken,r.accessTokenFactory=function(){return e}),i++,[2]}}))},r=this,a.label=6;case 6:return[5,o()];case 7:a.sent(),a.label=8;case 8:if(n.url&&i<100)return[3,6];a.label=9;case 9:if(100===i&&n.url)throw new Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(t,this.options.transport,n,e)];case 10:a.sent(),a.label=11;case 11:return this.transport instanceof Gt&&(this.features.inherentKeepAlive=!0),"Connecting "===this.connectionState&&(this.logger.log(it.Debug,"The HttpConnection connected successfully."),this.connectionState="Connected"),[3,13];case 12:return s=a.sent(),this.logger.log(it.Error,"Failed to start the connection: "+s),this.connectionState="Disconnected",this.transport=void 0,[2,Promise.reject(s)];case 13:return[2]}}))}))},e.prototype.getNegotiationResponse=function(e){return Kt(this,void 0,void 0,(function(){var t,n,i,o,r,s,a;return $t(this,(function(c){switch(c.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(i=c.sent())&&((t={}).Authorization="Bearer "+i,n=t),c.label=2;case 2:o=this.resolveNegotiateUrl(e),this.logger.log(it.Debug,"Sending negotiation request: "+o+"."),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,this.httpClient.post(o,{content:"",headers:n})];case 4:return 200!==(r=c.sent()).statusCode?[2,Promise.reject(new Error("Unexpected status code returned from negotiate "+r.statusCode))]:((!(s=JSON.parse(r.content)).negotiateVersion||s.negotiateVersion<1)&&(s.connectionToken=s.connectionId),[2,s]);case 5:return a=c.sent(),this.logger.log(it.Error,"Failed to complete negotiation with the server: "+a),[2,Promise.reject(a)];case 6:return[2]}}))}))},e.prototype.createConnectUrl=function(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+"id="+t:e},e.prototype.createTransport=function(e,t,n,i){return Kt(this,void 0,void 0,(function(){var o,r,s,a,c,l,u,h,d,A,p;return $t(this,(function(g){switch(g.label){case 0:return o=this.createConnectUrl(e,n.connectionToken),this.isITransport(t)?(this.logger.log(it.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,[4,this.startTransport(o,i)]):[3,2];case 1:return g.sent(),this.connectionId=n.connectionId,[2];case 2:r=[],s=n.availableTransports||[],a=n,c=0,l=s,g.label=3;case 3:return c<l.length?(u=l[c],(h=this.resolveTransportOrError(u,t,i))instanceof Error?(r.push(u.transport+" failed: "+h),[3,12]):[3,4]):[3,13];case 4:if(!this.isITransport(h))return[3,12];if(this.transport=h,a)return[3,9];g.label=5;case 5:return g.trys.push([5,7,,8]),[4,this.getNegotiationResponse(e)];case 6:return a=g.sent(),[3,8];case 7:return d=g.sent(),[2,Promise.reject(d)];case 8:o=this.createConnectUrl(e,a.connectionToken),g.label=9;case 9:return g.trys.push([9,11,,12]),[4,this.startTransport(o,i)];case 10:return g.sent(),this.connectionId=a.connectionId,[2];case 11:return A=g.sent(),this.logger.log(it.Error,"Failed to start the transport '"+u.transport+"': "+A),a=void 0,r.push(u.transport+" failed: "+A),"Connecting "!==this.connectionState?(p="Failed to select transport before stop() was called.",this.logger.log(it.Debug,p),[2,Promise.reject(new Error(p))]):[3,12];case 12:return c++,[3,3];case 13:return r.length>0?[2,Promise.reject(new Error("Unable to connect to the server with any of the available transports. "+r.join(" ")))]:[2,Promise.reject(new Error("None of the transports supported by the client are supported by the server."))]}}))}))},e.prototype.constructTransport=function(e){switch(e){case Rt.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Zt(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case Rt.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Yt(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case Rt.LongPolling:return new Gt(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+e+".")}},e.prototype.startTransport=function(e,t){var n=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return n.stopConnection(e)},this.transport.connect(e,t)},e.prototype.resolveTransportOrError=function(e,t,n){var i=Rt[e.transport];if(null==i)return this.logger.log(it.Debug,"Skipping transport '"+e.transport+"' because it is not supported by this client."),new Error("Skipping transport '"+e.transport+"' because it is not supported by this client.");if(!function(e,t){return!e||0!=(t&e)}(t,i))return this.logger.log(it.Debug,"Skipping transport '"+Rt[i]+"' because it was disabled by the client."),new Error("'"+Rt[i]+"' is disabled by the client.");if(!(e.transferFormats.map((function(e){return Nt[e]})).indexOf(n)>=0))return this.logger.log(it.Debug,"Skipping transport '"+Rt[i]+"' because it does not support the requested transfer format '"+Nt[n]+"'."),new Error("'"+Rt[i]+"' does not support "+Nt[n]+".");if(i===Rt.WebSockets&&!this.options.WebSocket||i===Rt.ServerSentEvents&&!this.options.EventSource)return this.logger.log(it.Debug,"Skipping transport '"+Rt[i]+"' because it is not supported in your environment.'"),new Error("'"+Rt[i]+"' is not supported in your environment.");this.logger.log(it.Debug,"Selecting transport '"+Rt[i]+"'.");try{return this.constructTransport(i)}catch(e){return e}},e.prototype.isITransport=function(e){return e&&"object"==typeof e&&"connect"in e},e.prototype.stopConnection=function(e){var t=this;if(this.logger.log(it.Debug,"HttpConnection.stopConnection("+e+") called while in state "+this.connectionState+"."),this.transport=void 0,e=this.stopError||e,this.stopError=void 0,"Disconnected"!==this.connectionState)if("Connecting "!==this.connectionState){if("Disconnecting"===this.connectionState&&this.stopPromiseResolver(),e?this.logger.log(it.Error,"Connection disconnected with error '"+e+"'."):this.logger.log(it.Information,"Connection disconnected."),this.sendQueue&&(this.sendQueue.stop().catch((function(e){t.logger.log(it.Error,"TransportSendQueue.stop() threw error '"+e+"'.")})),this.sendQueue=void 0),this.connectionId=void 0,this.connectionState="Disconnected",this.connectionStarted){this.connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this.logger.log(it.Error,"HttpConnection.onclose("+e+") threw error '"+t+"'.")}}}else this.logger.log(it.Warning,"Call to HttpConnection.stopConnection("+e+") was ignored because the connection hasn't yet left the in the connecting state.");else this.logger.log(it.Debug,"Call to HttpConnection.stopConnection("+e+") was ignored because the connection is already in the disconnected state.")},e.prototype.resolveUrl=function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!gt.isBrowser||!window.document)throw new Error("Cannot resolve '"+e+"'.");var t=window.document.createElement("a");return t.href=e,this.logger.log(it.Information,"Normalizing '"+e+"' to '"+t.href+"'."),t.href},e.prototype.resolveNegotiateUrl=function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",-1===(n+=-1===t?"":e.substring(t)).indexOf("negotiateVersion")&&(n+=-1===t?"?":"&",n+="negotiateVersion="+this.negotiateVersion),n},e}();var rn=function(){function e(e){this.transport=e,this.buffer=[],this.executing=!0,this.sendBufferedData=new sn,this.transportResult=new sn,this.sendLoopPromise=this.sendLoop()}return e.prototype.send=function(e){return this.bufferData(e),this.transportResult||(this.transportResult=new sn),this.transportResult.promise},e.prototype.stop=function(){return this.executing=!1,this.sendBufferedData.resolve(),this.sendLoopPromise},e.prototype.bufferData=function(e){if(this.buffer.length&&typeof this.buffer[0]!=typeof e)throw new Error("Expected data to be of type "+typeof this.buffer+" but was of type "+typeof e);this.buffer.push(e),this.sendBufferedData.resolve()},e.prototype.sendLoop=function(){return Kt(this,void 0,void 0,(function(){var t,n,i;return $t(this,(function(o){switch(o.label){case 0:return[4,this.sendBufferedData.promise];case 1:if(o.sent(),!this.executing)return this.transportResult&&this.transportResult.reject("Connection stopped."),[3,6];this.sendBufferedData=new sn,t=this.transportResult,this.transportResult=void 0,n="string"==typeof this.buffer[0]?this.buffer.join(""):e.concatBuffers(this.buffer),this.buffer.length=0,o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.transport.send(n)];case 3:return o.sent(),t.resolve(),[3,5];case 4:return i=o.sent(),t.reject(i),[3,5];case 5:return[3,0];case 6:return[2]}}))}))},e.concatBuffers=function(e){for(var t=e.map((function(e){return e.byteLength})).reduce((function(e,t){return e+t})),n=new Uint8Array(t),i=0,o=0,r=e;o<r.length;o++){var s=r[o];n.set(new Uint8Array(s),i),i+=s.byteLength}return n},e}(),sn=function(){function e(){var e=this;this.promise=new Promise((function(t,n){var i;return i=[t,n],e.resolver=i[0],e.rejecter=i[1],i}))}return e.prototype.resolve=function(){this.resolver()},e.prototype.reject=function(e){this.rejecter(e)},e}(),an=function(){function e(){this.name="json",this.version=1,this.transferFormat=Nt.Text}return e.prototype.parseMessages=function(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=ht.instance);for(var n=[],i=0,o=kt.parse(e);i<o.length;i++){var r=o[i],s=JSON.parse(r);if("number"!=typeof s.type)throw new Error("Invalid payload.");switch(s.type){case St.Invocation:this.isInvocationMessage(s);break;case St.StreamItem:this.isStreamItemMessage(s);break;case St.Completion:this.isCompletionMessage(s);break;case St.Ping:case St.Close:break;default:t.log(it.Information,"Unknown message type '"+s.type+"' ignored.");continue}n.push(s)}return n},e.prototype.writeMessage=function(e){return kt.write(JSON.stringify(e))},e.prototype.isInvocationMessage=function(e){this.assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this.assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")},e.prototype.isStreamItemMessage=function(e){if(this.assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")},e.prototype.isCompletionMessage=function(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this.assertNotEmptyString(e.error,"Invalid payload for Completion message."),this.assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")},e.prototype.assertNotEmptyString=function(e,t){if("string"!=typeof e||""===e)throw new Error(t)},e}(),cn=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ln={trace:it.Trace,debug:it.Debug,info:it.Information,information:it.Information,warn:it.Warning,warning:it.Warning,error:it.Error,critical:it.Critical,none:it.None};var un=function(){function e(){}return e.prototype.configureLogging=function(e){if(pt.isRequired(e,"logging"),function(e){return void 0!==e.log}(e))this.logger=e;else if("string"==typeof e){var t=function(e){var t=ln[e.toLowerCase()];if(void 0!==t)return t;throw new Error("Unknown log level: "+e)}(e);this.logger=new bt(t)}else this.logger=new bt(e);return this},e.prototype.withUrl=function(e,t){return pt.isRequired(e,"url"),this.url=e,this.httpConnectionOptions=cn({},this.httpConnectionOptions,"object"==typeof t?t:{transport:t}),this},e.prototype.withHubProtocol=function(e){return pt.isRequired(e,"protocol"),this.protocol=e,this},e.prototype.withAutomaticReconnect=function(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Qt(e):this.reconnectPolicy=e:this.reconnectPolicy=new Qt,this},e.prototype.build=function(){var e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var t=new on(this.url,e);return Ht.create(t,this.logger||ht.instance,this.protocol||new an,this.reconnectPolicy)},e}();const Lf=we("lightgreen"),Of=we("rgba(65, 255, 202, 0.25)"),Rf=we("transparent"),Nf=Object.assign(new Event("warpTo"),{id:null}),Hf=new Event("chatFocusChanged"),jf=3e3;class Qf extends Mg{constructor(){super("users"),this.roomName=null,this.userName=null,this.chatFocused=!1,this.usersList=Ie(G("chatUsers")),this.messages=Ie(G("chatMessages")),this.rows=new Map,this.users=new Map,this.avatarGs=new Map,this.chat=(new un).withUrl("/Chat").build();let e=null;this.chat.on("ReceiveMessage",(t,n,i)=>{n!==e&&(e=n,n=""),this.messages.append(Ie(n),Ie(i)),this.messages.lastChild.scrollIntoView()});const t=async()=>{this.entry.value.length>0&&(this.send.disabled=this.entry.disabled=!0,await this.chat.invoke("SendMessage",this.roomName,this.userName,this.entry.value),this.entry.value="",this.entry.disabled=this.send.disabled=!1,this.entry.focus())},n=()=>this.dispatchEvent(Hf);var i;this.entry=Oe(G("chatEntry"),j,Ee(()=>this.chatFocused=!0),Ee(n),xe(()=>this.chatFocused=!1),xe(n),new lg("keypress",e=>{"Enter"===e.key&&t()},i)),this.send=ke(G("chatSend"),j,Se(t)),Object.seal(this)}async startAsync(e,t){this.roomName=e,this.userName=t,await this.chat.start(),await this.chat.invoke("Join",this.roomName),this.entry.disabled=this.send.disabled=!1}update(){if(ne(this))for(let e of this.users.entries()){const[t,n]=e;if(this.avatarGs.has(t)&&n.avatar){const e=this.avatarGs.get(t);e.clearRect(0,0,e.canvas.width,e.canvas.height),n.avatar.draw(e,e.canvas.width,e.canvas.height)}}}set(e){const t=!this.rows.has(e.id);this.delete(e.id);const n=this.rows.size+1;if(t){const t=Ie(Ye(1,n,2,1),De(-1),Lf);setTimeout(()=>{this.usersList.removeChild(t)},jf),this.usersList.append(t),this.users.set(e.id,e),this.avatarGs.set(e.id,Te(te(32),U(32)).getContext("2d"))}const i=this.avatarGs.get(e.id).canvas,o=[Ie(Ye(1,n),De(0),i),Ie(Ye(2,n),De(0),e.displayName),Ie(Ye(1,n,2,1),De(1),Rf,(r=function(){Of.apply(this)},new lg("mouseover",r,s)),Be((function(){Rf.apply(this)})),Se(()=>{ae(this),Nf.id=e.id,this.dispatchEvent(Nf)}))];var r,s;this.rows.set(e.id,o),this.usersList.append(...o)}delete(e){if(this.rows.has(e)){const t=this.rows.get(e);this.rows.delete(e);for(let e of t)this.usersList.removeChild(e);let n=1;for(let e of this.rows.values()){const t=Xe(n++);for(let n of e)t.apply(n)}}}clear(){for(let e of this.rows.keys())this.delete(e)}warn(...e){const t=Ie(Ye(1,this.rows.size+1,2,1),we("yellow"),...e.map(e=>e.toString()));this.usersList.append(t),setTimeout(()=>{this.usersList.removeChild(t)},5e3)}}class zf extends Event{constructor(e){super(e),this.pointerType=null,this.x=0,this.y=0,this.dx=0,this.dy=0,this.dz=0,this.u=0,this.v=0,this.du=0,this.dv=0,this.buttons=0,this.dragDistance=0,Object.seal(this)}}class Uf extends Event{constructor(e){super("inputtypechanging"),this.newInputType=e,Object.freeze(this)}}class Wf{constructor(e){this.type=e.pointerType,this.id=e.pointerId,this.buttons=e.buttons,this.moveDistance=0,this.dragDistance=0,this.x=e.offsetX,this.y=e.offsetY,this.dx=e.movementX,this.dy=e.movementY,Object.seal(this)}}const Gf=5,qf=new zf("click"),Vf=new zf("move"),Yf=new zf("drag");class Xf extends Sn{constructor(e){super(),this.pointerLockElement=e,this.pointers=new Map,this.currentInputType=null;let t=!0;function n(t,n){t.pointerType=n.type,t.buttons=n.buttons,t.x=n.x,t.y=n.y,t.dx=n.dx,t.dy=n.dy,t.dz=0,t.u=2*t.x/e.clientWidth-1,t.v=-2*t.y/e.clientHeight+1,t.du=2*t.dx/e.clientWidth,t.dv=-2*t.dy/e.clientHeight,t.dragDistance=n.dragDistance}const i=e=>{const t=this.pointers.get(e.id);return t&&(e.dragDistance=t.dragDistance,this.isPointerLocked&&(e.x=t.x+e.dx,e.y=t.y+e.dy)),e.moveDistance=Math.sqrt(e.dx*e.dx+e.dy*e.dy),this.pointers.set(e.id,e),t};e.addEventListener("wheel",e=>{if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)){e.preventDefault();const t=-e.deltaY*(rf?1:.02);Vf.pointerType="mouse",Vf.buttons=e.buttons,Vf.dz=t,this.dispatchEvent(Vf)}},{passive:!1}),e.addEventListener("pointerdown",e=>{const n=this.pressCount,o=new Wf(e),r=(i(o),this.pressCount);o.type!==this.currentInputType&&(this.dispatchEvent(new Uf(o.type)),this.currentInputType=o.type),t=0===n&&1===r}),e.addEventListener("pointermove",e=>{const o=this.pinchDistance,r=new Wf(e),s=i(r),a=this.pressCount,c=this.pinchDistance;if(n(Vf,r),null!==o&&null!==c){t=!1;const e=c-o;Vf.dz=e/100}this.dispatchEvent(Vf),1===a&&1===r.buttons&&s&&s.buttons===r.buttons&&(r.dragDistance+=r.moveDistance,r.dragDistance>Gf&&(t=!1,n(Yf,r),this.dispatchEvent(Yf)))}),e.addEventListener("pointerup",e=>{const o=new Wf(e);i(o);t&&(n(qf,o),this.dispatchEvent(qf)),o.dragDistance=0,"touch"===o.type&&this.pointers.delete(o.id)}),e.addEventListener("pointercancel",e=>{this.pointers.has(e.pointerId)&&this.pointers.delete(e.pointerId)})}get primaryPointer(){for(let e of this.pointers.values())return e}getPointerCount(e){let t=0;for(const n of this.pointers.values())n.type===e&&++t;return t}get pressCount(){let e=0;for(let t of this.pointers.values())1===t.buttons&&++e;return e}get pinchDistance(){if(2!==this.pressCount)return null;let e,t;for(let n of this.pointers.values())if(1===n.buttons)if(e){if(t)break;t=n}else e=n;const n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}lockPointer(){this.pointerLockElement.requestPointerLock()}get isPointerLocked(){return null!==document.pointerLockElement}}const Jf=3;class Zf{constructor(e,t,n){this.emoji=e,this.x=t,this.y=n,this.dx=Math.random()-.5,this.dy=.5*-Math.random()-.5,this.life=1,this.width=-1,this.emoteText=new tf,this.emoteText.value=e.value}isDead(){return this.life<=.01}update(e){this.life-=e/Jf,this.dx*=.99,this.dy*=.99,this.x+=this.dx*e,this.y+=this.dy*e}drawShadow(e,t){const n=nt(e).a;e.save(),e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowOffsetX=3*n,e.shadowOffsetY=3*n,e.shadowBlur=3*n,this.drawEmote(e,t),e.restore()}drawEmote(e,t){const n=e.globalAlpha,i=nt(e).a;e.globalAlpha=this.life,this.emoteText.fontSize=t.tileHeight/2,this.emoteText.scale=i,this.emoteText.draw(e,this.x*t.tileWidth-this.width/2,this.y*t.tileHeight),e.globalAlpha=n}}function hn(e){for(var t=e,n=[];t.parent;)n.unshift(t),t=t.parent;return n}var dn={search:function(e,t,n,i){e.cleanDirty();var o=(i=i||{}).heuristic||dn.heuristics.manhattan,r=i.closest||!1,s=new gn((function(e){return e.f})),a=t;for(t.h=o(t,n),e.markDirty(t),s.push(t);s.size()>0;){var c=s.pop();if(c===n)return hn(c);c.closed=!0;for(var l=e.neighbors(c),u=0,h=l.length;u<h;++u){var d=l[u];if(!d.closed&&!d.isWall()){var A=c.g+d.getCost(c),p=d.visited;(!p||A<d.g)&&(d.visited=!0,d.parent=c,d.h=d.h||o(d,n),d.g=A,d.f=d.g+d.h,e.markDirty(d),r&&(d.h<a.h||d.h===a.h&&d.g<a.g)&&(a=d),p?s.rescoreElement(d):s.push(d))}}}return r?hn(a):[]},heuristics:{manhattan:function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},diagonal:function(e,t){var n=Math.sqrt(2),i=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return 1*(i+o)+(n-2)*Math.min(i,o)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function An(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var n=0;n<e.length;n++){this.grid[n]=[];for(var i=0,o=e[n];i<o.length;i++){var r=new pn(n,i,o[i]);this.grid[n][i]=r,this.nodes.push(r)}}this.init()}function pn(e,t,n){this.x=e,this.y=t,this.weight=n}function gn(e){this.content=[],this.scoreFunction=e}An.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)dn.cleanNode(this.nodes[e])},An.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)dn.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]},An.prototype.markDirty=function(e){this.dirtyNodes.push(e)},An.prototype.neighbors=function(e){var t=[],n=e.x,i=e.y,o=this.grid;return o[n-1]&&o[n-1][i]&&t.push(o[n-1][i]),o[n+1]&&o[n+1][i]&&t.push(o[n+1][i]),o[n]&&o[n][i-1]&&t.push(o[n][i-1]),o[n]&&o[n][i+1]&&t.push(o[n][i+1]),this.diagonal&&(o[n-1]&&o[n-1][i-1]&&t.push(o[n-1][i-1]),o[n+1]&&o[n+1][i-1]&&t.push(o[n+1][i-1]),o[n-1]&&o[n-1][i+1]&&t.push(o[n-1][i+1]),o[n+1]&&o[n+1][i+1]&&t.push(o[n+1][i+1])),t},An.prototype.toString=function(){for(var e=[],t=this.grid,n=0;n<t.length;n++){for(var i=[],o=t[n],r=0;r<o.length;r++)i.push(o[r].weight);e.push(i.join(" "))}return e.join("\n")},pn.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},pn.prototype.getCost=function(e){return e&&e.x!=this.x&&e.y!=this.y?1.41421*this.weight:this.weight},pn.prototype.isWall=function(){return 0===this.weight},gn.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),n=this.content.pop();t!==this.content.length-1&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var n=(e+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(i)))break;this.content[n]=t,this.content[e]=i,e=n}},bubbleUp:function(e){for(var t=this.content.length,n=this.content[e],i=this.scoreFunction(n);;){var o,r=e+1<<1,s=r-1,a=null;if(s<t){var c=this.content[s];(o=this.scoreFunction(c))<i&&(a=s)}if(r<t){var l=this.content[r];this.scoreFunction(l)<(null===a?i:o)&&(a=r)}if(null===a)break;this.content[e]=this.content[a],this.content[a]=n,e=a}}};class Kf{constructor(e){this.url=e,this.tileWidth=0,this.tileHeight=0,this.tilesPerRow=0,this.image=new Image,this.collision={}}async load(){const e=await fetch(this.url),t=await e.text(),n=(new DOMParser).parseFromString(t,"text/xml").documentElement,i=new Promise((e,t)=>{this.image.addEventListener("load",t=>{this.tilesPerRow=Math.floor(this.image.width/this.tileWidth),e()}),this.image.addEventListener("error",t)}),o=n.querySelector("image").getAttribute("source"),r=new URL(o,this.url),s=n.querySelectorAll("tile");for(let e of s){const t=1*e.getAttribute("id"),n=e.querySelector("properties > property[name='Collision']").getAttribute("value");this.collision[t]="true"===n}this.name=n.getAttribute("name"),this.tileWidth=1*n.getAttribute("tilewidth"),this.tileHeight=1*n.getAttribute("tileheight"),this.tileCount=1*n.getAttribute("tilecount"),this.image.src=r.href,await i}isClear(e){return!this.collision[e-1]}draw(e,t,n,i){if(t>0){const o=t-1,r=this.tileWidth*(o%this.tilesPerRow),s=this.tileHeight*Math.floor(o/this.tilesPerRow),a=n*this.tileWidth,c=i*this.tileHeight;e.drawImage(this.image,r,s,this.tileWidth,this.tileHeight,a,c,this.tileWidth,this.tileHeight)}}}const $f=new WeakMap;class em{constructor(e){this.url=new URL(`data/tilemaps/${e}.tmx`,document.baseURI),this.tileWidth=0,this.tileHeight=0,this.layers=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.tileset=null,this.tiles=null,this.graph=null,this.layerImages=[],Object.seal(this)}}class tm{constructor(e){$f.set(this,new em(e))}async load(){const e=$f.get(this),t=await fetch(e.url.href);if(!t.ok)throw new Error(`Failed to load TileMap from ${e.url.href}. Reason: [${t.status}] ${t.statusText}`);const n=await t.text(),i=(new DOMParser).parseFromString(n,"text/xml").documentElement,o=1*i.getAttribute("width"),r=1*i.getAttribute("height"),s=1*i.getAttribute("tilewidth"),a=1*i.getAttribute("tileheight"),c=i.querySelector("tileset").getAttribute("source"),l=i.querySelectorAll("layer > data");e.layers=l.length,e.width=o,e.height=r,e.offsetX=-Math.floor(o/2),e.offsetY=-Math.floor(r/2),e.tileWidth=s,e.tileHeight=a,e.tiles=[];for(let t of l){const n=t.innerHTML.replace(" ","").replace("\t","").replace("\n","").replace("\r","").split(",").map(e=>parseInt(e,10)),i=[];let r=[];for(let e of n)r.push(e),r.length===o&&(i.push(r),r=[]);r.length>0&&i.push(r),e.tiles.push(i)}e.tileset=new Kf(new URL(c,e.url)),await e.tileset.load(),e.tileWidth=e.tileset.tileWidth,e.tileHeight=e.tileset.tileHeight;for(let t=0;t<e.layers;++t){const n=We(this.width*this.tileWidth,this.height*this.tileHeight);e.layerImages.push(n);const i=n.getContext("2d"),o=e.tiles[t];for(let t=0;t<this.height;++t){const n=o[t];for(let o=0;o<this.width;++o){const r=n[o];e.tileset.draw(i,r,o,t)}}}let u=[];for(let t of e.tiles[0]){let n=[];for(let i of t)e.tileset.isClear(i)?n.push(1):n.push(0);u.push(n)}e.graph=new An(u,{diagonal:!0})}get width(){return $f.get(this).width}get height(){return $f.get(this).height}get tileWidth(){return $f.get(this).tileWidth}get tileHeight(){return $f.get(this).tileHeight}isInBounds(e,t){return 0<=e&&e<this.width&&0<=t&&t<this.height}getGridNode(e,t){const n=$f.get(this);return e-=n.offsetX,t-=n.offsetY,e=Math.round(e),t=Math.round(t),this.isInBounds(e,t)?n.graph.grid[t][e]:null}draw(e){const t=$f.get(this);e.save(),e.translate(t.offsetX*this.tileWidth,t.offsetY*this.tileHeight);for(let n of t.layerImages)e.drawImage(n,0,0);e.restore()}searchPath(e,t){const n=$f.get(this);return dn.search(n.graph,e,t).map(e=>({x:e.y+n.offsetX,y:e.x+n.offsetY}))}isClear(e,t,n){const i=$f.get(this);return e-=i.offsetX,t-=i.offsetY,e=Math.round(e),t=Math.round(t),e<0||this.width<=e||t<0||this.height<=t||i.tileset&&i.tileset.isClear(i.tiles[0][t][e])||n&&n.canSwim}getClearTile(e,t,n,i,o){const r=e+n,s=t+i,a=e<r?1:-1,c=t<s?1:-1;let l=((n=Math.abs(r-e))>(i=Math.abs(s-t))?n:-i)/2;for(;e!==r||t!==s;){const r=l;if(r>-n){if(!this.isClear(e+a,t,o))break;l-=i,e+=a}if(r<i){if(!this.isClear(e,t+c,o))break;l+=n,t+=c}}return{x:e,y:t}}getClearTileNear(e,t,n,i){for(let o=1;o<=n;++o)for(let n=-o;n<=o;++n){const r=o-Math.abs(n),s=e+n,a=t+r,c=t-r;if(this.isClear(s,a,i))return{x:s,y:a};if(this.isClear(s,c,i))return{x:s,y:c}}return{x:e,y:t}}}const nm=.01,im=2,om=.125,rm=new Event("gameStarted"),sm=new Event("gameEnded"),am=new Event("zoomChanged"),cm=new Event("emojiNeeded"),lm=new Event("toggleAudio"),um=new Event("toggleVideo"),hm=Object.assign(new Event("userMoved"),{x:0,y:0}),dm=Object.assign(new Event("emote"),{emoji:null}),Am=Object.assign(new Event("userJoined",{user:null})),pm=new Map;class gm extends Sn{constructor(e,t){super(),this.zoomMin=e,this.zoomMax=t,this.element=Te(G("frontBuffer")),this.gFront=this.element.getContext("2d"),this.me=null,this.map=null,this.waypoints=[],this.keys={},this.users=new Map,this.lastMove=Number.MAX_VALUE,this.lastWalk=Number.MAX_VALUE,this.gridOffsetX=0,this.gridOffsetY=0,this.cameraX=this.offsetCameraX=this.targetOffsetCameraX=0,this.cameraY=this.offsetCameraY=this.targetOffsetCameraY=0,this.cameraZ=this.targetCameraZ=1.5,this.currentRoomName=null,this.fontSize=10,this.drawHearing=!1,this.audioDistanceMin=2,this.audioDistanceMax=10,this.rolloff=5,this.currentEmoji=null,this.emotes=[],this.inputBinding={keyButtonUp:"ArrowUp",keyButtonDown:"ArrowDown",keyButtonLeft:"ArrowLeft",keyButtonRight:"ArrowRight",keyButtonEmote:"e",keyButtonToggleAudio:"a",keyButtonZoomOut:"[",keyButtonZoomIn:"]",gpAxisLeftRight:0,gpAxisUpDown:1,gpButtonEmote:0,gpButtonToggleAudio:1,gpButtonZoomIn:6,gpButtonZoomOut:7,gpButtonUp:12,gpButtonDown:13,gpButtonLeft:14,gpButtonRight:15},this.lastGamepadIndex=-1,this.gamepadIndex=-1,this.transitionSpeed=.125,this.keyboardEnabled=!0,addEventListener("keydown",e=>{this.keys[e.key]=e,!this.keyboardEnabled||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||e.key!==this.inputBinding.keyButtonToggleAudio||!this.me||this.toggleMyAudio()}),addEventListener("keyup",e=>{this.keys[e.key]&&delete this.keys[e.key]}),this.screenControls=new Xf(this.element),F(this.screenControls,{wheel:e=>{this.zoom+=e.dz,this.dispatchEvent(am)},drag:e=>{this.targetOffsetCameraX=this.offsetCameraX+=e.dx,this.targetOffsetCameraY=this.offsetCameraY+=e.dy},click:e=>{if(this.me){const t=this.getTileAt(e),n=t.x-this.me.gridX,i=t.y-this.me.gridY;this.moveMeByPath(n,i)}}})}get style(){return this.element.style}initializeUser(e,t){this.withUser("initialize user",e,e=>{e.deserialize(t)})}updateAudioActivity(e,t){this.withUser("update audio activity",e,e=>{e.isActive=t})}emote(e,t){if(this.users.has(e)){const n=this.users.get(e);n.isMe&&((t=t||this.currentEmoji)?(dm.emoji=this.currentEmoji=t,this.dispatchEvent(dm)):this.dispatchEvent(cm)),t&&this.emotes.push(new Zf(t,n.x,n.y))}}getTileAt(e){const t=e.x*devicePixelRatio-this.gridOffsetX-this.offsetCameraX,n=e.y*devicePixelRatio-this.gridOffsetY-this.offsetCameraY,i=t/this.cameraZ,o=n/this.cameraZ,r=i-this.cameraX,s=o-this.cameraY;return{x:r/this.map.tileWidth-.5,y:s/this.map.tileHeight-.5}}moveMeTo(e,t){this.map.isClear(e,t,this.me.avatar)&&(this.targetOffsetCameraX=0,this.targetOffsetCameraY=0,hm.x=e,hm.y=t,this.dispatchEvent(hm))}moveMeBy(e,t){const n=this.map.getClearTile(this.me.gridX,this.me.gridY,e,t,this.me.avatar);this.moveMeTo(n.x,n.y)}moveMeByPath(t,n){e(this.waypoints);const i=this.me.gridX,o=this.me.gridY,r=this.map.getGridNode(i,o),s=i+t,a=o+n,c=s-Math.round(s),l=a-Math.round(a),u=this.map.getGridNode(s,a);if(r&&u){const e=this.map.searchPath(r,u);if(0===e.length)this.moveMeTo(s,a);else{for(let t of e)t.x+=c,t.y+=l;this.waypoints.push(...e)}}else this.moveMeTo(s,a)}warpMeTo(e,t){const n=this.map.getClearTileNear(e,t,3,this.me.avatar);this.moveMeTo(n.x,n.y)}visit(e){this.withUser("visit",e,e=>{this.warpMeTo(e.gridX,e.gridY)})}get zoom(){const e=l(this.targetCameraZ,this.zoomMin,this.zoomMax);return u(Math.pow(e,1/im),this.zoomMin,this.zoomMax)}set zoom(e){const t=l(e=c(e,this.zoomMin,this.zoomMax),this.zoomMin,this.zoomMax),n=u(Math.pow(t,im),this.zoomMin,this.zoomMax);this.targetCameraZ=n}addUser(e,t,n){this.users.has(e)&&this.removeUser(e);const i=new gf(e,t,n,!1);this.users.set(e,i),Am.user=i,this.dispatchEvent(Am)}toggleMyAudio(){this.dispatchEvent(lm)}toggleMyVideo(){this.dispatchEvent(um)}muteUserAudio(e,t){this.withUser("mute audio",e,e=>{e.audioMuted=t})}muteUserVideo(e,t){this.withUser("mute video",e,e=>{e.videoMuted=t})}withUser(e,t,n,i){if(void 0===i&&(i=5e3),t)if(this.users.has(t)){n(this.users.get(t))}else console.warn(`No user "${t}" found to ${e}. Trying again in a quarter second.`),i>0&&setTimeout(this.withUser.bind(this,e,t,n,i-250),250)}changeUserName(e,t){this.withUser("change user name",e,e=>{e.displayName=t})}removeUser(e){this.users.has(e)&&this.users.delete(e)}setAvatarVideo(e,t){this.withUser("set avatar video",e,e=>{e.setAvatarVideo(t)})}setAvatarURL(e,t){this.withUser("set avatar image",e,e=>{e.avatarImage=t})}setAvatarEmoji(e,t){this.withUser("set avatar emoji",e,e=>{e.avatarEmoji=t})}async startAsync(e,t,n,i,r){this.currentRoomName=r.toLowerCase(),this.me=new gf(e,t,n,!0),o(i)&&(this.me.avatarImage=i),this.users.set(e,this.me),this.map=new tm(this.currentRoomName);let s=!1;for(let e=0;e<2;++e)try{await this.map.load(),s=!0}catch(t){0===e?(console.warn(t),console.warn("Retrying with default map."),this.map=new tm("default")):console.error(t)}s||console.error("Couldn't load any maps!"),this.startLoop(),this.dispatchEvent(am),this.dispatchEvent(rm)}startLoop(){se(this),this.resize(),this.element.focus()}resize(){!function(e,t=1){$e(e,e.clientWidth,e.clientHeight,t)}(this.element,window.devicePixelRatio)}end(){this.currentRoomName=null,this.map=null,this.users.clear(),this.me=null,ae(this),this.dispatchEvent(sm)}update(t){if(null!==this.currentRoomName){if(t/=1e3,this.gridOffsetX=Math.floor(.5*this.element.width/this.map.tileWidth)*this.map.tileWidth,this.gridOffsetY=Math.floor(.5*this.element.height/this.map.tileHeight)*this.map.tileHeight,this.lastMove+=t,this.lastMove>=om){let t=0,n=0,i=0;if(this.keyboardEnabled)for(let e of Object.values(this.keys))if(!(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey))switch(e.key){case this.inputBinding.keyButtonUp:n--;break;case this.inputBinding.keyButtonDown:n++;break;case this.inputBinding.keyButtonLeft:t--;break;case this.inputBinding.keyButtonRight:t++;break;case this.inputBinding.keyButtonZoomIn:i++;break;case this.inputBinding.keyButtonZoomOut:i--;break;case this.inputBinding.keyButtonEmote:this.emote(this.me.id,this.currentEmoji)}const o=navigator.getGamepads()[this.gamepadIndex];if(o){pm.has(this)||pm.set(this,new Yg(o));const e=pm.get(this);e.update(o),e.buttons[this.inputBinding.gpButtonEmote].pressed&&this.emote(this.me.id,this.currentEmoji),!e.lastButtons[this.inputBinding.gpButtonToggleAudio].pressed&&e.buttons[this.inputBinding.gpButtonToggleAudio].pressed&&this.toggleMyAudio(),e.buttons[this.inputBinding.gpButtonUp].pressed?--n:e.buttons[this.inputBinding.gpButtonDown].pressed&&++n,e.buttons[this.inputBinding.gpButtonLeft].pressed?--t:e.buttons[this.inputBinding.gpButtonRight].pressed&&++t,t+=Math.round(e.axes[this.inputBinding.gpAxisLeftRight]),n+=Math.round(e.axes[this.inputBinding.gpAxisUpDown]),i+=2*(e.buttons[this.inputBinding.gpButtonZoomIn].value-e.buttons[this.inputBinding.gpButtonZoomOut].value),this.targetOffsetCameraX+=-50*Math.round(2*e.axes[2]),this.targetOffsetCameraY+=-50*Math.round(2*e.axes[3]),this.dispatchEvent(am)}t=c(t,-1,1),n=c(n,-1,1),0===t&&0===n||(this.moveMeBy(t,n),e(this.waypoints)),0!==i&&(this.zoom+=i,this.dispatchEvent(am)),this.lastMove=0}if(this.lastWalk+=t,this.lastWalk>=this.transitionSpeed){if(this.waypoints.length>0){const e=this.waypoints.shift();this.moveMeTo(e.x,e.y)}this.lastWalk=0}for(let e of this.emotes)e.update(t);this.emotes=this.emotes.filter(e=>!e.isDead());for(let e of this.users.values())e.update(this.map,this.users);this.render()}}render(){const e=-this.me.x*this.map.tileWidth,t=-this.me.y*this.map.tileHeight;this.cameraZ=h(this.cameraZ,this.targetCameraZ,nm*this.cameraZ),this.cameraX=h(this.cameraX,e,nm*this.cameraZ),this.cameraY=h(this.cameraY,t,nm*this.cameraZ),this.offsetCameraX=h(this.offsetCameraX,this.targetOffsetCameraX,nm),this.offsetCameraY=h(this.offsetCameraY,this.targetOffsetCameraY,nm),this.gFront.resetTransform(),this.gFront.imageSmoothingEnabled=!1,this.gFront.clearRect(0,0,this.element.width,this.element.height),this.gFront.save(),this.gFront.translate(this.gridOffsetX+this.offsetCameraX,this.gridOffsetY+this.offsetCameraY),this.gFront.scale(this.cameraZ,this.cameraZ),this.gFront.translate(this.cameraX,this.cameraY),this.map.draw(this.gFront);for(let e of this.users.values())e.drawShadow(this.gFront,this.map);for(let e of this.emotes)e.drawShadow(this.gFront,this.map);for(let e of this.users.values())e.drawAvatar(this.gFront,this.map);this.drawCursor();for(let e of this.users.values())e.drawName(this.gFront,this.map,this.fontSize);this.drawHearing&&this.me.drawHearingRange(this.gFront,this.map,this.audioDistanceMin,this.audioDistanceMax);for(let e of this.emotes)e.drawEmote(this.gFront,this.map);this.gFront.restore()}drawCursor(){const e=this.screenControls.primaryPointer;if(e){const t=this.getTileAt(e);this.gFront.strokeStyle=this.map.isClear(t.x,t.y,this.me.avatar)?"green":"red",this.gFront.strokeRect(t.x*this.map.tileWidth,t.y*this.map.tileHeight,this.map.tileWidth,this.map.tileHeight)}}}const fm="CallaSettings",mm=Object.freeze({keyButtonUp:"ArrowUp",keyButtonDown:"ArrowDown",keyButtonLeft:"ArrowLeft",keyButtonRight:"ArrowRight",keyButtonEmote:"e",keyButtonToggleAudio:"a",keyButtonZoomOut:"[",keyButtonZoomIn:"]",gpButtonEmote:0,gpButtonToggleAudio:1,gpButtonZoomIn:6,gpButtonZoomOut:7,gpButtonUp:12,gpButtonDown:13,gpButtonLeft:14,gpButtonRight:15}),vm=new WeakMap;class wm{constructor(){this.drawHearing=!1,this.audioDistanceMin=1,this.audioDistanceMax=10,this.audioRolloff=1,this.fontSize=12,this.transitionSpeed=1,this.zoom=1.5,this.roomName="calla",this.userName="",this.email="",this.avatarEmoji=null,this.avatarURL=null,this.gamepadIndex=0,this.preferredAudioOutputID=null,this.preferredAudioInputID=null,this.preferredVideoInputID=null,this.inputBinding=mm;const e=localStorage.getItem(fm);for(var t in e&&Object.assign(this,JSON.parse(e)),mm)void 0===this.inputBinding[t]&&(this.inputBinding[t]=mm[t]);Object.seal(this)}commit(){localStorage.setItem(fm,JSON.stringify(this))}}class ym{constructor(){const e=new wm;vm.set(this,e),window.location.hash.length>0&&(e.roomName=window.location.hash.substring(1)),Object.seal(this)}get preferredAudioOutputID(){return vm.get(this).preferredAudioOutputID}set preferredAudioOutputID(e){if(e!==this.preferredAudioOutputID){const t=vm.get(this);t.preferredAudioOutputID=e,t.commit()}}get preferredAudioInputID(){return vm.get(this).preferredAudioInputID}set preferredAudioInputID(e){if(e!==this.preferredAudioInputID){const t=vm.get(this);t.preferredAudioInputID=e,t.commit()}}get preferredVideoInputID(){return vm.get(this).preferredVideoInputID}set preferredVideoInputID(e){if(e!==this.preferredVideoInputID){const t=vm.get(this);t.preferredVideoInputID=e,t.commit()}}get transitionSpeed(){return vm.get(this).transitionSpeed}set transitionSpeed(e){if(e!==this.transitionSpeed){const t=vm.get(this);t.transitionSpeed=e,t.commit()}}get drawHearing(){return vm.get(this).drawHearing}set drawHearing(e){if(e!==this.drawHearing){const t=vm.get(this);t.drawHearing=e,t.commit()}}get audioDistanceMin(){return vm.get(this).audioDistanceMin}set audioDistanceMin(e){if(e!==this.audioDistanceMin){const t=vm.get(this);t.audioDistanceMin=e,t.commit()}}get audioDistanceMax(){return vm.get(this).audioDistanceMax}set audioDistanceMax(e){if(e!==this.audioDistanceMax){const t=vm.get(this);t.audioDistanceMax=e,t.commit()}}get audioRolloff(){return vm.get(this).audioRolloff}set audioRolloff(e){if(e!==this.audioRolloff){const t=vm.get(this);t.audioRolloff=e,t.commit()}}get fontSize(){return vm.get(this).fontSize}set fontSize(e){if(e!==this.fontSize){const t=vm.get(this);t.fontSize=e,t.commit()}}get zoom(){return vm.get(this).zoom}set zoom(e){if(e!==this.zoom){const t=vm.get(this);t.zoom=e,t.commit()}}get userName(){return vm.get(this).userName}set userName(e){if(e!==this.userName){const t=vm.get(this);t.userName=e,t.commit()}}get email(){return vm.get(this).email}set email(e){if(e!==this.email){const t=vm.get(this);t.email=e,t.commit()}}get avatarEmoji(){return vm.get(this).avatarEmoji}set avatarEmoji(e){if(e!==this.avatarEmoji){const t=vm.get(this);t.avatarEmoji=e,t.commit()}}get avatarURL(){return vm.get(this).avatarURL}set avatarURL(e){if(e!==this.avatarURL){const t=vm.get(this);t.avatarURL=e,t.commit()}}get roomName(){return vm.get(this).roomName}set roomName(e){if(e!==this.roomName){const t=vm.get(this);t.roomName=e,t.commit()}}get gamepadIndex(){return vm.get(this).gamepadIndex}set gamepadIndex(e){if(e!==this.gamepadIndex){const t=vm.get(this);t.gamepadIndex=e,t.commit()}}get inputBinding(){return vm.get(this).inputBinding}set inputBinding(e){if(e!==this.inputBinding){const t=vm.get(this);for(let n in e)t.inputBinding[n]=e[n];t.commit()}}}class bm extends Event{constructor(){super("tick"),this.dt=0,this.t=0,this.sdt=0,Object.seal(this)}}class Cm extends Sn{constructor(e){super(),this._timer=null,this.targetFrameRate=e,this._onTick=e=>{const t=new bm;let n=e;this._onTick=e=>{t.t=e,t.dt=e-n,t.sdt=t.dt,n=e,this._onTick=e=>{t.t=e,t.dt=e-n,t.sdt=h(t.sdt,t.dt,.01),n=e,this.dispatchEvent(t)}}}}restart(){this.stop(),this.start()}get isRunning(){return null!==this._timer}start(){throw new Error("Not implemented in base class")}stop(){this._timer=null}get targetFrameRate(){return this._targetFPS}set targetFrameRate(e){this._targetFPS=e,this._frameTime=1e3/e}}class Dm extends Cm{constructor(){super(60)}start(){const e=t=>{this._timer=requestAnimationFrame(e),this._onTick(t)};this._timer=requestAnimationFrame(e)}stop(){this.isRunning&&(cancelAnimationFrame(this._timer),super.stop())}get targetFrameRate(){return super.targetFrameRate}set targetFrameRate(e){}}const xm=.5,Sm=20,Em=new ym,Pm=new gm(xm,Sm),Bm=new Ug,_m=new Qf,Mm=new Cg(Pm.element,xm,Sm),km=new Fg,Tm=new Ff,Im=new Mg("instructions"),Fm=new Hg,Lm=new sr(ar,cr,lr),Om=new Dm,Rm=j(!0),Nm=j(!1);let Hm=!1;async function fn(e,t){const n=fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await n;return i.ok&&console.log("Thanks!"),i}Object.assign(window,{settings:Em,client:Lm,game:Pm,login:Bm,directory:_m,controls:Mm,devices:km,options:Tm,emoji:Fm,instructions:Im});const jm=e=>()=>mn(e);function mn(e){Hm||(ae(Bm),ae(_m),ae(Tm),ae(km),ae(Fm),ae(Im),se(e))}async function vn(e){if(!ne(Fm)){Hm=!0,Rm.apply(Mm.optionsButton),Rm.apply(Mm.instructionsButton),Rm.apply(Mm.changeDevicesButton),ae(Tm);const t=await Fm.selectAsync();t&&e(t),Nm.apply(Mm.optionsButton),Nm.apply(Mm.instructionsButton),Nm.apply(Mm.changeDevicesButton),Hm=!1}}async function wn(){await vn(e=>{Pm.emote(Lm.localUserID,e),Mm.setEmojiButton(Em.inputBinding.keyButtonEmote,e)})}function yn(){Lm.setAudioProperties(Em.audioDistanceMin=Pm.audioDistanceMin=Tm.audioDistanceMin,Em.audioDistanceMax=Pm.audioDistanceMax=Tm.audioDistanceMax,Em.audioRolloff=Tm.audioRolloff,Em.transitionSpeed)}function bn(){Tm.gamepads=navigator.getGamepads(),Tm.gamepadIndex=Pm.gamepadIndex}function Cn(e){Pm.withUser("list user in directory",e,e=>_m.set(e))}F(window,{gamepadconnected:bn,gamepaddisconnected:bn,resize:()=>{Pm.resize()}}),F(Mm,{toggleOptions:jm(Tm),toggleInstructions:jm(Im),toggleUserDirectory:jm(_m),changeDevices:jm(km),tweet:()=>{const e=encodeURIComponent("Join my #TeleParty "+document.location.href),t=new URL("https://twitter.com/intent/tweet?text="+e);window.open(t)},leave:async()=>{_m.clear(),await Lm.leaveAsync()},selectEmoji:wn,emote:()=>{Pm.emote(Lm.localUserID,Pm.currentEmoji)},toggleAudio:async()=>{await Lm.toggleAudioMutedAsync()},toggleVideo:async()=>{await Lm.toggleVideoMutedAsync()},zoomChanged:()=>{Em.zoom=Pm.zoom=Mm.zoom}}),F(Bm,{login:async()=>{Lm.startAudio(),Lm.audio.addClip("join","audio/door-open.ogg","audio/door-open.mp3","audio/door-open.wav"),Lm.audio.addClip("leave","audio/door-close.ogg","audio/door-close.mp3","audio/door-close.wav"),yn();let e=Bm.roomName;Bm.roomSelectMode||(e=await async function(e){const t=await fn("/Game/Rooms",e);return await t.text()}(e)),await async function(e,t,n){await fn("/Contacts",{Name:e,Email:t,Room:n})}(Em.userName=Bm.userName,Em.email=Bm.email,Em.roomName=e);const t="Calla - chatting in "+e,n=`${window.location.pathname}#${e}`;window.history.replaceState({},t,n),await _m.startAsync(e,Bm.userName),await Lm.join(e,Bm.userName)}}),F(Tm,{audioPropertiesChanged:yn,selectAvatar:async()=>{await vn(e=>{Em.avatarEmoji=Lm.avatarEmoji=Pm.me.avatarEmoji=e,Cn(Lm.localUserID)})},avatarURLChanged:()=>{Em.avatarURL=Lm.avatarURL=Pm.me.avatarImage=Tm.avatarURL,Cn(Lm.localUserID)},toggleDrawHearing:()=>{Em.drawHearing=Pm.drawHearing=Tm.drawHearing},fontSizeChanged:()=>{Em.fontSize=Pm.fontSize=Tm.fontSize},gamepadChanged:()=>{Em.gamepadIndex=Pm.gamepadIndex=Tm.gamepadIndex},inputBindingChanged:()=>{Em.inputBinding=Pm.inputBinding=Tm.inputBinding},toggleVideo:async()=>{await Lm.toggleVideoMutedAsync()}}),F(km,{audioInputChanged:async()=>{const e=km.currentAudioInputDevice;await Lm.setAudioInputDeviceAsync(e),Em.preferredAudioInputID=Lm.preferredAudioInputID},audioOutputChanged:async()=>{const e=km.currentAudioOutputDevice;await Lm.setAudioOutputDeviceAsync(e),Em.preferredAudioOutputID=Lm.preferredAudioOutputID},videoInputChanged:async()=>{const e=km.currentVideoInputDevice;await Lm.setVideoInputDeviceAsync(e),Em.preferredVideoInputID=Lm.preferredVideoInputID}}),F(Pm,{emojiNeeded:wn,emote:e=>{Lm.emote(e.emoji)},userJoined:e=>{Cn(e.user.id)},toggleAudio:async()=>{await Lm.toggleAudioMutedAsync(),Em.preferredAudioInputID=Lm.preferredAudioInputID},toggleVideo:async()=>{await Lm.toggleVideoMutedAsync(),Em.preferredVideoInputID=Lm.preferredVideoInputID},gameStarted:()=>{Pm.resize(),ae(Bm),se(Mm),Tm.user=Pm.me,Mm.enabled=!0,Em.avatarEmoji=Lm.avatarEmoji=Pm.me.avatarEmoji=Em.avatarEmoji||Xa.random(),Cn(Lm.localUserID)},userMoved:e=>{Lm.setLocalPosition(e.x,0,e.y)},gameEnded:()=>{Bm.connected=!1,mn(Bm)},zoomChanged:()=>{Em.zoom=Mm.zoom=Pm.zoom}}),F(_m,{warpTo:e=>{Pm.visit(e.id)},chatFocusChanged:()=>{Pm.keyboardEnabled=!_m.chatFocused}}),F(Lm,{videoConferenceJoined:async e=>{Bm.connected=!0,await Pm.startAsync(e.id,e.displayName,e.pose,e.avatarURL,e.roomName),Lm.avatarURL=Pm.me.avatarImage=Tm.avatarURL=Em.avatarURL,km.audioInputDevices=await Lm.getAudioInputDevicesAsync(),km.audioOutputDevices=await Lm.getAudioOutputDevicesAsync(),km.videoInputDevices=await Lm.getVideoInputDevicesAsync(),Em.preferredAudioInputID=Lm.preferredAudioInputID,Em.preferredAudioOutputID=Lm.preferredAudioOutputID,Em.preferredVideoInputID=Lm.preferredVideoInputID,km.currentAudioInputDevice=await Lm.getCurrentAudioInputDeviceAsync(),km.currentAudioOutputDevice=await Lm.getCurrentAudioOutputDeviceAsync(),km.currentVideoInputDevice=await Lm.getCurrentVideoInputDeviceAsync();const t=Lm.isAudioMuted;Pm.muteUserAudio(Lm.localUserID,t),Mm.audioEnabled=!t;const n=Lm.isVideoMuted;Pm.muteUserVideo(Lm.localUserID,n),Mm.videoEnabled=!n},videoConferenceLeft:()=>{Pm.end()},participantJoined:e=>{Lm.audio.playClip("join",.5),Pm.addUser(e.id,e.displayName,e.pose)},participantLeft:e=>{Lm.audio.playClip("leave",.5),Pm.removeUser(e.id),_m.delete(e.id)},audioChanged:e=>{Cn(e.id)},videoChanged:e=>{Pm.setAvatarVideo(e.id,e.stream),Cn(e.id)},avatarChanged:e=>{Pm.setAvatarURL(e.id,e.url),Cn(e.id)},displayNameChange:e=>{Pm.changeUserName(e.id,e.displayName),Cn(e.id)},audioMuteStatusChanged:async e=>{Pm.muteUserAudio(e.id,e.muted)},localAudioMuteStatusChanged:async e=>{Mm.audioEnabled=!e.muted,km.currentAudioInputDevice=await Lm.getCurrentAudioInputDeviceAsync(),Em.preferredAudioInputID=Lm.preferredAudioInputID},videoMuteStatusChanged:async e=>{Pm.muteUserVideo(e.id,e.muted),Em.preferredVideoInputID=Lm.preferredVideoInputID},localVideoMuteStatusChanged:async e=>{Mm.videoEnabled=!e.muted,e.muted?Tm.setAvatarVideo(null):Tm.setAvatarVideo(Pm.me.avatarVideo.element),km.currentVideoInputDevice=await Lm.getCurrentVideoInputDeviceAsync()},userInitRequest:e=>{Lm.userInitResponse(e.id,Pm.me.serialize())},userInitResponse:e=>{Pm.initializeUser(e.id,e),Cn(e.id)},emote:e=>{Pm.emote(e.id,e)},setAvatarEmoji:e=>{Pm.setAvatarEmoji(e.id,e),Cn(e.id)},audioActivity:e=>{Pm.updateAudioActivity(e.id,e.isActive)}}),F(Om,{tick:e=>{Lm.update(),Tm.update(),_m.update(),Pm.update(e.dt)}}),Tm.drawHearing=Pm.drawHearing=Em.drawHearing,Tm.audioDistanceMin=Pm.audioDistanceMin=Em.audioDistanceMin,Tm.audioDistanceMax=Pm.audioDistanceMax=Em.audioDistanceMax,Tm.audioRolloff=Em.audioRolloff,Tm.fontSize=Pm.fontSize=Em.fontSize,Tm.gamepads=navigator.getGamepads(),Tm.gamepadIndex=Pm.gamepadIndex=Em.gamepadIndex,Tm.inputBinding=Pm.inputBinding=Em.inputBinding,Mm.zoom=Pm.zoom=Em.zoom,Pm.cameraZ=Pm.targetCameraZ,Pm.transitionSpeed=Em.transitionSpeed=.5,Bm.userName=Em.userName,Bm.roomName=Em.roomName,Bm.email=Em.email,Mm.enabled=!1,mn(Bm),Bm.ready=!0,Om.start()}catch(e){TraceKit.report(e)}var Dn;
