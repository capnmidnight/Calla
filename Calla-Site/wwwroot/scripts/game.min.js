!function(){"use strict";function t(t,e){return t.splice(e,1)[0]}function e(t,e,i){return typeof t===e||t instanceof i}function i(t){return e(t,"function",Function)}function s(t){return e(t,"string",String)}function n(t){return e(t,"boolean",Boolean)}function a(t){return e(t,"number",Number)}function o(t){return e(t,"object",Object)}function r(t){return t instanceof Array}function h(t){return t instanceof HTMLElement}function c(t){throw new Error("Unexpected object: "+t)}function A(t){return a(t)&&!Number.isNaN(t)}function l(t){return null==t}class u{constructor(){this.listeners=new Map,this.listenerOptions=new Map}addEventListener(t,e,s){if(i(e)){let i=this.listeners.get(t);i||(i=new Array,this.listeners.set(t,i)),i.find((t=>t===e))||(i.push(e),s&&this.listenerOptions.set(e,s))}}removeEventListener(t,e){if(i(e)){const i=this.listeners.get(t);i&&this.removeListener(i,e)}}removeListener(e,i){const s=e.findIndex((t=>t===i));s>=0&&(t(e,s),this.listenerOptions.has(i)&&this.listenerOptions.delete(i))}dispatchEvent(t){const e=this.listeners.get(t.type);if(e)for(const i of e){const s=this.listenerOptions.get(i);s&&s.once&&this.removeListener(e,i),i.call(this,t)}return!t.defaultPrevented}}class d extends Event{constructor(t){super(t)}}class g extends u{constructor(){super(...arguments),this.mappedCallbacks=new Map}addEventListener(t,e,i){let s=this.mappedCallbacks.get(e);null==s&&(s=t=>e(t),this.mappedCallbacks.set(e,s)),super.addEventListener(t,s,i)}removeEventListener(t,e){const i=this.mappedCallbacks.get(e);i&&super.removeEventListener(t,i)}}function p(t,e){return async i=>{await t(i),await e(i)}}function m(t,e,i,n){null==n&&A(i)&&(n=i,i=void 0);const a=s(e),o=s(i),r=null!=n;return new Promise(((s,h)=>{if(a){const i=()=>{t.removeEventListener(e,s)};s=p(i,s),h=p(i,h)}if(o){const e=()=>{t.removeEventListener(i,h)};s=p(e,s),h=p(e,h)}if(r){const t=setTimeout(h,n,`'${e}' has timed out.`),i=()=>clearTimeout(t);s=p(i,s),h=p(i,h)}a&&t.addEventListener(e,s),o&&t.addEventListener(i,(()=>{h("Rejection event found")}))}))}function f(t){return new Promise((e=>{const i=setInterval((()=>{t()&&(clearInterval(i),e())}),100)}))}class v{constructor(t,e,...i){this.key=t,this.value=e,this.tags=i.map((t=>t.toLocaleUpperCase())),Object.freeze(this)}apply(t){if(h(t)){0===this.tags.length||this.tags.indexOf(t.tagName)>-1?"style"===this.key?Object.assign(t.style,this.value):this.key in t?t[this.key]=this.value:!1===this.value?t.removeAttribute(this.key):!0===this.value?t.setAttribute(this.key,""):t.setAttribute(this.key,this.value):console.warn(`Element ${t.tagName} does not support Attribute ${this.key}`)}else t[this.key]=this.value}}function w(t){return new v("autoplay",t,"audio","video")}function B(t){return new v("className",t)}function y(t){return new v("disabled",t,"button","command","fieldset","input","keygen","optgroup","option","select","textarea")}function D(t){return new v("htmlFor",t,"label","output")}function b(t){return new v("height",t,"canvas","embed","iframe","img","input","object","video")}function C(t){return new v("href",t,"a","area","base","link")}function M(t){return new v("id",t)}function P(t){return new v("max",t,"input","meter","progress")}function I(t){return new v("min",t,"input","meter")}function x(t){return new v("muted",t,"audio","video")}function S(t){return new v("placeholder",t,"input","textarea")}function F(t){return new v("playsInline",t,"audio","video")}function E(t){return new v("src",t,"audio","embed","iframe","img","input","script","source","track","video")}function k(t){return new v("srcObject",t,"audio","video")}function _(t){return new v("step",t,"input")}function L(t){return new v("title",t)}function T(t){return new v("type",t,"button","input","command","embed","object","script","source","style","menu")}function O(t){return new v("value",t,"button","data","input","li","meter","option","progress","param")}function R(t){return new v("width",t,"canvas","embed","iframe","img","input","object","video")}class Q{constructor(...t){this.set=new Map;const e=(t,e)=>{e||n(e)?this.set.set(t,e):this.set.has(t)&&this.set.delete(t)};for(const i of t)if(i instanceof v){const{key:t,value:s}=i;e(t,s)}else for(const[t,s]of i.set.entries())e(t,s)}apply(t){const e=h(t)?t.style:t;for(const t of this.set.entries()){const[i,s]=t;e[i]=s}}}function U(...t){return new Q(...t)}function N(t){return new v("backgroundColor",t)}function H(t){return new v("display",t)}function z(t){return new v("fontFamily",t)}function G(t){return new v("margin",t)}function j(t){return new v("zIndex",t)}z("'Droid Sans Mono', 'Consolas', 'Lucida Console', 'Courier New', 'Courier', monospace"),z("-apple-system, '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', sans-serif");function W(t){return!l(t)&&!s(t)&&!a(t)&&!n(t)&&!function(t){return t instanceof Date}(t)&&"element"in t&&t.element instanceof Node}function V(t,...e){let i=null;for(const t of e)if(t instanceof v&&"id"===t.key){i=document.getElementById(t.value);break}null==i&&(i=document.createElement(t));for(let t of e)null!=t&&(s(t)||a(t)||n(t)||t instanceof Date||t instanceof Node||W(t)?(W(t)?t=t.element:t instanceof Node||(t=document.createTextNode(t.toLocaleString())),i.appendChild(t)):(t instanceof Function&&(t=t(!0)),t.apply(i)));return i}function Z(...t){return V("a",...t)}function Y(...t){return V("audio",...t)}function X(...t){return function(...t){return V("button",...t)}(...t,T("button"))}function J(...t){return V("canvas",...t)}function K(...t){return V("div",...t)}function q(...t){return V("h1",...t)}function $(...t){return V("input",...t)}function tt(...t){return V("label",...t)}function et(...t){return V("li",...t)}function it(...t){return V("option",...t)}function st(...t){return V("p",...t)}function nt(...t){return V("span",...t)}function at(...t){return V("ul",...t)}function ot(...t){return $(T("text"),...t)}function rt(...t){return $(T("url"),...t)}function ht(...t){return K(U(G("auto")),...t)}const ct="OffscreenCanvas"in globalThis,At="createImageBitmap"in globalThis,lt=ct&&function(){try{const t=new OffscreenCanvas(1,1);return null!=t.getContext("2d")}catch(t){return!1}}();const ut=At&&function(){try{const t=ct?new OffscreenCanvas(1,1):J();return null!=t.getContext("bitmaprenderer")}catch(t){return!1}}()?function(t,e){const i=t.getContext("bitmaprenderer");if(l(i))throw new Error("Could not create bitmaprenderer context for canvas");i.transferFromImageBitmap(e)}:function(t,e){const i=t.getContext("2d");if(l(i))throw new Error("Could not create 2d context for canvas");i.drawImage(e,0,0)};function dt(t,e){return new OffscreenCanvas(t,e)}function gt(t,e){return J(R(t),b(e))}const pt=lt?dt:gt;const mt=lt?function(t){const e=dt(t.width,t.height);return ut(e,t),e}:function(t){const e=gt(t.width,t.height);return ut(e,t),e};function ft(t,e){const i=t.getContext("2d");if(l(i))throw new Error("Could not create 2d context for canvas");i.drawImage(e,0,0)}const vt=lt?function(t){const e=dt(t.width,t.height);return ft(e,t),e}:function(t){const e=gt(t.width,t.height);return ft(e,t),e};function wt(t,e,i,s=1){return e=Math.floor(e*s),i=Math.floor(i*s),(t.width!=e||t.height!=i)&&(t.width=e,t.height=i,!0)}function Bt(t,e,i,s=1){return function(t){return function(t){return null!=t.textBaseline}(t)||function(t){return null!=t.textBaseline}(t)}(t)?function(t,e,i,s=1){const n=t.imageSmoothingEnabled,a=t.textBaseline,o=t.textAlign,r=t.font,h=wt(t.canvas,e,i,s);return h&&(t.imageSmoothingEnabled=n,t.textBaseline=a,t.textAlign=o,t.font=r),h}(t,e,i,s):wt(t.canvas,e,i,s)}const yt=2*Math.PI;function Dt(t,e){let i;if(a(e)){i=new Array(e);for(let t=0;t<i.length;++t)i[t]=1/e}else i=e;let s=0;for(let t=0;t<i.length;++t)s+=i[t];const n=new Array(i.length),o=new Array(i.length),r=performance.now(),h=(e,a,o,h)=>{if(t){n[e]=a/o;let c=0;for(let t=0;t<i.length;++t)c+=n[t]*i[t];const A=performance.now();t(c,s,h,r-A+(A-r)*s/c)}};for(let t=0;t<i.length;++t)n[t]=0,o[t]=(e,i,s)=>h(t,e,i,s);return o}async function bt(t,e,i){const s=Dt(t,e.length),n=e.map(((t,e)=>i(t,s[e])));return await Promise.all(n)}function Ct(t,e,i){return Math.min(i,Math.max(e,t))}function Mt(t,e,i,s){const{width:n,height:a,data:o}=t,r=(t,e)=>4*(e*n+t),h=2*i,c=n-1,A=a-1,l=new Array(4),u=new Array(4);return(t,n,a)=>{const d=Math.floor(t),g=Math.floor(n),p=d-i+1,m=g-i+1;for(let e=0;e<h;e++)l[e]=s(t-(p+e)),u[e]=s(n-(m+e));for(let t=0;t<3;t++){let i=0;for(let e=0;e<h;e++){const s=Ct(m+e,0,A);let n=0;for(let e=0;e<h;e++){const i=r(Ct(p+e,0,c),s);n+=o[i+t]*l[e]}i+=n*u[e]}e.data[a+t]=Math.round(i)}}}var Pt;!function(t){t.PositiveZ="pz",t.NegativeZ="nz",t.PositiveX="px",t.NegativeX="nx",t.PositiveY="py",t.NegativeY="ny"}(Pt||(Pt={}));const It=[Pt.PositiveZ,Pt.NegativeZ,Pt.PositiveY,Pt.NegativeY,Pt.NegativeX,Pt.PositiveX];var xt;!function(t){t.Bilinear="bilinear",t.Bicubic="bicubic",t.Lanczos="lanczos",t.Nearest="nearest"}(xt||(xt={}));const St=new Map;St.set(Pt.PositiveY,3),St.set(Pt.NegativeY,1);const Ft=new Map([[Pt.PositiveZ,(t,e)=>({x:-1,y:-t,z:-e})],[Pt.NegativeZ,(t,e)=>({x:1,y:t,z:-e})],[Pt.PositiveX,(t,e)=>({x:t,y:-1,z:-e})],[Pt.NegativeX,(t,e)=>({x:-t,y:1,z:-e})],[Pt.PositiveY,(t,e)=>({x:-e,y:-t,z:1})],[Pt.NegativeY,(t,e)=>({x:e,y:-t,z:-1})]]),Et=new Map([[xt.Bilinear,function(t,e){const{width:i,height:s,data:n}=t,a=(t,e)=>4*(e*i+t);return(t,o,r)=>{const h=Ct(Math.floor(t),0,i-1),c=Ct(Math.ceil(t),0,i-1),A=t-h,l=Ct(Math.floor(o),0,s-1),u=Ct(Math.ceil(o),0,s-1),d=o-l,g=a(h,l),p=a(c,l),m=a(h,u),f=a(c,u);for(let t=0;t<3;t++){const i=n[g+t]*(1-A)+n[p+t]*A,s=n[m+t]*(1-A)+n[f+t]*A;e.data[r+t]=Math.ceil(i*(1-d)+s*d)}}}],[xt.Bicubic,function(t,e){const i=-.5;return Mt(t,e,2,(t=>{const e=(t=Math.abs(t))*t,s=t*t*t;return t<=1?1.5*s-2.5*e+1:i*s-5*i*e+-4*t- -2}))}],[xt.Lanczos,function(t,e){return Mt(t,e,5,(t=>{if(0===t)return 1;{const e=Math.PI*t;return 5*Math.sin(e)*Math.sin(e/5)/(e*e)}}))}],[xt.Nearest,function(t,e){const{width:i,height:s,data:n}=t;return(t,a,o)=>{const r=(h=Ct(Math.round(t),0,i-1),4*(Ct(Math.round(a),0,s-1)*i+h));var h;for(let t=0;t<3;t++)e.data[o+t]=n[r+t]}}]]);async function kt(t,e,s,n,a){const o=Ft.get(e);if(!o)throw new Error("Invalid face name: "+e);const r=Et.get(s);if(!r)throw new Error("Invalid interpolation type: "+s);const h=Math.min(n||Number.MAX_VALUE,t.width/2),c=h,A=new ImageData(h,c);Et.has(s)||(s=xt.Nearest);const l=r(t,A);for(let s=0;s<c;s++){i(a)&&a(s,c,e);for(let e=0;e<h;e++){const i=4*(s*h+e);A.data[i+3]=255;const n=o(2*(e+.5)/h-1,2*(s+.5)/c-1),a=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z),r=(Math.atan2(n.y,n.x)%yt+yt)%yt,u=Math.acos(n.z/a);l(t.width*r/Math.PI/2-.5,t.height*u/Math.PI-.5,i)}}const u=pt(h,c),d=u.getContext("2d");if(!d)throw new Error("Couldn't create a 2D canvas context");if(d.putImageData(A,0,0),St.has(e)){const t=St.get(e),i=h/2,s=c/2;d.translate(i,s),d.rotate(t*Math.PI/2),d.translate(-i,-s),d.drawImage(u,0,0)}return i(a)&&a(c,c,e),u}async function _t(t,e,i,s,n){const a=await kt(t,e,i,s,n);return await createImageBitmap(a)}function Lt(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Tt(t,e,i,s,n,a,o,r){const h=pt(a,o),c=h.getContext("2d");if(!c)throw new Error("Couldn't create a 2D canvas context");const A=a/2,l=o/2;return r>0&&(r%2==0?c.translate(A,l):c.translate(l,A),c.rotate(r*Math.PI/2),c.translate(-A,-l)),c.drawImage(t,e,i,s,n,0,0,a,o),h}var Ot;!function(t){t[t.None=-1]="None",t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Up=2]="Up",t[t.Down=3]="Down",t[t.Back=4]="Back",t[t.Front=5]="Front"}(Ot||(Ot={}));const Rt={rows:3,columns:4,indices:[[Ot.None,Ot.Up,Ot.None,Ot.None],[Ot.Left,Ot.Front,Ot.Right,Ot.Back],[Ot.None,Ot.Down,Ot.None,Ot.None]],rotations:[[0,2,0,0],[0,0,0,0],[0,2,0,0]]};function Qt(t){const e=t.width/Rt.columns,i=t.height/Rt.rows,s=Lt(e),n=Lt(i),a=new Array(6);for(let o=0;o<Rt.rows;++o){const r=Rt.indices[o],h=Rt.rotations[o];for(let c=0;c<Rt.columns;++c){const A=r[c];A>-1&&(a[A]=Tt(t,c*e,o*i,e,i,s,n,h[c]))}}return a}function Ut(t){const e=function(...t){return V("script",...t)}(E(t));document.body.appendChild(e)}function Nt(t){var e;o(e=t)&&"dispose"in e&&i(e.dispose)?t.dispose():function(t){return o(t)&&"close"in t&&i(t.close)}(t)&&t.close()}function Ht(t,e){try{return e(t)}finally{Nt(t)}}class zt{constructor(){this._getCanvas=At?this.getCanvasViaImageBitmap:this.getCanvasViaImage,this._getImageData=At?this.getImageDataViaImageBitmap:this.getImageDataViaImage,this._getCubes=At?this.getCubesViaImageBitmaps:this.getCubesViaImage,this._getEquiMaps=At?this.getEquiMapViaImageBitmaps:this.getEquiMapViaImage}async getCanvas(t,e){return await this._getCanvas(t,e)}async getImageData(t,e){return await this._getImageData(t,e)}async getCubes(t,e){return await this._getCubes(t,e)}async getEquiMaps(t,e,i,s){return await this._getEquiMaps(t,e,i,s)}async readRequestResponse(t,e){const i=await e;if(!i.ok)throw new Error(`[${i.status}] - ${i.statusText}. Path ${t}`);return i}async getResponse(t){return await this.readRequestResponse(t,fetch(t))}async postObjectForResponse(t,e){return await this.readRequestResponse(t,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))}async readResponseBuffer(t,e,i){const s=e.headers.get("Content-Type");if(!s)throw new Error("Server did not provide a content type");let n=1;const a=e.headers.get("Content-Length");a?(n=parseInt(a,10),A(n)||(console.warn(`Server did not provide a valid content length header. Value: ${a}, Path: ${t}`),n=1)):console.warn(`Server did not provide a content length header. Path: ${t}`);if(A(n)||(n=1),!e.body)throw new Error("No response body!");const o=e.body.getReader(),r=[];let h=0;for(;;){const{done:e,value:s}=await o.read();if(e)break;s&&(r.push(s),h+=s.length,i&&i(h,Math.max(h,n),t))}const c=new ArrayBuffer(h),l=new Uint8Array(c);h=0;for(const t of r)l.set(t,h),h+=t.length;return i&&i(1,1,t),{buffer:c,contentType:s}}async getBuffer(t,e){const i=await this.getResponse(t);return await this.readResponseBuffer(t,i,e)}async postObjectForBuffer(t,e,i){const s=await this.postObjectForResponse(t,e);return await this.readResponseBuffer(t,s,i)}async getBlob(t,e){const{buffer:i,contentType:s}=await this.getBuffer(t,e);return new Blob([i],{type:s})}async postObjectForBlob(t,e,i){const{buffer:s,contentType:n}=await this.postObjectForBuffer(t,e,i);return new Blob([s],{type:n})}async getFile(t,e){const i=await this.getBlob(t,e);return URL.createObjectURL(i)}async postObjectForFile(t,e,i){const s=await this.postObjectForBlob(t,e,i);return URL.createObjectURL(s)}async readFileImage(t){const e=new Image;return e.src=t,e.complete||await m(e,"load","error"),e}async getImageBitmap(t,e){const i=await this.getBlob(t,e);return await createImageBitmap(i)}async getImage(t,e){const i=await this.getFile(t,e);return await this.readFileImage(i)}async postObjectForImageBitmap(t,e,i){const s=await this.postObjectForBlob(t,e,i);return await createImageBitmap(s)}async postObjectForImage(t,e,i){const s=await this.postObjectForFile(t,e,i);return await this.readFileImage(s)}async getCanvasViaImageBitmap(t,e){return Ht(await this.getImageBitmap(t,e),(t=>mt(t)))}async getCanvasViaImage(t,e){const i=await this.getImage(t,e);return vt(i)}readImageData(t){const e=pt(t.width,t.height),i=e.getContext("2d");if(!i)throw new Error("Couldn't create a 2D canvas context");return i.drawImage(t,0,0),i.getImageData(0,0,e.width,e.height)}async getImageDataViaImageBitmap(t,e){return Ht(await this.getImageBitmap(t,e),(t=>this.readImageData(t)))}async getImageDataViaImage(t,e){const i=await this.getImage(t,e);return this.readImageData(i)}async getCubesViaImageBitmaps(t,e){const i=Qt(await this.getImageBitmap(t,e));return await Promise.all(i.map((t=>createImageBitmap(t))))}async getCubesViaImage(t,e){return Qt(await this.getImage(t,e))}async getEquiMapViaImageBitmaps(t,e,i,s){const n=Dt(s,[1,6]),a=await this.getImageDataViaImageBitmap(t,n.shift());return await async function(t,e,i,s,n){return await bt(n,It,((n,a)=>t(e,n,i,s,a)))}(_t,a,e,i,n.shift())}async getEquiMapViaImage(t,e,i,s){const n=Dt(s,[1,6]),a=await this.getImageDataViaImage(t,n.shift());return await async function(t,e,i,s,n){return await bt(n,It,((n,a)=>t(e,n,i,s,a)))}(kt,a,e,i,n.shift())}readBufferText(t){return new TextDecoder("utf-8").decode(t)}async getText(t,e){const{buffer:i}=await this.getBuffer(t,e);return this.readBufferText(i)}async postObjectForText(t,e,i){const{buffer:s}=await this.postObjectForBuffer(t,e,i);return this.readBufferText(s)}async getObject(t,e){const i=await this.getText(t,e);return JSON.parse(i)}async postObjectForObject(t,e,i){const s=await this.postObjectForText(t,e,i);return JSON.parse(s)}async postObject(t,e){await this.postObjectForResponse(t,e)}readTextXml(t){return(new DOMParser).parseFromString(t,"text/xml").documentElement}async getXml(t,e){const i=await this.getText(t,e);return this.readTextXml(i)}async postObjectForXml(t,e,i){const s=await this.postObjectForText(t,e,i);return this.readTextXml(s)}async loadScript(t,e,i){if(e())i&&i(1,1,"skip");else{const s=f(e);Ut(await this.getFile(t,i)),await s}}async renderImageBitmapFace(t,e,i,s,n){return await _t(t,e,i,s,n)}}class Gt extends Event{constructor(){super("audioActivity"),this.id=null,this.isActive=!1,Object.seal(this)}set(t,e){this.id=t,this.isActive=e}}const jt=i(HTMLAudioElement.prototype.setSinkId);var Wt,Vt,Zt;function Yt(t){return t.splice(0)}!function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting"}(Wt||(Wt={}));class Xt{constructor(t,e,i=null){this.value=t,this.desc=e,this.value=t,this.desc=e,this.props=i||{}}contains(t){return t instanceof Xt?this.contains(t.value):this.value.indexOf(t)>=0}}class Jt extends Event{constructor(t){super(t),this.eventType=t}}class Kt extends Jt{constructor(){super("serverConnected")}}class qt extends Jt{constructor(){super("serverDisconnected")}}class $t extends Jt{constructor(){super("serverFailed")}}class te extends Jt{constructor(t,e){super(t),this.id=e}}class ee extends te{constructor(t,e,i){super(t,e),this.displayName=i}}class ie extends te{constructor(t,e){super("conferenceJoined",t),this.pose=e}}class se extends te{constructor(t){super("conferenceLeft",t)}}class ne extends Jt{constructor(){super("conferenceFailed")}}class ae extends ee{constructor(t,e,i){super("participantJoined",t,e),this.source=i}}class oe extends te{constructor(t){super("participantLeft",t)}}class re extends ee{constructor(t,e){super("userNameChanged",t,e)}}class he extends te{constructor(t,e,i){super(t,e),this.muted=i}}class ce extends he{constructor(t,e){super("audioMuteStatusChanged",t,e)}}class Ae extends he{constructor(t,e){super("videoMuteStatusChanged",t,e)}}!function(t){t.Audio="audio",t.Video="video"}(Vt||(Vt={})),function(t){t.Added="added",t.Removed="removed",t.Changed="changed"}(Zt||(Zt={}));class le extends te{constructor(t,e,i,s,n){super(t,s),this.kind=e,this.op=i,this.stream=n}}class ue extends le{constructor(t,e,i,s){super(t,e,Zt.Added,i,s)}}class de extends le{constructor(t,e,i,s){super(t,e,Zt.Removed,i,s)}}class ge extends ue{constructor(t,e){super("audioAdded",Vt.Audio,t,e)}}class pe extends de{constructor(t,e){super("audioRemoved",Vt.Audio,t,e)}}class me extends ue{constructor(t,e){super("videoAdded",Vt.Video,t,e)}}class fe extends de{constructor(t,e){super("videoRemoved",Vt.Video,t,e)}}class ve extends te{constructor(t,e,i,s,n,a,o,r,h,c,A){super(t,e),this.px=i,this.py=s,this.pz=n,this.fx=a,this.fy=o,this.fz=r,this.ux=h,this.uy=c,this.uz=A}set(t,e,i,s,n,a,o,r,h){this.px=t,this.py=e,this.pz=i,this.fx=s,this.fy=n,this.fz=a,this.ux=o,this.uy=r,this.uz=h}}class we extends ve{constructor(t,e,i,s,n,a,o,r,h,c){super("userPosed",t,e,i,s,n,a,o,r,h,c)}}class Be extends ve{constructor(t,e,i,s,n,a,o,r,h,c,A){super("userPointer",t,i,s,n,a,o,r,h,c,A),this.name=e}}class ye extends te{constructor(t,e,i){super(t,e),this.emoji=i instanceof Xt?i.value:i}}class De extends ye{constructor(t,e){super("emote",t,e)}}class be extends ye{constructor(t,e){super("setAvatarEmoji",t,e)}}class Ce extends te{constructor(t,e){super("avatarChanged",t),this.url=e}}class Me extends te{constructor(t,e){super("chat",t),this.text=e}}function Pe(e,i){const s=e.indexOf(i);return s>-1&&(t(e,s),!0)}function Ie(t,e,i=!0){let s=function(t,e){let i=0,s=t.length,n=Math.floor((i+s)/2),a=!1;for(;i<s&&n<t.length;){const o=t[n];!l(o)&&e<o?s=n:(e===o&&(a=!0),i=n+1),n=Math.floor((i+s)/2)}return a||(n+=.5),n}(t,e);const n=s%1==0;return s|=0,n&&!i||t.splice(s,0,e),s}class xe extends g{constructor(t){super(),this.sleepTime=t,this.tasks=new Map}async getNext(t,e){return new Promise((i=>{const s=n=>{n instanceof te&&n.id===e&&(this.removeEventListener(t,s),i(n))};this.addEventListener(t,s)}))}get isConnected(){return this.metadataState===Wt.Connected}async callThrottled(t,e,...i){if(!this.tasks.has(t)){const n=performance.now(),a=this.callInternal(e,...i);this.tasks.set(t,a),await a;const o=performance.now()-n;this.sleepTime-o>0&&await(s=this.sleepTime,new Promise((t=>{setTimeout(t,s)}))),this.tasks.delete(t)}var s}async callImmediate(t,...e){await this.callInternal(t,...e)}setLocalPose(t,e,i,s,n,a,o,r,h){this.callThrottled("userPosed","userPosed",t,e,i,s,n,a,o,r,h)}setLocalPoseImmediate(t,e,i,s,n,a,o,r,h){this.callImmediate("userPosed",t,e,i,s,n,a,o,r,h)}setLocalPointer(t,e,i,s,n,a,o,r,h,c){this.callThrottled("userPointer"+t,"userPointer",t,e,i,s,n,a,o,r,h,c)}setAvatarEmoji(t){this.callImmediate("setAvatarEmoji",t)}setAvatarURL(t){this.callImmediate("avatarChanged",t)}emote(t){this.callImmediate("emote",t)}chat(t){this.callImmediate("chat",t)}}const Se="Calla";class Fe extends xe{constructor(t){super(250),this.tele=t,this._status=Wt.Disconnected,this.remoteUserIDs=new Array,this.tele.addEventListener("participantJoined",(t=>{Ie(this.remoteUserIDs,t.id,!1)})),this.tele.addEventListener("participantLeft",(t=>{Pe(this.remoteUserIDs,t.id)}))}get metadataState(){return this._status}async connect(){}async join(t){this._status=Wt.Connecting,this.tele.conference.addEventListener(JitsiMeetJS.events.conference.ENDPOINT_MESSAGE_RECEIVED,((t,e)=>{if(e.hax===Se){const i=t.getId(),s=e.command,n=e.values;switch(s){case"avatarChanged":this.dispatchEvent(new Ce(i,n[0]));break;case"emote":this.dispatchEvent(new De(i,n[0]));break;case"setAvatarEmoji":this.dispatchEvent(new be(i,n[0]));break;case"userPosed":this.dispatchEvent(new we(i,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]));break;case"userPointer":this.dispatchEvent(new Be(i,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));break;case"chat":this.dispatchEvent(new Me(i,n[0]));break;default:c(s)}}})),await m(this.tele.conference,JitsiMeetJS.events.conference.DATA_CHANNEL_OPENED),this._status=Wt.Connected}async leave(){this._status=Wt.Disconnected}async identify(t){}async disconnect(){}sendJitsiHax(t,e,...i){this.tele.conference.sendMessage({hax:Se,command:e,values:i},t)}callInternal(t,...e){for(const i of this.remoteUserIDs)this.sendJitsiHax(i,t,...e);return Promise.resolve()}async stopInternal(){this._status=Wt.Disconnecting,await f((()=>this.metadataState===Wt.Disconnected))}}function Ee(t,...e){for(const i of e)for(const e of t)if(i(e))return e;return null}const ke={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},_e={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Le={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Te={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Oe={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Re{static getFirstMatch(t,e){const i=e.match(t);return i&&i.length>0&&i[1]||""}static getSecondMatch(t,e){const i=e.match(t);return i&&i.length>1&&i[2]||""}static matchAndReturnConst(t,e,i){if(t.test(e))return i}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const e=t.split(".").splice(0,2).map((t=>parseInt(t,10)||0));if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const e=t.split(".").splice(0,2).map((t=>parseInt(t,10)||0));if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,e,i=!1){const s=Re.getVersionPrecision(t),n=Re.getVersionPrecision(e);let a=Math.max(s,n),o=0;const r=Re.map([t,e],(t=>{const e=a-Re.getVersionPrecision(t),i=t+new Array(e+1).join(".0");return Re.map(i.split("."),(t=>new Array(20-t.length).join("0")+t)).reverse()}));for(i&&(o=a-Math.min(s,n)),a-=1;a>=o;){if(r[0][a]>r[1][a])return 1;if(r[0][a]===r[1][a]){if(a===o)return 0;a-=1}else if(r[0][a]<r[1][a])return-1}}static map(t,e){const i=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,e);for(s=0;s<t.length;s+=1)i.push(e(t[s]));return i}static find(t,e){let i,s;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(i=0,s=t.length;i<s;i+=1){const s=t[i];if(e(s,i))return s}}static assign(t,...e){const i=t;let s,n;if(Object.assign)return Object.assign(t,...e);for(s=0,n=e.length;s<n;s+=1){const t=e[s];if("object"==typeof t&&null!==t){Object.keys(t).forEach((e=>{i[e]=t[e]}))}}return t}static getBrowserAlias(t){return ke[t]}static getBrowserTypeByAlias(t){return _e[t]||""}}const Qe=/version\/(\d+(\.?_?\d+)+)/i,Ue=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},i=Re.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},i=Re.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},i=Re.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},i=Re.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},i=Re.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},i=Re.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},i=Re.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},i=Re.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},i=Re.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},i=Re.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},i=Re.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},i=Re.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},i=Re.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},i=Re.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},i=Re.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return i&&(e.version=i),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},i=Re.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},i=Re.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},i=Re.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},i=Re.getFirstMatch(Qe,t)||Re.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},i=Re.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},i=Re.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},i=Re.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},i=Re.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},i=Re.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},i=Re.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},i=Re.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},i=Re.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},i=Re.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e={name:"Android Browser"},i=Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},i=Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},i=Re.getFirstMatch(Qe,t);return i&&(e.version=i),e}},{test:[/.*/i],describe(t){const e=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:Re.getFirstMatch(e,t),version:Re.getSecondMatch(e,t)}}}];var Ne=[{test:[/Roku\/DVP/],describe(t){const e=Re.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Te.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=Re.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Te.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=Re.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),i=Re.getWindowsVersionName(e);return{name:Te.Windows,version:e,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:Te.iOS},i=Re.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return i&&(e.version=i),e}},{test:[/macintosh/i],describe(t){const e=Re.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),i=Re.getMacOSVersionName(e),s={name:Te.MacOS,version:e};return i&&(s.versionName=i),s}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=Re.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Te.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e=Re.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),i=Re.getAndroidVersionName(e),s={name:Te.Android,version:e};return i&&(s.versionName=i),s}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=Re.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),i={name:Te.WebOS};return e&&e.length&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=Re.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||Re.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||Re.getFirstMatch(/\bbb(\d+)/i,t);return{name:Te.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=Re.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Te.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=Re.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Te.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:Te.Linux})},{test:[/CrOS/],describe:()=>({name:Te.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=Re.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Te.PlayStation4,version:e}}}],He=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=Re.getFirstMatch(/(can-l01)/i,t)&&"Nova",i={type:Le.mobile,vendor:"Huawei"};return e&&(i.model=e),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Le.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Le.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:Le.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Le.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Le.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Le.tablet})},{test(t){const e=t.test(/ipod|iphone/i),i=t.test(/like (ipod|iphone)/i);return e&&!i},describe(t){const e=Re.getFirstMatch(/(ipod|iphone)/i,t);return{type:Le.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Le.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Le.mobile})},{test:t=>"blackberry"===t.getBrowserName(!0),describe:()=>({type:Le.mobile,vendor:"BlackBerry"})},{test:t=>"bada"===t.getBrowserName(!0),describe:()=>({type:Le.mobile})},{test:t=>"windows phone"===t.getBrowserName(),describe:()=>({type:Le.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&e>=3},describe:()=>({type:Le.tablet})},{test:t=>"android"===t.getOSName(!0),describe:()=>({type:Le.mobile})},{test:t=>"macos"===t.getOSName(!0),describe:()=>({type:Le.desktop,vendor:"Apple"})},{test:t=>"windows"===t.getOSName(!0),describe:()=>({type:Le.desktop})},{test:t=>"linux"===t.getOSName(!0),describe:()=>({type:Le.desktop})},{test:t=>"playstation 4"===t.getOSName(!0),describe:()=>({type:Le.tv})},{test:t=>"roku"===t.getOSName(!0),describe:()=>({type:Le.tv})}],ze=[{test:t=>"microsoft edge"===t.getBrowserName(!0),describe(t){if(/\sedg\//i.test(t))return{name:Oe.Blink};const e=Re.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Oe.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:Oe.Trident},i=Re.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:Oe.Presto},i=Re.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=t.test(/gecko/i),i=t.test(/like gecko/i);return e&&!i},describe(t){const e={name:Oe.Gecko},i=Re.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Oe.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:Oe.WebKit},i=Re.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}}];class Ge{constructor(t,e=!1){if(null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==e&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=Re.find(Ue,(t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some((t=>this.test(t)));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=Re.find(Ne,(t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some((t=>this.test(t)));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:e}=this.getOS();return t?String(e).toLowerCase()||"":e||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:e}=this.getPlatform();return t?String(e).toLowerCase()||"":e||""}parsePlatform(){this.parsedResult.platform={};const t=Re.find(He,(t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some((t=>this.test(t)));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=Re.find(ze,(t=>{if("function"==typeof t.test)return t.test(this);if(t.test instanceof Array)return t.test.some((t=>this.test(t)));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Re.assign({},this.parsedResult)}satisfies(t){const e={};let i=0;const s={};let n=0;if(Object.keys(t).forEach((a=>{const o=t[a];"string"==typeof o?(s[a]=o,n+=1):"object"==typeof o&&(e[a]=o,i+=1)})),i>0){const t=Object.keys(e),i=Re.find(t,(t=>this.isOS(t)));if(i){const t=this.satisfies(e[i]);if(void 0!==t)return t}const s=Re.find(t,(t=>this.isPlatform(t)));if(s){const t=this.satisfies(e[s]);if(void 0!==t)return t}}if(n>0){const t=Object.keys(s),e=Re.find(t,(t=>this.isBrowser(t,!0)));if(void 0!==e)return this.compareVersion(s[e])}}isBrowser(t,e=!1){const i=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const n=Re.getBrowserTypeByAlias(s);return e&&n&&(s=n.toLowerCase()),s===i}compareVersion(t){let e=[0],i=t,s=!1;const n=this.getBrowserVersion();if("string"==typeof n)return">"===t[0]||"<"===t[0]?(i=t.substr(1),"="===t[1]?(s=!0,i=t.substr(2)):e=[],">"===t[0]?e.push(1):e.push(-1)):"="===t[0]?i=t.substr(1):"~"===t[0]&&(s=!0,i=t.substr(1)),e.indexOf(Re.compareVersions(n,i,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,e=!1){return this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some((t=>this.is(t)))}}const je=class{static getParser(t,e=!1){if("string"!=typeof t)throw new Error("UserAgent should be a string");return new Ge(t,e)}static parse(t){return new Ge(t).getResult()}static get BROWSER_MAP(){return _e}static get ENGINE_MAP(){return Oe}static get OS_MAP(){return Te}static get PLATFORMS_MAP(){return Le}}.getParser(navigator.userAgent).getResult(),We=(je.platform.type,je.engine.name,"InstallTrigger"in globalThis),Ve=/iPad|iPhone|iPod/.test(navigator.platform)||/Macintosh(.*?) FxiOS(.*?)\//.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>2,Ze=(/^((?!chrome|android).)*safari/i.test(navigator.userAgent),/Mobile VR/.test(navigator.userAgent),/oculus/.test(navigator.userAgent)),Ye=(Ze&&/pacific/.test(navigator.userAgent),Ze&&/quest/.test(navigator.userAgent)),Xe=["change","click","contextmenu","dblclick","mouseup","pointerup","reset","submit","touchend"];function Je(){return Promise.resolve()}class Ke{constructor(t){this.audioContext=t,this.gain=null,this.minDistance=1,this.maxDistance=10,this.rolloff=1,this.algorithm="logarithmic",this.transitionTime=.1,this.gain=t.createGain()}setAudioProperties(t,e,i,s,n){this.minDistance=t,this.maxDistance=e,this.rolloff=i,this.algorithm=s,this.transitionTime=n}dispose(){this.gain&&(this.gain.disconnect(),this.gain=null)}get volume(){return this.gain.gain.value}set volume(t){this.gain.gain.value=t}play(){return Promise.resolve()}stop(){}}class qe extends Ke{constructor(t,e,i){super(i),this.id=t,this.source=e,this.source instanceof AudioBufferSourceNode?this.playingSources=new Array:this.source.connect(this.gain)}dispose(){this.source&&(this.source.disconnect(),this.source=null),super.dispose()}get isPlaying(){return this.playingSources.length>0}async play(){if(this.source instanceof AudioBufferSourceNode){const t=this.source.context.createBufferSource();this.playingSources.push(t),t.buffer=this.source.buffer,t.loop=this.source.loop,t.connect(this.gain),t.start(),this.source.loop||(await m(t,"ended"),this.playingSources.indexOf(t)>=0&&(t.stop(),t.disconnect(this.gain),Pe(this.playingSources,t)))}}stop(){if(this.source instanceof AudioBufferSourceNode){for(const t of this.playingSources)t.stop(),t.disconnect(this.gain);Yt(this.playingSources)}}}const $e=new Gt;function ti(t,e,i){const s=e/2;return Ct(Math.round(t/s*i),0,i)}class ei extends g{constructor(t,e,i){if(super(),this.wasActive=!1,this.analyser=null,!A(i)||i<=0)throw new Error("Buffer size must be greater than 0");this.id=t.id,this.bufferSize=i,this.buffer=new Float32Array(this.bufferSize),this.wasActive=!1,this.activityCounter=0;const s=()=>{t.spatializer instanceof qe&&t.spatializer.source?(this.analyser=e.createAnalyser(),this.analyser.fftSize=2*this.bufferSize,this.analyser.smoothingTimeConstant=.2,t.spatializer.source.connect(this.analyser)):setTimeout(s,0)};s()}dispose(){this.analyser&&(this.analyser.disconnect(),this.analyser=null),this.buffer=null}update(){if(this.analyser){this.analyser.getFloatFrequencyData(this.buffer);const t=1.1+function(t,e,i,s,n){const a=t.context.sampleRate,o=ti(i,a,n),r=ti(s,a,n),h=r-o;let c=0;for(let t=o;t<r;++t)c+=e[t];return 0===h?0:c/h}(this.analyser,this.buffer,85,255,this.bufferSize)/100;t>=.5&&this.activityCounter<60?this.activityCounter++:t<.5&&this.activityCounter>0&&this.activityCounter--;const e=this.activityCounter>5;this.wasActive!==e&&(this.wasActive=e,$e.id=this.id,$e.isActive=e,this.dispatchEvent($e))}}}var ii="undefined"!=typeof Float32Array?Float32Array:Array;function si(){var t=new ii(9);return ii!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ni(t,e,i,s,n,a,o,r,h,c){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=a,t[5]=o,t[6]=r,t[7]=h,t[8]=c,t}function ai(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function oi(){var t=new ii(16);return ii!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ri(t,e,i,s,n,a,o,r,h,c,A,l,u,d,g,p,m){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=a,t[5]=o,t[6]=r,t[7]=h,t[8]=c,t[9]=A,t[10]=l,t[11]=u,t[12]=d,t[13]=g,t[14]=p,t[15]=m,t}function hi(){var t=new ii(3);return ii!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ci(t){var e=t[0],i=t[1],s=t[2];return Math.hypot(e,i,s)}function Ai(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function li(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t}function ui(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function di(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function gi(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function pi(t,e){var i=e[0],s=e[1],n=e[2],a=i*i+s*s+n*n;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function mi(t,e,i){var s=e[0],n=e[1],a=e[2],o=i[0],r=i[1],h=i[2];return t[0]=n*h-a*r,t[1]=a*o-s*h,t[2]=s*r-n*o,t}function fi(t,e,i,s){var n=e[0],a=e[1],o=e[2];return t[0]=n+s*(i[0]-n),t[1]=a+s*(i[1]-a),t[2]=o+s*(i[2]-o),t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var vi,wi=di;vi=hi();function Bi(t,e,i){const s=i-e;return 0===s?0:(t-e)/s}class yi{constructor(){this.t=0,this.p=hi(),this.f=li(hi(),0,0,-1),this.u=li(hi(),0,1,0),Object.seal(this)}set(t,e,i,s,n,a,o,r,h){li(this.p,t,e,i),li(this.f,s,n,a),li(this.u,o,r,h)}copy(t){Ai(this.p,t.p),Ai(this.f,t.f),Ai(this.u,t.u)}interpolate(t,e,i){if(i<=t.t)this.copy(t);else if(e.t<=i)this.copy(e);else if(t.t<i){const s=Bi(i,t.t,e.t);this.copy(t),fi(this.p,this.p,e.p,s),fi(this.f,this.f,e.f,s),fi(this.u,this.u,e.u,s),pi(this.f,this.f),pi(this.u,this.u),this.t=i}}}const Di=hi();class bi{constructor(){this.start=new yi,this.current=new yi,this.end=new yi,this.offset=hi()}setOffset(t,e,i){li(Di,t,e,i),wi(Di,Di,this.offset),ui(this.start.p,this.start.p,Di),ui(this.current.p,this.current.p,Di),ui(this.end.p,this.end.p,Di),gi(this.start.f,this.start.f,2),ui(this.start.f,this.start.f,Di),pi(this.start.f,this.start.f),gi(this.current.f,this.current.f,2),ui(this.current.f,this.current.f,Di),pi(this.current.f,this.current.f),gi(this.end.f,this.end.f,2),ui(this.end.f,this.end.f,Di),pi(this.end.f,this.end.f),li(this.offset,t,e,i)}setTarget(t,e,i,s,n,a,o,r,h,c,A){const l=this.offset[0],u=this.offset[1],d=this.offset[2];this.end.set(t+l,e+u,i+d,s,n,a,o,r,h),this.end.t=c+A,A>0?(this.start.copy(this.current),this.start.t=c):(this.start.copy(this.end),this.start.t=c,this.current.copy(this.end),this.current.t=c)}setTargetPosition(t,e,i,s,n){this.setTarget(t,e,i,this.end.f[0],this.end.f[1],this.end.f[2],this.end.u[0],this.end.u[1],this.end.u[2],s,n)}setTargetOrientation(t,e,i,s,n,a,o,r){this.setTarget(this.end.p[0],this.end.p[1],this.end.p[2],t,e,i,s,n,a,o,r)}update(t){this.current.interpolate(this.start,this.end,t)}}class Ci{constructor(t){this.id=t,this.pose=new bi,this.streams=new Map,this._spatializer=null}get spatializer(){return this._spatializer}set spatializer(t){this.spatializer!==t&&(this._spatializer&&this._spatializer.dispose(),this._spatializer=t)}dispose(){this.spatializer=null}update(t){this.pose.update(t),this.spatializer&&this.spatializer.update(this.pose.current,t)}}var Mi;!function(t){t.Ambisonic="ambisonic",t.Bypass="bypass",t.None="off"}(Mi||(Mi={}));const Pi=[[[0,0,0,1,1,1],[.052336,.034899,.017452,.999848,.999391,.99863],[.104528,.069756,.034899,.999391,.997564,.994522],[.156434,.104528,.052336,.99863,.994522,.987688],[.207912,.139173,.069756,.997564,.990268,.978148],[.258819,.173648,.087156,.996195,.984808,.965926],[.309017,.207912,.104528,.994522,.978148,.951057],[.358368,.241922,.121869,.992546,.970296,.93358],[.406737,.275637,.139173,.990268,.961262,.913545],[.45399,.309017,.156434,.987688,.951057,.891007],[.5,.34202,.173648,.984808,.939693,.866025],[.544639,.374607,.190809,.981627,.927184,.838671],[.587785,.406737,.207912,.978148,.913545,.809017],[.62932,.438371,.224951,.97437,.898794,.777146],[.669131,.469472,.241922,.970296,.882948,.743145],[.707107,.5,.258819,.965926,.866025,.707107],[.743145,.529919,.275637,.961262,.848048,.669131],[.777146,.559193,.292372,.956305,.829038,.62932],[.809017,.587785,.309017,.951057,.809017,.587785],[.838671,.615661,.325568,.945519,.788011,.544639],[.866025,.642788,.34202,.939693,.766044,.5],[.891007,.669131,.358368,.93358,.743145,.45399],[.913545,.694658,.374607,.927184,.71934,.406737],[.93358,.71934,.390731,.920505,.694658,.358368],[.951057,.743145,.406737,.913545,.669131,.309017],[.965926,.766044,.422618,.906308,.642788,.258819],[.978148,.788011,.438371,.898794,.615661,.207912],[.987688,.809017,.45399,.891007,.587785,.156434],[.994522,.829038,.469472,.882948,.559193,.104528],[.99863,.848048,.48481,.87462,.529919,.052336],[1,.866025,.5,.866025,.5,0],[.99863,.882948,.515038,.857167,.469472,-.052336],[.994522,.898794,.529919,.848048,.438371,-.104528],[.987688,.913545,.544639,.838671,.406737,-.156434],[.978148,.927184,.559193,.829038,.374607,-.207912],[.965926,.939693,.573576,.819152,.34202,-.258819],[.951057,.951057,.587785,.809017,.309017,-.309017],[.93358,.961262,.601815,.798636,.275637,-.358368],[.913545,.970296,.615661,.788011,.241922,-.406737],[.891007,.978148,.62932,.777146,.207912,-.45399],[.866025,.984808,.642788,.766044,.173648,-.5],[.838671,.990268,.656059,.75471,.139173,-.544639],[.809017,.994522,.669131,.743145,.104528,-.587785],[.777146,.997564,.681998,.731354,.069756,-.62932],[.743145,.999391,.694658,.71934,.034899,-.669131],[.707107,1,.707107,.707107,0,-.707107],[.669131,.999391,.71934,.694658,-.034899,-.743145],[.62932,.997564,.731354,.681998,-.069756,-.777146],[.587785,.994522,.743145,.669131,-.104528,-.809017],[.544639,.990268,.75471,.656059,-.139173,-.838671],[.5,.984808,.766044,.642788,-.173648,-.866025],[.45399,.978148,.777146,.62932,-.207912,-.891007],[.406737,.970296,.788011,.615661,-.241922,-.913545],[.358368,.961262,.798636,.601815,-.275637,-.93358],[.309017,.951057,.809017,.587785,-.309017,-.951057],[.258819,.939693,.819152,.573576,-.34202,-.965926],[.207912,.927184,.829038,.559193,-.374607,-.978148],[.156434,.913545,.838671,.544639,-.406737,-.987688],[.104528,.898794,.848048,.529919,-.438371,-.994522],[.052336,.882948,.857167,.515038,-.469472,-.99863],[0,.866025,.866025,.5,-.5,-1],[-.052336,.848048,.87462,.48481,-.529919,-.99863],[-.104528,.829038,.882948,.469472,-.559193,-.994522],[-.156434,.809017,.891007,.45399,-.587785,-.987688],[-.207912,.788011,.898794,.438371,-.615661,-.978148],[-.258819,.766044,.906308,.422618,-.642788,-.965926],[-.309017,.743145,.913545,.406737,-.669131,-.951057],[-.358368,.71934,.920505,.390731,-.694658,-.93358],[-.406737,.694658,.927184,.374607,-.71934,-.913545],[-.45399,.669131,.93358,.358368,-.743145,-.891007],[-.5,.642788,.939693,.34202,-.766044,-.866025],[-.544639,.615661,.945519,.325568,-.788011,-.838671],[-.587785,.587785,.951057,.309017,-.809017,-.809017],[-.62932,.559193,.956305,.292372,-.829038,-.777146],[-.669131,.529919,.961262,.275637,-.848048,-.743145],[-.707107,.5,.965926,.258819,-.866025,-.707107],[-.743145,.469472,.970296,.241922,-.882948,-.669131],[-.777146,.438371,.97437,.224951,-.898794,-.62932],[-.809017,.406737,.978148,.207912,-.913545,-.587785],[-.838671,.374607,.981627,.190809,-.927184,-.544639],[-.866025,.34202,.984808,.173648,-.939693,-.5],[-.891007,.309017,.987688,.156434,-.951057,-.45399],[-.913545,.275637,.990268,.139173,-.961262,-.406737],[-.93358,.241922,.992546,.121869,-.970296,-.358368],[-.951057,.207912,.994522,.104528,-.978148,-.309017],[-.965926,.173648,.996195,.087156,-.984808,-.258819],[-.978148,.139173,.997564,.069756,-.990268,-.207912],[-.987688,.104528,.99863,.052336,-.994522,-.156434],[-.994522,.069756,.999391,.034899,-.997564,-.104528],[-.99863,.034899,.999848,.017452,-.999391,-.052336],[-1,0,1,0,-1,-0],[-.99863,-.034899,.999848,-.017452,-.999391,.052336],[-.994522,-.069756,.999391,-.034899,-.997564,.104528],[-.987688,-.104528,.99863,-.052336,-.994522,.156434],[-.978148,-.139173,.997564,-.069756,-.990268,.207912],[-.965926,-.173648,.996195,-.087156,-.984808,.258819],[-.951057,-.207912,.994522,-.104528,-.978148,.309017],[-.93358,-.241922,.992546,-.121869,-.970296,.358368],[-.913545,-.275637,.990268,-.139173,-.961262,.406737],[-.891007,-.309017,.987688,-.156434,-.951057,.45399],[-.866025,-.34202,.984808,-.173648,-.939693,.5],[-.838671,-.374607,.981627,-.190809,-.927184,.544639],[-.809017,-.406737,.978148,-.207912,-.913545,.587785],[-.777146,-.438371,.97437,-.224951,-.898794,.62932],[-.743145,-.469472,.970296,-.241922,-.882948,.669131],[-.707107,-.5,.965926,-.258819,-.866025,.707107],[-.669131,-.529919,.961262,-.275637,-.848048,.743145],[-.62932,-.559193,.956305,-.292372,-.829038,.777146],[-.587785,-.587785,.951057,-.309017,-.809017,.809017],[-.544639,-.615661,.945519,-.325568,-.788011,.838671],[-.5,-.642788,.939693,-.34202,-.766044,.866025],[-.45399,-.669131,.93358,-.358368,-.743145,.891007],[-.406737,-.694658,.927184,-.374607,-.71934,.913545],[-.358368,-.71934,.920505,-.390731,-.694658,.93358],[-.309017,-.743145,.913545,-.406737,-.669131,.951057],[-.258819,-.766044,.906308,-.422618,-.642788,.965926],[-.207912,-.788011,.898794,-.438371,-.615661,.978148],[-.156434,-.809017,.891007,-.45399,-.587785,.987688],[-.104528,-.829038,.882948,-.469472,-.559193,.994522],[-.052336,-.848048,.87462,-.48481,-.529919,.99863],[-0,-.866025,.866025,-.5,-.5,1],[.052336,-.882948,.857167,-.515038,-.469472,.99863],[.104528,-.898794,.848048,-.529919,-.438371,.994522],[.156434,-.913545,.838671,-.544639,-.406737,.987688],[.207912,-.927184,.829038,-.559193,-.374607,.978148],[.258819,-.939693,.819152,-.573576,-.34202,.965926],[.309017,-.951057,.809017,-.587785,-.309017,.951057],[.358368,-.961262,.798636,-.601815,-.275637,.93358],[.406737,-.970296,.788011,-.615661,-.241922,.913545],[.45399,-.978148,.777146,-.62932,-.207912,.891007],[.5,-.984808,.766044,-.642788,-.173648,.866025],[.544639,-.990268,.75471,-.656059,-.139173,.838671],[.587785,-.994522,.743145,-.669131,-.104528,.809017],[.62932,-.997564,.731354,-.681998,-.069756,.777146],[.669131,-.999391,.71934,-.694658,-.034899,.743145],[.707107,-1,.707107,-.707107,-0,.707107],[.743145,-.999391,.694658,-.71934,.034899,.669131],[.777146,-.997564,.681998,-.731354,.069756,.62932],[.809017,-.994522,.669131,-.743145,.104528,.587785],[.838671,-.990268,.656059,-.75471,.139173,.544639],[.866025,-.984808,.642788,-.766044,.173648,.5],[.891007,-.978148,.62932,-.777146,.207912,.45399],[.913545,-.970296,.615661,-.788011,.241922,.406737],[.93358,-.961262,.601815,-.798636,.275637,.358368],[.951057,-.951057,.587785,-.809017,.309017,.309017],[.965926,-.939693,.573576,-.819152,.34202,.258819],[.978148,-.927184,.559193,-.829038,.374607,.207912],[.987688,-.913545,.544639,-.838671,.406737,.156434],[.994522,-.898794,.529919,-.848048,.438371,.104528],[.99863,-.882948,.515038,-.857167,.469472,.052336],[1,-.866025,.5,-.866025,.5,0],[.99863,-.848048,.48481,-.87462,.529919,-.052336],[.994522,-.829038,.469472,-.882948,.559193,-.104528],[.987688,-.809017,.45399,-.891007,.587785,-.156434],[.978148,-.788011,.438371,-.898794,.615661,-.207912],[.965926,-.766044,.422618,-.906308,.642788,-.258819],[.951057,-.743145,.406737,-.913545,.669131,-.309017],[.93358,-.71934,.390731,-.920505,.694658,-.358368],[.913545,-.694658,.374607,-.927184,.71934,-.406737],[.891007,-.669131,.358368,-.93358,.743145,-.45399],[.866025,-.642788,.34202,-.939693,.766044,-.5],[.838671,-.615661,.325568,-.945519,.788011,-.544639],[.809017,-.587785,.309017,-.951057,.809017,-.587785],[.777146,-.559193,.292372,-.956305,.829038,-.62932],[.743145,-.529919,.275637,-.961262,.848048,-.669131],[.707107,-.5,.258819,-.965926,.866025,-.707107],[.669131,-.469472,.241922,-.970296,.882948,-.743145],[.62932,-.438371,.224951,-.97437,.898794,-.777146],[.587785,-.406737,.207912,-.978148,.913545,-.809017],[.544639,-.374607,.190809,-.981627,.927184,-.838671],[.5,-.34202,.173648,-.984808,.939693,-.866025],[.45399,-.309017,.156434,-.987688,.951057,-.891007],[.406737,-.275637,.139173,-.990268,.961262,-.913545],[.358368,-.241922,.121869,-.992546,.970296,-.93358],[.309017,-.207912,.104528,-.994522,.978148,-.951057],[.258819,-.173648,.087156,-.996195,.984808,-.965926],[.207912,-.139173,.069756,-.997564,.990268,-.978148],[.156434,-.104528,.052336,-.99863,.994522,-.987688],[.104528,-.069756,.034899,-.999391,.997564,-.994522],[.052336,-.034899,.017452,-.999848,.999391,-.99863],[0,-0,0,-1,1,-1],[-.052336,.034899,-.017452,-.999848,.999391,-.99863],[-.104528,.069756,-.034899,-.999391,.997564,-.994522],[-.156434,.104528,-.052336,-.99863,.994522,-.987688],[-.207912,.139173,-.069756,-.997564,.990268,-.978148],[-.258819,.173648,-.087156,-.996195,.984808,-.965926],[-.309017,.207912,-.104528,-.994522,.978148,-.951057],[-.358368,.241922,-.121869,-.992546,.970296,-.93358],[-.406737,.275637,-.139173,-.990268,.961262,-.913545],[-.45399,.309017,-.156434,-.987688,.951057,-.891007],[-.5,.34202,-.173648,-.984808,.939693,-.866025],[-.544639,.374607,-.190809,-.981627,.927184,-.838671],[-.587785,.406737,-.207912,-.978148,.913545,-.809017],[-.62932,.438371,-.224951,-.97437,.898794,-.777146],[-.669131,.469472,-.241922,-.970296,.882948,-.743145],[-.707107,.5,-.258819,-.965926,.866025,-.707107],[-.743145,.529919,-.275637,-.961262,.848048,-.669131],[-.777146,.559193,-.292372,-.956305,.829038,-.62932],[-.809017,.587785,-.309017,-.951057,.809017,-.587785],[-.838671,.615661,-.325568,-.945519,.788011,-.544639],[-.866025,.642788,-.34202,-.939693,.766044,-.5],[-.891007,.669131,-.358368,-.93358,.743145,-.45399],[-.913545,.694658,-.374607,-.927184,.71934,-.406737],[-.93358,.71934,-.390731,-.920505,.694658,-.358368],[-.951057,.743145,-.406737,-.913545,.669131,-.309017],[-.965926,.766044,-.422618,-.906308,.642788,-.258819],[-.978148,.788011,-.438371,-.898794,.615661,-.207912],[-.987688,.809017,-.45399,-.891007,.587785,-.156434],[-.994522,.829038,-.469472,-.882948,.559193,-.104528],[-.99863,.848048,-.48481,-.87462,.529919,-.052336],[-1,.866025,-.5,-.866025,.5,0],[-.99863,.882948,-.515038,-.857167,.469472,.052336],[-.994522,.898794,-.529919,-.848048,.438371,.104528],[-.987688,.913545,-.544639,-.838671,.406737,.156434],[-.978148,.927184,-.559193,-.829038,.374607,.207912],[-.965926,.939693,-.573576,-.819152,.34202,.258819],[-.951057,.951057,-.587785,-.809017,.309017,.309017],[-.93358,.961262,-.601815,-.798636,.275637,.358368],[-.913545,.970296,-.615661,-.788011,.241922,.406737],[-.891007,.978148,-.62932,-.777146,.207912,.45399],[-.866025,.984808,-.642788,-.766044,.173648,.5],[-.838671,.990268,-.656059,-.75471,.139173,.544639],[-.809017,.994522,-.669131,-.743145,.104528,.587785],[-.777146,.997564,-.681998,-.731354,.069756,.62932],[-.743145,.999391,-.694658,-.71934,.034899,.669131],[-.707107,1,-.707107,-.707107,0,.707107],[-.669131,.999391,-.71934,-.694658,-.034899,.743145],[-.62932,.997564,-.731354,-.681998,-.069756,.777146],[-.587785,.994522,-.743145,-.669131,-.104528,.809017],[-.544639,.990268,-.75471,-.656059,-.139173,.838671],[-.5,.984808,-.766044,-.642788,-.173648,.866025],[-.45399,.978148,-.777146,-.62932,-.207912,.891007],[-.406737,.970296,-.788011,-.615661,-.241922,.913545],[-.358368,.961262,-.798636,-.601815,-.275637,.93358],[-.309017,.951057,-.809017,-.587785,-.309017,.951057],[-.258819,.939693,-.819152,-.573576,-.34202,.965926],[-.207912,.927184,-.829038,-.559193,-.374607,.978148],[-.156434,.913545,-.838671,-.544639,-.406737,.987688],[-.104528,.898794,-.848048,-.529919,-.438371,.994522],[-.052336,.882948,-.857167,-.515038,-.469472,.99863],[-0,.866025,-.866025,-.5,-.5,1],[.052336,.848048,-.87462,-.48481,-.529919,.99863],[.104528,.829038,-.882948,-.469472,-.559193,.994522],[.156434,.809017,-.891007,-.45399,-.587785,.987688],[.207912,.788011,-.898794,-.438371,-.615661,.978148],[.258819,.766044,-.906308,-.422618,-.642788,.965926],[.309017,.743145,-.913545,-.406737,-.669131,.951057],[.358368,.71934,-.920505,-.390731,-.694658,.93358],[.406737,.694658,-.927184,-.374607,-.71934,.913545],[.45399,.669131,-.93358,-.358368,-.743145,.891007],[.5,.642788,-.939693,-.34202,-.766044,.866025],[.544639,.615661,-.945519,-.325568,-.788011,.838671],[.587785,.587785,-.951057,-.309017,-.809017,.809017],[.62932,.559193,-.956305,-.292372,-.829038,.777146],[.669131,.529919,-.961262,-.275637,-.848048,.743145],[.707107,.5,-.965926,-.258819,-.866025,.707107],[.743145,.469472,-.970296,-.241922,-.882948,.669131],[.777146,.438371,-.97437,-.224951,-.898794,.62932],[.809017,.406737,-.978148,-.207912,-.913545,.587785],[.838671,.374607,-.981627,-.190809,-.927184,.544639],[.866025,.34202,-.984808,-.173648,-.939693,.5],[.891007,.309017,-.987688,-.156434,-.951057,.45399],[.913545,.275637,-.990268,-.139173,-.961262,.406737],[.93358,.241922,-.992546,-.121869,-.970296,.358368],[.951057,.207912,-.994522,-.104528,-.978148,.309017],[.965926,.173648,-.996195,-.087156,-.984808,.258819],[.978148,.139173,-.997564,-.069756,-.990268,.207912],[.987688,.104528,-.99863,-.052336,-.994522,.156434],[.994522,.069756,-.999391,-.034899,-.997564,.104528],[.99863,.034899,-.999848,-.017452,-.999391,.052336],[1,0,-1,-0,-1,0],[.99863,-.034899,-.999848,.017452,-.999391,-.052336],[.994522,-.069756,-.999391,.034899,-.997564,-.104528],[.987688,-.104528,-.99863,.052336,-.994522,-.156434],[.978148,-.139173,-.997564,.069756,-.990268,-.207912],[.965926,-.173648,-.996195,.087156,-.984808,-.258819],[.951057,-.207912,-.994522,.104528,-.978148,-.309017],[.93358,-.241922,-.992546,.121869,-.970296,-.358368],[.913545,-.275637,-.990268,.139173,-.961262,-.406737],[.891007,-.309017,-.987688,.156434,-.951057,-.45399],[.866025,-.34202,-.984808,.173648,-.939693,-.5],[.838671,-.374607,-.981627,.190809,-.927184,-.544639],[.809017,-.406737,-.978148,.207912,-.913545,-.587785],[.777146,-.438371,-.97437,.224951,-.898794,-.62932],[.743145,-.469472,-.970296,.241922,-.882948,-.669131],[.707107,-.5,-.965926,.258819,-.866025,-.707107],[.669131,-.529919,-.961262,.275637,-.848048,-.743145],[.62932,-.559193,-.956305,.292372,-.829038,-.777146],[.587785,-.587785,-.951057,.309017,-.809017,-.809017],[.544639,-.615661,-.945519,.325568,-.788011,-.838671],[.5,-.642788,-.939693,.34202,-.766044,-.866025],[.45399,-.669131,-.93358,.358368,-.743145,-.891007],[.406737,-.694658,-.927184,.374607,-.71934,-.913545],[.358368,-.71934,-.920505,.390731,-.694658,-.93358],[.309017,-.743145,-.913545,.406737,-.669131,-.951057],[.258819,-.766044,-.906308,.422618,-.642788,-.965926],[.207912,-.788011,-.898794,.438371,-.615661,-.978148],[.156434,-.809017,-.891007,.45399,-.587785,-.987688],[.104528,-.829038,-.882948,.469472,-.559193,-.994522],[.052336,-.848048,-.87462,.48481,-.529919,-.99863],[0,-.866025,-.866025,.5,-.5,-1],[-.052336,-.882948,-.857167,.515038,-.469472,-.99863],[-.104528,-.898794,-.848048,.529919,-.438371,-.994522],[-.156434,-.913545,-.838671,.544639,-.406737,-.987688],[-.207912,-.927184,-.829038,.559193,-.374607,-.978148],[-.258819,-.939693,-.819152,.573576,-.34202,-.965926],[-.309017,-.951057,-.809017,.587785,-.309017,-.951057],[-.358368,-.961262,-.798636,.601815,-.275637,-.93358],[-.406737,-.970296,-.788011,.615661,-.241922,-.913545],[-.45399,-.978148,-.777146,.62932,-.207912,-.891007],[-.5,-.984808,-.766044,.642788,-.173648,-.866025],[-.544639,-.990268,-.75471,.656059,-.139173,-.838671],[-.587785,-.994522,-.743145,.669131,-.104528,-.809017],[-.62932,-.997564,-.731354,.681998,-.069756,-.777146],[-.669131,-.999391,-.71934,.694658,-.034899,-.743145],[-.707107,-1,-.707107,.707107,-0,-.707107],[-.743145,-.999391,-.694658,.71934,.034899,-.669131],[-.777146,-.997564,-.681998,.731354,.069756,-.62932],[-.809017,-.994522,-.669131,.743145,.104528,-.587785],[-.838671,-.990268,-.656059,.75471,.139173,-.544639],[-.866025,-.984808,-.642788,.766044,.173648,-.5],[-.891007,-.978148,-.62932,.777146,.207912,-.45399],[-.913545,-.970296,-.615661,.788011,.241922,-.406737],[-.93358,-.961262,-.601815,.798636,.275637,-.358368],[-.951057,-.951057,-.587785,.809017,.309017,-.309017],[-.965926,-.939693,-.573576,.819152,.34202,-.258819],[-.978148,-.927184,-.559193,.829038,.374607,-.207912],[-.987688,-.913545,-.544639,.838671,.406737,-.156434],[-.994522,-.898794,-.529919,.848048,.438371,-.104528],[-.99863,-.882948,-.515038,.857167,.469472,-.052336],[-1,-.866025,-.5,.866025,.5,-0],[-.99863,-.848048,-.48481,.87462,.529919,.052336],[-.994522,-.829038,-.469472,.882948,.559193,.104528],[-.987688,-.809017,-.45399,.891007,.587785,.156434],[-.978148,-.788011,-.438371,.898794,.615661,.207912],[-.965926,-.766044,-.422618,.906308,.642788,.258819],[-.951057,-.743145,-.406737,.913545,.669131,.309017],[-.93358,-.71934,-.390731,.920505,.694658,.358368],[-.913545,-.694658,-.374607,.927184,.71934,.406737],[-.891007,-.669131,-.358368,.93358,.743145,.45399],[-.866025,-.642788,-.34202,.939693,.766044,.5],[-.838671,-.615661,-.325568,.945519,.788011,.544639],[-.809017,-.587785,-.309017,.951057,.809017,.587785],[-.777146,-.559193,-.292372,.956305,.829038,.62932],[-.743145,-.529919,-.275637,.961262,.848048,.669131],[-.707107,-.5,-.258819,.965926,.866025,.707107],[-.669131,-.469472,-.241922,.970296,.882948,.743145],[-.62932,-.438371,-.224951,.97437,.898794,.777146],[-.587785,-.406737,-.207912,.978148,.913545,.809017],[-.544639,-.374607,-.190809,.981627,.927184,.838671],[-.5,-.34202,-.173648,.984808,.939693,.866025],[-.45399,-.309017,-.156434,.987688,.951057,.891007],[-.406737,-.275637,-.139173,.990268,.961262,.913545],[-.358368,-.241922,-.121869,.992546,.970296,.93358],[-.309017,-.207912,-.104528,.994522,.978148,.951057],[-.258819,-.173648,-.087156,.996195,.984808,.965926],[-.207912,-.139173,-.069756,.997564,.990268,.978148],[-.156434,-.104528,-.052336,.99863,.994522,.987688],[-.104528,-.069756,-.034899,.999391,.997564,.994522],[-.052336,-.034899,-.017452,.999848,.999391,.99863]],[[-1,-0,1,-0,0,-1,-0,0,-0],[-.999848,.017452,.999543,-.030224,264e-6,-.999086,.042733,-59e-5,4e-6],[-.999391,.034899,.998173,-.060411,.001055,-.996348,.085356,-.002357,34e-6],[-.99863,.052336,.995891,-.090524,.002372,-.991791,.127757,-.005297,113e-6],[-.997564,.069756,.992701,-.120527,.004214,-.985429,.169828,-.0094,268e-6],[-.996195,.087156,.988606,-.150384,.006578,-.977277,.21146,-.014654,523e-6],[-.994522,.104528,.983611,-.180057,.009462,-.967356,.252544,-.021043,903e-6],[-.992546,.121869,.977722,-.209511,.012862,-.955693,.292976,-.028547,.001431],[-.990268,.139173,.970946,-.238709,.016774,-.942316,.332649,-.037143,.002131],[-.987688,.156434,.963292,-.267617,.021193,-.927262,.371463,-.046806,.003026],[-.984808,.173648,.954769,-.296198,.026114,-.910569,.409317,-.057505,.00414],[-.981627,.190809,.945388,-.324419,.03153,-.892279,.446114,-.069209,.005492],[-.978148,.207912,.935159,-.352244,.037436,-.872441,.481759,-.08188,.007105],[-.97437,.224951,.924096,-.379641,.043823,-.851105,.516162,-.095481,.008999],[-.970296,.241922,.912211,-.406574,.050685,-.828326,.549233,-.109969,.011193],[-.965926,.258819,.899519,-.433013,.058013,-.804164,.580889,-.1253,.013707],[-.961262,.275637,.886036,-.458924,.065797,-.77868,.61105,-.141427,.016556],[-.956305,.292372,.871778,-.484275,.074029,-.75194,.639639,-.158301,.019758],[-.951057,.309017,.856763,-.509037,.082698,-.724012,.666583,-.175868,.023329],[-.945519,.325568,.841008,-.533178,.091794,-.694969,.691816,-.194075,.027281],[-.939693,.34202,.824533,-.55667,.101306,-.664885,.715274,-.212865,.03163],[-.93358,.358368,.807359,-.579484,.111222,-.633837,.736898,-.23218,.036385],[-.927184,.374607,.789505,-.601592,.121529,-.601904,.756637,-.25196,.041559],[-.920505,.390731,.770994,-.622967,.132217,-.569169,.774442,-.272143,.04716],[-.913545,.406737,.751848,-.643582,.143271,-.535715,.79027,-.292666,.053196],[-.906308,.422618,.732091,-.663414,.154678,-.501627,.804083,-.313464,.059674],[-.898794,.438371,.711746,-.682437,.166423,-.466993,.81585,-.334472,.066599],[-.891007,.45399,.690839,-.700629,.178494,-.431899,.825544,-.355623,.073974],[-.882948,.469472,.669395,-.717968,.190875,-.396436,.833145,-.376851,.081803],[-.87462,.48481,.647439,-.734431,.203551,-.360692,.838638,-.398086,.090085],[-.866025,.5,.625,-.75,.216506,-.32476,.842012,-.419263,.098821],[-.857167,.515038,.602104,-.764655,.229726,-.288728,.843265,-.440311,.108009],[-.848048,.529919,.578778,-.778378,.243192,-.252688,.842399,-.461164,.117644],[-.838671,.544639,.555052,-.791154,.256891,-.21673,.839422,-.481753,.127722],[-.829038,.559193,.530955,-.802965,.270803,-.180944,.834347,-.502011,.138237],[-.819152,.573576,.506515,-.813798,.284914,-.14542,.827194,-.521871,.149181],[-.809017,.587785,.481763,-.823639,.299204,-.110246,.817987,-.541266,.160545],[-.798636,.601815,.456728,-.832477,.313658,-.075508,.806757,-.560132,.172317],[-.788011,.615661,.431441,-.840301,.328257,-.041294,.793541,-.578405,.184487],[-.777146,.62932,.405934,-.847101,.342984,-.007686,.778379,-.596021,.19704],[-.766044,.642788,.380236,-.852869,.357821,.025233,.761319,-.612921,.209963],[-.75471,.656059,.35438,-.857597,.372749,.057383,.742412,-.629044,.223238],[-.743145,.669131,.328396,-.861281,.387751,.088686,.721714,-.644334,.23685],[-.731354,.681998,.302317,-.863916,.402807,.119068,.699288,-.658734,.250778],[-.71934,.694658,.276175,-.865498,.417901,.148454,.675199,-.67219,.265005],[-.707107,.707107,.25,-.866025,.433013,.176777,.649519,-.684653,.279508],[-.694658,.71934,.223825,-.865498,.448125,.203969,.622322,-.696073,.294267],[-.681998,.731354,.197683,-.863916,.463218,.229967,.593688,-.706405,.309259],[-.669131,.743145,.171604,-.861281,.478275,.254712,.5637,-.715605,.324459],[-.656059,.75471,.14562,-.857597,.493276,.278147,.532443,-.723633,.339844],[-.642788,.766044,.119764,-.852869,.508205,.300221,.500009,-.730451,.355387],[-.62932,.777146,.094066,-.847101,.523041,.320884,.46649,-.736025,.371063],[-.615661,.788011,.068559,-.840301,.537768,.340093,.431982,-.740324,.386845],[-.601815,.798636,.043272,-.832477,.552367,.357807,.396584,-.74332,.402704],[-.587785,.809017,.018237,-.823639,.566821,.373991,.360397,-.744989,.418613],[-.573576,.819152,-.006515,-.813798,.581112,.388612,.323524,-.745308,.434544],[-.559193,.829038,-.030955,-.802965,.595222,.401645,.286069,-.744262,.450467],[-.544639,.838671,-.055052,-.791154,.609135,.413066,.24814,-.741835,.466352],[-.529919,.848048,-.078778,-.778378,.622833,.422856,.209843,-.738017,.482171],[-.515038,.857167,-.102104,-.764655,.6363,.431004,.171288,-.732801,.497894],[-.5,.866025,-.125,-.75,.649519,.4375,.132583,-.726184,.51349],[-.48481,.87462,-.147439,-.734431,.662474,.44234,.093837,-.718167,.528929],[-.469472,.882948,-.169395,-.717968,.67515,.445524,.05516,-.708753,.544183],[-.45399,.891007,-.190839,-.700629,.687531,.447059,.016662,-.69795,.55922],[-.438371,.898794,-.211746,-.682437,.699602,.446953,-.02155,-.685769,.574011],[-.422618,.906308,-.232091,-.663414,.711348,.445222,-.059368,-.672226,.588528],[-.406737,.913545,-.251848,-.643582,.722755,.441884,-.096684,-.657339,.602741],[-.390731,.920505,-.270994,-.622967,.733809,.436964,-.133395,-.64113,.616621],[-.374607,.927184,-.289505,-.601592,.744496,.430488,-.169397,-.623624,.630141],[-.358368,.93358,-.307359,-.579484,.754804,.422491,-.204589,-.604851,.643273],[-.34202,.939693,-.324533,-.55667,.76472,.413008,-.238872,-.584843,.65599],[-.325568,.945519,-.341008,-.533178,.774231,.402081,-.27215,-.563635,.668267],[-.309017,.951057,-.356763,-.509037,.783327,.389754,-.304329,-.541266,.680078],[-.292372,.956305,-.371778,-.484275,.791997,.376077,-.335319,-.517778,.691399],[-.275637,.961262,-.386036,-.458924,.800228,.361102,-.365034,-.493216,.702207],[-.258819,.965926,-.399519,-.433013,.808013,.344885,-.393389,-.467627,.712478],[-.241922,.970296,-.412211,-.406574,.81534,.327486,-.420306,-.441061,.722191],[-.224951,.97437,-.424096,-.379641,.822202,.308969,-.445709,-.413572,.731327],[-.207912,.978148,-.435159,-.352244,.828589,.289399,-.469527,-.385215,.739866],[-.190809,.981627,-.445388,-.324419,.834495,.268846,-.491693,-.356047,.74779],[-.173648,.984808,-.454769,-.296198,.839912,.247382,-.512145,-.326129,.755082],[-.156434,.987688,-.463292,-.267617,.844832,.225081,-.530827,-.295521,.761728],[-.139173,.990268,-.470946,-.238709,.849251,.20202,-.547684,-.264287,.767712],[-.121869,.992546,-.477722,-.209511,.853163,.178279,-.562672,-.232494,.773023],[-.104528,.994522,-.483611,-.180057,.856563,.153937,-.575747,-.200207,.777648],[-.087156,.996195,-.488606,-.150384,.859447,.129078,-.586872,-.167494,.781579],[-.069756,.997564,-.492701,-.120527,.861811,.103786,-.596018,-.134426,.784806],[-.052336,.99863,-.495891,-.090524,.863653,.078146,-.603158,-.101071,.787324],[-.034899,.999391,-.498173,-.060411,.864971,.052243,-.608272,-.0675,.789126],[-.017452,.999848,-.499543,-.030224,.865762,.026165,-.611347,-.033786,.790208],[0,1,-.5,0,.866025,-0,-.612372,0,.790569],[.017452,.999848,-.499543,.030224,.865762,-.026165,-.611347,.033786,.790208],[.034899,.999391,-.498173,.060411,.864971,-.052243,-.608272,.0675,.789126],[.052336,.99863,-.495891,.090524,.863653,-.078146,-.603158,.101071,.787324],[.069756,.997564,-.492701,.120527,.861811,-.103786,-.596018,.134426,.784806],[.087156,.996195,-.488606,.150384,.859447,-.129078,-.586872,.167494,.781579],[.104528,.994522,-.483611,.180057,.856563,-.153937,-.575747,.200207,.777648],[.121869,.992546,-.477722,.209511,.853163,-.178279,-.562672,.232494,.773023],[.139173,.990268,-.470946,.238709,.849251,-.20202,-.547684,.264287,.767712],[.156434,.987688,-.463292,.267617,.844832,-.225081,-.530827,.295521,.761728],[.173648,.984808,-.454769,.296198,.839912,-.247382,-.512145,.326129,.755082],[.190809,.981627,-.445388,.324419,.834495,-.268846,-.491693,.356047,.74779],[.207912,.978148,-.435159,.352244,.828589,-.289399,-.469527,.385215,.739866],[.224951,.97437,-.424096,.379641,.822202,-.308969,-.445709,.413572,.731327],[.241922,.970296,-.412211,.406574,.81534,-.327486,-.420306,.441061,.722191],[.258819,.965926,-.399519,.433013,.808013,-.344885,-.393389,.467627,.712478],[.275637,.961262,-.386036,.458924,.800228,-.361102,-.365034,.493216,.702207],[.292372,.956305,-.371778,.484275,.791997,-.376077,-.335319,.517778,.691399],[.309017,.951057,-.356763,.509037,.783327,-.389754,-.304329,.541266,.680078],[.325568,.945519,-.341008,.533178,.774231,-.402081,-.27215,.563635,.668267],[.34202,.939693,-.324533,.55667,.76472,-.413008,-.238872,.584843,.65599],[.358368,.93358,-.307359,.579484,.754804,-.422491,-.204589,.604851,.643273],[.374607,.927184,-.289505,.601592,.744496,-.430488,-.169397,.623624,.630141],[.390731,.920505,-.270994,.622967,.733809,-.436964,-.133395,.64113,.616621],[.406737,.913545,-.251848,.643582,.722755,-.441884,-.096684,.657339,.602741],[.422618,.906308,-.232091,.663414,.711348,-.445222,-.059368,.672226,.588528],[.438371,.898794,-.211746,.682437,.699602,-.446953,-.02155,.685769,.574011],[.45399,.891007,-.190839,.700629,.687531,-.447059,.016662,.69795,.55922],[.469472,.882948,-.169395,.717968,.67515,-.445524,.05516,.708753,.544183],[.48481,.87462,-.147439,.734431,.662474,-.44234,.093837,.718167,.528929],[.5,.866025,-.125,.75,.649519,-.4375,.132583,.726184,.51349],[.515038,.857167,-.102104,.764655,.6363,-.431004,.171288,.732801,.497894],[.529919,.848048,-.078778,.778378,.622833,-.422856,.209843,.738017,.482171],[.544639,.838671,-.055052,.791154,.609135,-.413066,.24814,.741835,.466352],[.559193,.829038,-.030955,.802965,.595222,-.401645,.286069,.744262,.450467],[.573576,.819152,-.006515,.813798,.581112,-.388612,.323524,.745308,.434544],[.587785,.809017,.018237,.823639,.566821,-.373991,.360397,.744989,.418613],[.601815,.798636,.043272,.832477,.552367,-.357807,.396584,.74332,.402704],[.615661,.788011,.068559,.840301,.537768,-.340093,.431982,.740324,.386845],[.62932,.777146,.094066,.847101,.523041,-.320884,.46649,.736025,.371063],[.642788,.766044,.119764,.852869,.508205,-.300221,.500009,.730451,.355387],[.656059,.75471,.14562,.857597,.493276,-.278147,.532443,.723633,.339844],[.669131,.743145,.171604,.861281,.478275,-.254712,.5637,.715605,.324459],[.681998,.731354,.197683,.863916,.463218,-.229967,.593688,.706405,.309259],[.694658,.71934,.223825,.865498,.448125,-.203969,.622322,.696073,.294267],[.707107,.707107,.25,.866025,.433013,-.176777,.649519,.684653,.279508],[.71934,.694658,.276175,.865498,.417901,-.148454,.675199,.67219,.265005],[.731354,.681998,.302317,.863916,.402807,-.119068,.699288,.658734,.250778],[.743145,.669131,.328396,.861281,.387751,-.088686,.721714,.644334,.23685],[.75471,.656059,.35438,.857597,.372749,-.057383,.742412,.629044,.223238],[.766044,.642788,.380236,.852869,.357821,-.025233,.761319,.612921,.209963],[.777146,.62932,.405934,.847101,.342984,.007686,.778379,.596021,.19704],[.788011,.615661,.431441,.840301,.328257,.041294,.793541,.578405,.184487],[.798636,.601815,.456728,.832477,.313658,.075508,.806757,.560132,.172317],[.809017,.587785,.481763,.823639,.299204,.110246,.817987,.541266,.160545],[.819152,.573576,.506515,.813798,.284914,.14542,.827194,.521871,.149181],[.829038,.559193,.530955,.802965,.270803,.180944,.834347,.502011,.138237],[.838671,.544639,.555052,.791154,.256891,.21673,.839422,.481753,.127722],[.848048,.529919,.578778,.778378,.243192,.252688,.842399,.461164,.117644],[.857167,.515038,.602104,.764655,.229726,.288728,.843265,.440311,.108009],[.866025,.5,.625,.75,.216506,.32476,.842012,.419263,.098821],[.87462,.48481,.647439,.734431,.203551,.360692,.838638,.398086,.090085],[.882948,.469472,.669395,.717968,.190875,.396436,.833145,.376851,.081803],[.891007,.45399,.690839,.700629,.178494,.431899,.825544,.355623,.073974],[.898794,.438371,.711746,.682437,.166423,.466993,.81585,.334472,.066599],[.906308,.422618,.732091,.663414,.154678,.501627,.804083,.313464,.059674],[.913545,.406737,.751848,.643582,.143271,.535715,.79027,.292666,.053196],[.920505,.390731,.770994,.622967,.132217,.569169,.774442,.272143,.04716],[.927184,.374607,.789505,.601592,.121529,.601904,.756637,.25196,.041559],[.93358,.358368,.807359,.579484,.111222,.633837,.736898,.23218,.036385],[.939693,.34202,.824533,.55667,.101306,.664885,.715274,.212865,.03163],[.945519,.325568,.841008,.533178,.091794,.694969,.691816,.194075,.027281],[.951057,.309017,.856763,.509037,.082698,.724012,.666583,.175868,.023329],[.956305,.292372,.871778,.484275,.074029,.75194,.639639,.158301,.019758],[.961262,.275637,.886036,.458924,.065797,.77868,.61105,.141427,.016556],[.965926,.258819,.899519,.433013,.058013,.804164,.580889,.1253,.013707],[.970296,.241922,.912211,.406574,.050685,.828326,.549233,.109969,.011193],[.97437,.224951,.924096,.379641,.043823,.851105,.516162,.095481,.008999],[.978148,.207912,.935159,.352244,.037436,.872441,.481759,.08188,.007105],[.981627,.190809,.945388,.324419,.03153,.892279,.446114,.069209,.005492],[.984808,.173648,.954769,.296198,.026114,.910569,.409317,.057505,.00414],[.987688,.156434,.963292,.267617,.021193,.927262,.371463,.046806,.003026],[.990268,.139173,.970946,.238709,.016774,.942316,.332649,.037143,.002131],[.992546,.121869,.977722,.209511,.012862,.955693,.292976,.028547,.001431],[.994522,.104528,.983611,.180057,.009462,.967356,.252544,.021043,903e-6],[.996195,.087156,.988606,.150384,.006578,.977277,.21146,.014654,523e-6],[.997564,.069756,.992701,.120527,.004214,.985429,.169828,.0094,268e-6],[.99863,.052336,.995891,.090524,.002372,.991791,.127757,.005297,113e-6],[.999391,.034899,.998173,.060411,.001055,.996348,.085356,.002357,34e-6],[.999848,.017452,.999543,.030224,264e-6,.999086,.042733,59e-5,4e-6],[1,-0,1,-0,0,1,-0,0,-0]]],Ii=(Pi[0].length,Pi[1].length,Pi[0][0].length/2),xi=[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1.003236,1.002156,.999152,.990038],[1.03237,1.021194,.990433,.898572],[1.062694,1.040231,.979161,.799806],[1.093999,1.058954,.964976,.693603],[1.126003,1.077006,.947526,.57989],[1.158345,1.093982,.926474,.45869],[1.19059,1.109437,.901512,.330158],[1.222228,1.12289,.87237,.194621],[1.252684,1.133837,.838839,.052614],[1.281987,1.142358,.801199,0],[1.312073,1.150207,.760839,0],[1.343011,1.157424,.717799,0],[1.374649,1.163859,.671999,0],[1.406809,1.169354,.623371,0],[1.439286,1.173739,.571868,0],[1.471846,1.176837,.517465,0],[1.504226,1.178465,.460174,0],[1.536133,1.178438,.400043,0],[1.567253,1.176573,.337165,0],[1.597247,1.172695,.271688,0],[1.625766,1.166645,.203815,0],[1.652455,1.158285,.133806,0],[1.676966,1.147506,.061983,0],[1.699006,1.134261,0,0],[1.720224,1.119789,0,0],[1.741631,1.10481,0,0],[1.763183,1.08933,0,0],[1.784837,1.073356,0,0],[1.806548,1.056898,0,0],[1.828269,1.039968,0,0],[1.849952,1.02258,0,0],[1.871552,1.004752,0,0],[1.893018,.986504,0,0],[1.914305,.967857,0,0],[1.935366,.948837,0,0],[1.956154,.929471,0,0],[1.976625,.90979,0,0],[1.996736,.889823,0,0],[2.016448,.869607,0,0],[2.035721,.849175,0,0],[2.054522,.828565,0,0],[2.072818,.807816,0,0],[2.090581,.786964,0,0],[2.107785,.766051,0,0],[2.124411,.745115,0,0],[2.140439,.724196,0,0],[2.155856,.703332,0,0],[2.170653,.682561,0,0],[2.184823,.661921,0,0],[2.198364,.641445,0,0],[2.211275,.621169,0,0],[2.223562,.601125,0,0],[2.23523,.581341,0,0],[2.246289,.561847,0,0],[2.256751,.542667,0,0],[2.266631,.523826,0,0],[2.275943,.505344,0,0],[2.284707,.487239,0,0],[2.292939,.469528,0,0],[2.300661,.452225,0,0],[2.307892,.435342,0,0],[2.314654,.418888,0,0],[2.320969,.40287,0,0],[2.326858,.387294,0,0],[2.332343,.372164,0,0],[2.337445,.357481,0,0],[2.342186,.343246,0,0],[2.346585,.329458,0,0],[2.350664,.316113,0,0],[2.354442,.303208,0,0],[2.357937,.290738,0,0],[2.361168,.278698,0,0],[2.364152,.26708,0,0],[2.366906,.255878,0,0],[2.369446,.245082,0,0],[2.371786,.234685,0,0],[2.37394,.224677,0,0],[2.375923,.215048,0,0],[2.377745,.20579,0,0],[2.379421,.196891,0,0],[2.380959,.188342,0,0],[2.382372,.180132,0,0],[2.383667,.172251,0,0],[2.384856,.164689,0,0],[2.385945,.157435,0,0],[2.386943,.150479,0,0],[2.387857,.143811,0,0],[2.388694,.137421,0,0],[2.38946,.131299,0,0],[2.39016,.125435,0,0],[2.390801,.11982,0,0],[2.391386,.114445,0,0],[2.391921,.1093,0,0],[2.39241,.104376,0,0],[2.392857,.099666,0,0],[2.393265,.09516,0,0],[2.393637,.090851,0,0],[2.393977,.086731,0,0],[2.394288,.082791,0,0],[2.394571,.079025,0,0],[2.394829,.075426,0,0],[2.395064,.071986,0,0],[2.395279,.068699,0,0],[2.395475,.065558,0,0],[2.395653,.062558,0,0],[2.395816,.059693,0,0],[2.395964,.056955,0,0],[2.396099,.054341,0,0],[2.396222,.051845,0,0],[2.396334,.049462,0,0],[2.396436,.047186,0,0],[2.396529,.045013,0,0],[2.396613,.042939,0,0],[2.396691,.040959,0,0],[2.396761,.039069,0,0],[2.396825,.037266,0,0],[2.396883,.035544,0,0],[2.396936,.033901,0,0],[2.396984,.032334,0,0],[2.397028,.030838,0,0],[2.397068,.02941,0,0],[2.397104,.028048,0,0],[2.397137,.026749,0,0],[2.397167,.025509,0,0],[2.397194,.024326,0,0],[2.397219,.023198,0,0],[2.397242,.022122,0,0],[2.397262,.021095,0,0],[2.397281,.020116,0,0],[2.397298,.019181,0,0],[2.397314,.01829,0,0],[2.397328,.017441,0,0],[2.397341,.01663,0,0],[2.397352,.015857,0,0],[2.397363,.015119,0,0],[2.397372,.014416,0,0],[2.397381,.013745,0,0],[2.397389,.013106,0,0],[2.397396,.012496,0,0],[2.397403,.011914,0,0],[2.397409,.01136,0,0],[2.397414,.010831,0,0],[2.397419,.010326,0,0],[2.397424,.009845,0,0],[2.397428,.009387,0,0],[2.397432,.008949,0,0],[2.397435,.008532,0,0],[2.397438,.008135,0,0],[2.397441,.007755,0,0],[2.397443,.007394,0,0],[2.397446,.007049,0,0],[2.397448,.006721,0,0],[2.39745,.006407,0,0],[2.397451,.006108,0,0],[2.397453,.005824,0,0],[2.397454,.005552,0,0],[2.397456,.005293,0,0],[2.397457,.005046,0,0],[2.397458,.004811,0,0],[2.397459,.004586,0,0],[2.39746,.004372,0,0],[2.397461,.004168,0,0],[2.397461,.003974,0,0],[2.397462,.003788,0,0],[2.397463,.003611,0,0],[2.397463,.003443,0,0],[2.397464,.003282,0,0],[2.397464,.003129,0,0],[2.397465,.002983,0,0],[2.397465,.002844,0,0],[2.397465,.002711,0,0],[2.397466,.002584,0,0],[2.397466,.002464,0,0],[2.397466,.002349,0,0],[2.397466,.002239,0,0],[2.397467,.002135,0,0],[2.397467,.002035,0,0],[2.397467,.00194,0,0],[2.397467,.001849,0,0],[2.397467,.001763,0,0],[2.397467,.001681,0,0],[2.397468,.001602,0,0],[2.397468,.001527,0,0],[2.397468,.001456,0,0],[2.397468,.001388,0,0],[2.397468,.001323,0,0],[2.397468,.001261,0,0],[2.397468,.001202,0,0],[2.397468,.001146,0,0],[2.397468,.001093,0,0],[2.397468,.001042,0,0],[2.397468,993e-6,0,0],[2.397468,947e-6,0,0],[2.397468,902e-6,0,0],[2.397468,86e-5,0,0],[2.397468,82e-5,0,0],[2.397469,782e-6,0,0],[2.397469,745e-6,0,0],[2.397469,71e-5,0,0],[2.397469,677e-6,0,0],[2.397469,646e-6,0,0],[2.397469,616e-6,0,0],[2.397469,587e-6,0,0],[2.397469,559e-6,0,0],[2.397469,533e-6,0,0],[2.397469,508e-6,0,0],[2.397469,485e-6,0,0],[2.397469,462e-6,0,0],[2.397469,44e-5,0,0],[2.397469,42e-5,0,0],[2.397469,4e-4,0,0],[2.397469,381e-6,0,0],[2.397469,364e-6,0,0],[2.397469,347e-6,0,0],[2.397469,33e-5,0,0],[2.397469,315e-6,0,0],[2.397469,3e-4,0,0],[2.397469,286e-6,0,0],[2.397469,273e-6,0,0],[2.397469,26e-5,0,0],[2.397469,248e-6,0,0],[2.397469,236e-6,0,0],[2.397469,225e-6,0,0],[2.397469,215e-6,0,0],[2.397469,205e-6,0,0],[2.397469,195e-6,0,0],[2.397469,186e-6,0,0],[2.397469,177e-6,0,0],[2.397469,169e-6,0,0],[2.397469,161e-6,0,0],[2.397469,154e-6,0,0],[2.397469,147e-6,0,0],[2.397469,14e-5,0,0],[2.397469,133e-6,0,0],[2.397469,127e-6,0,0],[2.397469,121e-6,0,0],[2.397469,115e-6,0,0],[2.397469,11e-5,0,0],[2.397469,105e-6,0,0],[2.397469,1e-4,0,0],[2.397469,95e-6,0,0],[2.397469,91e-6,0,0],[2.397469,87e-6,0,0],[2.397469,83e-6,0,0],[2.397469,79e-6,0,0],[2.397469,75e-6,0,0],[2.397469,71e-6,0,0],[2.397469,68e-6,0,0],[2.397469,65e-6,0,0],[2.397469,62e-6,0,0],[2.397469,59e-6,0,0],[2.397469,56e-6,0,0],[2.397469,54e-6,0,0],[2.397469,51e-6,0,0],[2.397469,49e-6,0,0],[2.397469,46e-6,0,0],[2.397469,44e-6,0,0],[2.397469,42e-6,0,0],[2.397469,4e-5,0,0],[2.397469,38e-6,0,0],[2.397469,37e-6,0,0],[2.397469,35e-6,0,0],[2.397469,33e-6,0,0],[2.397469,32e-6,0,0],[2.397469,3e-5,0,0],[2.397469,29e-6,0,0],[2.397469,27e-6,0,0],[2.397469,26e-6,0,0],[2.397469,25e-6,0,0],[2.397469,24e-6,0,0],[2.397469,23e-6,0,0],[2.397469,22e-6,0,0],[2.397469,21e-6,0,0],[2.397469,2e-5,0,0],[2.397469,19e-6,0,0],[2.397469,18e-6,0,0],[2.397469,17e-6,0,0],[2.397469,16e-6,0,0],[2.397469,15e-6,0,0],[2.397469,15e-6,0,0],[2.397469,14e-6,0,0],[2.397469,13e-6,0,0],[2.397469,13e-6,0,0],[2.397469,12e-6,0,0],[2.397469,12e-6,0,0],[2.397469,11e-6,0,0],[2.397469,11e-6,0,0],[2.397469,1e-5,0,0],[2.397469,1e-5,0,0],[2.397469,9e-6,0,0],[2.397469,9e-6,0,0],[2.397469,8e-6,0,0],[2.397469,8e-6,0,0],[2.397469,8e-6,0,0],[2.397469,7e-6,0,0],[2.397469,7e-6,0,0],[2.397469,7e-6,0,0],[2.397469,6e-6,0,0],[2.397469,6e-6,0,0],[2.397469,6e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,1e-6,0,0],[2.397469,1e-6,0,0],[2.397469,1e-6,0,0]];var Si,Fi,Ei;!function(t){t.Logarithmic="logarithmic",t.Linear="linear",t.None="none"}(Si||(Si={})),function(t){t.Width="width",t.Height="height",t.Depth="depth"}(Fi||(Fi={})),function(t){t.Left="left",t.Right="right",t.Front="front",t.Back="back",t.Down="down",t.Up="up"}(Ei||(Ei={}));const ki=((_i=hi())[0]=0,_i[1]=0,_i[2]=0,_i);var _i;const Li=li(hi(),0,0,-1),Ti=li(hi(),0,1,0),Oi=(li(hi(),1,0,0),343),Ri=Si.Logarithmic,Qi="ambisonic",Ui={[Ei.Left]:0,[Ei.Right]:0,[Ei.Front]:0,[Ei.Back]:0,[Ei.Down]:0,[Ei.Up]:0},Ni={[Fi.Width]:0,[Fi.Height]:0,[Fi.Depth]:0},Hi=[31.25,62.5,125,250,500,1e3,2e3,4e3,8e3],zi=Hi.length,Gi=new Float32Array(zi);var ji;!function(t){t.Transparent="transparent",t.AcousticCeilingTiles="acoustic-ceiling-tiles",t.BrickBare="brick-bare",t.BrickPainted="brick-painted",t.ConcreteBlockCoarse="concrete-block-coarse",t.ConcreteBlockPainted="concrete-block-painted",t.CurtainHeavy="curtain-heavy",t.FiberGlassInsulation="fiber-glass-insulation",t.GlassThin="glass-thin",t.GlassThick="glass-thick",t.Grass="grass",t.LinoleumOnConcrete="linoleum-on-concrete",t.Marble="marble",t.Metal="metal",t.ParquetOnConcrete="parquet-on-concrete",t.PlasterRough="plaster-rough",t.PlasterSmooth="plaster-smooth",t.PlywoodPanel="plywood-panel",t.PolishedConcreteOrTile="polished-concrete-or-tile",t.Sheetrock="sheetrock",t.WaterOrIceSurface="water-or-ice-surface",t.WoodCeiling="wood-ceiling",t.WoodPanel="wood-panel",t.Uniform="uniform"}(ji||(ji={}));const Wi={[ji.Transparent]:[1,1,1,1,1,1,1,1,1],[ji.AcousticCeilingTiles]:[.672,.675,.7,.66,.72,.92,.88,.75,1],[ji.BrickBare]:[.03,.03,.03,.03,.03,.04,.05,.07,.14],[ji.BrickPainted]:[.006,.007,.01,.01,.02,.02,.02,.03,.06],[ji.ConcreteBlockCoarse]:[.36,.36,.36,.44,.31,.29,.39,.25,.5],[ji.ConcreteBlockPainted]:[.092,.09,.1,.05,.06,.07,.09,.08,.16],[ji.CurtainHeavy]:[.073,.106,.14,.35,.55,.72,.7,.65,1],[ji.FiberGlassInsulation]:[.193,.22,.22,.82,.99,.99,.99,.99,1],[ji.GlassThin]:[.18,.169,.18,.06,.04,.03,.02,.02,.04],[ji.GlassThick]:[.35,.35,.35,.25,.18,.12,.07,.04,.08],[ji.Grass]:[.05,.05,.15,.25,.4,.55,.6,.6,.6],[ji.LinoleumOnConcrete]:[.02,.02,.02,.03,.03,.03,.03,.02,.04],[ji.Marble]:[.01,.01,.01,.01,.01,.01,.02,.02,.04],[ji.Metal]:[.03,.035,.04,.04,.05,.05,.05,.07,.09],[ji.ParquetOnConcrete]:[.028,.03,.04,.04,.07,.06,.06,.07,.14],[ji.PlasterRough]:[.017,.018,.02,.03,.04,.05,.04,.03,.06],[ji.PlasterSmooth]:[.011,.012,.013,.015,.02,.03,.04,.05,.1],[ji.PlywoodPanel]:[.4,.34,.28,.22,.17,.09,.1,.11,.22],[ji.PolishedConcreteOrTile]:[.008,.008,.01,.01,.015,.02,.02,.02,.04],[ji.Sheetrock]:[.29,.279,.29,.1,.05,.04,.07,.09,.18],[ji.WaterOrIceSurface]:[.006,.006,.008,.008,.013,.015,.02,.025,.05],[ji.WoodCeiling]:[.15,.147,.15,.11,.1,.07,.06,.07,.14],[ji.WoodPanel]:[.28,.28,.28,.22,.17,.09,.1,.11,.22],[ji.Uniform]:[.5,.5,.5,.5,.5,.5,.5,.5,.5]},Vi={[Ei.Left]:ji.Transparent,[Ei.Right]:ji.Transparent,[Ei.Front]:ji.Transparent,[Ei.Back]:ji.Transparent,[Ei.Down]:ji.Transparent,[Ei.Up]:ji.Transparent},Zi=[6e-4,6e-4,7e-4,8e-4,.001,.0015,.0026,.006,.0207],Yi=6.28318530717959,Xi=57.29577951308232,Ji=1e-8,Ki=function(...t){window.console.log.apply(window.console,["%c[ResonanceAudio]%c "+t.join(" ")+" %c(@"+performance.now().toFixed(2)+"ms)","background: #BBDEFB; color: #FF5722; font-weight: 700","font-weight: 400","color: #AAA"])},qi={[Ei.Left]:Fi.Width,[Ei.Right]:Fi.Width,[Ei.Front]:Fi.Depth,[Ei.Back]:Fi.Depth,[Ei.Up]:Fi.Height,[Ei.Down]:Fi.Height},$i={[Ei.Left]:0,[Ei.Right]:0,[Ei.Front]:2,[Ei.Back]:2,[Ei.Up]:1,[Ei.Down]:1},ts={[Ei.Left]:1,[Ei.Right]:-1,[Ei.Front]:1,[Ei.Back]:-1,[Ei.Up]:-1,[Ei.Down]:1};class es{constructor(t,e){this.channelGain=new Array,this.merger=null,e=Object.assign({ambisonicOrder:1,azimuth:0,elevation:0,sourceWidth:0},e),this.context=t,this.input=t.createGain(),this.output=t.createGain(),this.setAmbisonicOrder(e.ambisonicOrder),this.azimuth=e.azimuth,this.elevation=e.elevation,this.setSourceWidth(e.sourceWidth)}static validateAmbisonicOrder(t){return isNaN(t)||null==t?(Ki("Error: Invalid ambisonic order",t,"\nUsing ambisonicOrder=1 instead."),t=1):t<1?(Ki("Error: Unable to render ambisonic order",t,"(Min order is 1)","\nUsing min order instead."),t=1):t>Ii&&(Ki("Error: Unable to render ambisonic order",t,"(Max order is",Ii,")\nUsing max order instead."),t=Ii),t}setAmbisonicOrder(t){this.ambisonicOrder=es.validateAmbisonicOrder(t),this.input.disconnect();for(let t=0;t<this.channelGain.length;t++)this.channelGain[t].disconnect();null!=this.merger&&this.merger.disconnect();let e=(this.ambisonicOrder+1)*(this.ambisonicOrder+1);this.merger=this.context.createChannelMerger(e),this.channelGain=new Array(e);for(let t=0;t<e;t++)this.channelGain[t]=this.context.createGain(),this.input.connect(this.channelGain[t]),this.channelGain[t].connect(this.merger,0,t);this.merger.connect(this.output)}dispose(){this.merger.disconnect(this.output);let t=(this.ambisonicOrder+1)*(this.ambisonicOrder+1);for(let e=0;e<t;++e)this.channelGain[e].disconnect(this.merger,0,e),this.input.disconnect(this.channelGain[e])}setDirection(t,e){(null==t||isNaN(t))&&(t=0),(null==e||isNaN(e))&&(e=0),this.azimuth=t,this.elevation=e,(t=Math.round(t%360))<0&&(t+=360),e=Math.round(Math.min(90,Math.max(-90,e)))+90,this.channelGain[0].gain.value=xi[this.spreadIndex][0];for(let i=1;i<=this.ambisonicOrder;i++){let s=xi[this.spreadIndex][i];for(let n=-i;n<=i;n++){const a=i*i+i+n,o=i*(i+1)/2+Math.abs(n)-1;let r=Pi[1][e][o];if(0!=n){let e=Ii+n-1;n<0&&(e=Ii+n),r*=Pi[0][t][e]}this.channelGain[a].gain.value=r*s}}}setSourceWidth(t){this.spreadIndex=Math.min(359,Math.max(0,Math.round(t))),this.setDirection(this.azimuth,this.elevation)}}function is(...t){const e=`[Omnitone] ${t.join(" ")}`;window.console.log(e)}var ss;!function(t){t.BASE64="base64",t.URL="url"}(ss||(ss={}));class ns{constructor(t,e,i){this._context=t,this._options=Object.assign({},{dataType:ss.BASE64,verbose:!1},i),this._bufferData=this._options.dataType===ss.BASE64?e:e.slice(0)}async load(){try{const t=this._bufferData.map((async t=>{try{return await this._launchAsyncLoadTask(t)}catch(e){const i='BufferList: error while loading "'+t+'". ('+e.message+")";throw new Error(i)}}));return await Promise.all(t)}catch(t){const e='BufferList: error while loading ". ('+t.message+")";throw new Error(e)}}async _launchAsyncLoadTask(t){const e=await this._fetch(t);return await this._context.decodeAudioData(e)}async _fetch(t){if(this._options.dataType===ss.BASE64)return function(t){const e=window.atob(t),i=new Uint8Array(e.length);for(let t=0;t<i.length;++t)i[t]=e.charCodeAt(t);return i.buffer}(t);{const e=await fetch(t);return await e.arrayBuffer()}}}class as{constructor(t,e){this._context=t,this._active=!1,this._isBufferLoaded=!1,this._buildAudioGraph(),e&&this.setHRIRBufferList(e),this.enable()}_buildAudioGraph(){this._splitterWYZX=this._context.createChannelSplitter(4),this._mergerWY=this._context.createChannelMerger(2),this._mergerZX=this._context.createChannelMerger(2),this._convolverWY=this._context.createConvolver(),this._convolverZX=this._context.createConvolver(),this._splitterWY=this._context.createChannelSplitter(2),this._splitterZX=this._context.createChannelSplitter(2),this._inverter=this._context.createGain(),this._mergerBinaural=this._context.createChannelMerger(2),this._summingBus=this._context.createGain(),this._splitterWYZX.connect(this._mergerWY,0,0),this._splitterWYZX.connect(this._mergerWY,1,1),this._splitterWYZX.connect(this._mergerZX,2,0),this._splitterWYZX.connect(this._mergerZX,3,1),this._mergerWY.connect(this._convolverWY),this._mergerZX.connect(this._convolverZX),this._convolverWY.connect(this._splitterWY),this._convolverZX.connect(this._splitterZX),this._splitterWY.connect(this._mergerBinaural,0,0),this._splitterWY.connect(this._mergerBinaural,0,1),this._splitterWY.connect(this._mergerBinaural,1,0),this._splitterWY.connect(this._inverter,1,0),this._inverter.connect(this._mergerBinaural,0,1),this._splitterZX.connect(this._mergerBinaural,0,0),this._splitterZX.connect(this._mergerBinaural,0,1),this._splitterZX.connect(this._mergerBinaural,1,0),this._splitterZX.connect(this._mergerBinaural,1,1),this._convolverWY.normalize=!1,this._convolverZX.normalize=!1,this._inverter.gain.value=-1,this.input=this._splitterWYZX,this.output=this._summingBus}dispose(){this._active&&this.disable(),this._splitterWYZX.disconnect(this._mergerWY,0,0),this._splitterWYZX.disconnect(this._mergerWY,1,1),this._splitterWYZX.disconnect(this._mergerZX,2,0),this._splitterWYZX.disconnect(this._mergerZX,3,1),this._mergerWY.disconnect(this._convolverWY),this._mergerZX.disconnect(this._convolverZX),this._convolverWY.disconnect(this._splitterWY),this._convolverZX.disconnect(this._splitterZX),this._splitterWY.disconnect(this._mergerBinaural,0,0),this._splitterWY.disconnect(this._mergerBinaural,0,1),this._splitterWY.disconnect(this._mergerBinaural,1,0),this._splitterWY.disconnect(this._inverter,1,0),this._inverter.disconnect(this._mergerBinaural,0,1),this._splitterZX.disconnect(this._mergerBinaural,0,0),this._splitterZX.disconnect(this._mergerBinaural,0,1),this._splitterZX.disconnect(this._mergerBinaural,1,0),this._splitterZX.disconnect(this._mergerBinaural,1,1)}setHRIRBufferList(t){this._isBufferLoaded||(this._convolverWY.buffer=t[0],this._convolverZX.buffer=t[1],this._isBufferLoaded=!0)}enable(){this._mergerBinaural.connect(this._summingBus),this._active=!0}disable(){this._mergerBinaural.disconnect(),this._active=!1}}class os{constructor(t){this._context=t,this._splitter=this._context.createChannelSplitter(4),this._inX=this._context.createGain(),this._inY=this._context.createGain(),this._inZ=this._context.createGain(),this._m0=this._context.createGain(),this._m1=this._context.createGain(),this._m2=this._context.createGain(),this._m3=this._context.createGain(),this._m4=this._context.createGain(),this._m5=this._context.createGain(),this._m6=this._context.createGain(),this._m7=this._context.createGain(),this._m8=this._context.createGain(),this._outX=this._context.createGain(),this._outY=this._context.createGain(),this._outZ=this._context.createGain(),this._merger=this._context.createChannelMerger(4),this._splitter.connect(this._inX,1),this._splitter.connect(this._inY,2),this._splitter.connect(this._inZ,3),this._inX.gain.value=-1,this._inY.gain.value=-1,this._inZ.gain.value=-1,this._inX.connect(this._m0),this._inX.connect(this._m1),this._inX.connect(this._m2),this._inY.connect(this._m3),this._inY.connect(this._m4),this._inY.connect(this._m5),this._inZ.connect(this._m6),this._inZ.connect(this._m7),this._inZ.connect(this._m8),this._m0.connect(this._outX),this._m1.connect(this._outY),this._m2.connect(this._outZ),this._m3.connect(this._outX),this._m4.connect(this._outY),this._m5.connect(this._outZ),this._m6.connect(this._outX),this._m7.connect(this._outY),this._m8.connect(this._outZ),this._splitter.connect(this._merger,0,0),this._outX.connect(this._merger,0,1),this._outY.connect(this._merger,0,2),this._outZ.connect(this._merger,0,3),this._outX.gain.value=-1,this._outY.gain.value=-1,this._outZ.gain.value=-1,this.setRotationMatrix3(ai(si())),this.input=this._splitter,this.output=this._merger}dispose(){this._splitter.disconnect(this._inX,1),this._splitter.disconnect(this._inY,2),this._splitter.disconnect(this._inZ,3),this._inX.disconnect(this._m0),this._inX.disconnect(this._m1),this._inX.disconnect(this._m2),this._inY.disconnect(this._m3),this._inY.disconnect(this._m4),this._inY.disconnect(this._m5),this._inZ.disconnect(this._m6),this._inZ.disconnect(this._m7),this._inZ.disconnect(this._m8),this._m0.disconnect(this._outX),this._m1.disconnect(this._outY),this._m2.disconnect(this._outZ),this._m3.disconnect(this._outX),this._m4.disconnect(this._outY),this._m5.disconnect(this._outZ),this._m6.disconnect(this._outX),this._m7.disconnect(this._outY),this._m8.disconnect(this._outZ),this._splitter.disconnect(this._merger,0,0),this._outX.disconnect(this._merger,0,1),this._outY.disconnect(this._merger,0,2),this._outZ.disconnect(this._merger,0,3)}setRotationMatrix3(t){this._m0.gain.value=t[0],this._m1.gain.value=t[1],this._m2.gain.value=t[2],this._m3.gain.value=t[3],this._m4.gain.value=t[4],this._m5.gain.value=t[5],this._m6.gain.value=t[6],this._m7.gain.value=t[7],this._m8.gain.value=t[8]}setRotationMatrix4(t){this._m0.gain.value=t[0],this._m1.gain.value=t[1],this._m2.gain.value=t[2],this._m3.gain.value=t[4],this._m4.gain.value=t[5],this._m5.gain.value=t[6],this._m6.gain.value=t[8],this._m7.gain.value=t[9],this._m8.gain.value=t[10]}getRotationMatrix3(){return ni(rs,this._m0.gain.value,this._m1.gain.value,this._m2.gain.value,this._m3.gain.value,this._m4.gain.value,this._m5.gain.value,this._m6.gain.value,this._m7.gain.value,this._m8.gain.value),rs}getRotationMatrix4(){return ri(hs,this._m0.gain.value,this._m1.gain.value,this._m2.gain.value,0,this._m3.gain.value,this._m4.gain.value,this._m5.gain.value,0,this._m6.gain.value,this._m7.gain.value,this._m8.gain.value,0,0,0,0,1),hs}}const rs=si(),hs=oi();var cs;!function(t){t[t.Default=0]="Default",t[t.Safari=1]="Safari",t[t.FUMA=2]="FUMA"}(cs||(cs={}));const As={[cs.Default]:[0,1,2,3],[cs.Safari]:[2,0,1,3],[cs.FUMA]:[0,3,1,2]};class ls{constructor(t,e){this._context=t,this._splitter=this._context.createChannelSplitter(4),this._merger=this._context.createChannelMerger(4),this.input=this._splitter,this.output=this._merger,this.setChannelMap(e||cs.Default)}setChannelMap(t){this._channelMap=t instanceof Array?t:As[t],this._splitter.disconnect(),this._splitter.connect(this._merger,0,this._channelMap[0]),this._splitter.connect(this._merger,1,this._channelMap[1]),this._splitter.connect(this._merger,2,this._channelMap[2]),this._splitter.connect(this._merger,3,this._channelMap[3])}dispose(){this._splitter.disconnect(this._merger,0,this._channelMap[0]),this._splitter.disconnect(this._merger,1,this._channelMap[1]),this._splitter.disconnect(this._merger,2,this._channelMap[2]),this._splitter.disconnect(this._merger,3,this._channelMap[3])}}var us=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wIA9v8QAPv/CwD+/wcA/v8MAP//AQD7/wEACAAEAPj/+v8YABAA7v/n//v/9P/M/8D//f34/R38EvzxAfEBtA2lDTcBJQFJ9T71FP0D/cD1tfVo/Wv9uPTO9PPmOufc/U/+agL3Aisc/RxuGKEZBv3j/iYMzQ2gAzsEQQUABiQFrASzA5cB2QmyCy0AtgR4AeYGtfgAA2j5OQHP+scArPsMBJgEggIEBtz6+QVq/pj/aPg8BPP3gQEi+jEAof0fA1v9+/7S+8IBjvwd/xD4IADL/Pf9zvs+/l3+wgB7/+L+7fzFADH9kf6A+n3+DP6+/TP9xP68/pn+w/26/i39YgA0/u790Pt9/kD+7v1s/Wb+8f4C/1P+pf/x/cT+6/3p/Xz9ff5F/0f9G/4r/6v/4P5L/sL+ff7c/pj+Ov7X/UT+9P5G/oz+6v6A/2D+9/6P/8r/bP7m/ij+C//e/tj/Gf4e/9v+FwDP/lz/sP7F/2H+rv/G/s7/Hf7y/4P+NAD9/k0AK/6w/zP/hACh/sX/gf44AOP+dgCm/iUAk/5qAOD+PwC+/jEAWP4CAAr/bQBw/vv/zf5iACD/OgCS/uD/Cv9oAAb/CgDK/kwA//5tACH/TgCg/h4AHP9aABP/JADP/hEAYv9gAAj/3f8m/ysAYv8gACX/8/8k/ysAXv8bABH//v8j/ygAa/8qAAD/9f9g/1YAWf8JACH/AgB2/z4AXP/w/z3/FgB2/ykAX//9/z//EwCV/zUAS//n/1T/GACK/x4ATv/0/4P/QQB4//v/WP/2/3X/HAB8//P/V//3/2f/AQBh/9v/Tf/x/5P/IwCI/wMAf/8hAKP/JACZ/xUAiv8nAK//HgCr/yMAm/8uAMz/OACi/yQAqf87AMT/MwCY/yUAtP9FAMH/KgCu/ycAyP85AMv/IwCz/xoA1f8qAMn/FgC8/xQA4/8nAMX/CwDJ/xQA4f8ZAMH/BgDO/xQA4f8WAMP/BwDU/xQA4P8QAMH/AQDb/xQA3P8JAMP/AgDh/xIA2v8EAMj/AgDk/w0A1f/+/8v/AwDm/wwA0v/+/9H/BgDl/wkAzv/8/9T/BwDk/wcAzv/8/9r/CQDi/wQAzf/8/9//CADf////0P/9/+L/BwDd//7/0////+T/BgDb//z/1f8AAOf/BQDZ//v/2v8CAOb/AwDY//v/3v8EAOb/AgDY//3/4f8FAOX/AQDZ//7/5P8GAOP/AADb/wAA5/8GAOH////d/wIA5/8FAOD////f/wMA6P8FAOD////h/wQA6P8EAN7////h/wUA4v8DANv/AQDd/wQA3P8CANn/AgDb/wMA2/8CANv/AgDd/wIA3v8CAOH/AQDj/wEA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAA/f8CAP//AQD//wEA//8BAP3/AAACAP7/+f8AAAIA/P8FAAQA8/8AABoA+f/V/wQAHQDO/xoAQQBO/ocA0Px1/ucHW/4UCm8HLO6kAjv8/fCRDdAAYfPiBIgFXveUCM0GBvh6/nz7rf0J/QcQSRVdBgoBSgFR62r9NP8m+LoEAvriBVAAiAPmABEGMf2l+SwBjva6/G4A//8P/CYDMgXm/R0CKAE6/fcBBwAtAND+kQA0A5UDhwFs/8IB8fydAEP/A/8v/e7/mP8j/2YBIwE3Av0AYv+uAOD8lgAg/wwAIf/L/n0Ae//OAJMB3P/XAF//XwCM/08AB/8NAEf/rf4jAT3/lgAJAP4AHgDpAO8AUf9L/07/Qf8KAOD/x/+D/3sATQCDAMoA0f79/+L/EQDt/7EAqv+S/7IAuv/o/wgAc//X//H/SwCm/+3/Yf/B/yoAAADI/7X/AwBg/5EATgCX/xYA/P+q/00AVACY/6v/BADD/zwALQCN/8z/KQDu/ygAEgCZ/6f/VQDC//T/KQCs/7P/UgAfAO7/NgC8/57/awAZAPP/+P/V/8z/bQBBAL//DgD0/+T/TABBAMz/CwAxAPz/SQBqALn/BgALAPz/EAA7AIz/3/8iAAUA//8kALf/y/9VABQA+v81AOj/0P9cAB4A+f8WAOr/vv83ABgAw/8JAOj/4f8nACIAsf/y/w4A3v8gACQAxP/n/ycA7P8WAC0Ayf/U/ycA9v/7/yUA0P/P/zUABADc/xUA5P/J/zcACwDS/xUA9P/m/zAACQDX/+3/9v/2/yQACgDZ/+P/AwAKABYA///b/9j/EQALABkADgD6/+7/GwD4/w4A8P/w//j/EgAEAAUA9f/1/wQAGgD4/wAA5////wAAGQD1////7f8FAAUAFQDv/wAA6v8LAAcAFQDs/wEA9P8SAAYACwDr//7/AQASAAYABQDv/wIAAwAWAAIAAgDv/wAABgATAAEA/f/u/wQABgAQAPr/+P/z/wUACQALAPj/9//4/wgABwAKAPT/+f/5/w4ABwAIAPT/+//9/w4AAwADAPH//f///w8A//8BAPP///8BAA0A/f/+//X/AgACAA0A+//8//b/BAADAAoA+f/7//n/BgADAAcA+P/7//v/BwABAAQA+P/8//3/CQABAAIA9//9////CQD/////+P///wAACAD9//7/+f8AAAAABwD8//3/+v8CAAAABgD7//z//P8EAAAABAD6//3//P8FAP//AgD6//7//v8FAP7/AQD7//////8GAP7/AAD7/wEA//8EAP3/AAD9/wEA/v8DAP3/AAD9/wIA/v8CAP3/AQD9/wIA/v8CAP7/AQD+/wEA"];class ds{constructor(t,e){if(this.context=t,this.config=Object.assign({channelMap:cs.Default,renderingMode:Mi.Ambisonic},e),this.config.channelMap instanceof Array&&4!==this.config.channelMap.length)throw new Error("FOARenderer: Invalid channel map. (got "+this.config.channelMap+")");if(this.config.hrirPathList&&2!==this.config.hrirPathList.length)throw new Error("FOARenderer: Invalid HRIR URLs. It must be an array with 2 URLs to HRIR files. (got "+this.config.hrirPathList+")");this.buildAudioGraph()}buildAudioGraph(){this.input=this.context.createGain(),this.output=this.context.createGain(),this.bypass=this.context.createGain(),this.router=new ls(this.context,this.config.channelMap),this.rotator=new os(this.context),this.convolver=new as(this.context),this.input.connect(this.router.input),this.input.connect(this.bypass),this.router.output.connect(this.rotator.input),this.rotator.output.connect(this.convolver.input),this.convolver.output.connect(this.output),this.input.channelCount=4,this.input.channelCountMode="explicit",this.input.channelInterpretation="discrete"}dispose(){this.getRenderingMode()===Mi.Bypass&&this.bypass.connect(this.output),this.input.disconnect(this.router.input),this.input.disconnect(this.bypass),this.router.output.disconnect(this.rotator.input),this.rotator.output.disconnect(this.convolver.input),this.convolver.output.disconnect(this.output),this.convolver.dispose(),this.rotator.dispose(),this.router.dispose()}async initialize(){const t=this.config.hrirPathList?new ns(this.context,this.config.hrirPathList,{dataType:ss.URL}):new ns(this.context,us,{dataType:ss.BASE64});try{const e=await t.load();this.convolver.setHRIRBufferList(e),this.setRenderingMode(this.config.renderingMode)}catch(t){const e=`FOARenderer: HRIR loading/decoding (mode: ${this.config.renderingMode}) failed. Reason: ${t.message}`;throw new Error(e)}}setChannelMap(t){t.toString()!==this.config.channelMap.toString()&&(is("Remapping channels (["+this.config.channelMap.toString()+"] -> ["+t.toString()+"])."),this.config.channelMap=t instanceof Array?t.slice():t,this.router.setChannelMap(this.config.channelMap))}setRotationMatrix3(t){this.rotator.setRotationMatrix3(t)}setRotationMatrix4(t){this.rotator.setRotationMatrix4(t)}getRenderingMode(){return this.config.renderingMode}setRenderingMode(t){if(t!==this.config.renderingMode){switch(t){case Mi.Ambisonic:this.convolver.enable(),this.bypass.disconnect();break;case Mi.Bypass:this.convolver.disable(),this.bypass.connect(this.output);break;case Mi.None:this.convolver.disable(),this.bypass.disconnect();break;default:c(t)}this.config.renderingMode=t}}}class gs{constructor(t,e,i){this._active=!1,this._isBufferLoaded=!1,this._context=t,this._ambisonicOrder=e,this._numberOfChannels=(this._ambisonicOrder+1)*(this._ambisonicOrder+1),this._buildAudioGraph(),i&&this.setHRIRBufferList(i),this.enable()}_buildAudioGraph(){const t=Math.ceil(this._numberOfChannels/2);this._inputSplitter=this._context.createChannelSplitter(this._numberOfChannels),this._stereoMergers=[],this._convolvers=[],this._stereoSplitters=[],this._positiveIndexSphericalHarmonics=this._context.createGain(),this._negativeIndexSphericalHarmonics=this._context.createGain(),this._inverter=this._context.createGain(),this._binauralMerger=this._context.createChannelMerger(2),this._outputGain=this._context.createGain();for(let e=0;e<t;++e)this._stereoMergers[e]=this._context.createChannelMerger(2),this._convolvers[e]=this._context.createConvolver(),this._stereoSplitters[e]=this._context.createChannelSplitter(2),this._convolvers[e].normalize=!1;for(let t=0;t<=this._ambisonicOrder;++t)for(let e=-t;e<=t;e++){const i=t*t+t+e,s=Math.floor(i/2);this._inputSplitter.connect(this._stereoMergers[s],i,i%2),this._stereoMergers[s].connect(this._convolvers[s]),this._convolvers[s].connect(this._stereoSplitters[s]),e>=0?this._stereoSplitters[s].connect(this._positiveIndexSphericalHarmonics,i%2):this._stereoSplitters[s].connect(this._negativeIndexSphericalHarmonics,i%2)}this._positiveIndexSphericalHarmonics.connect(this._binauralMerger,0,0),this._positiveIndexSphericalHarmonics.connect(this._binauralMerger,0,1),this._negativeIndexSphericalHarmonics.connect(this._binauralMerger,0,0),this._negativeIndexSphericalHarmonics.connect(this._inverter),this._inverter.connect(this._binauralMerger,0,1),this._inverter.gain.value=-1,this.input=this._inputSplitter,this.output=this._outputGain}dispose(){this._active&&this.disable();for(let t=0;t<=this._ambisonicOrder;++t)for(let e=-t;e<=t;e++){const i=t*t+t+e,s=Math.floor(i/2);this._inputSplitter.disconnect(this._stereoMergers[s],i,i%2),this._stereoMergers[s].disconnect(this._convolvers[s]),this._convolvers[s].disconnect(this._stereoSplitters[s]),e>=0?this._stereoSplitters[s].disconnect(this._positiveIndexSphericalHarmonics,i%2):this._stereoSplitters[s].disconnect(this._negativeIndexSphericalHarmonics,i%2)}this._positiveIndexSphericalHarmonics.disconnect(this._binauralMerger,0,0),this._positiveIndexSphericalHarmonics.disconnect(this._binauralMerger,0,1),this._negativeIndexSphericalHarmonics.disconnect(this._binauralMerger,0,0),this._negativeIndexSphericalHarmonics.disconnect(this._inverter),this._inverter.disconnect(this._binauralMerger,0,1)}setHRIRBufferList(t){if(!this._isBufferLoaded){for(let e=0;e<t.length;++e)this._convolvers[e].buffer=t[e];this._isBufferLoaded=!0}}enable(){this._binauralMerger.connect(this._outputGain),this._active=!0}disable(){this._binauralMerger.disconnect(),this._active=!1}}function ps(t,e){return t===e?1:0}function ms(t,e,i){return(i+t)*(2*t+1)+(e+t)}function fs(t,e,i,s,n){const a=ms(e,i,s);t[e-1][a].gain.value=n}function vs(t,e,i,s){const n=ms(e,i,s);return t[e-1][n].gain.value}function ws(t,e,i,s,n){return s===n?vs(t,1,e,1)*vs(t,n-1,i,n-1)-vs(t,1,e,-1)*vs(t,n-1,i,1-n):s===-n?vs(t,1,e,1)*vs(t,n-1,i,1-n)+vs(t,1,e,-1)*vs(t,n-1,i,n-1):vs(t,1,e,0)*vs(t,n-1,i,s)}function Bs(t,e,i,s){return ws(t,0,e,i,s)}function ys(t,e,i,s){if(0===e)return ws(t,1,1,i,s)+ws(t,-1,-1,i,s);if(e>0){const n=ps(e,1);return ws(t,1,e-1,i,s)*Math.sqrt(1+n)-ws(t,-1,1-e,i,s)*(1-n)}{const n=ps(e,-1);return ws(t,1,e+1,i,s)*(1-n)+ws(t,-1,-e-1,i,s)*Math.sqrt(1+n)}}function Ds(t,e,i,s){return 0===e?0:e>0?ws(t,1,e+1,i,s)+ws(t,-1,-e-1,i,s):ws(t,1,e-1,i,s)-ws(t,-1,1-e,i,s)}function bs(t,e,i){const s=ps(t,0),n=Math.abs(e)===i?1/(2*i*(2*i-1)):1/((i+e)*(i-e));return li(Cs,Math.sqrt((i+t)*(i-t)*n),.5*(1-2*s)*Math.sqrt((1+s)*(i+Math.abs(t)-1)*(i+Math.abs(t))*n),-.5*(1-s)*Math.sqrt((i-Math.abs(t)-1)*(i-Math.abs(t)))*n),Cs}const Cs=hi();function Ms(t,e){for(let i=-e;i<=e;i++)for(let s=-e;s<=e;s++){const n=bs(i,s,e);Math.abs(n[0])>0&&(n[0]*=Bs(t,i,s,e)),Math.abs(n[1])>0&&(n[1]*=ys(t,i,s,e)),Math.abs(n[2])>0&&(n[2]*=Ds(t,i,s,e)),fs(t,e,i,s,n[0]+n[1]+n[2])}}function Ps(t){for(let e=2;e<=t.length;e++)Ms(t,e)}class Is{constructor(t,e){this._context=t,this._ambisonicOrder=e;const i=(e+1)*(e+1);this._splitter=this._context.createChannelSplitter(i),this._merger=this._context.createChannelMerger(i),this._gainNodeMatrix=[];for(let t=1;t<=e;t++){const e=t*t,i=2*t+1;this._gainNodeMatrix[t-1]=[];for(let s=0;s<i;s++){const n=e+s;for(let a=0;a<i;a++){const o=e+a,r=s*i+a;this._gainNodeMatrix[t-1][r]=this._context.createGain(),this._splitter.connect(this._gainNodeMatrix[t-1][r],n),this._gainNodeMatrix[t-1][r].connect(this._merger,0,o)}}}this._splitter.connect(this._merger,0,0),this.setRotationMatrix3(ai(si())),this.input=this._splitter,this.output=this._merger}dispose(){for(let t=1;t<=this._ambisonicOrder;t++){const e=t*t,i=2*t+1;for(let s=0;s<i;s++){const n=e+s;for(let a=0;a<i;a++){const o=e+a,r=s*i+a;this._splitter.disconnect(this._gainNodeMatrix[t-1][r],n),this._gainNodeMatrix[t-1][r].disconnect(this._merger,0,o)}}}this._splitter.disconnect(this._merger,0,0)}setRotationMatrix3(t){this._gainNodeMatrix[0][0].gain.value=t[0],this._gainNodeMatrix[0][1].gain.value=t[1],this._gainNodeMatrix[0][2].gain.value=t[2],this._gainNodeMatrix[0][3].gain.value=t[3],this._gainNodeMatrix[0][4].gain.value=t[4],this._gainNodeMatrix[0][5].gain.value=t[5],this._gainNodeMatrix[0][6].gain.value=t[6],this._gainNodeMatrix[0][7].gain.value=t[7],this._gainNodeMatrix[0][8].gain.value=t[8],Ps(this._gainNodeMatrix)}setRotationMatrix4(t){this._gainNodeMatrix[0][0].gain.value=t[0],this._gainNodeMatrix[0][1].gain.value=t[1],this._gainNodeMatrix[0][2].gain.value=t[2],this._gainNodeMatrix[0][3].gain.value=t[4],this._gainNodeMatrix[0][4].gain.value=t[5],this._gainNodeMatrix[0][5].gain.value=t[6],this._gainNodeMatrix[0][6].gain.value=t[8],this._gainNodeMatrix[0][7].gain.value=t[9],this._gainNodeMatrix[0][8].gain.value=t[10],Ps(this._gainNodeMatrix)}getRotationMatrix3(){return ni(xs,this._gainNodeMatrix[0][0].gain.value,this._gainNodeMatrix[0][1].gain.value,this._gainNodeMatrix[0][2].gain.value,this._gainNodeMatrix[0][3].gain.value,this._gainNodeMatrix[0][4].gain.value,this._gainNodeMatrix[0][5].gain.value,this._gainNodeMatrix[0][6].gain.value,this._gainNodeMatrix[0][7].gain.value,this._gainNodeMatrix[0][8].gain.value),xs}getRotationMatrix4(){return ri(Ss,this._gainNodeMatrix[0][0].gain.value,this._gainNodeMatrix[0][1].gain.value,this._gainNodeMatrix[0][2].gain.value,0,this._gainNodeMatrix[0][3].gain.value,this._gainNodeMatrix[0][4].gain.value,this._gainNodeMatrix[0][5].gain.value,0,this._gainNodeMatrix[0][6].gain.value,this._gainNodeMatrix[0][7].gain.value,this._gainNodeMatrix[0][8].gain.value,0,0,0,0,1),Ss}getAmbisonicOrder(){return this._ambisonicOrder}}const xs=si(),Ss=oi();var Fs=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wQA8/8ZAPr/DAD+/wMA/v8KAAQA/f8DAAMABADs//z/8v/z/8f/R/90/ob+//zAAWsDAwY3DKn9//tu93DvkwI6An4CuwJ0/BH7VPux92X0Gu7N/EX9mgfqCkkIiRMgBd4NQQGL/c0G/xBxAKELZATUA/sIHRSx+fkCyAUmBNEJIARlAdHz2AjNACcIsAW4AlECsvtJ/P/7K/tf++n8aP4W+g0FXAElAMn8nQHn/sT+Zv7N+9X2xvzM/O3+EvpqBBD7SQLd+vb/sPlw/JD72/3n+Rr+L/wS/vz6UQGg/Nf+Av5L/5X9Gv2//SP+mf3j/lf+v/2B/ZH/5P05/iL9MP9F/uf9UP4v/qv9mv7o/Xn+wP2k/8L+uP5J/tD+Dv/Y/bL+mP72/n3+pP+7/hAA+/5zAGH+Z/+u/g8Azv2y/6L+//9o/iIADP8VACz/CwCN/pb/1v4yAFP+wf+4/jsAcf5VAP3+bADa/nMA6f4sAOT+IQBd/v7/7v6aAIL+QADe/nEA0P4yAKz+CQCo/moAuf5xAN7+mAC8/jcANf9eAPX+IAA1/1kAAP9hAMz+PQD5/m0A2/4gAPr+UQDh/jQAEv9BAPH+FABN/zkASv9DADP/BABe/1IAGf8oAE3/RQAw/zIAQf8mADn/GgBE/xIAR/8hAD7/BABy/zEAKP/0/07/GwBX/z4ARf8mAFr/QQBV/zUAVP8eAFz/JABt/0EAUP8MAHz/KgBr/ycAYv8EAH3/MABl/x8Agv8bAIj/GgBv//z/ff8AAJX/IABu/+T/jv/r/4z/9/9n/77/pP8JAJD/EQCJ//r/q/8WAJ//GQCU/xYAtv8qAKr/PQCW/ysAwf8+ALb/OgC3/ygAz/8uAM7/OgDH/ygAz/8kAMz/OgC//xsA1f8qAMn/LwDN/xcA1f8oAMv/JQDR/xMAzf8bAM//HgDU/wUA2v8ZANL/EwDW/wEA1f8ZAMz/BwDX/wIA0v8SANT/BQDW/wMA0/8PANT/AADY/wIA1f8MANX/+f/a/wUA0v8IANf/+//Y/wUA0/8DANr/+f/Y/wQA1v8BANr/+f/Z/wUA1//8/9z/+v/Y/wYA2f/8/93//v/Y/wUA2v/9/93////Z/wUA3P/8/97/AgDa/wMA3v/8/97/AwDb/wIA3//9/97/BADd/wEA4f///9//BQDf/wAA4v8AAN//BQDf/wAA4/8CAN//BADh/wAA4/8DAOD/BADi////4/8DAOH/AwDk/wAA5P8FAOL/AgDl/wEA5P8FAOL/AQDl/wEA4/8EAOL/AQDj/wIA4P8DAN//AADg/wIA3v8CAOD/AADh/wEA4v8AAOP/AADm/wAA6P8AAOz/AADu/wAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////f/+//7///8AAP////8BAAEA/f8AAAEAAQAFAAUA9//6/x0A2f/9/xMA3P+jAE//of9HAKP//gCj/77/Z/vi/28D9/ywDJAJIvr6AsX0Xec4BhcGzf23DZP7yfZ6C1//nwBDBIHyYgob/Tf3sQ41ANoKRA/A+E7yffAa9gD5EQUBDMwMygiqAHMAqPqhAGUB2/gE+a78H/+4APT6DwIUAA0HNwMhBfL8E/90A5n7dP9cALIC+v5C/q0AOv9kAogBHv01/+3/qAQD/ub8T/4vAOUA5P6KATv+ywEYAeT+KP6i/3gCFP6h/hr/+P83ACL/VADn/8UARQJI/4MAu/8qAlj+wf4iAPb/LgFJ/8QAUABAAI4ABf+k/3X/YgFK/ij/j/9HADoAi/+WAA0BVwC/ACL/LACe//cARv9i/xgAUgA0ACj/FgBgAIj/5P9M/7z/zv8/AKz/gv8sAEQA6/+I/yYAawDL/7T/xf8qAOv/FQCu/5n/EgAyAO3/i/9LAE4A+//R//P/FgDe/8z/u/8DADIALAAZALL/TAA8ABwAo//1/xwA/P/L/z0A6P8jAN7/7v+a/zAAwf/7/3//KQAuACwA9v8RAGYAIwBNADgAKgASAF0ADgANACEAMQDH//H/LQACAB0Ay////x0APAABAAQA2v8iAAcAEgDE/+v/FQD+/+P/DAD1/97/6v/4//X/EwD4/+7/5P8cAA0ACQDH//7/CQAXAAEA/P/5//j/CwAWAAEABQD9//n/AQAWAB0A7v/k/wAACQAmAP//9/8AAPn/8/8aAO//6/8fAOv/5v8hAP//5/8PAOf/AAAGAPn/6v8JAAYABgABAOv/1//1//L/+P8DABcA6f/8/wMACgD7/xAA3v/2//z/DADu//z/5v/5/wEA/P/6//7/7v/x/wQABgD5/wAA8v/w/wkAEQD2//j/+v8EAAcAEAD3//v/+v8CAAAACQD3//v//v/9/wUADAD2//X/AgAHAAAABwD2//T/BgAKAP7/AQD4//r/BAAIAPn/AAD3//f/BQAHAPv//v/7//n/BQAJAPj/+v/9//7/AgAGAPj/+f8BAAEAAgAFAPn/+v8BAAIAAAAEAPn/+f8CAAQA/v8BAPr/+v8CAAQA/P////v//P8CAAQA+//+//3//f8CAAUA+v/9//////8AAAQA+v/8////AAD//wIA+//8/wAAAQD+/wEA+//8/wAAAgD9/////P/9/wEAAgD8//7//f/9/wAAAgD8//3//v/+////AQD8//z/////////AAD8//3///8AAP7/AAD9//7///8AAP7////+//////8AAP7////+////////////////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v8AAP///////wAAAAAAAP7/AQABAAAABwD///X/BQAjAPL/CQDb/9D/GAAb/7sAYwCW/z0BcP/X/7T/2QDW+wH8yANCCCUJ5QT++UXmhPwhA78FuAxH+p78ifudBlAG9vmu/lAK2fdlB///cfjoCa0E7Akn9Yb/zvba+AkAHPywBGEBFwUNAL8AXAAGA20DFvmR/kz+F/06Ag/+GwHl/5EEKgJd/q0AP/ym/9n6EfxY/2H+/QFtAC4C6QBDAaMCo/20/+3/3f/p/fL9rv9V/6cBhQHuAX4AcwJYAaH/IP/P/gsApP0LAe7/sQBuAI0AAgGDAE4BzACe/5X//v+v/+f+Zf+gAOv/5QBhAOIApAANASYAuP+h/8b/HQBr/9//bACWAGEAFAB5AD0AWQDU/+D/Yf/p//D/s/+R/4QAMQBvABEAkQBfABQAJgDW/wwA8/8XALz/vf8zAFAAKwD1/zEAPwDJ/x0A7/8LAOX/FwDR//H/EQAdAO//6P8QAFEA2f8WABEAMgDy/xIA+f/s/xAALgDv////HQAvAPT/+f8iAAYAEgAFABoAGgD//w0A+f/0/xsAHgDx/9f/GAACAPH/8f8JAPf/GwALABEA7/8cAPT/CgD2//j/BQD8/+3/OgAgAAYA9f8PAN7/DgD9/9r/1//3/+3/9//1//b/8//5//f/AgAJAOf/+v8OAAMACwD9/+7/5f8eAAEA9//q//7/8P8WAP7/+//4/wIA+f8TAAIA9f/5/wcA+P8iAAgA9v/n/xoA//8gAAUABwDj/wAA9v8BAAUAFQDn/wMA7v8QABAAEQDm/wwA8f8aAAAABwDu/wcACgASAAEA7//w//f/BgARAAkA6P/3/wcADgAKAAYA4f/4/wYADgAAAPr/8P/9/xQACgAHAPn/7//9/xEAAgD+//L/8v/8/xUAAwDw//H/9f8CAAsA/v/q//L/+f8FAAYA/P/r//j///8GAAkA+//o//j/AQAIAP//+v/o//v/CAAIAPv/+P/w/wEACQAHAPj/+f/0/wIACwAFAPb/+f/4/wQACwACAPP/+f/+/wYACAD///L/+/8BAAYABQD9//P//P8FAAUAAgD7//T//f8HAAQA///7//f///8IAAMA/P/6//r/AQAIAAEA+v/6//3/AgAHAAAA+f/7/wAAAwAFAP7/+P/8/wIAAgACAP3/+f/9/wMAAwAAAPz/+v/+/wQAAgD+//z/+/8AAAQAAQD8//z//f8BAAQAAAD7//3///8BAAMA///7//3/AAACAAEA/v/7//7/AQABAAAA/v/9////AQAAAP///v/+////AAD/////////////////////////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAAAA/v/+/wAAAQD8//3/CQAJAP3/+v8PAAcApABlABkBkwCO/i//lfqa/HQAcf/3BdkCzwJcBCMC0wMN/9/9wgI7AaECYfxV/Tf83vhn/xrt8Owx/8n7cgHABYb43QcZDh4WugNrA7P74gHu/9z/zv0t/acCiQHY/iv4qQOl/ysCE/0//XT9Sf4O//j9xfupAn394gHO+rsCXAFIAxQC9wIXBgcD2AQuAnb/9gJh/6wAVfxEAI4Bvf7oAFv/bALsAMQBe/88/joAT/4dAH39/v9LAXn/gwDI//QBdABcAA0A7f4lAMn///+9/tv/iABp/13/pP/dALv/w/8MAHv//f+y/6////7U/5AAZP+Z/8r/nQDR/5r/DwDr/xAA4v+s/3z/+P9uAOv/t/82AGcAHgCb/yQAFQBGAM7/CgD3/xoAegAaAOz/CgBHAA8Adv8/AAAABQC2/xIAAAA7ABQAKgCj/z4AAQAXAJz/JAADAAcA8f/1/2AAAQAlAPD/NgDx/1wA7v/4/wMAZADv//3/HQAkAFoA8P9FAPv/FgBIAPf/WQAHAEUACQD0/xIAQwDu/wMAwP9VALn/XwCw/yEA5f8sAPj/FgDD/1YAyv8rAOX/HQDo//j/IQAQACAAHwD9/yQAHQBAABgABQAiAAUAKAD3/wkACwAKAAMABwAJAPb/+f8GAOr/JQAHABMA6P8TAA4AGgD//woA8/8ZAP//GADu/w0A9v8SAAMABwD4/wQA5P8XAAQACgDq/wUA+/8VAAcACADs/xIAAAATAPH/+v/1//T/7f///+z/+v/y/+//9/8KAAcACgAJAPT/BAAKAAAABgAIAPL/9v8KAAMABAACAPr/9v8OAAIA+P/x//v/+f8MAPb/+P/w/wQA9f8MAPn////7/woA/v8PAAEAAgD1/xAAAQAPAP//AwD//xQABwALAAAABgADABAAAgAHAAAACAABAA8ABQAFAAMABwAEAA4ABwADAAEACQAFAAoAAwD//wAACQADAAUAAQD/////CAABAAMAAAD/////BwACAAEAAAD/////BwACAP7///8BAAAABgABAP7///8CAAAABAAAAP7///8DAAAAAwAAAP3///8DAAAAAQAAAP3//v8EAAAAAAD+//////8EAP/////+/wAA/v8EAP/////+/wEA/v8EAP///v/+/wIA//8DAP///v/+/wIA//8BAP///v/+/wMA//8BAP/////+/wMA//8AAP//AAD+/wQA//8AAP7/AQD//wIA////////AQD//wIA////////AQAAAAEAAAAAAP//AQD//wEAAAAAAP//AQAAAAEAAAAAAAAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wAA+v8AAPz/AAD//wAA/f8AAAEAAAD+/wAACQAAAAQAAAAZAAAAtgAAAFsBAABW/gAAH/oAAGcBAABoBwAAlAAAAO3/AAARAQAA+wIAAEoEAACe/gAAiv4AALD0AADJ8wAAkQQAAF34AABi8QAAPQAAAAH2AAD19AAADAMAAJwGAACTEAAA0AwAAJkHAACOBwAAuQEAANcDAAC6AgAAHwUAAHEFAAB0AwAAbgEAADz+AADYAQAAGAAAAJwCAADgAAAA//0AAMn+AAAT/AAAwP8AAOn9AAAJAAAAewEAAOn+AACN/wAAOv0AAO3+AADN/gAAcP8AACj/AACq/gAA+f4AAML9AACa/wAA/f4AAN7/AABo/wAA6/4AAE//AAAC/wAAEQAAAHX/AAB0AAAA5f8AAEwAAAB3AAAA5/8AAMIAAABCAAAAzgAAAE8AAAB3AAAAKAAAADMAAACqAAAALwAAAK4AAAASAAAAVgAAACgAAAAtAAAATAAAAP3/AAA7AAAA2/8AACQAAADw/wAALQAAADEAAAAlAAAAbAAAADMAAABUAAAAEAAAACgAAAD1/wAA9v8AAPr/AADu/wAALgAAABIAAABUAAAARAAAAGUAAABGAAAAOAAAAGAAAAAuAAAARQAAACEAAAAfAAAAAAAAAAkAAAAQAAAAAwAAABIAAADs/wAAEAAAAAYAAAASAAAAIgAAABEAAAADAAAABAAAAA8AAAD4/wAAHQAAAAsAAAAIAAAADgAAAP//AAAcAAAADwAAAAYAAAASAAAAFwAAAAMAAAAYAAAAEgAAAPr/AAAQAAAADQAAAAoAAAD3/wAABgAAAPb/AADf/wAA/v8AAPL/AAD6/wAAFAAAAAQAAAAEAAAAGwAAAAEAAAAMAAAAIAAAAAIAAAAdAAAAGAAAAAIAAAAcAAAAEgAAAAcAAAAeAAAADwAAAAQAAAAeAAAABAAAAAYAAAAZAAAAAQAAAA4AAAATAAAA/v8AAAoAAAAOAAAA+/8AAAsAAAAJAAAA+f8AAAsAAAABAAAA+f8AAAoAAAD9/wAA+v8AAAcAAAD5/wAA+v8AAAUAAAD3/wAA/f8AAAQAAAD2/wAAAAAAAAEAAAD3/wAAAgAAAAAAAAD4/wAAAwAAAP7/AAD6/wAABAAAAP3/AAD8/wAABAAAAPv/AAD+/wAAAwAAAPv/AAD//wAAAQAAAPv/AAAAAAAAAAAAAPv/AAACAAAA//8AAPz/AAACAAAA/v8AAP3/AAACAAAA/f8AAP7/AAABAAAA/f8AAP//AAABAAAA/f8AAAAAAAAAAAAA/v8AAAEAAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAA"],Es=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wQA8/8YAP3/CgACAAAA//8CAAYA8/8AAPH/CgDv/97/e/+y/9P+UQDwAHUBEwV7/pP8P/y09bsDwAfNBGYIFf/Y+736+fP890Hv8AGcC3T/vwYy+S70AAICA3AD4AagBw0R4w3ZEAcN8RVYAV8Q8P2z+kECHwdK/jIG0QNKAYUElf8IClj7BgjX+/f8j/l3/5f/6fkK+xz8FP0v/nj/Mf/n/FcBPfvH/1H3+gBP/Hf8cfiCAR/54QBh+UQAcvkzAWL8TP13+iD/V/73+wv9Kv+Y/hv+xPz7/UL83//a/z/9AP6R/5L+jf26/P3+rP26/tD8nP7B/Pv+WP1V/sP9gv91/3P9xP3J/nv/GP5S/sb+IP8v/9j/dv7U/pr+6v+u/Z3/sv5cAOr9Q/83/+n/zP5x/57+2//k/nwA/v01//L+SACB/sD/Ff81AJT+TgDp/ocAm/5dAFT+MgD+/pMAW/7o/yH/xQDA/kkA9P6LAL3+pAC0/iQAz/5UALD+UwAt/3UAhf4UAA//pwC+/joAz/5aAAv/fwDY/iMAIf+uAPP+ZAAc/0QAy/4xAB7/TgDs/goADP8wAEL/NwDo/ub/Uf9BAC3/+v9F/y4ARP9HAFP/EQA3/xMATP81AG3/HQAu/wgAaP9FACb/9f9B/y0AUP8rAED/CwBV/z4AW/8TAGH/BQBK/xsAfv8eAFn/AgB3/zwAff8RAGj//v+E/yAAb//0/3n/FwBz/xcAiv8PAHn/FQCJ/xgAg//x/3j/EQCa/ycAff/w/47/HwCI//X/iv/7/43/JQCM/+n/kP8AAJb/JACj//7/oP8ZAML/SwCo/w4Atv8tAMb/PACr/xcAwP9HAMP/OADF/y4A0f9IANL/NwC//zEA0f9LAMb/MAC8/y4A3f9GAMH/FQDQ/yYA2/8sAMT/AwDX/xkA3v8SAM3/9v/c/w8A4f8LAMj/8f/h/xQA2P8CAMn/8//j/xQA0v/7/9H//P/i/xEA0v/1/9L//f/j/w0A0f/x/9f//v/k/wgAz//u/9z/AwDg/wMA0P/v/9//BQDf////0v/y/+D/CADc//3/0v/2/+L/CgDa//r/1v/5/+T/CgDY//j/2f/9/+T/CADY//f/3P8AAOT/BwDY//f/4P8EAOP/BADZ//j/4v8GAOL/AwDa//r/5f8IAOH/AQDc//3/5v8JAOD//v/f////5v8IAOD//v/h/wIA5/8HAOD//f/j/wMA5/8GAOD//f/l/wYA5v8EAOD//v/m/wYA5f8CAOL////n/wYA5P8BAOH/AADl/wUA4f///+H/AQDk/wMA4f///+T/AQDm/wEA5////+r/AADt/wAA7/////P/AAD1////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v///wAAAAAAAAAAAQAAAAAA///9/wAABAD+//n/AgAJAAAA+v/+//f/DAAdAPv/+v+l/8L+jf/4/vgAdwVPAQACLQBo+Qj/Ev7o/N3/VgCbA08Bxf+L+yn9J/2HCU8FmgBvDe30Rv5h/LT09gi5CxkA5gOi8/30kwEM+4YJMf2nBmkJJAQQBLoFtvvv+m4A7PF6/R0Bif3qAuf8WARAAf4GyABG/BIAwvr4Acv8U//c/yIC8AEn/B8Daf2CAgMBAf3MAN38vgLK/UT/QwCyAPYClPyvAW/+pQAoASD+zP+R/IYC1f7C/nEBQP96AZb+1QAIAM//yQE7/tkAZ/7TAXL/w/8+AIsAtwB7/24A4v9a/z4A7v4iADb/dwCj/23/kgBOANUAIv8lAKEAxP9gAK7/BwCP/5kA7/9v/0wAzv9DAGT/3/9vAHv/6P+q/xUA7P8XAO//uv/g/2UAEgCV/wEATADM/+7/+//j/+D/9v/i//j/IgD+/xoAxf/6/z4A5/+8/9D/QwDq/+3/OQDT/zUAIgA/APP/PgAjAPD/BwAGACAADAC3//b/HAA3AN//RgDN/w8AIAACAN//GQBDACEAIwA+ACoAJQAeAPz/KgAYAPr/DgAEABYAIgAcAMT/7f8OAOL/5P/2//L/9P8GAPT/7v/8/+7/6v/t//z/AgAUAOL//P8VAAMA4/8IAPb/+P8MAAoA5v8NAAsA9v///wEAAAD9//n/9/8JAAYA7v/6/wMA+f8GAAEA7f/7/xgACAD4/w8A///3/w0A+f8BAAIA/P/5/xIA///9//r/7v/+/xYACQD///H/CwDz/wEADgAHAPP/FADn/+3/AQD5//f/AgD7/wEABwAMAAEADQD8//n/8f8OAPX/BAD+//X/+v8WAAQA+f8CAAEA7/8QAAEA/P8DAAUA9f8KAAwA9v8DAAUA+f8OAAoA9f/7/w0A+v8EAAgA8P/6/woA+//8/wkA+P/3/woA+//8/wcA9//1/woAAwD5/wcA/P/3/w0AAwD3/wEABAD2/wkABgD3/wEABQD3/wUABQD3//v/BwD3/wMABQD3//r/CQD7////BQD6//n/CQD9//3/BAD9//j/BwAAAPv/AwD///j/BwABAPn/AQABAPn/BQACAPn///8DAPr/AwADAPr//v8EAPv/AQADAPv//P8FAP3///8DAPz/+/8FAP7//f8CAP7/+/8EAP///P8BAP//+/8DAAEA+/8AAAEA+/8CAAIA+////wIA/f8AAAIA/P/+/wIA/f8AAAIA/f/9/wMA/////wEA///+/wIA/////wAAAAD+/wAAAAD/////AAD//wAA//8AAP//AAD//wAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAP////8AAP//AAAAAPz//f8IAAMA9////w4AAQD6/wwA8//+/y8Afv/0/2H/UP5gAbH+2QG1B2cAVAIh/l32FPyM/nACPQDV/+UEo/Q6AQwCu/oLD9kF8QJA/Uz+Wf2KCOcC+wUKBsL5aQBQ97rwOPiPAvn5CAl8AHEDkQPcAA8Bn/lIAdz7HQF1+xz9cAM4/94E4gDKAun+cgPYAYr9JgJr/bf+ivxz/MoBgv5UA8EBSgAQAJ7/UgEk/cQB7f63/sD/vf4XAhT/BQFCADYAnQGI/9EBtv3hALD/vP+c/3H/TgIN/1sBpf8yAP3/4f8qABr+1f8OAJ3/dwAGADEBnv9JAPz/IQBwAIH/jgAS/4wAsACTAOn/DQDCALn/ZQCSAAIAAwD1/9//jv9aADQA/v9EAB0AfgA8AAQACgB9APr/IAARAPT/5v9xACAABAAHAGUAt/89AC4ACgAjAMP/+v/9/xYA7f/1/+D/7P87AC0Auv8RAAcA9/8FAC8A2//y/xIAEwAaADQAJADp/zoAAgAfABIA2f/e/zUA+P/6/w4A9//A/zcA4//P//T/5f/R////EwDb/w4A8/8BABkANADh/xEA+f/0/wIAHADc//j/GwD1//f/GADs/+v/EAAAAPz/EgD3/+r/FgAMAAkAGAD9/+z/IQAQAPH/GQD3//z/CgAfAOX/AgD8//H/BAATAOv/+v///wIABAAdAOj/BQAPAAcAAQATAOz/8/8JAAkA6f8VAOv/+f8QABUA/v8OAO3/+P8KABUA9f8FAPv/5/8TAA0A7f8XAAkAAQAJABYA4/8WAAcACgANABEA7v8EAP7/AAD+/wMA9//7/xAAAQD8/wQA+f/7/wMABgDq/wAA+v/3/wYACQD1//3/BAD9/wgADgDw//r/AgD6/wEACADv//j/BQD///X/BwDu//j/AgACAPP/BAD2//n/BAAGAPb/BAD8//3/BQAJAPL/AwD+//3/BAAIAPP//f8DAPz/AAAGAPP/+/8CAP7//f8FAPX/+f8DAAAA/P8EAPf/+v8GAAMA+/8EAPv/+/8GAAQA+v8CAP///P8EAAUA+f8AAP///f8CAAUA+P///wEA/v8BAAUA+f/+/wIAAAD//wUA+v/9/wMAAQD9/wQA+//9/wMAAgD8/wMA/P/9/wMAAwD7/wEA/v/+/wIAAwD6/wEA///+/wAABAD6/wAAAQD//wAAAwD7////AQAAAP//AwD8//7/AgABAP3/AgD9//7/AQABAP3/AQD+//7/AAACAPz/AAD+//////8BAP3/AAD//wAA//8BAP7/AAD//wAA/v8AAP7/AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////P/9//3//////wAAAAAAAAIAAgACAP//CAAEAEEA//+cAAUAb/8HAAH9+P9eARkAogQUAJn8BwCd/gX/+QQNAKoC9gFdAtb/b/vd/936TP/6AsD/nfqn/un1W/0dA8IEsQLvAJv2bP72+WMAkP8dAcX+nQO2AIr6bP/EABX+NgK/Bdj2IQv2AE4EUAiD/xQAnwIm/B0B/wGNAoH7sQaP/b8CiQakAqD+R/9xA477KQL//6r75v/O/pcCgQCtAiMCBQAkANAARwHf//39hgBl/kUAJgEtAUEATgA/AgoASADK/zUAJv29/vL+l/9c/0cAUwBBAE8A6QE5/87/Wv9NAOf+5v7P/5P/4/9BAKYAQwDD/zYB5v+r/zYATwAp/1v/WQAEAB0AhwA0AA0AIAA3AAEAzv/u/+//5v9m/zwAIADQ/8T/SABiANb/SwAbAFf/MQDX/7L/hP8TAPr/AgAMAAsAHwAZAI3/VgDC/9v/5//x/6P/AwBlAMv/yf82AB4A+P9WAPj/NwDi/1EA0v9JANj/JwAcAAEADABYANj/4f8MAEwAmP82AN//3P8UADYA7//6/wIACADU/ygAyv82AN7/9v/2/ygAxv/9/+3/5//n/zUA6//g/y4ADgD5/wsABwDv/xIADwAGACoAJQD3/zIA+/8FABsAFgDO/zAAHAAIABQALADp/xcACAAAAPH/GADs/wkACQAFAAgAFQDp/wIAHAD1//P/EQDw/+3/GAD9/+f/HAD8//T/DAAQAPH/HwD4//r/DwAPAOj/EQACAOn/DAAXAOX/BAAOANH/9/8MAO//9f8LANT/9f8EAO//6f8NANb/+P8KAOz/5v8MAOD/7f8UAO//7//+//7/9v8YAPj/9f/z/wsA+v8SAPD/+v/x/xYA+f8SAPb/9//3/xEABQACAPn/9//y/xQACQD///b//v/7/xIACQD9//H/AAD7/xEAAgD5//P/AwD9/w8AAgD3//D/BAD//wUA/v/0//D/BgADAAMA/P/2//f/BwAGAP7/+//2//j/CAAFAPv/+f/5//v/BwAHAPn/9//7//7/BQAFAPf/9//+/wEABAACAPf/+P8BAAIAAgAAAPj/9/8CAAMAAAD+//n/+f8EAAQA/v/8//r/+/8EAAMA/P/7//z//P8EAAIA/P/5//7//v8DAAEA+//5//////8CAAAA+//5/wEAAAABAP//+//6/wIAAQD///3//P/7/wMAAQD///3//f/9/wIAAQD9//3//v/9/wMAAQD9//z/AAD//wEAAAD9//z/AAAAAAAA///9//3/AAD//wAA/v////7/AAD//wAA////////AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+////+f////v//v///wAA/////wUAAQAIAAIABwACAHkATAAOAaMAAf9C/9X6QvwhArAAtghABW37nv/y+0wAWQNcAE8JRwSOC6AEJe8P8S/zrPWaBI/+LQA/+0L+P/4K8AgAb/8uCh78BQtC614GaQWfAin5UfzN8Tf+GQizAZ4MCQMbGJ4BoRS7AvcHyQARA6n9ZwHZ/z4DvwAZAlAB6gbNAS4GFADFATL7E/2K+j37C/xp/SD9Uv0VAOsDs//WAd3+bv7F/f79mP2X/KH+FwC0/1n+VgFcATABHQGaAET+nf8Y/hoAovpqAXj9CQKW/lsCl/4RApj+bAHk/RcAlv4BAG/+DgDi//3/GwAOAEIAq/+y/3z/8v8+/7T/Tv8//27/mgDZ/1sA+P+cAAAA/P/i/yMAi/85AMP/KgDM/9MA9P+QABoA4QAiACwACwBdAP7/TQDb/y0Ayf+SAA0AZwDg/4wA+/8/AAMAgQDp/w0ADAAQAAoANgAgAA4AKABIAB4A4v/3/+f/+v/c/+n/EADn/wgAFAAqAOz/IwDc/9//3f8XAND/2v/a/w0A5v8BANb/9P/m/wAA8P8ZAN3/RwAGAEsABgB/AP7/NAASAEgABAA3AP3/KgD9/1sA8P8lAOr/FgD1/xAA4/8kAOv/AwD4/xEA5f8NAPT/+v/3/x8A7f8PAPj/IwD5/yAA9/8ZAAEAGgD4/xoA9f8HAAMACAD0/xgA+P8AAPr/IQDp/w4A8v8HAPX/IgD1/wYA+P8GAPX/GgD3/woABQASAAcAGQDw/+v/9P8bAP3/HADs/+f/7/8LAPr//v/0//T/AgD2/wsA6P///+P/CADY//7/5v/3/wQA/v8LAPD/GgD1/yMA/P8QAOv/LADw/yQA+P8XAO7/MQD9/yEAAQAcAPD/IgD9/xMA+/8OAO//FQABAAoA+/8PAPP/FQABAAQA9/8PAPX/CAADAAEA+P8NAPv/CAAGAAUA9/8JAP//AAAFAPz/+f8HAAQA/f8FAP3//P8FAAYA+P8DAP7/+/8AAAcA9/8BAP///f///wgA9//+/wAA/v/8/wUA9//8/wIA///7/wUA+v/7/wIAAAD6/wMA/P/6/wEAAQD6/wEA/v/7/wIAAgD6////AAD7/wEAAgD7//7/AQD8/wAAAwD8//3/AwD9/wAAAgD9//z/AwD/////AgD+//z/AwAAAP7/AQD///3/AgABAP3/AAAAAP3/AgACAPz///8BAP3/AQACAP3//v8BAP7/AAABAP3//v8CAP7///8BAP7//f8CAP////8AAAAA/v8CAAAAAAAAAAAA/v8BAAAAAAD//wAA//8AAP//AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA/////wAAAQD+////AAAGAP3/OAABAIIAAwBv//f/E/0QAK0ADQCzA/7/8P4u/0cBDQCJA6ABbQDg/w7/z/9o+Vn/SPnL/1//Ef+2+jr9RfZgA5QFZwILDFj+PAb2/nEFKgKk/R0Dlv6b/FUDsP6YAoj9SgAT/iL/tAPwAv8A0P6zAr7/dwAnAf39uP22/skA2v///2YCoP4UAUsAZgF2AJH+4P70/rz9+f+U/Xv/8v7CAcb+TACS/kwAv/+x/tX9oP71/oL/1f8nAEUAZwGtAAgAIgC/AD4BaP8GAGH/dQDF/64Arf8nAakAhAH9/+kAQQD3AFb/q/8p/yIAR/8FAPD/ZAA/AIYA3v8tADQADQBp/3f/CwABAP3/Wf8OANj/WwDH/xoAe/8DAKz/zv96/z8A3f/J/5X/IAD5//j/q//c/+//RADq//D/vv8pADUAFQDI/y8ACAAbANb/OwD3/+3/9f/e/wcAIAAeAMH/8/8xAC0AEADW/+3/HAADAPv/8P8DAOL/OwD3/xcACQAHAM//5f8XAAcAz//T/9D/HgD9////yf/e//v/AgD//9H/6/////H/+/8hAAIA9//7/w0AFgAQAPL/2v/8/xsAGQABANz/9P8YAAQA/v/y/wMA5v8YAAkAAAAAAAMA7/8KABgADwDs//j/BwATABsA8P/1//z/BAAMAAAA9P/s/xAA/v8GAAkA/v/p/wMACwALAP7/9P/p/wcADQAFAPb/7//4/w0ACAD8//b//v/1/wMACwD1//T/8P/8/wAACQDz/+f/5P8GAAkABQD5//D/+v8FAA0AAwD///T/AgACABAA/v8CAPD/+/8FAAoA9f/3//f//v8GAP7/9v/t//z/+f8AAPj/+v/3/wEA+v8HAPr//P/5/wQA//8DAPr/+P/3/wYA///+//X/+//5/wQA/f/7//X/+//4/wMA/f/8//j//v/9/wYA///8//f/AgAAAAUA/f/6//n/AwACAAIA/f/7//z/AwACAAAA/f/6//3/AgADAP7//f/7/wAAAwAFAPz////8/wMAAgAEAPv//v/+/wMAAgADAPv//v///wMAAQABAPv//f8AAAIAAAD///v//f8BAAIA///+//z//v8CAAIA/v/9//3///8CAAEA/v/9//7/AAACAAAA/v/9////AAABAAAA/f/9/wAAAQABAP///f/+/wEAAQAAAP///v/+/wEAAQD///7//v///wEAAQD///7//v///wEAAAD+//7///8AAAAAAAD+//7///8AAAAA///+//7///8AAAAA////////AAAAAP////////////8AAP//////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAAAAABAAAAAAD//////////////v////3/////////+//8////AQD9//z/9f8BAAIA+f8dACgAWQBxAJX/qv+Y/uz9aP9k/7UDUQQBAiQA4Pgi/AkB0gKaBsD/+fxp/vz9CQSp/I/+ywDO+vMD0fzK/PABcgBeBfoBv/+uAuH9Sf5gAy39awMmBWUBuP9fA9/9fgDj/2/+EACaACcCSv9Z/2j/rv7hAA0AWf55/7L84P7E/SIAT/67AMv/tf+FAA7/1v+7/gv/IP+E/sQA+P5aAXz/tP9XAFX/tP8o/4r/j//e/yQAMv9mAJT/rgCr/9X/EwCb//H/9f7F/6D/EAAoAK3//v+e/zsAh/+B/7r/if/C/2r/4P/z/6//HwCy/0IA7/9ZALT/y/80ACgA9v/J/9//DgA5ADUALQARADIACwAfAOf/NgArACMACQBBAEcAGAAjAC4AWQBUAHcAAAAfACEAIAAcAPj/CADk/yQA7v89AEEAFwD5/xYA6f8aAOX/AADF/zQADwAUAOT/BQDr/yUA6P8XAOf/HADR/0AA8P8nAAgACQDt/ycAKAAHAPH/IQDz/xsACADn//n/DgADAA4A8P///8z/GgDN/yMA/f8QANj/MwACAC0ACwAOAO3/JgAZAAUACgAAAA4AIgAaAAkADwACAAAAHQATAAUABQACAAgACwAjAO////8AAA8ABQAPAPL//f8GAAsABgAGAPD/8v8GAPz/CAD6//H/6v8PAAgABgD4//3/9v8aAAgABwD1//7//v8QAAoACAD//wUA9v8QAAoABAAFAAgAAgAJAAoAAwD//w0AAgD//wcA/v8DAAoABQAFABUABAAKAAYABwAHAA8ACgAGAAwADwAMAAkAEAAJAAgADwAMAAgADgAJAAUACQAPAAUACwAHAAEABgAIAAEABAAGAP//AgAJAAAAAgAEAP7///8IAAIA//8GAAEAAQAJAAIA/v8EAAMA//8JAAEA/v8DAAMA/v8HAAMA/f8BAAUA/v8FAAMA/v8BAAcA//8DAAMA/v8BAAYA//8CAAMA/////wcAAAAAAAMAAAD//wYAAQD+/wMAAQD//wUAAQD+/wIAAgD//wQAAgD+/wEAAwD//wMAAwD+/wEAAwD//wIAAwD//wEABAAAAAEABAD//wAABAABAAAAAwAAAAAABAABAP//AwABAAAAAwACAP//AgACAAAAAwACAP//AgACAAAAAgACAAAAAQADAAAAAQACAAAAAQADAAAAAQACAAAAAAACAAEAAAACAAEAAAACAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAAAAAAAAAAAAAAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA//8AAP//AAACAAAA+f8BAAYA///4/wIA//8AAA8A/v/V/wEAEwA9AAEBRwA2AF7/kfog/3gBwv99CDYBU/qtAUX/AP7OAfkAX/o9B38FSfwaAuT14/60BAr8CQAI/tfyIQTzAXP+egdUBBwBof7TBMT8bAWi/5EEWwBRAAAKyfxE/8b88vp6ACP+PAF4/qD8MQNM/ygCJ/2XAPD9kP5gAVT/iP9I/lEB4P8qAD0BFAGa/+7/DgB2AOP98gFm/u/+Vv5/AG8ASP9gAM//qv9w//oAcv+2/jIBHgA7/6D/oAAGAKH/lADT/wAAggC8AAYAkP9yAEcAkf8BAOD/RAAr/zUANwDt/xQAJQAkAMT/zwA/AOH/xv9zAGsANQBTAIcALAAvACIATACy/xMADADg/xcAWABvAJL/7f9VAPb/EgDt/wcA4f8kAPP/5P+h/wgACQDy//r/LgAQAMn/8/9CAOX/5v/S/9//3P8pABYAuP/s/w8AFgDt/+3/7v/w/9j/5/8GAOf/2P/2//P//v8kABMAuf/m/xoADADZ/+r/3P8KAAUAKwDe/wsA3P8VAAAADgAfAB0ACAAMAF4AGgAhAPL/MwDz/0kABAAKAPX/LwAbAAkA9v/s/+3/8/8CABAAAADm//n/BQALAAUAAQDj//n/JQAVAPX/9v/+/wIAEQABAPP/8P/1/wAABgD6/+3/7//o//j/DAD8/+b/8P8IAAkABgD4//D/8P8UAAoAAwD4/wAA+f8OAAcAAAAFAPX/9v8TAAkA8v8EAPb/9/8dAA0A7/8CAPn/+f8SAAQA8/8CAOf/+v8DAAgA9P////H//P8IAAUA8//0/wIAAQAGAAgA9//7/wAA+/8EAP//+P/+////AgACAAsA8v/+/wIABQD7/wgA9v/7/wMABAD5/wAA/P/3/wEAAQD7//7//P/1/wQA///3//r////3/wMAAwD1//r/AwD6////AgD4//n/AwD8//7/AgD4//n/AwD+//3/AQD4//n/BQD///n/AAD6//j/BAABAPj/AAD9//v/AwADAPj//v/+//z/AwAEAPj//v8BAP7/AQADAPj//f8CAP////8EAPr//P8DAAAA/v8CAPv//P8DAAEA/f8BAP3//f8DAAIA/P8AAP7//f8DAAIA/P///wAA/f8BAAIA+//+/wEA//8AAAEA+//+/wEA/////wEA/P/+/wEA///+/wAA/f/9/wEAAAD9/wAA/f/+/wEAAQD8/////v/+/wAAAQD8////////////AQD9////AAD/////AAD+////AAAAAP//AAD///////8AAP//AAD//wAA//8AAP//"];const ks=[2,3];class _s{constructor(t,e){if(this.context=t,this.config=Object.assign({ambisonicOrder:3,renderingMode:Mi.Ambisonic},e),ks.includes(this.config.ambisonicOrder)||(is("HOARenderer: Invalid ambisonic order. (got "+this.config.ambisonicOrder+") Fallbacks to 3rd-order ambisonic."),this.config.ambisonicOrder=Math.max(2,Math.min(3,this.config.ambisonicOrder))),this.config.numberOfChannels=(this.config.ambisonicOrder+1)*(this.config.ambisonicOrder+1),this.config.numberOfStereoChannels=Math.ceil(this.config.numberOfChannels/2),this.config.hrirPathList.length!==this.config.numberOfStereoChannels)throw new Error("HOARenderer: Invalid HRIR URLs. It must be an array with "+this.config.numberOfStereoChannels+" URLs to HRIR files. (got "+e.hrirPathList+")");this._buildAudioGraph()}_buildAudioGraph(){this.input=this.context.createGain(),this.output=this.context.createGain(),this.bypass=this.context.createGain(),this.rotator=new Is(this.context,this.config.ambisonicOrder),this.convolver=new gs(this.context,this.config.ambisonicOrder),this.input.connect(this.rotator.input),this.input.connect(this.bypass),this.rotator.output.connect(this.convolver.input),this.convolver.output.connect(this.output),this.input.channelCount=this.config.numberOfChannels,this.input.channelCountMode="explicit",this.input.channelInterpretation="discrete"}dispose(){this.getRenderingMode()===Mi.Bypass&&this.bypass.connect(this.output),this.input.disconnect(this.rotator.input),this.input.disconnect(this.bypass),this.rotator.output.disconnect(this.convolver.input),this.convolver.output.disconnect(this.output),this.rotator.dispose(),this.convolver.dispose()}async initialize(){let t;t=this.config.hrirPathList?new ns(this.context,this.config.hrirPathList,{dataType:ss.URL}):2===this.config.ambisonicOrder?new ns(this.context,Fs):new ns(this.context,Es);try{const e=await t.load();this.convolver.setHRIRBufferList(e),this.setRenderingMode(this.config.renderingMode)}catch(t){const e=`HOARenderer: HRIR loading/decoding (mode: ${this.config.renderingMode}) failed. Reason: ${t.message}`;throw new Error(e)}}setRotationMatrix3(t){this.rotator.setRotationMatrix3(t)}setRotationMatrix4(t){this.rotator.setRotationMatrix4(t)}getRenderingMode(){return this.config.renderingMode}setRenderingMode(t){if(t!==this.config.renderingMode){switch(t){case Mi.Ambisonic:this.convolver.enable(),this.bypass.disconnect();break;case Mi.Bypass:this.convolver.disable(),this.bypass.connect(this.output);break;case Mi.None:this.convolver.disable(),this.bypass.disconnect();break;default:c(t)}this.config.renderingMode=t}}}class Ls{constructor(t,e){e=Object.assign({ambisonicOrder:1,position:Ai(hi(),ki),forward:Ai(hi(),Li),up:Ai(hi(),Ti),renderingMode:Qi},e),this.position=hi(),this.tempMatrix3=si(),this.ambisonicOrder=es.validateAmbisonicOrder(e.ambisonicOrder),1==this.ambisonicOrder?this.renderer=function(t,e){return new ds(t,e)}(t,{renderingMode:e.renderingMode}):this.ambisonicOrder>1&&(this.renderer=function(t,e){return new _s(t,e)}(t,{ambisonicOrder:this.ambisonicOrder,renderingMode:e.renderingMode})),this.input=t.createGain(),this.output=t.createGain(),this.ambisonicOutput=t.createGain(),this.renderer.initialize().then((()=>{this.input.connect(this.renderer.input),this.renderer.rotator.output.connect(this.ambisonicOutput),this.renderer.output.connect(this.output)})),this.setOrientation(e.forward,e.up)}getRenderingMode(){return this.renderer.getRenderingMode()}setRenderingMode(t){this.renderer.setRenderingMode(t)}dispose(){this.input.disconnect(this.renderer.input),this.renderer.rotator.output.disconnect(this.ambisonicOutput),this.renderer.output.disconnect(this.output),this.renderer.dispose()}setOrientation(t,e){Ai(Ts,t),Ai(Os,e),mi(Rs,Ts,Os),ni(this.tempMatrix3,Rs[0],Rs[1],Rs[2],Os[0],Os[1],Os[2],-Ts[0],-Ts[1],-Ts[2]),this.renderer.setRotationMatrix3(this.tempMatrix3)}}const Ts=hi(),Os=hi(),Rs=hi();class Qs{constructor(t,e){this.listenerPosition=Ai(hi(),ki),this.speedOfSound=Oi,this.coefficients={left:Ui.left,right:Ui.right,front:Ui.front,back:Ui.back,up:Ui.up,down:Ui.down},this.halfDimensions={width:.5*Ni.width,height:.5*Ni.height,depth:.5*Ni.depth},e&&(A(e?.speedOfSound)&&(this.speedOfSound=e.speedOfSound),r(e?.listenerPosition)&&3===e.listenerPosition.length&&A(e.listenerPosition[0])&&A(e.listenerPosition[1])&&A(e.listenerPosition[2])&&(this.listenerPosition[0]=e.listenerPosition[0],this.listenerPosition[1]=e.listenerPosition[1],this.listenerPosition[2]=e.listenerPosition[2])),this.input=t.createGain(),this.output=t.createGain(),this.lowpass=t.createBiquadFilter(),this.merger=t.createChannelMerger(4),this.delays={left:t.createDelay(2),right:t.createDelay(2),front:t.createDelay(2),back:t.createDelay(2),up:t.createDelay(2),down:t.createDelay(2)},this.gains={left:t.createGain(),right:t.createGain(),front:t.createGain(),back:t.createGain(),up:t.createGain(),down:t.createGain()},this.inverters={right:t.createGain(),back:t.createGain(),down:t.createGain()};for(const t of Object.values(Ei)){const e=this.delays[t],i=this.gains[t];e.delayTime.value=0,i.gain.value=0,this.delays[t]=e,this.gains[t]=i,this.lowpass.connect(e),e.connect(i),i.connect(this.merger,0,0),t!==Ei.Right&&t!=Ei.Back&&t!==Ei.Down||(this.inverters[t].gain.value=-1)}this.input.connect(this.lowpass),this.lowpass.type="lowpass",this.lowpass.frequency.value=6400,this.lowpass.Q.value=0,this.gains.left.connect(this.merger,0,1),this.gains.right.connect(this.inverters.right),this.inverters.right.connect(this.merger,0,1),this.gains.up.connect(this.merger,0,2),this.gains.down.connect(this.inverters.down),this.inverters.down.connect(this.merger,0,2),this.gains.front.connect(this.merger,0,3),this.gains.back.connect(this.inverters.back),this.inverters.back.connect(this.merger,0,3),this.merger.connect(this.output),this.setRoomProperties(e?.dimensions,e?.coefficients)}setRoomProperties(t,e){null==t&&(t={width:Ni.width,height:Ni.height,depth:Ni.depth}),A(t.width)&&A(t.height)&&A(t.depth)&&(this.halfDimensions.width=.5*t.width,this.halfDimensions.height=.5*t.height,this.halfDimensions.depth=.5*t.depth),null==e&&(e={left:Ui.left,right:Ui.right,front:Ui.front,back:Ui.back,up:Ui.up,down:Ui.down}),A(e.left)&&A(e.right)&&A(e.front)&&A(e.back)&&A(e.up)&&A(e.down)&&(this.coefficients.left=e.left,this.coefficients.right=e.right,this.coefficients.front=e.front,this.coefficients.back=e.back,this.coefficients.up=e.up,this.coefficients.down=e.down),this.setListenerPosition(this.listenerPosition)}dispose(){this.input.disconnect(this.lowpass);for(const t of Object.values(Ei)){const e=this.delays[t],i=this.gains[t];this.lowpass.disconnect(e),e.disconnect(i),i.disconnect(this.merger,0,0)}this.gains.left.disconnect(this.merger,0,1),this.gains.right.disconnect(this.inverters.right),this.inverters.right.disconnect(this.merger,0,1),this.gains.up.disconnect(this.merger,0,2),this.gains.down.disconnect(this.inverters.down),this.inverters.down.disconnect(this.merger,0,2),this.gains.front.disconnect(this.merger,0,3),this.gains.back.disconnect(this.inverters.back),this.inverters.back.disconnect(this.merger,0,3),this.merger.disconnect(this.output)}setListenerPosition(t){Ai(this.listenerPosition,t);for(const t of Object.values(Ei)){const e=this.halfDimensions[qi[t]],i=this.listenerPosition[$i[t]],s=ts[t],n=1*Math.max(0,e+s*i)+1,a=n/this.speedOfSound;this.delays[t].delayTime.value=a;const o=this.coefficients[t]/n;this.gains[t].gain.value=o}}}class Us{constructor(t,e){const i=(e=Object.assign({durations:Gi.slice(),predelay:1.5,gain:.01,bandwidth:1,tailonset:3.8},e)).predelay/1e3;this.bandwidthCoeff=.346573590279973*e.bandwidth,this.tailonsetSamples=e.tailonset/1e3,this.context=t,this.input=t.createGain(),this.predelay=t.createDelay(i),this.convolver=t.createConvolver(),this.output=t.createGain(),this.output.gain.value=e.gain,this.convolver.normalize=!1,this.input.connect(this.predelay),this.predelay.connect(this.convolver),this.convolver.connect(this.output),this.setDurations(e.durations)}dispose(){this.input.disconnect(this.predelay),this.predelay.disconnect(this.convolver),this.convolver.disconnect(this.output)}setDurations(t){if(t.length!==zi)return void Ki("Warning: invalid number of RT60 values provided to reverb.");const e=new Float32Array(zi),i=this.context.sampleRate;for(let s=0;s<t.length;s++)t[s]=Math.max(0,Math.min(3,t[s])),e[s]=Math.round(t[s]*i*1);let s=0;for(let t=0;t<e.length;t++)e[t]>s&&(s=e[t]);s<1&&(s=1);const n=this.context.createBuffer(1,s,i),a=n.getChannelData(0),o=new Float32Array(s);for(let t=0;t<s;t++)o[t]=2*Math.random()-1;for(let t=0;t<zi;t++){const s=-6.90775527898214/e[t],n=Yi*Hi[t]/i,r=Math.sin(n),h=r*Math.sinh(this.bandwidthCoeff*n/r),c=1/(1+h),A=h*c,l=-2*Math.cos(n)*c,u=(1-h)*c;let d=0,g=0;for(let i=0;i<e[t];i++){const t=o[i]*Math.exp(s*i)-l*d-u*g;a[i]+=A*(t-g),g=d,d=t}}const r=Math.round(this.tailonsetSamples);for(let t=0;t<Math.min(a.length,r);t++){const e=.5*(1-Math.cos(Yi*t/(2*r-1)));a[t]*=e}this.convolver.buffer=n}}function Ns(t){const e={[Ei.Left]:null,[Ei.Right]:null,[Ei.Front]:null,[Ei.Back]:null,[Ei.Up]:null,[Ei.Down]:null};for(const t of Object.values(Ei)){const i=Vi[t];e[t]=Wi[i]}null==t&&(t=Object.assign({},t,Vi));for(const i of Object.values(Ei))t[i]in Wi?e[i]=Wi[t[i]]:Ki('Material "'+t[i]+'" on wall "'+i+'" not found. Using "'+Vi[i]+'".');return e}function Hs(t){if(null==t)t={width:Ni.width,height:Ni.height,depth:Ni.depth};else for(const e of Object.values(Fi))t.hasOwnProperty(e)||(t[e]=Ni[e]);return t}function zs(t,e,i){const s=new Float32Array(zi);t=Hs(t),e=function(t){null==t&&(t={[Ei.Left]:null,[Ei.Right]:null,[Ei.Front]:null,[Ei.Back]:null,[Ei.Up]:null,[Ei.Down]:null});for(const e of Object.values(Ei))t.hasOwnProperty(e)||(t[e]=Wi[Vi[e]]);return t}(e),null==i&&(i=Oi);const n=55.2620422318571/i,a=t.width*t.height*t.depth;if(a<1e-4)return s;const o=t.width*t.height,r=t.width*t.depth,h=t.depth*t.height,c=2*(o+r+h);for(let t=0;t<zi;t++){const i=((e.left[t]+e.right[t])*o+(e.down[t]+e.up[t])*r+(e.front[t]+e.back[t])*h)/c;s[t]=1.38*n*a/(-c*Math.log(1-i)+4*Zi[t]*a)}return s}function Gs(t){const e={[Ei.Left]:0,[Ei.Right]:0,[Ei.Front]:0,[Ei.Back]:0,[Ei.Up]:0,[Ei.Down]:0};for(const i of Object.values(Ei))if(Ui.hasOwnProperty(i)){e[i]=0;for(let s=0;s<3;s++){const n=s+4;e[i]+=t[i][n]}e[i]/=3,e[i]=Math.sqrt(1-e[i])}return e}class js{constructor(t,e){(e=Object.assign({listenerPosition:Ai(hi(),ki),dimensions:Object.assign({},e.dimensions,Ni),materials:Object.assign({},e.materials,Vi),speedOfSound:Oi},e)).dimensions=Hs(e.dimensions);const i=Ns(e.materials),s=Gs(i),n=zs(e.dimensions,i,e.speedOfSound);this.early=new Qs(t,{dimensions:e.dimensions,coefficients:s,speedOfSound:e.speedOfSound,listenerPosition:e.listenerPosition}),this.late=new Us(t,{durations:n}),this.speedOfSound=e.speedOfSound,this.output=t.createGain(),this.early.output.connect(this.output),this._merger=t.createChannelMerger(4),this.late.output.connect(this._merger,0,0),this._merger.connect(this.output)}dispose(){this.early.output.disconnect(this.output),this.late.output.disconnect(this._merger,0,0),this._merger.disconnect(this.output)}setProperties(t,e){const i=Ns(e),s=zs(t,i,this.speedOfSound);this.late.setDurations(s),this.early.speedOfSound=this.speedOfSound;const n=Gs(i);this.early.setRoomProperties(t,n)}setListenerPosition(t){this.early.speedOfSound=this.speedOfSound,this.early.setListenerPosition(t);const e=this.getDistanceOutsideRoom(t);let i=1;e>Ji&&(i=1-e/1,i=Math.max(0,Math.min(1,i))),this.output.gain.value=i}getDistanceOutsideRoom(t){const e=Math.max(0,-this.early.halfDimensions.width-t[0],t[0]-this.early.halfDimensions.width),i=Math.max(0,-this.early.halfDimensions.height-t[1],t[1]-this.early.halfDimensions.height),s=Math.max(0,-this.early.halfDimensions.depth-t[2],t[2]-this.early.halfDimensions.depth);return Math.sqrt(e*e+i*i+s*s)}}class Ws{constructor(t,e){this.minDistance=1,this.maxDistance=1e3,this.rolloff=Ri,e&&(A(e.minDistance)&&(this.minDistance=e.minDistance),A(e.maxDistance)&&(this.maxDistance=e.maxDistance),e.rolloff&&(this.rolloff=e.rolloff)),this.setRolloff(this.rolloff),this.gainNode=t.createGain(),this.setDistance(this.maxDistance),this.input=this.gainNode,this.output=this.gainNode}setDistance(t){let e=1;if("logarithmic"==this.rolloff){if(t>this.maxDistance)e=0;else if(t>this.minDistance){let i=this.maxDistance-this.minDistance;if(i>Ji){let s=1/(i+1);e=(1/(t-this.minDistance+1)-s)/(1-s)}}}else if("linear"==this.rolloff)if(t>this.maxDistance)e=0;else if(t>this.minDistance){let i=this.maxDistance-this.minDistance;i>Ji&&(e=(this.maxDistance-t)/i)}this.gainNode.gain.value=e}setRolloff(t){null==t&&(t=Ri),this.rolloff=t}}const Vs=hi(),Zs=hi();class Ys{constructor(t,e){this.cosTheta=0,e=Object.assign({alpha:0,sharpness:1},e),this.context=t,this.lowpass=t.createBiquadFilter(),this.lowpass.type="lowpass",this.lowpass.Q.value=0,this.lowpass.frequency.value=.5*t.sampleRate,this.setPattern(e.alpha,e.sharpness),this.input=this.lowpass,this.output=this.lowpass}computeAngle(t,e){pi(Vs,t),pi(Zs,e);let i=1;if(this.alpha>Ji){let t=(n=Zs,(s=Vs)[0]*n[0]+s[1]*n[1]+s[2]*n[2]);i=1-this.alpha+this.alpha*t,i=Math.pow(Math.abs(i),this.sharpness)}var s,n;this.lowpass.frequency.value=.5*this.context.sampleRate*i}setPattern(t,e){this.alpha=Math.min(1,Math.max(0,t)),this.sharpness=Math.max(1,e),this.computeAngle(li(Vs,this.cosTheta*this.cosTheta,0,0),li(Zs,1,0,0))}}class Xs{constructor(t,e){e=Object.assign({position:Ai(hi(),ki),forward:Ai(hi(),Li),up:Ai(hi(),Ti),minDistance:1,maxDistance:1e3,rolloff:Ri,gain:1,alpha:0,sharpness:1,sourceWidth:0},e),this.scene=t,this.position=e.position,this.forward=e.forward,this.up=e.up,this.dx=hi(),this.right=hi(),mi(this.right,this.forward,this.up);let i=t.context;this.input=i.createGain(),this.directivity=new Ys(i,{alpha:e.alpha,sharpness:e.sharpness}),this.toEarly=i.createGain(),this.toLate=i.createGain(),this.attenuation=new Ws(i,{minDistance:e.minDistance,maxDistance:e.maxDistance,rolloff:e.rolloff}),this.encoder=new es(i,{ambisonicOrder:t.ambisonicOrder,sourceWidth:e.sourceWidth}),this.input.connect(this.toLate),this.toLate.connect(t.room.late.input),this.input.connect(this.attenuation.input),this.attenuation.output.connect(this.toEarly),this.toEarly.connect(t.room.early.input),this.attenuation.output.connect(this.directivity.input),this.directivity.output.connect(this.encoder.input),this.encoder.output.connect(t.listener.input),this.setPosition(e.position),this.input.gain.value=e.gain}dispose(){this.encoder.output.disconnect(this.scene.listener.input),this.directivity.output.disconnect(this.encoder.input),this.attenuation.output.disconnect(this.directivity.input),this.toEarly.disconnect(this.scene.room.early.input),this.attenuation.output.disconnect(this.toEarly),this.input.disconnect(this.attenuation.input),this.toLate.disconnect(this.scene.room.late.input),this.input.disconnect(this.toLate),this.encoder.dispose()}update(){di(this.dx,this.position,this.scene.listener.position);const t=ci(this.dx);pi(this.dx,this.dx);const e=Xi*Math.atan2(-this.dx[0],this.dx[2]),i=Xi*Math.atan2(this.dx[1],Math.sqrt(this.dx[0]*this.dx[0]+this.dx[2]*this.dx[2]));this.attenuation.setDistance(t),this.directivity.computeAngle(this.forward,this.dx),this.encoder.setDirection(e,i)}setRolloff(t){this.attenuation.setRolloff(t)}setMinDistance(t){this.attenuation.minDistance=t}setMaxDistance(t){this.attenuation.maxDistance=t}setGain(t){this.input.gain.value=t}setPosition(t){Ai(this.position,t);let e=function(t){let e=1;return t>Ji&&(e=1-t/1,e=Math.max(0,Math.min(1,e))),e}(this.scene.room.getDistanceOutsideRoom(this.position));this.toLate.gain.value=e,this.toEarly.gain.value=e,this.update()}setOrientation(t,e){Ai(this.forward,t),Ai(this.up,e),mi(this.right,this.forward,this.up)}setSourceWidth(t){this.encoder.setSourceWidth(t),this.setPosition(this.position)}setDirectivityPattern(t,e){this.directivity.setPattern(t,e),this.setPosition(this.position)}}class Js{constructor(t,e){e=Object.assign({ambisonicOrder:1,listenerPosition:Ai(hi(),ki),listenerForward:Ai(hi(),Li),listenerUp:Ai(hi(),Ti),dimensions:Object.assign({},e.dimensions,Ni),materials:Object.assign({},e.materials,Vi),speedOfSound:Oi,renderingMode:Qi},e),this.ambisonicOrder=es.validateAmbisonicOrder(e.ambisonicOrder),this._sources=new Array,this.room=new js(t,{listenerPosition:e.listenerPosition,dimensions:e.dimensions,materials:e.materials,speedOfSound:e.speedOfSound}),this.listener=new Ls(t,{ambisonicOrder:e.ambisonicOrder,position:e.listenerPosition,forward:e.listenerForward,up:e.listenerUp,renderingMode:e.renderingMode}),this.context=t,this.output=t.createGain(),this.ambisonicOutput=t.createGain(),this.ambisonicInput=this.listener.input,this.room.output.connect(this.listener.input),this.listener.output.connect(this.output),this.listener.ambisonicOutput.connect(this.ambisonicOutput)}getRenderingMode(){return this.listener.getRenderingMode()}setRenderingMode(t){this.listener.setRenderingMode(t)}dispose(){this.room.output.disconnect(this.listener.input),this.listener.output.disconnect(this.output),this.listener.ambisonicOutput.disconnect(this.ambisonicOutput)}createSource(t){let e=new Xs(this,t);return this._sources[this._sources.length]=e,e}removeSource(t){const e=this._sources.findIndex((e=>e===t));e>-1&&(this._sources.splice(e,1),t.dispose())}setAmbisonicOrder(t){this.ambisonicOrder=es.validateAmbisonicOrder(t)}setRoomProperties(t,e){this.room.setProperties(t,e)}setListenerPosition(t){Ai(this.listener.position,t),this.room.setListenerPosition(t),this._sources.forEach((function(t){t.update()}))}setListenerOrientation(t,e){this.listener.setOrientation(t,e)}setSpeedOfSound(t){this.room.speedOfSound=t}}class Ks extends qe{constructor(t,e,i,s){super(t,e,i),this.node=s,this.gain.connect(this.node)}dispose(){this.node&&(this.node.disconnect(),this.node=null),super.dispose()}}class qs extends Ks{constructor(t,e,i,s){const n=s.createSource(void 0);super(t,e,i,n.input),this.resScene=s,this.resNode=n,Object.seal(this)}update(t,e){const{p:i,f:s,u:n}=t;this.resNode.setPosition(i),this.resNode.setOrientation(s,n)}setAudioProperties(t,e,i,s,n){super.setAudioProperties(t,e,i,s,n),this.resNode.setMinDistance(this.minDistance),this.resNode.setMaxDistance(this.maxDistance),this.resNode.setGain(1/this.rolloff),this.resNode.setRolloff(this.algorithm)}dispose(){this.resScene.removeSource(this.resNode),this.resNode=null,super.dispose()}}class $s extends qe{constructor(t,e,i,s){super(t,e,i),this.gain.connect(s),Object.seal(this)}update(t,e){}}class tn extends Ke{constructor(t,e){super(t),this.gain.connect(e)}createSpatializer(t,e,i,s){if(i)throw new Error("Can't spatialize with the base listener.");return new $s(t,e,s,this.gain)}}class en extends tn{constructor(t,e){super(t,e),this.scene=new Js(t,{ambisonicOrder:1,renderingMode:Mi.Bypass}),this.scene.output.connect(this.gain),this.scene.setRoomProperties({width:10,height:5,depth:10},{[Ei.Left]:ji.Transparent,[Ei.Right]:ji.Transparent,[Ei.Front]:ji.Transparent,[Ei.Back]:ji.Transparent,[Ei.Down]:ji.Grass,[Ei.Up]:ji.Transparent}),Object.seal(this)}update(t,e){const{p:i,f:s,u:n}=t;this.scene.setListenerPosition(i),this.scene.setListenerOrientation(s,n)}createSpatializer(t,e,i,s){return i?new qs(t,e,s,this.scene):super.createSpatializer(t,e,i,s)}}const sn=hi();class nn extends qe{constructor(t,e,i,s,n){super(t,e,i),this.listener=n,this.gain.connect(s),Object.seal(this)}update(t,e){const i=this.listener.pose.p;wi(sn,i,t.p);let s=Ct(Bi(ci(sn),this.minDistance,this.maxDistance),0,1);"logarithmic"===this.algorithm&&(s=Math.sqrt(s));const n=1-s;this.gain.gain.setValueAtTime(n,e)}}class an extends tn{constructor(t,e){super(t,e),this.pose=null,this.gain.gain.value=.25,Object.seal(this)}update(t,e){this.pose=t}createSpatializer(t,e,i,s){return i?new nn(t,e,s,this.gain,this):super.createSpatializer(t,e,i,s)}}class on extends Ks{constructor(t,e,i,s){const n=i.createPanner();super(t,e,i,n),this.node.panningModel="HRTF",this.node.distanceModel="inverse",this.node.coneInnerAngle=360,this.node.coneOuterAngle=0,this.node.coneOuterGain=0,this.node.connect(s)}setAudioProperties(t,e,i,s,n){super.setAudioProperties(t,e,i,s,n),this.node.refDistance=this.minDistance,"logarithmic"===this.algorithm&&(s="inverse"),this.node.distanceModel=s,this.node.rolloffFactor=this.rolloff}}class rn extends on{constructor(t,e,i,s){super(t,e,i,s),Object.seal(this)}update(t,e){const{p:i,f:s}=t;this.node.positionX.setValueAtTime(i[0],e),this.node.positionY.setValueAtTime(i[1],e),this.node.positionZ.setValueAtTime(i[2],e),this.node.orientationX.setValueAtTime(-s[0],e),this.node.orientationY.setValueAtTime(-s[1],e),this.node.orientationZ.setValueAtTime(-s[2],e)}}class hn extends tn{constructor(t,e){super(t,e),this.node=t.listener,this.volume=.75}dispose(){this.node=null,super.dispose()}}class cn extends hn{constructor(t,e){super(t,e),Object.seal(this)}update(t,e){const{p:i,f:s,u:n}=t;this.node.positionX.setValueAtTime(i[0],e),this.node.positionY.setValueAtTime(i[1],e),this.node.positionZ.setValueAtTime(i[2],e),this.node.forwardX.setValueAtTime(s[0],e),this.node.forwardY.setValueAtTime(s[1],e),this.node.forwardZ.setValueAtTime(s[2],e),this.node.upX.setValueAtTime(n[0],e),this.node.upY.setValueAtTime(n[1],e),this.node.upZ.setValueAtTime(n[2],e)}createSpatializer(t,e,i,s){return i?new rn(t,e,s,this.gain):super.createSpatializer(t,e,i,s)}}class An extends on{constructor(t,e,i,s){super(t,e,i,s),Object.seal(this)}update(t,e){const{p:i,f:s}=t;this.node.setPosition(i[0],i[1],i[2]),this.node.setOrientation(s[0],s[1],s[2])}}class ln extends hn{constructor(t,e){super(t,e),Object.seal(this)}update(t,e){const{p:i,f:s,u:n}=t;this.node.setPosition(i[0],i[1],i[2]),this.node.setOrientation(s[0],s[1],s[2],n[0],n[1],n[2])}createSpatializer(t,e,i,s){return i?new An(t,e,s,this.gain):super.createSpatializer(t,e,i,s)}}!("AudioContext"in globalThis)&&"webkitAudioContext"in globalThis&&(globalThis.AudioContext=globalThis.webkitAudioContext),!("OfflineAudioContext"in globalThis)&&"webkitOfflineAudioContext"in globalThis&&(globalThis.OfflineAudioContext=globalThis.webkitOfflineAudioContext);const un=new Gt,dn=new d("audioReady"),gn=Y(),pn="createMediaStreamTrackSource"in AudioContext.prototype,mn=!pn&&!("createMediaStreamSource"in AudioContext.prototype),fn=new Map([["wav",["audio/wav","audio/vnd.wave","audio/wave","audio/x-wav"]],["mp3",["audio/mpeg"]],["m4a",["audio/mp4"]],["m4b",["audio/mp4"]],["3gp",["audio/mp4"]],["3g2",["audio/mp4"]],["aac",["audio/aac","audio/aacp"]],["oga",["audio/ogg"]],["ogg",["audio/ogg"]],["spx",["audio/ogg"]],["webm",["audio/webm"]],["flac",["audio/flac"]]]);let vn="AudioContext"in globalThis,wn="AudioListener"in globalThis,Bn=wn&&"setPosition"in AudioListener.prototype,yn=wn&&"positionX"in AudioListener.prototype,Dn=wn;var bn;!function(t){t.Low="volumescale",t.Medium="webaudiopanner",t.High="resonance"}(bn||(bn={}));class Cn extends g{constructor(t,e){super(),this.minDistance=1,this.maxDistance=10,this.rolloff=1,this._algorithm="logarithmic",this.transitionTime=.5,this._offsetRadius=0,this.clips=new Map,this.users=new Map,this.analysers=new Map,this.sortedUserIDs=new Array,this.localUserID=null,this.listener=null,this.audioContext=null,this.element=null,this.destination=null,this._audioOutputDeviceID=null,this.fetcher=t||new zt,this.type=e||bn.Medium,this.onAudioActivity=t=>{un.id=t.id,un.isActive=t.isActive,this.dispatchEvent(un)},this.createContext(),Object.seal(this)}get offsetRadius(){return this._offsetRadius}set offsetRadius(t){this._offsetRadius=t,this.updateUserOffsets()}get algorithm(){return this._algorithm}addEventListener(t,e,i=null){t===dn.type&&this.ready?e(dn):super.addEventListener(t,e,i)}get ready(){return this.audioContext&&"running"===this.audioContext.state}async start(){await this.audioContext.resume(),await this.setAudioOutputDeviceID(this._audioOutputDeviceID),this.element&&await this.element.play()}update(){if(this.audioContext){const t=this.currentTime;for(const e of this.clips.values())e.update(t);for(const e of this.users.values())e.update(t);for(const t of this.analysers.values())t.update()}}createContext(){if(!this.audioContext){if(this.audioContext=new AudioContext,jt?(this.destination=this.audioContext.createMediaStreamDestination(),this.element=Y(F,w,k(this.destination.stream),U(H("none"))),document.body.appendChild(this.element)):this.destination=this.audioContext.destination,this.type===bn.High)if(vn&&wn&&Dn)try{this.listener=new en(this.audioContext,this.destination)}catch(t){Dn=!1,this.type=bn.Medium,console.warn("Resonance Audio API not available!",t)}else this.type=bn.Medium;if(this.type===bn.Medium)if(vn&&wn){if(yn)try{this.listener=new cn(this.audioContext,this.destination)}catch(t){yn=!1,console.warn("No AudioListener.positionX property!",t)}if(!yn&&Bn)try{this.listener=new ln(this.audioContext,this.destination)}catch(t){Bn=!1,console.warn("No WebAudio API!",t)}yn||Bn||(this.type=bn.Low,wn=!1)}else this.type=bn.Low;if(this.type===bn.Low&&(this.listener=new an(this.audioContext,this.destination)),null===this.listener)throw new Error("Calla requires a functioning WebAudio system.");this.ready?(this.start(),this.dispatchEvent(dn)):function(t,e){const i=l(e)?Je:e,s=async e=>{if(e.isTrusted&&await i()){for(const t of Xe)window.removeEventListener(t,s);t()}};for(const t of Xe)window.addEventListener(t,s)}((()=>this.dispatchEvent(dn)),(async()=>(await this.start(),this.ready)))}}getAudioOutputDeviceID(){return this.element?.sinkId}async setAudioOutputDeviceID(t){this._audioOutputDeviceID=t||"",this.element&&this._audioOutputDeviceID!==this.element.sinkId&&await this.element.setSinkId(this._audioOutputDeviceID)}createSpatializer(t,e,i){if(!this.listener)throw new Error("Audio context isn't ready");return this.listener.createSpatializer(t,e,i,this.audioContext)}get currentTime(){return this.audioContext.currentTime}createUser(t){let e=this.users.get(t);return e||(e=new Ci(t),this.users.set(t,e),Ie(this.sortedUserIDs,t),this.updateUserOffsets()),e}createLocalUser(t){this.localUserID=t;let e=null,i=null;for(const t of this.users.entries())if(t[1].spatializer===this.listener){[e,i]=t;break}return i?(this.users.delete(e),Pe(this.sortedUserIDs,e),this.users.set(t,i),Ie(this.sortedUserIDs,t),this.updateUserOffsets()):(i=this.createUser(t),i.spatializer=this.listener),i}async createClip(t,e,i,s,n,a,o){if(null==a||0===a.length)throw new Error("No clip source path provided");let r=null;if(function(t){const e=t.lastIndexOf(".");if(e>-1){const i=t.substring(e+1);if(fn.has(i)){for(const t of fn.get(i))if(gn.canPlayType(t))return!0;return!1}}return!0}(a)){const t=await this.fetcher.getBlob(a,o);gn.canPlayType(t.type)&&(r=t)}else o&&o(1,1,"skip");if(!r)throw new Error("Cannot play file: "+a);const h=await r.arrayBuffer(),c=await this.audioContext.decodeAudioData(h),A=this.audioContext.createBufferSource();A.buffer=c,A.loop=e;const l=new Ci("audio-clip-"+t);return l.spatializer=this.createSpatializer(t,A,s),l.spatializer.volume=n,i&&l.spatializer.play(),this.clips.set(t,l),l}hasClip(t){return this.clips.has(t)}async playClip(t){if(this.ready&&this.hasClip(t)){const e=this.clips.get(t);await e.spatializer.play()}}stopClip(t){if(this.ready&&this.hasClip(t)){this.clips.get(t).spatializer.stop()}}getSource(t,e){return t.get(e)||null}getUser(t){return this.getSource(this.users,t)}getClip(t){return this.getSource(this.clips,t)}removeSource(t,e){t.has(e)&&Ht(t.get(e),(i=>{i.spatializer&&i.spatializer.stop(),t.delete(e)}))}removeUser(t){this.removeSource(this.users,t),Pe(this.sortedUserIDs,t),this.updateUserOffsets()}removeClip(t){this.removeSource(this.clips,t)}createSourceFromStream(t){if(pn){const e=t.getAudioTracks().map((t=>this.audioContext.createMediaStreamTrackSource(t)));if(0===e.length)throw new Error("No audio tracks!");if(1===e.length)return e[0];{const t=this.audioContext.createChannelMerger(e.length);for(const i of e)i.connect(t);return t}}{const e=Y(F(!0),w(!0),x(!mn),function(t){return new v("controls",t,"audio","video")}(!1),U(H("none")),k(t));return document.body.appendChild(e),e.play(),mn?this.audioContext.createMediaElementSource(e):this.audioContext.createMediaStreamSource(t)}}async setUserStream(t,e){if(this.users.has(t)){this.analysers.has(t)&&Ht(this.analysers.get(t),(e=>{this.analysers.delete(t),e.removeEventListener("audioActivity",this.onAudioActivity)}));const i=this.users.get(t);if(i.spatializer=null,e){await f((()=>e.active));const s=this.createSourceFromStream(e);i.spatializer=this.createSpatializer(t,s,!0),i.spatializer.setAudioProperties(this.minDistance,this.maxDistance,this.rolloff,this.algorithm,this.transitionTime);const n=new ei(i,this.audioContext,1024);n.addEventListener("audioActivity",this.onAudioActivity),this.analysers.set(t,n)}}}updateUserOffsets(){if(this.offsetRadius>0){const t=this.sortedUserIDs.indexOf(this.localUserID),e=2*Math.PI/this.sortedUserIDs.length,i=(t+1)*e,s=this.offsetRadius*Math.sin(i),n=this.offsetRadius*(Math.cos(i)-1);for(let t=0;t<this.sortedUserIDs.length;++t){const i=this.sortedUserIDs[t],a=(t+1)*e,o=this.offsetRadius*Math.sin(a)-s,r=this.offsetRadius*(Math.cos(a)-1)-n;this.setUserOffset(i,o,0,r)}}}setAudioProperties(t,e,i,s,n){this.minDistance=t,this.maxDistance=e,this.transitionTime=n,this.rolloff=i,this._algorithm=s;for(const t of this.users.values())t.spatializer&&t.spatializer.setAudioProperties(this.minDistance,this.maxDistance,this.rolloff,this.algorithm,this.transitionTime)}withPose(t,e,i,s){if(t.has(e)){const n=t.get(e).pose;return null==i&&(i=this.transitionTime),s(n,i)}return null}withUser(t,e,i){return this.withPose(this.users,t,e,i)}setUserOffset(t,e,i,s){this.withUser(t,null,(t=>{t.setOffset(e,i,s)}))}getUserOffset(t){return this.withUser(t,null,(t=>t.offset))}setUserPose(t,e,i,s,n,a,o,r,h,c,A=null){this.withUser(t,A,((t,A)=>{t.setTarget(e,i,s,n,a,o,r,h,c,this.currentTime,A)}))}withClip(t,e,i){return this.withPose(this.clips,t,e,i)}setClipPosition(t,e,i,s,n=null){this.withClip(t,n,((t,n)=>{t.setTargetPosition(e,i,s,this.currentTime,n)}))}setClipOrientation(t,e,i,s,n,a,o,r=null){this.withClip(t,r,((t,r)=>{t.setTargetOrientation(e,i,s,n,a,o,this.currentTime,r)}))}setClipPose(t,e,i,s,n,a,o,r,h,c,A=null){this.withClip(t,A,((t,A)=>{t.setTarget(e,i,s,n,a,o,r,h,c,this.currentTime,A)}))}}function Mn(t,e){t.addEventListener(e,((...t)=>{Fn&&console.log(">== CALLA ==<",e,...t)}))}const Pn="calla:preferredAudioOutputID",In="calla:preferredAudioInputID",xn="calla:preferredVideoInputID",Sn="local-user";let Fn="localhost"===window.location.hostname||/\bdebug\b/.test(window.location.search);class En extends g{constructor(t){super(),this.fetcher=t,this.localUserID=null,this.localUserName=null,this.roomName=null,this._prepared=!1,this._connectionState=Wt.Disconnected,this._conferenceState=Wt.Disconnected,this.hasAudioPermission=!1,this.hasVideoPermission=!1,this.audio=new Cn(t,Ye?bn.High:bn.Medium),this.addEventListener("serverConnected",this.setConnectionState.bind(this,Wt.Connected)),this.addEventListener("serverFailed",this.setConnectionState.bind(this,Wt.Disconnected)),this.addEventListener("serverDisconnected",this.setConnectionState.bind(this,Wt.Disconnected)),this.addEventListener("conferenceJoined",this.setConferenceState.bind(this,Wt.Connected)),this.addEventListener("conferenceFailed",this.setConferenceState.bind(this,Wt.Disconnected)),this.addEventListener("conferenceRestored",this.setConferenceState.bind(this,Wt.Connected)),this.addEventListener("conferenceLeft",this.setConferenceState.bind(this,Wt.Disconnected))}toggleLogging(){Fn=!Fn}get connectionState(){return this._connectionState}setConnectionState(t){this._connectionState=t}get conferenceState(){return this._conferenceState}setConferenceState(t){this._conferenceState=t}dispatchEvent(t){return t instanceof te&&(null==t.id||"local"===t.id)&&(this.localUserID===Sn?t.id=null:t.id=this.localUserID),super.dispatchEvent(t)}async getNext(t,e){return new Promise((i=>{const s=n=>{n instanceof te&&n.id===e&&(this.removeEventListener(t,s),i(n))};this.addEventListener(t,s)}))}get preferredAudioInputID(){return localStorage.getItem(In)}set preferredAudioInputID(t){localStorage.setItem(In,t)}get preferredVideoInputID(){return localStorage.getItem(xn)}set preferredVideoInputID(t){localStorage.setItem(xn,t)}async setPreferredDevices(){await this.setPreferredAudioInput(!0),await this.setPreferredVideoInput(!1),await this.setPreferredAudioOutput(!0)}async getPreferredAudioInput(t){return Ee(await this.getAudioInputDevices(),(t=>t.deviceId===this.preferredAudioInputID),(t=>"communications"===t.deviceId),(t=>"default"===t.deviceId),(e=>t&&e.deviceId.length>0))}async setPreferredAudioInput(t){const e=await this.getPreferredAudioInput(t);e&&await this.setAudioInputDevice(e)}async getPreferredVideoInput(t){return Ee(await this.getVideoInputDevices(),(t=>t.deviceId===this.preferredVideoInputID),(e=>t&&e&&/front/i.test(e.label)),(e=>t&&e.deviceId.length>0))}async setPreferredVideoInput(t){const e=await this.getPreferredVideoInput(t);e&&await this.setVideoInputDevice(e)}async getDevices(){let t=null;for(let e=0;e<3;++e){t=await navigator.mediaDevices.enumerateDevices();for(const e of t)e.deviceId.length>0&&(this.hasAudioPermission=this.hasAudioPermission||"audioinput"===e.kind&&e.label.length>0,this.hasVideoPermission=this.hasVideoPermission||"videoinput"===e.kind&&e.label.length>0);if(this.hasAudioPermission)break;try{await navigator.mediaDevices.getUserMedia({audio:!this.hasAudioPermission,video:!this.hasVideoPermission})}catch(t){console.warn(t)}}return t||[]}async getMediaPermissions(){return await this.getDevices(),{audio:this.hasAudioPermission,video:this.hasVideoPermission}}async getAvailableDevices(t=!1){let e=await this.getDevices();return t&&(e=function(t){const e=[];for(let i=0;i<t.length;++i){const s=t[i];let n=!1;for(let t=0;t<e.length&&!n;++t){const i=e[t];n=s.kind===i.kind&&i.label.indexOf(s.label)>0}n||e.push(s)}return e}(e)),{audioOutput:jt?e.filter((t=>"audiooutput"===t.kind)):[],audioInput:e.filter((t=>"audioinput"===t.kind)),videoInput:e.filter((t=>"videoinput"===t.kind))}}async getAudioInputDevices(t=!1){const e=await this.getAvailableDevices(t);return e&&e.audioInput||[]}async getVideoInputDevices(t=!1){const e=await this.getAvailableDevices(t);return e&&e.videoInput||[]}async setAudioOutputDevice(t){jt&&(this.preferredAudioOutputID=t&&t.deviceId||null)}async getAudioOutputDevices(t=!1){if(!jt)return[];const e=await this.getAvailableDevices(t);return e&&e.audioOutput||[]}async getCurrentAudioOutputDevice(){if(!jt)return null;const t=this.audio.getAudioOutputDeviceID(),e=(await this.getAudioOutputDevices()).filter((e=>null!=t&&e.deviceId===t||null==t&&e.deviceId===this.preferredAudioOutputID));return 0===e.length?null:e[0]}get preferredAudioOutputID(){return localStorage.getItem(Pn)}set preferredAudioOutputID(t){localStorage.setItem(Pn,t)}async getPreferredAudioOutput(t){return Ee(await this.getAudioOutputDevices(),(t=>t.deviceId===this.preferredAudioOutputID),(t=>"communications"===t.deviceId),(t=>"default"===t.deviceId),(e=>t&&e.deviceId.length>0))}async setPreferredAudioOutput(t){const e=await this.getPreferredAudioOutput(t);e&&await this.setAudioOutputDevice(e)}async setAudioInputDevice(t){this.preferredAudioInputID=t&&t.deviceId||null}async setVideoInputDevice(t){this.preferredVideoInputID=t&&t.deviceId||null}async connect(){this.setConnectionState(Wt.Connecting)}async join(t,e){this.setConferenceState(Wt.Connecting)}async leave(){this.setConferenceState(Wt.Disconnecting)}async disconnect(){this.setConnectionState(Wt.Disconnecting)}}function kn(t){try{return decodeURIComponent(t)}catch(e){return t}}class _n extends En{constructor(t){super(t),this.usingDefaultMetadataClient=!1,this.host=null,this.bridgeHost=null,this.bridgeMUC=null,this.connection=null,this.conference=null,this.tracks=new Map,this.listenersForObjs=new Map}_on(t,e,i){let s=this.listenersForObjs.get(t);s||this.listenersForObjs.set(t,s=new Map);let n=s.get(e);n||s.set(e,n=new Array),n.push(i),t.addEventListener(e,i)}_off(t){const e=this.listenersForObjs.get(t);if(e){this.listenersForObjs.delete(t);for(const[i,s]of e.entries()){for(const e of s)t.removeEventListener(i,e);Yt(s)}e.clear()}}getDefaultMetadataClient(){return this.usingDefaultMetadataClient=!0,new Fe(this)}async prepare(t,e,i,s){if(!this._prepared){this.host=t,this.bridgeHost=e,this.bridgeMUC=i,console.info("Connecting to:",this.host);const n=Dt(s,2);await this.fetcher.loadScript("https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js",(()=>"jQuery"in globalThis),n.shift()),await this.fetcher.loadScript(`https://${this.host}/libs/lib-jitsi-meet.min.js`,(()=>"JitsiMeetJS"in globalThis),n.shift()),JitsiMeetJS.setLogLevel(JitsiMeetJS.logLevels.ERROR),JitsiMeetJS.init(),this._prepared=!0}}async connect(){await super.connect();const t=JitsiMeetJS.events.connection;this.connection=new JitsiMeetJS.JitsiConnection(null,null,{hosts:{domain:this.bridgeHost,muc:this.bridgeMUC},serviceUrl:`https://${this.host}/http-bind`});for(const e of Object.values(t))Mn(this.connection,e);const e=()=>{this.connection&&(this._off(this.connection),this.connection=null)},i=(t,e,i)=>{this._on(this.connection,t,(()=>{this.dispatchEvent(new e),i&&i()}))};i(t.CONNECTION_ESTABLISHED,Kt),i(t.CONNECTION_DISCONNECTED,qt,e),i(t.CONNECTION_FAILED,$t,e);const s=m(this.connection,t.CONNECTION_ESTABLISHED);this.connection.connect(),await s}async join(t,e){await super.join(t,e);const i=t.toLocaleLowerCase();if(i!==this.roomName){this.conference&&await this.leave(),this.roomName=i,this.conference=this.connection.initJitsiConference(this.roomName,{openBridgeChannel:this.usingDefaultMetadataClient,p2p:{enabled:!1},startVideoMuted:!0});const t=JitsiMeetJS.events.conference;for(const e of Object.values(t))"conference.audioLevelsChanged"!==e&&Mn(this.conference,e);const s=(t,e,i)=>{this._on(this.conference,t,(()=>{this.dispatchEvent(new e),i&&i()}))},n=async()=>{if(this.localUserID=Sn,this.tracks.size>0){console.warn("><> CALLA <>< ---- there are leftover conference tracks");for(const t of this.tracks.keys())await this.tryRemoveTrack(t,Vt.Video),await this.tryRemoveTrack(t,Vt.Audio),this.dispatchEvent(new oe(t))}this.dispatchEvent(new se(this.localUserID)),this.conference&&(this._off(this.conference),this.conference=null)};s(t.CONFERENCE_ERROR,ne,n),s(t.CONFERENCE_FAILED,ne,n),s(t.CONNECTION_INTERRUPTED,ne,n),this._on(this.conference,t.CONFERENCE_JOINED,(async()=>{const t=this.conference.myUserId();t&&(this.localUserID=t,this.dispatchEvent(new ie(t,null)))})),this._on(this.conference,t.CONFERENCE_LEFT,n),this._on(this.conference,t.USER_JOINED,((t,e)=>{this.dispatchEvent(new ae(t,kn(e.getDisplayName()),null))})),this._on(this.conference,t.USER_LEFT,(t=>{this.dispatchEvent(new oe(t))})),this._on(this.conference,t.DISPLAY_NAME_CHANGED,((t,e)=>{this.dispatchEvent(new re(t,kn(e)))}));const a=(t,e)=>{const i=t.getParticipantId()||this.localUserID,s=t.getType()===Vt.Audio?new ce(i,e):new Ae(i,e);this.dispatchEvent(s)};this._on(this.conference,t.TRACK_ADDED,(t=>{const e=t.getParticipantId()||this.localUserID,i=t.getType(),s=i===Vt.Audio?new ge(e,t.stream):new me(e,t.stream);let n=this.tracks.get(e);n||(n=new Map,this.tracks.set(e,n));const o=n.get(i);if(o){const t=Vt.Audio?new pe(e,o.stream):new fe(e,o.stream);this.dispatchEvent(t),o.dispose()}n.set(i,t),this.dispatchEvent(s),t.addEventListener(JitsiMeetJS.events.track.TRACK_MUTE_CHANGED,(t=>{a(t,t.isMuted())})),a(t,!1)})),this._on(this.conference,t.TRACK_REMOVED,(t=>{Ht(t,(e=>{const i=t.getParticipantId()||this.localUserID,s=t.getType(),n=Vt.Audio?new pe(i,t.stream):new fe(i,t.stream);a(t,!0),this.dispatchEvent(n);const o=this.tracks.get(i);if(o){const e=o.get(s);e&&(o.delete(s),0===o.size&&this.tracks.delete(i),e!==t&&e.dispose())}}))}));const o=m(this,"conferenceJoined");this.conference.join(e),await o}}async identify(t){this.localUserName=t,this.conference.setDisplayName(function(t){try{return encodeURIComponent(t)}catch(e){return t}}(t))}async tryRemoveTrack(t,e){const i=this.tracks.get(t),s=e===Vt.Video?fe:pe;if(i){const n=i.get(e);if(n){this.dispatchEvent(new s(t,n.stream)),i.delete(e);try{this.conference&&n.isLocal&&this.conference.removeTrack(n)}catch(t){console.warn(t)}finally{n.dispose()}}0===i.size&&this.tracks.delete(t)}}async leave(){if(this.conferenceState===Wt.Connecting&&await f((()=>this.conferenceState===Wt.Connected)),this.conferenceState===Wt.Disconnecting)await f((()=>this.conferenceState===Wt.Disconnected));else if(this.conferenceState===Wt.Connected){await super.leave();try{await this.tryRemoveTrack(this.localUserID,Vt.Video),await this.tryRemoveTrack(this.localUserID,Vt.Audio);const t=m(this,"conferenceLeft");this.conference.leave(),await t}catch(t){console.warn("><> CALLA <>< ---- Failed to leave teleconference.",t)}}}async disconnect(){if(this.connectionState===Wt.Connecting&&await f((()=>this.connectionState===Wt.Connected)),this.connectionState===Wt.Disconnecting)await f((()=>this.connectionState===Wt.Disconnected));else if(this.connectionState===Wt.Connected){await super.disconnect(),await this.leave();const t=m(this,"serverDisconnected");this.connection.disconnect(),await t}}userExists(t){return this.conference&&this.conference.participants&&t in this.conference.participants}getUserNames(){return this.conference?Object.keys(this.conference.participants).map((t=>[t,kn(this.conference.participants[t].getDisplayName())])):[]}getCurrentMediaTrack(t){if(this.localUserID===Sn)return null;const e=this.tracks.get(this.localUserID);return e?e.get(t):null}async setAudioInputDevice(t){await super.setAudioInputDevice(t);const e=this.getCurrentMediaTrack(Vt.Audio);if(e){const t=this.getNext("audioRemoved",this.localUserID);this.conference.removeTrack(e),await t}if(this.conference&&this.preferredAudioInputID){const t=this.getNext("audioAdded",this.localUserID),e=await JitsiMeetJS.createLocalTracks({devices:["audio"],micDeviceId:this.preferredAudioInputID,constraints:{autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0}});for(const t of e)this.conference.addTrack(t);await t}}async setVideoInputDevice(t){await super.setVideoInputDevice(t);const e=this.getCurrentMediaTrack(Vt.Video);if(e){const t=this.getNext("videoRemoved",this.localUserID);this.conference.removeTrack(e),await t}if(this.conference&&this.preferredVideoInputID){const t=this.getNext("videoAdded",this.localUserID),e=await JitsiMeetJS.createLocalTracks({devices:["video"],cameraDeviceId:this.preferredVideoInputID});for(const t of e)this.conference.addTrack(t);await t}}async getCurrentAudioInputDevice(){const t=this.getCurrentMediaTrack(Vt.Audio),e=(await this.getAudioInputDevices()).filter((e=>null!=t&&e.deviceId===t.getDeviceId()||null==t&&e.deviceId===this.preferredAudioInputID));return 0===e.length?null:e[0]}async getCurrentVideoInputDevice(){const t=this.getCurrentMediaTrack(Vt.Video),e=(await this.getVideoInputDevices()).filter((e=>null!=t&&e.deviceId===t.getDeviceId()||null==t&&e.deviceId===this.preferredVideoInputID));return 0===e.length?null:e[0]}async toggleAudioMuted(){const t=this.getNext("audioMuteStatusChanged",this.localUserID),e=this.getCurrentMediaTrack(Vt.Audio);if(e){e.isMuted()?await e.unmute():await e.mute()}else await this.setPreferredAudioInput(!0);return(await t).muted}async toggleVideoMuted(){const t=this.getNext("videoMuteStatusChanged",this.localUserID);this.getCurrentMediaTrack(Vt.Video)?await this.setVideoInputDevice(null):await this.setPreferredVideoInput(!0);return(await t).muted}isMediaMuted(t){const e=this.getCurrentMediaTrack(t);return null==e||e.isMuted()}async getAudioMuted(){return this.isMediaMuted(Vt.Audio)}async getVideoMuted(){return this.isMediaMuted(Vt.Video)}}var Ln;!function(t){t.InConference="in-conference",t.JoiningConference="joining-conference",t.Connected="connected",t.Connecting="connecting",t.Prepaired="prepaired",t.Prepairing="prepairing",t.Unprepared="unprepaired"}(Ln||(Ln={}));const Tn=new Gt;class On extends Xt{constructor(t,e,...i){super(t,e),this.width=null,this.alts=i}random(){const t=Math.floor(Math.random()*this.alts.length);if(t<0)return null;const e=this.alts[t];return e instanceof On?e.random():e}contains(t){if(super.contains(t))return!0;for(const e of this.alts)if(e.contains(t))return!0;return!1}}function Rn(t,e,i=null){return new Xt(t,e,i)}function Qn(t,e,i=null){return new Xt(t+Xn.value,e,i)}function Un(t,e,...i){return new On(t,e,...i)}function Nn(t,e,i,...s){const n=Object.values(i).filter((t=>t instanceof Xt)).map((t=>t)).concat(...s);return Object.assign(Un(t,e,...n),i)}function Hn(t,e,i=null){if(t instanceof Array)return t.map((t=>Hn(t,e)));if(t instanceof On){const{value:i,desc:s}=Hn(Rn(t.value,t.desc),e);return Un(i,s,...Hn(t.alts,e))}return e instanceof Array?e.map((e=>Hn(t,e))):Rn(t.value+e.value,i||t.desc+": "+e.desc)}function zn(t,e,i=null){if(t instanceof Array)return t.map((t=>zn(t,e)));if(t instanceof On){const{value:i,desc:s}=zn(Rn(t.value,t.desc),e);return Un(i,s,...zn(t.alts,e))}return e instanceof Array?e.map((e=>zn(t,e))):Rn(t.value+Jn.value+e.value,i||t.desc+": "+e.desc)}function Gn(t,e,...i){const s=Rn(t,e),n=Hn(s,ea),a=Hn(s,ia),o=Hn(s,sa),r=Hn(s,na),h=Hn(s,aa);return Nn(s.value,s.desc,{default:s,light:n,mediumLight:a,medium:o,mediumDark:r,dark:h},...i)}function jn(t){const e=zn(t,$n),i=zn(t,qn);return Nn(t.value,t.desc,{default:t,man:e,woman:i})}function Wn(t,e){return jn(Gn(t,e))}function Vn(t,e,...i){const s=Gn(t,e),n=zn(s,oa),a=zn(s,ra),o=zn(s,ha),r=zn(s,ca);return Nn(s.value,s.desc,{default:s,red:n,curly:a,white:o,bald:r},...i)}function Zn(t,e){const i=Rn(t.value,e),s=zn(Xa.default,i),n=zn(to.default,i);return Nn(t.value,t.desc,{symbol:t,men:s,women:n})}const Yn=Rn("","Variation Selector-15: text style"),Xn=Rn("","Variation Selector-16: emoji style"),Jn=Rn("","Zero Width Joiner"),Kn=Rn("","Combining Enclosing Keycap"),qn=Qn("","Female"),$n=Qn("","Male"),ta=Qn("","Transgender Symbol"),ea=Rn("","Light Skin Tone"),ia=Rn("","Medium-Light Skin Tone"),sa=Rn("","Medium Skin Tone"),na=Rn("","Medium-Dark Skin Tone"),aa=Rn("","Dark Skin Tone"),oa=Rn("","Red Hair"),ra=Rn("","Curly Hair"),ha=Rn("","White Hair"),ca=Rn("","Bald"),Aa=Wn("","Frowning"),la=Wn("","Pouting"),ua=Wn("","Gesturing NO"),da=Wn("","Gesturing OK"),ga=Wn("","Tipping Hand"),pa=Wn("","Raising Hand"),ma=Wn("","Bowing"),fa=Wn("","Facepalming"),va=Wn("","Shrugging"),wa=Wn("","Can't Hear"),Ba=Wn("","Getting Massage"),ya=Wn("","Getting Haircut"),Da=Wn("","Construction Worker"),ba=Wn("","Guard"),Ca=Wn("","Spy"),Ma=(Wn("","Police"),Wn("","Wearing Turban")),Pa=Wn("","Superhero"),Ia=Wn("","Supervillain"),xa=Wn("","Mage"),Sa=Wn("","Fairy"),Fa=Wn("","Vampire"),Ea=Wn("","Merperson"),ka=Wn("","Elf"),_a=Wn("","Walking"),La=Wn("","Standing"),Ta=Wn("","Kneeling"),Oa=Wn("","Running"),Ra=Un("Gestures","Gestures",Aa,la,ua,da,ga,pa,ma,fa,va,wa,Ba,ya),Qa=Gn("","Baby"),Ua=Gn("","Child"),Na=Gn("","Boy"),Ha=Gn("","Girl"),za=Nn(Ua.value,Ua.desc,{default:Ua,male:Na,female:Ha}),Ga=Wn("","Blond Person"),ja=Gn("","Person",Ga.default,Ma.default),Wa=Gn("","Bearded Man"),Va=Qn("","Man in Suit, Levitating"),Za=Gn("","Man With Chinese Cap"),Ya=Gn("","Man in Tuxedo"),Xa=Vn("","Man",Ga.man,Wa,Va,Za,Ma.man,Ya),Ja=Gn("","Pregnant Woman"),Ka=Gn("","Breast-Feeding"),qa=Gn("","Woman With Headscarf"),$a=Gn("","Bride With Veil"),to=Vn("","Woman",Ga.woman,Ja,Ka,qa,Ma.woman,$a),eo=Nn(ja.value,"Adult",{default:ja,male:Xa,female:to}),io=Gn("","Older Person"),so=Gn("","Old Man"),no=Gn("","Old Woman"),ao=Nn(io.value,io.desc,{default:io,male:so,female:no}),oo=Qn("","Medical"),ro=Zn(oo,"Health Care"),ho=Rn("","Graduation Cap"),co=Zn(ho,"Student"),Ao=Rn("","School"),lo=Zn(Ao,"Teacher"),uo=Qn("","Balance Scale"),go=Zn(uo,"Judge"),po=Rn("","Sheaf of Rice"),mo=Zn(po,"Farmer"),fo=Rn("","Cooking"),vo=Zn(fo,"Cook"),wo=Rn("","Wrench"),Bo=Zn(wo,"Mechanic"),yo=Rn("","Factory"),Do=Zn(yo,"Factory Worker"),bo=Rn("","Briefcase"),Co=Zn(bo,"Office Worker"),Mo=Rn("","Fire Engine"),Po=Zn(Mo,"Fire Fighter"),Io=Rn("","Rocket"),xo=Zn(Io,"Astronaut"),So=Qn("","Airplane"),Fo=Zn(So,"Pilot"),Eo=Rn("","Artist Palette"),ko=Zn(Eo,"Artist"),_o=Rn("","Microphone"),Lo=Zn(_o,"Singer"),To=Rn("","Laptop"),Oo=Zn(To,"Technologist"),Ro=Rn("","Microscope"),Qo=Zn(Ro,"Scientist"),Uo=Rn("","Crown"),No=Gn("","Prince"),Ho=Gn("","Princess"),zo=Nn(Uo.value,Uo.desc,{symbol:Uo,male:No,female:Ho}),Go=Nn("Roles","Depictions of people working",{healthCareWorkers:ro,students:co,teachers:lo,judges:go,farmers:mo,cooks:vo,mechanics:Bo,factoryWorkers:Do,officeWorkers:Co,scientists:Qo,technologists:Oo,singers:Lo,artists:ko,pilots:Fo,astronauts:xo,fireFighters:Po,spies:Ca,guards:ba,constructionWorkers:Da,royalty:zo}),jo=Gn("","Cherub"),Wo=Gn("","Santa Claus"),Vo=Gn("","Mrs. Claus"),Zo=jn(Rn("","Genie")),Yo=jn(Rn("","Zombie")),Xo=Nn("Fantasy","Depictions of fantasy characters",{cherub:jo,santaClaus:Wo,mrsClaus:Vo,superheroes:Pa,supervillains:Ia,mages:xa,fairies:Sa,vampires:Fa,merpeople:Ea,elves:ka,genies:Zo,zombies:Yo}),Jo=Rn("","Safety Vest"),Ko=Rn("","Probing Cane"),qo=Zn(Ko,"Probing"),$o=Rn("","Motorized Wheelchair"),tr=Zn($o,"In Motorized Wheelchair"),er=Rn("","Manual Wheelchair"),ir=Zn(er,"In Manual Wheelchair"),sr=Gn("","Man Dancing"),nr=Gn("","Woman Dancing"),ar=Nn(sr.value,"Dancing",{male:sr,female:nr}),or=Wn("","Juggler"),rr=Wn("","Climber"),hr=Rn("","Fencer"),cr=Gn("","Jockey"),Ar=Qn("","Skier"),lr=Gn("","Snowboarder"),ur=Wn(""+Xn.value,"Golfer"),dr=Wn("","Surfing"),gr=Wn("","Rowing Boat"),pr=Wn("","Swimming"),mr=Wn(""+Xn.value,"Basket Baller"),fr=Wn(""+Xn.value,"Weight Lifter"),vr=Wn("","Biker"),wr=Wn("","Mountain Biker"),Br=Wn("","Cartwheeler"),yr=jn(Rn("","Wrestler")),Dr=Wn("","Water Polo Player"),br=Wn("","Hand Baller"),Cr=Nn("In Motion","Depictions of people in motion",{walking:_a,standing:La,kneeling:Ta,withProbingCane:qo,inMotorizedWheelchair:tr,inManualWheelchair:ir,dancers:ar,jugglers:or,climbers:rr,fencer:hr,jockeys:cr,skier:Ar,snowboarders:lr,golfers:ur,surfers:dr,rowers:gr,swimmers:pr,runners:Oa,basketballers:mr,weightLifters:fr,bikers:vr,mountainBikers:wr,cartwheelers:Br,wrestlers:yr,waterPoloers:Dr,handBallers:br}),Mr=Wn("","In Lotus Position"),Pr=Gn("","In Bath"),Ir=Gn("","In Bed"),xr=Wn("","In Sauna"),Sr=Nn("Resting","Depictions of people at rest",{inLotusPosition:Mr,inBath:Pr,inBed:Ir,inSauna:xr}),Fr=Un(Qa.value,Qa.desc,Qa,jo),Er=Nn("People","People",{babies:Fr,children:za,adults:eo,elderly:ao}),kr=Nn("All People","All People",{people:Er,gestures:Ra,inMotion:Cr,resting:Sr,roles:Go,fantasy:Xo}),_r=Rn("","Ogre"),Lr=Rn("","Goblin"),Tr=Rn("","Ghost"),Or=Rn("","Alien"),Rr=Rn("","Alien Monster"),Qr=Rn("","Angry Face with Horns"),Ur=Rn("","Skull"),Nr=Rn("","Pile of Poo"),Hr=Rn("","Grinning Face"),zr=Rn("","Beaming Face with Smiling Eyes"),Gr=Rn("","Face with Tears of Joy"),jr=Rn("","Grinning Face with Big Eyes"),Wr=Rn("","Grinning Face with Smiling Eyes"),Vr=Rn("","Grinning Face with Sweat"),Zr=Rn("","Grinning Squinting Face"),Yr=Rn("","Smiling Face with Halo"),Xr=Rn("","Smiling Face with Horns"),Jr=Rn("","Winking Face"),Kr=Rn("","Smiling Face with Smiling Eyes"),qr=Rn("","Face Savoring Food"),$r=Rn("","Relieved Face"),th=Rn("","Smiling Face with Heart-Eyes"),eh=Rn("","Smiling Face with Sunglasses"),ih=Rn("","Smirking Face"),sh=Rn("","Neutral Face"),nh=Rn("","Expressionless Face"),ah=Rn("","Unamused Face"),oh=Rn("","Downcast Face with Sweat"),rh=Rn("","Pensive Face"),hh=Rn("","Confused Face"),ch=Rn("","Confounded Face"),Ah=Rn("","Kissing Face"),lh=Rn("","Face Blowing a Kiss"),uh=Rn("","Kissing Face with Smiling Eyes"),dh=Rn("","Kissing Face with Closed Eyes"),gh=Rn("","Face with Tongue"),ph=Rn("","Winking Face with Tongue"),mh=Rn("","Squinting Face with Tongue"),fh=Rn("","Disappointed Face"),vh=Rn("","Worried Face"),wh=Rn("","Angry Face"),Bh=Rn("","Pouting Face"),yh=Rn("","Crying Face"),Dh=Rn("","Persevering Face"),bh=Rn("","Face with Steam From Nose"),Ch=Rn("","Sad but Relieved Face"),Mh=Rn("","Frowning Face with Open Mouth"),Ph=Rn("","Anguished Face"),Ih=Rn("","Fearful Face"),xh=Rn("","Weary Face"),Sh=Rn("","Sleepy Face"),Fh=Rn("","Tired Face"),Eh=Rn("","Grimacing Face"),kh=Rn("","Loudly Crying Face"),_h=Rn("","Face with Open Mouth"),Lh=Rn("","Hushed Face"),Th=Rn("","Anxious Face with Sweat"),Oh=Rn("","Face Screaming in Fear"),Rh=Rn("","Astonished Face"),Qh=Rn("","Flushed Face"),Uh=Rn("","Sleeping Face"),Nh=Rn("","Dizzy Face"),Hh=Rn("","Face Without Mouth"),zh=Rn("","Face with Medical Mask"),Gh=Rn("","Grinning Cat with Smiling Eyes"),jh=Rn("","Cat with Tears of Joy"),Wh=Rn("","Grinning Cat"),Vh=Rn("","Smiling Cat with Heart-Eyes"),Zh=Rn("","Cat with Wry Smile"),Yh=Rn("","Kissing Cat"),Xh=Rn("","Pouting Cat"),Jh=Rn("","Crying Cat"),Kh=Rn("","Weary Cat"),qh=Rn("","Slightly Frowning Face"),$h=Rn("","Slightly Smiling Face"),tc=Rn("","Upside-Down Face"),ec=Rn("","Face with Rolling Eyes"),ic=Rn("","See-No-Evil Monkey"),sc=Rn("","Hear-No-Evil Monkey"),nc=Rn("","Speak-No-Evil Monkey"),ac=Rn("","Zipper-Mouth Face"),oc=Rn("","Money-Mouth Face"),rc=Rn("","Face with Thermometer"),hc=Rn("","Nerd Face"),cc=Rn("","Thinking Face"),Ac=Rn("","Face with Head-Bandage"),lc=Rn("","Robot"),uc=Rn("","Hugging Face"),dc=Rn("","Cowboy Hat Face"),gc=Rn("","Clown Face"),pc=Rn("","Nauseated Face"),mc=Rn("","Rolling on the Floor Laughing"),fc=Rn("","Drooling Face"),vc=Rn("","Lying Face"),wc=Rn("","Sneezing Face"),Bc=Rn("","Face with Raised Eyebrow"),yc=Rn("","Star-Struck"),Dc=Rn("","Zany Face"),bc=Rn("","Shushing Face"),Cc=Rn("","Face with Symbols on Mouth"),Mc=Rn("","Face with Hand Over Mouth"),Pc=Rn("","Face Vomiting"),Ic=Rn("","Exploding Head"),xc=Rn("","Smiling Face with Hearts"),Sc=Rn("","Yawning Face"),Fc=Rn("","Partying Face"),Ec=Rn("","Woozy Face"),kc=Rn("","Hot Face"),_c=Rn("","Cold Face"),Lc=Rn("","Pleading Face"),Tc=Rn("","Face with Monocle"),Oc=Qn("","Skull and Crossbones"),Rc=Qn("","Frowning Face"),Qc=Qn("","Smiling Face"),Uc=Qn("","Speaking Head"),Nc=Rn("","Bust in Silhouette"),Hc=Nn("Faces","Round emoji faces",{ogre:_r,goblin:Lr,ghost:Tr,alien:Or,alienMonster:Rr,angryFaceWithHorns:Qr,skull:Ur,pileOfPoo:Nr,grinningFace:Hr,beamingFaceWithSmilingEyes:zr,faceWithTearsOfJoy:Gr,grinningFaceWithBigEyes:jr,grinningFaceWithSmilingEyes:Wr,grinningFaceWithSweat:Vr,grinningSquitingFace:Zr,smillingFaceWithHalo:Yr,smilingFaceWithHorns:Xr,winkingFace:Jr,smilingFaceWithSmilingEyes:Kr,faceSavoringFood:qr,relievedFace:$r,smilingFaceWithHeartEyes:th,smilingFaceWithSunglasses:eh,smirkingFace:ih,neutralFace:sh,expressionlessFace:nh,unamusedFace:ah,downcastFaceWithSweat:oh,pensiveFace:rh,confusedFace:hh,confoundedFace:ch,kissingFace:Ah,faceBlowingAKiss:lh,kissingFaceWithSmilingEyes:uh,kissingFaceWithClosedEyes:dh,faceWithTongue:gh,winkingFaceWithTongue:ph,squintingFaceWithTongue:mh,disappointedFace:fh,worriedFace:vh,angryFace:wh,poutingFace:Bh,cryingFace:yh,perseveringFace:Dh,faceWithSteamFromNose:bh,sadButRelievedFace:Ch,frowningFaceWithOpenMouth:Mh,anguishedFace:Ph,fearfulFace:Ih,wearyFace:xh,sleepyFace:Sh,tiredFace:Fh,grimacingFace:Eh,loudlyCryingFace:kh,faceWithOpenMouth:_h,hushedFace:Lh,anxiousFaceWithSweat:Th,faceScreamingInFear:Oh,astonishedFace:Rh,flushedFace:Qh,sleepingFace:Uh,dizzyFace:Nh,faceWithoutMouth:Hh,faceWithMedicalMask:zh,grinningCatWithSmilingEyes:Gh,catWithTearsOfJoy:jh,grinningCat:Wh,smilingCatWithHeartEyes:Vh,catWithWrySmile:Zh,kissingCat:Yh,poutingCat:Xh,cryingCat:Jh,wearyCat:Kh,slightlyFrowningFace:qh,slightlySmilingFace:$h,updisdeDownFace:tc,faceWithRollingEyes:ec,seeNoEvilMonkey:ic,hearNoEvilMonkey:sc,speakNoEvilMonkey:nc,zipperMouthFace:ac,moneyMouthFace:oc,faceWithThermometer:rc,nerdFace:hc,thinkingFace:cc,faceWithHeadBandage:Ac,robot:lc,huggingFace:uc,cowboyHatFace:dc,clownFace:gc,nauseatedFace:pc,rollingOnTheFloorLaughing:mc,droolingFace:fc,lyingFace:vc,sneezingFace:wc,faceWithRaisedEyebrow:Bc,starStruck:yc,zanyFace:Dc,shushingFace:bc,faceWithSymbolsOnMouth:Cc,faceWithHandOverMouth:Mc,faceVomitting:Pc,explodingHead:Ic,smilingFaceWithHearts:xc,yawningFace:Sc,partyingFace:Fc,woozyFace:Ec,hotFace:kc,coldFace:_c,pleadingFace:Lc,faceWithMonocle:Tc,skullAndCrossbones:Oc,frowningFace:Rc,smilingFace:Qc,speakingHead:Uc,bust:Nc}),zc=Rn("","Kiss Mark"),Gc=Rn("","Love Letter"),jc=Rn("","Beating Heart"),Wc=Rn("","Broken Heart"),Vc=Rn("","Two Hearts"),Zc=Rn("","Sparkling Heart"),Yc=Rn("","Growing Heart"),Xc=Rn("","Heart with Arrow"),Jc=Rn("","Blue Heart"),Kc=Rn("","Green Heart"),qc=Rn("","Yellow Heart"),$c=Rn("","Purple Heart"),tA=Rn("","Heart with Ribbon"),eA=Rn("","Revolving Hearts"),iA=Rn("","Heart Decoration"),sA=Rn("","Black Heart"),nA=Rn("","White Heart"),aA=Rn("","Brown Heart"),oA=Rn("","Orange Heart"),rA=Qn("","Heart Exclamation"),hA=Qn("","Red Heart"),cA=Nn("Love","Hearts and kisses",{kissMark:zc,loveLetter:Gc,beatingHeart:jc,brokenHeart:Wc,twoHearts:Vc,sparklingHeart:Zc,growingHeart:Yc,heartWithArrow:Xc,blueHeart:Jc,greenHeart:Kc,yellowHeart:qc,purpleHeart:$c,heartWithRibbon:tA,revolvingHearts:eA,heartDecoration:iA,blackHeart:sA,whiteHeart:nA,brownHeart:aA,orangeHeart:oA,heartExclamation:rA,redHeart:hA}),AA=Rn("","Anger Symbol"),lA=Rn("","Bomb"),uA=Rn("","Zzz"),dA=Rn("","Collision"),gA=Rn("","Sweat Droplets"),pA=Rn("","Dashing Away"),mA=Rn("","Dizzy"),fA=Rn("","Speech Balloon"),vA=Rn("","Thought Balloon"),wA=Rn("","Hundred Points"),BA=Qn("","Hole"),yA=Qn("","Left Speech Bubble"),DA=Qn("","Right Speech Bubble"),bA=Qn("","Conversation Bubbles 2"),CA=Qn("","Conversation Bubbles 3"),MA=Qn("","Left Thought Bubble"),PA=Qn("","Right Thought Bubble"),IA=Qn("","Left Anger Bubble"),xA=Qn("","Right Anger Bubble"),SA=Qn("","Anger Bubble"),FA=Qn("","Anger Bubble Lightning"),EA=Qn("","Lightning Bolt"),kA=Un("Cartoon","Cartoon symbols",AA,lA,uA,dA,gA,pA,mA,fA,vA,wA,BA,yA,DA,bA,CA,MA,PA,IA,xA,SA,FA,EA),_A=Rn("","Backhand Index Pointing Up"),LA=Rn("","Backhand Index Pointing Down"),TA=Rn("","Backhand Index Pointing Left"),OA=Rn("","Backhand Index Pointing Right"),RA=Rn("","Oncoming Fist"),QA=Rn("","Waving Hand"),UA=Rn("","OK Hand"),NA=Rn("","Thumbs Up"),HA=Rn("","Thumbs Down"),zA=Rn("","Clapping Hands"),GA=Rn("","Open Hands"),jA=Rn("","Nail Polish"),WA=Qn("","Hand with Fingers Splayed"),VA=Qn("","Hand with Fingers Splayed 2"),ZA=Rn("","Thumbs Up 2"),YA=Rn("","Thumbs Down 2"),XA=Rn("","Peace Fingers"),JA=Rn("","Middle Finger"),KA=Rn("","Vulcan Salute"),qA=Rn("","Hand Pointing Down"),$A=Rn("","Hand Pointing Left"),tl=Rn("","Hand Pointing Right"),el=Rn("","Hand Pointing Left 2"),il=Rn("","Hand Pointing Right 2"),sl=Rn("","Index Pointing Left"),nl=Rn("","Index Pointing Right"),al=Rn("","Index Pointing Up"),ol=Rn("","Index Pointing Down"),rl=Rn("","Index Pointing Up 2"),hl=Rn("","Index Pointing Down 2"),cl=Rn("","Index Pointing Up 3"),Al=Rn("","Index Pointing Down 3"),ll=Rn("","Raising Hands"),ul=Rn("","Folded Hands"),dl=Rn("","Pinched Fingers"),gl=Rn("","Pinching Hand"),pl=Rn("","Sign of the Horns"),ml=Rn("","Call Me Hand"),fl=Rn("","Raised Back of Hand"),vl=Rn("","Left-Facing Fist"),wl=Rn("","Right-Facing Fist"),Bl=Rn("","Handshake"),yl=Rn("","Crossed Fingers"),Dl=Rn("","Love-You Gesture"),bl=Rn("","Palms Up Together"),Cl=Qn("","Index Pointing Up 4"),Ml=Rn("","Raised Fist"),Pl=Rn("","Raised Hand"),Il=Qn("","Victory Hand"),xl=Qn("","Writing Hand"),Sl=Un("Hands","Hands pointing at things",_A,LA,TA,OA,RA,QA,UA,NA,HA,zA,GA,jA,WA,VA,VA,ZA,YA,XA,JA,KA,qA,$A,tl,el,il,sl,nl,al,ol,rl,hl,cl,Al,ll,ul,dl,gl,pl,ml,fl,vl,wl,Bl,yl,Dl,bl,Cl,Ml,Pl,Il,xl),Fl=Rn("","Red Circle"),El=Rn("","Blue Circle"),kl=Rn("","Large Orange Diamond"),_l=Rn("","Large Blue Diamond"),Ll=Rn("","Small Orange Diamond"),Tl=Rn("","Small Blue Diamond"),Ol=Rn("","Red Triangle Pointed Up"),Rl=Rn("","Red Triangle Pointed Down"),Ql=Rn("","Orange Circle"),Ul=Rn("","Yellow Circle"),Nl=Rn("","Green Circle"),Hl=Rn("","Purple Circle"),zl=Rn("","Brown Circle"),Gl=Rn("","Hollow Red Circle"),jl=Rn("","White Circle"),Wl=Rn("","Black Circle"),Vl=Rn("","Red Square"),Zl=Rn("","Blue Square"),Yl=Rn("","Orange Square"),Xl=Rn("","Yellow Square"),Jl=Rn("","Green Square"),Kl=Rn("","Purple Square"),ql=Rn("","Brown Square"),$l=Rn("","Black Square Button"),tu=Rn("","White Square Button"),eu=Qn("","Black Small Square"),iu=Qn("","White Small Square"),su=Rn("","White Medium-Small Square"),nu=Rn("","Black Medium-Small Square"),au=Qn("","White Medium Square"),ou=Qn("","Black Medium Square"),ru=Rn("","Black Large Square"),hu=Rn("","White Large Square"),cu=Rn("","Star"),Au=Rn("","Diamond with a Dot"),lu=Un("Shapes","Colored shapes",Fl,El,kl,_l,Ll,Tl,Ol,Rl,Ql,Ul,Nl,Hl,zl,Gl,jl,Wl,Vl,Zl,Yl,Xl,Jl,Kl,ql,$l,tu,eu,iu,su,nu,au,ou,ru,hu,cu,Au),uu=Qn("","Eye"),du=zn(uu,yA,"Eye in Speech Bubble"),gu=Un("Body Parts","General body parts",Rn("","Eyes"),uu,du,Rn("","Ear"),Rn("","Nose"),Rn("","Mouth"),Rn("","Tongue"),Rn("","Flexed Biceps"),Rn("","Selfie"),Rn("","Bone"),Rn("","Leg"),Rn("","Foot"),Rn("","Tooth"),Rn("","Ear with Hearing Aid"),Rn("","Mechanical Arm"),Rn("","Mechanical Leg"),Rn("","Anatomical Heart"),Rn("","Lungs"),Rn("","Brain")),pu=Qn("","Snowflake"),mu=Rn("","Rainbow"),fu=Un("Weather","Weather",Rn("","Sunrise Over Mountains"),Rn("","Sunrise"),Rn("","Cityscape at Dusk"),Rn("","Sunset"),Rn("","Night with Stars"),Rn("","Closed Umbrella"),Qn("","Umbrella"),Qn("","Umbrella with Rain Drops"),Qn("","Snowman"),Rn("","Snowman Without Snow"),Qn("","Sun"),Qn("","Cloud"),Qn("","Sun Behind Small Cloud"),Rn("","Sun Behind Cloud"),Qn("","Sun Behind Large Cloud"),Qn("","Sun Behind Rain Cloud"),Qn("","Cloud with Rain"),Qn("","Cloud with Snow"),Qn("","Cloud with Lightning"),Qn("","Cloud with Lightning and Rain"),pu,Rn("","Cyclone"),Qn("","Tornado"),Qn("","Wind Face"),Rn("","Water Wave"),Qn("","Fog"),Rn("","Foggy"),mu,Qn("","Thermometer")),vu=Rn("","Cat"),wu=zn(vu,ru,"Black Cat"),Bu=Rn("","Dog"),yu=zn(Bu,Jo,"Service Dog"),Du=Rn("","Bear"),bu=zn(Du,pu,"Polar Bear"),Cu=Un("Animals","Animals and insects",Rn("","Rat"),Rn("","Mouse"),Rn("","Ox"),Rn("","Water Buffalo"),Rn("","Cow"),Rn("","Tiger"),Rn("","Leopard"),Rn("","Rabbit"),vu,wu,Rn("","Dragon"),Rn("","Crocodile"),Rn("","Whale"),Rn("","Snail"),Rn("","Snake"),Rn("","Horse"),Rn("","Ram"),Rn("","Goat"),Rn("","Ewe"),Rn("","Monkey"),Rn("","Rooster"),Rn("","Chicken"),Bu,yu,Rn("","Pig"),Rn("","Boar"),Rn("","Elephant"),Rn("","Octopus"),Rn("","Spiral Shell"),Rn("","Bug"),Rn("","Ant"),Rn("","Honeybee"),Rn("","Lady Beetle"),Rn("","Fish"),Rn("","Tropical Fish"),Rn("","Blowfish"),Rn("","Turtle"),Rn("","Hatching Chick"),Rn("","Baby Chick"),Rn("","Front-Facing Baby Chick"),Rn("","Bird"),Rn("","Penguin"),Rn("","Koala"),Rn("","Poodle"),Rn("","Camel"),Rn("","Two-Hump Camel"),Rn("","Dolphin"),Rn("","Mouse Face"),Rn("","Cow Face"),Rn("","Tiger Face"),Rn("","Rabbit Face"),Rn("","Cat Face"),Rn("","Dragon Face"),Rn("","Spouting Whale"),Rn("","Horse Face"),Rn("","Monkey Face"),Rn("","Dog Face"),Rn("","Pig Face"),Rn("","Frog"),Rn("","Hamster"),Rn("","Wolf"),Du,bu,Rn("","Panda"),Rn("","Pig Nose"),Rn("","Paw Prints"),Qn("","Chipmunk"),Qn("","Dove"),Qn("","Spider"),Qn("","Spider Web"),Rn("","Lion"),Rn("","Scorpion"),Rn("","Turkey"),Rn("","Unicorn"),Rn("","Eagle"),Rn("","Duck"),Rn("","Bat"),Rn("","Shark"),Rn("","Owl"),Rn("","Fox"),Rn("","Butterfly"),Rn("","Deer"),Rn("","Gorilla"),Rn("","Lizard"),Rn("","Rhinoceros"),Rn("","Giraffe"),Rn("","Zebra"),Rn("","Hedgehog"),Rn("","Sauropod"),Rn("","T-Rex"),Rn("","Cricket"),Rn("","Kangaroo"),Rn("","Llama"),Rn("","Peacock"),Rn("","Hippopotamus"),Rn("","Parrot"),Rn("","Raccoon"),Rn("","Mosquito"),Rn("","Microbe"),Rn("","Badger"),Rn("","Swan"),Rn("","Sloth"),Rn("","Otter"),Rn("","Orangutan"),Rn("","Skunk"),Rn("","Flamingo"),Rn("","Guide Dog")),Mu=Rn("","White Flower"),Pu=Un("Plants","Flowers, trees, and things",Rn("","Seedling"),Rn("","Evergreen Tree"),Rn("","Deciduous Tree"),Rn("","Palm Tree"),Rn("","Cactus"),Rn("","Tulip"),Rn("","Cherry Blossom"),Rn("","Rose"),Rn("","Hibiscus"),Rn("","Sunflower"),Rn("","Blossom"),po,Rn("","Herb"),Rn("","Four Leaf Clover"),Rn("","Maple Leaf"),Rn("","Fallen Leaf"),Rn("","Leaf Fluttering in Wind"),Qn("","Rosette"),Rn("","Bouquet"),Mu,Rn("","Wilted Flower"),Qn("","Shamrock")),Iu=Rn("","Banana"),xu=Un("Food","Food, drink, and utensils",Rn("","Hot Dog"),Rn("","Taco"),Rn("","Burrito"),Rn("","Chestnut"),Qn("","Hot Pepper"),Rn("","Ear of Corn"),Rn("","Mushroom"),Rn("","Tomato"),Rn("","Eggplant"),Rn("","Grapes"),Rn("","Melon"),Rn("","Watermelon"),Rn("","Tangerine"),Rn("","Lemon"),Iu,Rn("","Pineapple"),Rn("","Red Apple"),Rn("","Green Apple"),Rn("","Pear"),Rn("","Peach"),Rn("","Cherries"),Rn("","Strawberry"),Rn("","Hamburger"),Rn("","Pizza"),Rn("","Meat on Bone"),Rn("","Poultry Leg"),Rn("","Rice Cracker"),Rn("","Rice Ball"),Rn("","Cooked Rice"),Rn("","Curry Rice"),Rn("","Steaming Bowl"),Rn("","Spaghetti"),Rn("","Bread"),Rn("","French Fries"),Rn("","Roasted Sweet Potato"),Rn("","Dango"),Rn("","Oden"),Rn("","Sushi"),Rn("","Fried Shrimp"),Rn("","Fish Cake with Swirl"),Rn("","Bento Box"),Rn("","Pot of Food"),fo,Rn("","Popcorn"),Rn("","Croissant"),Rn("","Avocado"),Rn("","Cucumber"),Rn("","Bacon"),Rn("","Potato"),Rn("","Carrot"),Rn("","Baguette Bread"),Rn("","Green Salad"),Rn("","Shallow Pan of Food"),Rn("","Stuffed Flatbread"),Rn("","Egg"),Rn("","Peanuts"),Rn("","Kiwi Fruit"),Rn("","Pancakes"),Rn("","Dumpling"),Rn("","Fortune Cookie"),Rn("","Takeout Box"),Rn("","Bowl with Spoon"),Rn("","Coconut"),Rn("","Broccoli"),Rn("","Pretzel"),Rn("","Cut of Meat"),Rn("","Sandwich"),Rn("","Canned Food"),Rn("","Leafy Green"),Rn("","Mango"),Rn("","Moon Cake"),Rn("","Bagel"),Rn("","Crab"),Rn("","Shrimp"),Rn("","Squid"),Rn("","Lobster"),Rn("","Oyster"),Rn("","Cheese Wedge"),Rn("","Salt"),Rn("","Garlic"),Rn("","Onion"),Rn("","Falafel"),Rn("","Waffle"),Rn("","Butter"),Rn("","Soft Ice Cream"),Rn("","Shaved Ice"),Rn("","Ice Cream"),Rn("","Doughnut"),Rn("","Cookie"),Rn("","Chocolate Bar"),Rn("","Candy"),Rn("","Lollipop"),Rn("","Custard"),Rn("","Honey Pot"),Rn("","Shortcake"),Rn("","Birthday Cake"),Rn("","Pie"),Rn("","Cupcake"),Rn("","Teacup Without Handle"),Rn("","Sake"),Rn("","Wine Glass"),Rn("","Cocktail Glass"),Rn("","Tropical Drink"),Rn("","Beer Mug"),Rn("","Clinking Beer Mugs"),Rn("","Baby Bottle"),Rn("","Bottle with Popping Cork"),Rn("","Clinking Glasses"),Rn("","Tumbler Glass"),Rn("","Glass of Milk"),Rn("","Cup with Straw"),Rn("","Beverage Box"),Rn("","Mate"),Rn("","Ice"),Rn("","Hot Beverage"),Rn("","Fork and Knife"),Qn("","Fork and Knife with Plate"),Rn("","Amphora"),Rn("","Kitchen Knife"),Rn("","Spoon"),Rn("","Chopsticks")),Su=(Un("National Flags","Flags of countries from around the world",Rn("","Flag: Ascension Island"),Rn("","Flag: Andorra"),Rn("","Flag: United Arab Emirates"),Rn("","Flag: Afghanistan"),Rn("","Flag: Antigua & Barbuda"),Rn("","Flag: Anguilla"),Rn("","Flag: Albania"),Rn("","Flag: Armenia"),Rn("","Flag: Angola"),Rn("","Flag: Antarctica"),Rn("","Flag: Argentina"),Rn("","Flag: American Samoa"),Rn("","Flag: Austria"),Rn("","Flag: Australia"),Rn("","Flag: Aruba"),Rn("","Flag: land Islands"),Rn("","Flag: Azerbaijan"),Rn("","Flag: Bosnia & Herzegovina"),Rn("","Flag: Barbados"),Rn("","Flag: Bangladesh"),Rn("","Flag: Belgium"),Rn("","Flag: Burkina Faso"),Rn("","Flag: Bulgaria"),Rn("","Flag: Bahrain"),Rn("","Flag: Burundi"),Rn("","Flag: Benin"),Rn("","Flag: St. Barthlemy"),Rn("","Flag: Bermuda"),Rn("","Flag: Brunei"),Rn("","Flag: Bolivia"),Rn("","Flag: Caribbean Netherlands"),Rn("","Flag: Brazil"),Rn("","Flag: Bahamas"),Rn("","Flag: Bhutan"),Rn("","Flag: Bouvet Island"),Rn("","Flag: Botswana"),Rn("","Flag: Belarus"),Rn("","Flag: Belize"),Rn("","Flag: Canada"),Rn("","Flag: Cocos (Keeling) Islands"),Rn("","Flag: Congo - Kinshasa"),Rn("","Flag: Central African Republic"),Rn("","Flag: Congo - Brazzaville"),Rn("","Flag: Switzerland"),Rn("","Flag: Cte dIvoire"),Rn("","Flag: Cook Islands"),Rn("","Flag: Chile"),Rn("","Flag: Cameroon"),Rn("","Flag: China"),Rn("","Flag: Colombia"),Rn("","Flag: Clipperton Island"),Rn("","Flag: Costa Rica"),Rn("","Flag: Cuba"),Rn("","Flag: Cape Verde"),Rn("","Flag: Curaao"),Rn("","Flag: Christmas Island"),Rn("","Flag: Cyprus"),Rn("","Flag: Czechia"),Rn("","Flag: Germany"),Rn("","Flag: Diego Garcia"),Rn("","Flag: Djibouti"),Rn("","Flag: Denmark"),Rn("","Flag: Dominica"),Rn("","Flag: Dominican Republic"),Rn("","Flag: Algeria"),Rn("","Flag: Ceuta & Melilla"),Rn("","Flag: Ecuador"),Rn("","Flag: Estonia"),Rn("","Flag: Egypt"),Rn("","Flag: Western Sahara"),Rn("","Flag: Eritrea"),Rn("","Flag: Spain"),Rn("","Flag: Ethiopia"),Rn("","Flag: European Union"),Rn("","Flag: Finland"),Rn("","Flag: Fiji"),Rn("","Flag: Falkland Islands"),Rn("","Flag: Micronesia"),Rn("","Flag: Faroe Islands"),Rn("","Flag: France"),Rn("","Flag: Gabon"),Rn("","Flag: United Kingdom"),Rn("","Flag: Grenada"),Rn("","Flag: Georgia"),Rn("","Flag: French Guiana"),Rn("","Flag: Guernsey"),Rn("","Flag: Ghana"),Rn("","Flag: Gibraltar"),Rn("","Flag: Greenland"),Rn("","Flag: Gambia"),Rn("","Flag: Guinea"),Rn("","Flag: Guadeloupe"),Rn("","Flag: Equatorial Guinea"),Rn("","Flag: Greece"),Rn("","Flag: South Georgia & South Sandwich Islands"),Rn("","Flag: Guatemala"),Rn("","Flag: Guam"),Rn("","Flag: Guinea-Bissau"),Rn("","Flag: Guyana"),Rn("","Flag: Hong Kong SAR China"),Rn("","Flag: Heard & McDonald Islands"),Rn("","Flag: Honduras"),Rn("","Flag: Croatia"),Rn("","Flag: Haiti"),Rn("","Flag: Hungary"),Rn("","Flag: Canary Islands"),Rn("","Flag: Indonesia"),Rn("","Flag: Ireland"),Rn("","Flag: Israel"),Rn("","Flag: Isle of Man"),Rn("","Flag: India"),Rn("","Flag: British Indian Ocean Territory"),Rn("","Flag: Iraq"),Rn("","Flag: Iran"),Rn("","Flag: Iceland"),Rn("","Flag: Italy"),Rn("","Flag: Jersey"),Rn("","Flag: Jamaica"),Rn("","Flag: Jordan"),Rn("","Flag: Japan"),Rn("","Flag: Kenya"),Rn("","Flag: Kyrgyzstan"),Rn("","Flag: Cambodia"),Rn("","Flag: Kiribati"),Rn("","Flag: Comoros"),Rn("","Flag: St. Kitts & Nevis"),Rn("","Flag: North Korea"),Rn("","Flag: South Korea"),Rn("","Flag: Kuwait"),Rn("","Flag: Cayman Islands"),Rn("","Flag: Kazakhstan"),Rn("","Flag: Laos"),Rn("","Flag: Lebanon"),Rn("","Flag: St. Lucia"),Rn("","Flag: Liechtenstein"),Rn("","Flag: Sri Lanka"),Rn("","Flag: Liberia"),Rn("","Flag: Lesotho"),Rn("","Flag: Lithuania"),Rn("","Flag: Luxembourg"),Rn("","Flag: Latvia"),Rn("","Flag: Libya"),Rn("","Flag: Morocco"),Rn("","Flag: Monaco"),Rn("","Flag: Moldova"),Rn("","Flag: Montenegro"),Rn("","Flag: St. Martin"),Rn("","Flag: Madagascar"),Rn("","Flag: Marshall Islands"),Rn("","Flag: North Macedonia"),Rn("","Flag: Mali"),Rn("","Flag: Myanmar (Burma)"),Rn("","Flag: Mongolia"),Rn("","Flag: Macao Sar China"),Rn("","Flag: Northern Mariana Islands"),Rn("","Flag: Martinique"),Rn("","Flag: Mauritania"),Rn("","Flag: Montserrat"),Rn("","Flag: Malta"),Rn("","Flag: Mauritius"),Rn("","Flag: Maldives"),Rn("","Flag: Malawi"),Rn("","Flag: Mexico"),Rn("","Flag: Malaysia"),Rn("","Flag: Mozambique"),Rn("","Flag: Namibia"),Rn("","Flag: New Caledonia"),Rn("","Flag: Niger"),Rn("","Flag: Norfolk Island"),Rn("","Flag: Nigeria"),Rn("","Flag: Nicaragua"),Rn("","Flag: Netherlands"),Rn("","Flag: Norway"),Rn("","Flag: Nepal"),Rn("","Flag: Nauru"),Rn("","Flag: Niue"),Rn("","Flag: New Zealand"),Rn("","Flag: Oman"),Rn("","Flag: Panama"),Rn("","Flag: Peru"),Rn("","Flag: French Polynesia"),Rn("","Flag: Papua New Guinea"),Rn("","Flag: Philippines"),Rn("","Flag: Pakistan"),Rn("","Flag: Poland"),Rn("","Flag: St. Pierre & Miquelon"),Rn("","Flag: Pitcairn Islands"),Rn("","Flag: Puerto Rico"),Rn("","Flag: Palestinian Territories"),Rn("","Flag: Portugal"),Rn("","Flag: Palau"),Rn("","Flag: Paraguay"),Rn("","Flag: Qatar"),Rn("","Flag: Runion"),Rn("","Flag: Romania"),Rn("","Flag: Serbia"),Rn("","Flag: Russia"),Rn("","Flag: Rwanda"),Rn("","Flag: Saudi Arabia"),Rn("","Flag: Solomon Islands"),Rn("","Flag: Seychelles"),Rn("","Flag: Sudan"),Rn("","Flag: Sweden"),Rn("","Flag: Singapore"),Rn("","Flag: St. Helena"),Rn("","Flag: Slovenia"),Rn("","Flag: Svalbard & Jan Mayen"),Rn("","Flag: Slovakia"),Rn("","Flag: Sierra Leone"),Rn("","Flag: San Marino"),Rn("","Flag: Senegal"),Rn("","Flag: Somalia"),Rn("","Flag: Suriname"),Rn("","Flag: South Sudan"),Rn("","Flag: So Tom & Prncipe"),Rn("","Flag: El Salvador"),Rn("","Flag: Sint Maarten"),Rn("","Flag: Syria"),Rn("","Flag: Eswatini"),Rn("","Flag: Tristan Da Cunha"),Rn("","Flag: Turks & Caicos Islands"),Rn("","Flag: Chad"),Rn("","Flag: French Southern Territories"),Rn("","Flag: Togo"),Rn("","Flag: Thailand"),Rn("","Flag: Tajikistan"),Rn("","Flag: Tokelau"),Rn("","Flag: Timor-Leste"),Rn("","Flag: Turkmenistan"),Rn("","Flag: Tunisia"),Rn("","Flag: Tonga"),Rn("","Flag: Turkey"),Rn("","Flag: Trinidad & Tobago"),Rn("","Flag: Tuvalu"),Rn("","Flag: Taiwan"),Rn("","Flag: Tanzania"),Rn("","Flag: Ukraine"),Rn("","Flag: Uganda"),Rn("","Flag: U.S. Outlying Islands"),Rn("","Flag: United Nations"),Rn("","Flag: United States"),Rn("","Flag: Uruguay"),Rn("","Flag: Uzbekistan"),Rn("","Flag: Vatican City"),Rn("","Flag: St. Vincent & Grenadines"),Rn("","Flag: Venezuela"),Rn("","Flag: British Virgin Islands"),Rn("","Flag: U.S. Virgin Islands"),Rn("","Flag: Vietnam"),Rn("","Flag: Vanuatu"),Rn("","Flag: Wallis & Futuna"),Rn("","Flag: Samoa"),Rn("","Flag: Kosovo"),Rn("","Flag: Yemen"),Rn("","Flag: Mayotte"),Rn("","Flag: South Africa"),Rn("","Flag: Zambia"),Rn("","Flag: Zimbabwe")),Qn("","White Flag")),Fu=zn(Su,mu,"Rainbow Flag"),Eu=zn(Su,ta,"Transgender Flag"),ku=Rn("","Black Flag"),_u=zn(ku,Oc,"Pirate Flag"),Lu=Un("Flags","Basic flags",Rn("","Crossed Flags"),Rn("","Chequered Flag"),Su,Fu,Eu,ku,_u,Rn("","Flag: England"),Rn("","Flag: Scotland"),Rn("","Flag: Wales"),Rn("","Triangular Flag")),Tu=Qn("","Motorcycle"),Ou=Qn("","Racing Car"),Ru=Rn("","Seat"),Qu=Rn("","Helicopter"),Uu=Rn("","Locomotive"),Nu=Rn("","Railway Car"),Hu=Rn("","High-Speed Train"),zu=Rn("","Bullet Train"),Gu=Rn("","Train"),ju=Rn("","Metro"),Wu=Rn("","Light Rail"),Vu=Rn("","Station"),Zu=Rn("","Tram"),Yu=Rn("","Tram Car"),Xu=Rn("","Bus"),Ju=Rn("","Oncoming Bus"),Ku=Rn("","Trolleybus"),qu=Rn("","Bus Stop"),$u=Rn("","Minibus"),td=Rn("","Ambulance"),ed=Rn("","Taxi"),id=Rn("","Oncoming Taxi"),sd=Rn("","Automobile"),nd=Rn("","Oncoming Automobile"),ad=Rn("","Sport Utility Vehicle"),od=Rn("","Delivery Truck"),rd=Rn("","Articulated Lorry"),hd=Rn("","Tractor"),cd=Rn("","Monorail"),Ad=Rn("","Mountain Railway"),ld=Rn("","Suspension Railway"),ud=Rn("","Mountain Cableway"),dd=Rn("","Aerial Tramway"),gd=Rn("","Ship"),pd=Rn("","Speedboat"),md=Rn("","Horizontal Traffic Light"),fd=Rn("","Vertical Traffic Light"),vd=Rn("","Construction"),wd=Rn("","Bicycle"),Bd=Rn("","Stop Sign"),yd=Qn("","Oil Drum"),Dd=Qn("","Motorway"),bd=Qn("","Railway Track"),Cd=Qn("","Motor Boat"),Md=Qn("","Small Airplane"),Pd=Rn("","Airplane Departure"),Id=Rn("","Airplane Arrival"),xd=Qn("","Satellite"),Sd=Qn("","Passenger Ship"),Fd=Rn("","Kick Scooter"),Ed=Rn("","Motor Scooter"),kd=Rn("","Canoe"),_d=Rn("","Flying Saucer"),Ld=Rn("","Skateboard"),Td=Rn("","Auto Rickshaw"),Od=Rn("","Parachute"),Rd=Rn("","Anchor"),Qd=Qn("","Ferry"),Ud=Rn("","Sailboat"),Nd=Rn("","Fuel Pump"),Hd=Un("Vehicles","Things that go",Tu,Ou,Ru,Io,Qu,Uu,Nu,Hu,zu,Gu,ju,Wu,Vu,Zu,Yu,Xu,Ju,Ku,qu,$u,td,Mo,ed,id,sd,nd,ad,od,rd,hd,cd,Ad,ld,ud,dd,gd,pd,md,fd,vd,wd,Bd,yd,Dd,bd,Cd,Md,Pd,Id,xd,Sd,Fd,Ed,kd,_d,Ld,Td,$o,er,Od,Rd,Qd,Ud,Nd,So),zd=(Un("Blood Types","Blood types",Rn("","A Button (Blood Type)"),Rn("","B Button (Blood Type)"),Rn("","O Button (Blood Type)"),Rn("","AB Button (Blood Type)")),Un("Regions","Region indicators",Rn("","Regional Indicator Symbol Letter A"),Rn("","Regional Indicator Symbol Letter B"),Rn("","Regional Indicator Symbol Letter C"),Rn("","Regional Indicator Symbol Letter D"),Rn("","Regional Indicator Symbol Letter E"),Rn("","Regional Indicator Symbol Letter F"),Rn("","Regional Indicator Symbol Letter G"),Rn("","Regional Indicator Symbol Letter H"),Rn("","Regional Indicator Symbol Letter I"),Rn("","Regional Indicator Symbol Letter J"),Rn("","Regional Indicator Symbol Letter K"),Rn("","Regional Indicator Symbol Letter L"),Rn("","Regional Indicator Symbol Letter M"),Rn("","Regional Indicator Symbol Letter N"),Rn("","Regional Indicator Symbol Letter O"),Rn("","Regional Indicator Symbol Letter P"),Rn("","Regional Indicator Symbol Letter Q"),Rn("","Regional Indicator Symbol Letter R"),Rn("","Regional Indicator Symbol Letter S"),Rn("","Regional Indicator Symbol Letter T"),Rn("","Regional Indicator Symbol Letter U"),Rn("","Regional Indicator Symbol Letter V"),Rn("","Regional Indicator Symbol Letter W"),Rn("","Regional Indicator Symbol Letter X"),Rn("","Regional Indicator Symbol Letter Y"),Rn("","Regional Indicator Symbol Letter Z")),Un("Japanese","Japanse symbology",Rn("","Japanese Symbol for Beginner"),Rn("","Japanese Here Button"),Qn("","Japanese Service Charge Button"),Rn("","Japanese Free of Charge Button"),Rn("","Japanese Reserved Button"),Rn("","Japanese Prohibited Button"),Rn("","Japanese Vacancy Button"),Rn("","Japanese Passing Grade Button"),Rn("","Japanese No Vacancy Button"),Rn("","Japanese Not Free of Charge Button"),Qn("","Japanese Monthly Amount Button"),Rn("","Japanese Application Button"),Rn("","Japanese Discount Button"),Rn("","Japanese Open for Business Button"),Rn("","Japanese Bargain Button"),Rn("","Japanese Acceptable Button"),Qn("","Japanese Congratulations Button"),Qn("","Japanese Secret Button")),Un("Clocks","Time-keeping pieces",Rn("","One OClock"),Rn("","Two OClock"),Rn("","Three OClock"),Rn("","Four OClock"),Rn("","Five OClock"),Rn("","Six OClock"),Rn("","Seven OClock"),Rn("","Eight OClock"),Rn("","Nine OClock"),Rn("","Ten OClock"),Rn("","Eleven OClock"),Rn("","Twelve OClock"),Rn("","One-Thirty"),Rn("","Two-Thirty"),Rn("","Three-Thirty"),Rn("","Four-Thirty"),Rn("","Five-Thirty"),Rn("","Six-Thirty"),Rn("","Seven-Thirty"),Rn("","Eight-Thirty"),Rn("","Nine-Thirty"),Rn("","Ten-Thirty"),Rn("","Eleven-Thirty"),Rn("","Twelve-Thirty"),Qn("","Mantelpiece Clock"),Rn("","Watch"),Rn("","Alarm Clock"),Qn("","Stopwatch"),Qn("","Timer Clock"),Rn("","Hourglass Done"),Rn("","Hourglass Not Done"))),Gd=Qn("","Clockwise Vertical Arrows"),jd=Qn("","Counterclockwise Arrows Button"),Wd=Qn("","Left-Right Arrow"),Vd=Qn("","Up-Down Arrow"),Zd=Qn("","Up-Left Arrow"),Yd=Qn("","Up-Right Arrow"),Xd=Rn("","Down-Right Arrow"),Jd=Qn("","Down-Right Arrow"),Kd=Qn("","Down-Left Arrow"),qd=Qn("","Right Arrow Curving Left"),$d=Qn("","Left Arrow Curving Right"),tg=Qn("","Right Arrow"),eg=Qn("","Right Arrow Curving Up"),ig=Qn("","Right Arrow Curving Down"),sg=Qn("","Left Arrow"),ng=Qn("","Up Arrow"),ag=Qn("","Down Arrow"),og=Un("Arrows","Arrows pointing in different directions",Gd,jd,Wd,Vd,Zd,Yd,Jd,Kd,qd,$d,tg,eg,ig,sg,ng,ag),rg=Rn("","CL Button"),hg=Rn("","Cool Button"),cg=Rn("","Free Button"),Ag=Rn("","ID Button"),lg=Rn("","New Button"),ug=Rn("","NG Button"),dg=Rn("","OK Button"),gg=Rn("","SOS Button"),pg=Rn("","Up! Button"),mg=Rn("","Vs Button"),fg=Rn("","Radio Button"),vg=Rn("","Back Arrow"),wg=Rn("","End Arrow"),Bg=Rn("","On! Arrow"),yg=Rn("","Soon Arrow"),Dg=Rn("","Top Arrow"),bg=Qn("","Check Box with Check"),Cg=Rn("","Input Latin Uppercase"),Mg=Rn("","Input Latin Lowercase"),Pg=Rn("","Input Numbers"),Ig=Rn("","Input Symbols"),xg=Rn("","Input Latin Letters"),Sg=Rn("","Shuffle Tracks Button"),Fg=Rn("","Repeat Button"),Eg=Rn("","Repeat Single Button"),kg=Rn("","Upwards Button"),_g=Rn("","Downwards Button"),Lg=Qn("","Play Button"),Tg=Qn("","Reverse Button"),Og=Qn("","Eject Button"),Rg=Rn("","Fast-Forward Button"),Qg=Rn("","Fast Reverse Button"),Ug=Rn("","Fast Up Button"),Ng=Rn("","Fast Down Button"),Hg=Qn("","Next Track Button"),zg=Qn("","Last Track Button"),Gg=Qn("","Play or Pause Button"),jg=Qn("","Pause Button"),Wg=Qn("","Stop Button"),Vg=Qn("","Record Button"),Zg=Un("Buttons","Buttons",rg,hg,cg,Ag,lg,ug,dg,gg,pg,mg,fg,vg,wg,Bg,yg,Dg,bg,Cg,Mg,Pg,Ig,xg,Sg,Fg,Eg,kg,_g,Lg,jg,Tg,Og,Rg,Qg,Ug,Ng,Hg,zg,Gg,jg,Wg,Vg),Yg=Un("Zodiac","The symbology of astrology",Rn("","Aries"),Rn("","Taurus"),Rn("","Gemini"),Rn("","Cancer"),Rn("","Leo"),Rn("","Virgo"),Rn("","Libra"),Rn("","Scorpio"),Rn("","Sagittarius"),Rn("","Capricorn"),Rn("","Aquarius"),Rn("","Pisces"),Rn("","Ophiuchus")),Xg=Qn("0","Digit Zero"),Jg=Qn("1","Digit One"),Kg=Qn("2","Digit Two"),qg=Qn("3","Digit Three"),$g=Qn("4","Digit Four"),tp=Qn("5","Digit Five"),ep=Qn("6","Digit Six"),ip=Qn("7","Digit Seven"),sp=Qn("8","Digit Eight"),np=Qn("9","Digit Nine"),ap=Qn("*","Asterisk"),op=Qn("#","Number Sign"),rp=(Un("Numbers","Numbers",Xg,Jg,Kg,qg,$g,tp,ep,ip,sp,np,ap,op,Hn(Xg,Kn,"Keycap Digit Zero"),Hn(Jg,Kn,"Keycap Digit One"),Hn(Kg,Kn,"Keycap Digit Two"),Hn(qg,Kn,"Keycap Digit Three"),Hn($g,Kn,"Keycap Digit Four"),Hn(tp,Kn,"Keycap Digit Five"),Hn(ep,Kn,"Keycap Digit Six"),Hn(ip,Kn,"Keycap Digit Seven"),Hn(sp,Kn,"Keycap Digit Eight"),Hn(np,Kn,"Keycap Digit Nine"),Hn(ap,Kn,"Keycap Asterisk"),Hn(op,Kn,"Keycap Number Sign"),Rn("","Keycap: 10")),Rn("","Tag Plus Sign")),hp=Rn("","Tag Hyphen-Minus"),cp=(Un("Tags","Tags",Rn("","Tag Space"),Rn("","Tag Exclamation Mark"),Rn("","Tag Quotation Mark"),Rn("","Tag Number Sign"),Rn("","Tag Dollar Sign"),Rn("","Tag Percent Sign"),Rn("","Tag Ampersand"),Rn("","Tag Apostrophe"),Rn("","Tag Left Parenthesis"),Rn("","Tag Right Parenthesis"),Rn("","Tag Asterisk"),rp,Rn("","Tag Comma"),hp,Rn("","Tag Full Stop"),Rn("","Tag Solidus"),Rn("","Tag Digit Zero"),Rn("","Tag Digit One"),Rn("","Tag Digit Two"),Rn("","Tag Digit Three"),Rn("","Tag Digit Four"),Rn("","Tag Digit Five"),Rn("","Tag Digit Six"),Rn("","Tag Digit Seven"),Rn("","Tag Digit Eight"),Rn("","Tag Digit Nine"),Rn("","Tag Colon"),Rn("","Tag Semicolon"),Rn("","Tag Less-Than Sign"),Rn("","Tag Equals Sign"),Rn("","Tag Greater-Than Sign"),Rn("","Tag Question Mark"),Rn("","Tag Commercial at"),Rn("","Tag Latin Capital Letter a"),Rn("","Tag Latin Capital Letter B"),Rn("","Tag Latin Capital Letter C"),Rn("","Tag Latin Capital Letter D"),Rn("","Tag Latin Capital Letter E"),Rn("","Tag Latin Capital Letter F"),Rn("","Tag Latin Capital Letter G"),Rn("","Tag Latin Capital Letter H"),Rn("","Tag Latin Capital Letter I"),Rn("","Tag Latin Capital Letter J"),Rn("","Tag Latin Capital Letter K"),Rn("","Tag Latin Capital Letter L"),Rn("","Tag Latin Capital Letter M"),Rn("","Tag Latin Capital Letter N"),Rn("","Tag Latin Capital Letter O"),Rn("","Tag Latin Capital Letter P"),Rn("","Tag Latin Capital Letter Q"),Rn("","Tag Latin Capital Letter R"),Rn("","Tag Latin Capital Letter S"),Rn("","Tag Latin Capital Letter T"),Rn("","Tag Latin Capital Letter U"),Rn("","Tag Latin Capital Letter V"),Rn("","Tag Latin Capital Letter W"),Rn("","Tag Latin Capital Letter X"),Rn("","Tag Latin Capital Letter Y"),Rn("","Tag Latin Capital Letter Z"),Rn("","Tag Left Square Bracket"),Rn("","Tag Reverse Solidus"),Rn("","Tag Right Square Bracket"),Rn("","Tag Circumflex Accent"),Rn("","Tag Low Line"),Rn("","Tag Grave Accent"),Rn("","Tag Latin Small Letter a"),Rn("","Tag Latin Small Letter B"),Rn("","Tag Latin Small Letter C"),Rn("","Tag Latin Small Letter D"),Rn("","Tag Latin Small Letter E"),Rn("","Tag Latin Small Letter F"),Rn("","Tag Latin Small Letter G"),Rn("","Tag Latin Small Letter H"),Rn("","Tag Latin Small Letter I"),Rn("","Tag Latin Small Letter J"),Rn("","Tag Latin Small Letter K"),Rn("","Tag Latin Small Letter L"),Rn("","Tag Latin Small Letter M"),Rn("","Tag Latin Small Letter N"),Rn("","Tag Latin Small Letter O"),Rn("","Tag Latin Small Letter P"),Rn("","Tag Latin Small Letter Q"),Rn("","Tag Latin Small Letter R"),Rn("","Tag Latin Small Letter S"),Rn("","Tag Latin Small Letter T"),Rn("","Tag Latin Small Letter U"),Rn("","Tag Latin Small Letter V"),Rn("","Tag Latin Small Letter W"),Rn("","Tag Latin Small Letter X"),Rn("","Tag Latin Small Letter Y"),Rn("","Tag Latin Small Letter Z"),Rn("","Tag Left Curly Bracket"),Rn("","Tag Vertical Line"),Rn("","Tag Right Curly Bracket"),Rn("","Tag Tilde"),Rn("","Cancel Tag")),Un("Math","Math",Qn("","Multiply"),Rn("","Plus"),Rn("","Minus"),Rn("","Divide"))),Ap=Un("Games","Games",Qn("","Spade Suit"),Qn("","Club Suit"),Qn("","Heart Suit",{color:"red"}),Qn("","Diamond Suit",{color:"red"}),Rn("","Mahjong Red Dragon"),Rn("","Joker"),Rn("","Direct Hit"),Rn("","Slot Machine"),Rn("","Pool 8 Ball"),Rn("","Game Die"),Rn("","Bowling"),Rn("","Flower Playing Cards"),Rn("","Puzzle Piece"),Qn("","Chess Pawn"),Rn("","Yo-Yo"),Rn("","Kite")),lp=Un("Sports Equipment","Sports equipment",Rn("","Running Shirt"),Rn("","Tennis"),Rn("","Skis"),Rn("","Basketball"),Rn("","Sports Medal"),Rn("","Trophy"),Rn("","American Football"),Rn("","Rugby Football"),Rn("","Cricket Game"),Rn("","Volleyball"),Rn("","Field Hockey"),Rn("","Ice Hockey"),Rn("","Ping Pong"),Rn("","Badminton"),Rn("","Sled"),Rn("","Goal Net"),Rn("","1st Place Medal"),Rn("","2nd Place Medal"),Rn("","3rd Place Medal"),Rn("","Boxing Glove"),Rn("","Curling Stone"),Rn("","Lacrosse"),Rn("","Softball"),Rn("","Flying Disc"),Rn("","Soccer Ball"),Rn("","Baseball"),Qn("","Ice Skate")),up=Un("Clothing","Clothing",Rn("","Top Hat"),Rn("","Diving Mask"),Rn("","Womans Hat"),Rn("","Glasses"),Qn("","Sunglasses"),Rn("","Necktie"),Rn("","T-Shirt"),Rn("","Jeans"),Rn("","Dress"),Rn("","Kimono"),Rn("","Bikini"),Rn("","Womans Clothes"),Rn("","Purse"),Rn("","Handbag"),Rn("","Clutch Bag"),Rn("","Mans Shoe"),Rn("","Running Shoe"),Rn("","High-Heeled Shoe"),Rn("","Womans Sandal"),Rn("","Womans Boot"),Rn("","Martial Arts Uniform"),Rn("","Sari"),Rn("","Lab Coat"),Rn("","Goggles"),Rn("","Hiking Boot"),Rn("","Flat Shoe"),Ko,Jo,Rn("","Billed Cap"),Rn("","Scarf"),Rn("","Gloves"),Rn("","Coat"),Rn("","Socks"),Rn("","Nazar Amulet"),Rn("","Ballet Shoes"),Rn("","One-Piece Swimsuit"),Rn("","Briefs"),Rn("","Shorts")),dp=Un("Town","Town",Qn("","Building Construction"),Qn("","Houses"),Qn("","Cityscape"),Qn("","Derelict House"),Qn("","Classical Building"),Qn("","Desert"),Qn("","Desert Island"),Qn("","National Park"),Qn("","Stadium"),Rn("","House"),Rn("","House with Garden"),Rn("","Office Building"),Rn("","Japanese Post Office"),Rn("","Post Office"),Rn("","Hospital"),Rn("","Bank"),Rn("","ATM Sign"),Rn("","Hotel"),Rn("","Love Hotel"),Rn("","Convenience Store"),Ao,Rn("","Department Store"),yo,Rn("","Bridge at Night"),Rn("","Fountain"),Qn("","Shopping Bags"),Rn("","Receipt"),Rn("","Shopping Cart"),Rn("","Barber Pole"),Rn("","Wedding"),Qn("","Ballot Box with Ballot")),gp=Un("Music","Music",Rn("","Musical Score"),Rn("","Musical Notes"),Rn("","Musical Note"),Rn("","Saxophone"),Rn("","Guitar"),Rn("","Musical Keyboard"),Rn("","Trumpet"),Rn("","Violin"),Rn("","Drum"),Rn("","Banjo")),pp=Un("Astronomy","Astronomy",Rn("","Milky Way"),Rn("","Globe Showing Europe-Africa"),Rn("","Globe Showing Americas"),Rn("","Globe Showing Asia-Australia"),Rn("","Globe with Meridians"),Rn("","New Moon"),Rn("","Waxing Crescent Moon"),Rn("","First Quarter Moon"),Rn("","Waxing Gibbous Moon"),Rn("","Full Moon"),Rn("","Waning Gibbous Moon"),Rn("","Last Quarter Moon"),Rn("","Waning Crescent Moon"),Rn("","Crescent Moon"),Rn("","New Moon Face"),Rn("","First Quarter Moon Face"),Rn("","Last Quarter Moon Face"),Rn("","Full Moon Face"),Rn("","Sun with Face"),Rn("","Glowing Star"),Rn("","Shooting Star"),Qn("","Comet"),Rn("","Ringed Planet")),mp=Un("Finance","Finance",Rn("","Money Bag"),Rn("","Currency Exchange"),Rn("","Heavy Dollar Sign"),Rn("","Credit Card"),Rn("","Yen Banknote"),Rn("","Dollar Banknote"),Rn("","Euro Banknote"),Rn("","Pound Banknote"),Rn("","Money with Wings"),Rn("","Chart Increasing with Yen")),fp=Un("Writing","Writing",Qn("","Pen"),Qn("","Fountain Pen"),Qn("","Paintbrush"),Qn("","Crayon"),Qn("","Pencil"),Qn("","Black Nib")),vp=Qn("","Alembic"),wp=Qn("","Gear"),Bp=Qn("","Atom Symbol"),yp=Qn("","Keyboard"),Dp=Qn("","Telephone"),bp=Qn("","Studio Microphone"),Cp=Qn("","Level Slider"),Mp=Qn("","Control Knobs"),Pp=Rn("","Movie Camera"),Ip=Rn("","Headphone"),xp=Rn("","Video Game"),Sp=Rn("","Light Bulb"),Fp=Rn("","Computer Disk"),Ep=Rn("","Floppy Disk"),kp=Rn("","Optical Disk"),_p=Rn("","DVD"),Lp=Rn("","Telephone Receiver"),Tp=Rn("","Pager"),Op=Rn("","Fax Machine"),Rp=Rn("","Satellite Antenna"),Qp=Rn("","Loudspeaker"),Up=Rn("","Megaphone"),Np=Rn("","Mobile Phone"),Hp=Rn("","Mobile Phone with Arrow"),zp=Rn("","Mobile Phone Vibrating"),Gp=Rn("","Mobile Phone Off"),jp=Rn("","No Mobile Phone"),Wp=Rn("","Antenna Bars"),Vp=Rn("","Camera"),Zp=Rn("","Camera with Flash"),Yp=Rn("","Video Camera"),Xp=Rn("","Television"),Jp=Rn("","Radio"),Kp=Rn("","Videocassette"),qp=Qn("","Film Projector"),$p=Rn("","Dim Button"),tm=Rn("","Bright Button"),em=Rn("","Muted Speaker"),im=Rn("","Speaker Low Volume"),sm=Rn("","Speaker Medium Volume"),nm=Rn("","Speaker High Volume"),am=Rn("","Battery"),om=Rn("","Electric Plug"),rm=Rn("","Magnifying Glass Tilted Left"),hm=Rn("","Magnifying Glass Tilted Right"),cm=Rn("","Locked with Pen"),Am=Rn("","Locked with Key"),lm=Rn("","Key"),um=Rn("","Locked"),dm=Rn("","Unlocked"),gm=Rn("","Bell"),pm=Rn("","Bell with Slash"),mm=Rn("","Bookmark"),fm=Rn("","Link"),vm=Qn("","Joystick"),wm=Qn("","Desktop Computer"),Bm=Qn("","Printer"),ym=Qn("","Computer Mouse"),Dm=Qn("","Trackball"),bm=Rn("","Card Index Dividers"),Cm=Rn("","Card File Box"),Mm=Rn("","File Cabinet"),Pm=Rn("","Wastebasket"),Im=Rn("","Spiral Note Pad"),xm=Rn("","Spiral Calendar"),Sm=Rn("","Compression"),Fm=Rn("","Old Key"),Em=Un("Technology","Technology",vm,xp,Sp,To,bo,Fp,Ep,kp,_p,wm,yp,Bm,ym,Dm,Dp,Lp,Tp,Op,Rp,Qp,Up,Xp,Jp,Kp,qp,bp,Cp,Mp,_o,Pp,Ip,Vp,Zp,Yp,Np,Gp,Hp,cm,Am,um,dm,gm,pm,mm,fm,zp,Wp,$p,tm,em,im,sm,nm,am,om),km=Un("Mail","Mail",Rn("","Outbox Tray"),Rn("","Inbox Tray"),Rn("","Package"),Rn("","E-Mail"),Rn("","Incoming Envelope"),Rn("","Envelope with Arrow"),Rn("","Closed Mailbox with Lowered Flag"),Rn("","Closed Mailbox with Raised Flag"),Rn("","Open Mailbox with Raised Flag"),Rn("","Open Mailbox with Lowered Flag"),Rn("","Postbox"),Rn("","Postal Horn")),_m=Un("Celebration","Celebration",Rn("","Ribbon"),Rn("","Wrapped Gift"),Rn("","Jack-O-Lantern"),Rn("","Christmas Tree"),Rn("","Firecracker"),Rn("","Fireworks"),Rn("","Sparkler"),Rn("","Sparkles"),Qn("","Sparkle"),Rn("","Balloon"),Rn("","Party Popper"),Rn("","Confetti Ball"),Rn("","Tanabata Tree"),Rn("","Pine Decoration"),Rn("","Japanese Dolls"),Rn("","Carp Streamer"),Rn("","Wind Chime"),Rn("","Moon Viewing Ceremony"),Rn("","Backpack"),ho,Rn("","Red Envelope"),Rn("","Red Paper Lantern"),Qn("","Military Medal")),Lm=Un("Tools","Tools",Rn("","Fishing Pole"),Rn("","Flashlight"),wo,Rn("","Hammer"),Rn("","Nut and Bolt"),Qn("","Hammer and Wrench"),Rn("","Compass"),Rn("","Fire Extinguisher"),Rn("","Toolbox"),Rn("","Brick"),Rn("","Axe"),Qn("","Hammer and Pick"),Qn("","Pick"),Qn("","Rescue Workers Helmet"),Qn("","Chains"),Sm),Tm=Un("Office","Office",Rn("","File Folder"),Rn("","Open File Folder"),Rn("","Page with Curl"),Rn("","Page Facing Up"),Rn("","Calendar"),Rn("","Tear-Off Calendar"),Rn("","Card Index"),bm,Cm,Mm,Pm,Im,xm,Rn("","Chart Increasing"),Rn("","Chart Decreasing"),Rn("","Bar Chart"),Rn("","Clipboard"),Rn("","Pushpin"),Rn("","Round Pushpin"),Rn("","Paperclip"),Qn("","Linked Paperclips"),Rn("","Straight Ruler"),Rn("","Triangular Ruler"),Rn("","Bookmark Tabs"),Rn("","Ledger"),Rn("","Notebook"),Rn("","Notebook with Decorative Cover"),Rn("","Closed Book"),Rn("","Open Book"),Rn("","Green Book"),Rn("","Blue Book"),Rn("","Orange Book"),Rn("","Books"),Rn("","Name Badge"),Rn("","Scroll"),Rn("","Memo"),Qn("","Scissors"),Qn("","Envelope")),Om=Un("Signs","Signs",Rn("","Cinema"),jp,Rn("","No One Under Eighteen"),Rn("","Prohibited"),Rn("","Cigarette"),Rn("","No Smoking"),Rn("","Litter in Bin Sign"),Rn("","No Littering"),Rn("","Potable Water"),Rn("","Non-Potable Water"),Rn("","No Bicycles"),Rn("","No Pedestrians"),Rn("","Children Crossing"),Rn("","Mens Room"),Rn("","Womens Room"),Rn("","Restroom"),Rn("","Baby Symbol"),Rn("","Water Closet"),Rn("","Passport Control"),Rn("","Customs"),Rn("","Baggage Claim"),Rn("","Left Luggage"),Qn("","Parking Button"),Rn("","Wheelchair Symbol"),Qn("","Radioactive"),Qn("","Biohazard"),Qn("","Warning"),Rn("","High Voltage"),Rn("","No Entry"),Qn("","Recycling Symbol"),qn,$n,ta),Rm=Un("Religion","Religion",Rn("","Dotted Six-Pointed Star"),Qn("","Star of David"),Qn("","Om"),Rn("","Kaaba"),Rn("","Mosque"),Rn("","Synagogue"),Rn("","Menorah"),Rn("","Place of Worship"),Rn("","Hindu Temple"),Qn("","Orthodox Cross"),Qn("","Latin Cross"),Qn("","Star and Crescent"),Qn("","Peace Symbol"),Qn("","Yin Yang"),Qn("","Wheel of Dharma"),Qn("","Infinity"),Rn("","Diya Lamp"),Qn("","Shinto Shrine"),Rn("","Church"),Qn("","Eight-Pointed Star"),Rn("","Prayer Beads")),Qm=Rn("","Door"),Um=Un("Household","Household",Rn("","Lipstick"),Rn("","Ring"),Rn("","Gem Stone"),Rn("","Newspaper"),lm,Rn("","Fire"),Rn("","Pistol"),Qn("","Candle"),Qn("","Framed Picture"),Fm,Qn("","Rolled-Up Newspaper"),Qn("","World Map"),Qm,Rn("","Toilet"),Rn("","Shower"),Rn("","Bathtub"),Qn("","Couch and Lamp"),Qn("","Bed"),Rn("","Lotion Bottle"),Rn("","Thread"),Rn("","Yarn"),Rn("","Safety Pin"),Rn("","Teddy Bear"),Rn("","Broom"),Rn("","Basket"),Rn("","Roll of Paper"),Rn("","Soap"),Rn("","Sponge"),Rn("","Chair"),Rn("","Razor"),Qn("","Reminder Ribbon")),Nm=Un("Activities","Activities",Qn("","Film Frames"),Qn("","Admission Tickets"),Rn("","Carousel Horse"),Rn("","Ferris Wheel"),Rn("","Roller Coaster"),Eo,Rn("","Circus Tent"),Rn("","Ticket"),Rn("","Clapper Board"),Rn("","Performing Arts")),Hm=Un("Travel","Travel",Qn("","Label"),Rn("","Volcano"),Qn("","Snow-Capped Mountain"),Qn("","Mountain"),Qn("","Camping"),Qn("","Beach with Umbrella"),Qn("","Umbrella on Ground"),Rn("","Japanese Castle"),Rn("","Footprints"),Rn("","Mount Fuji"),Rn("","Tokyo Tower"),Rn("","Statue of Liberty"),Rn("","Map of Japan"),Rn("","Moai"),Qn("","Bellhop Bell"),Rn("","Luggage"),Rn("","Flag in Hole"),Rn("","Tent"),Qn("","Hot Springs")),zm=Un("Medieval","Medieval",Rn("","Castle"),Rn("","Bow and Arrow"),Uo,Rn("","Trident Emblem"),Qn("","Dagger"),Qn("","Shield"),Rn("","Crystal Ball"),Qn("","Crossed Swords"),Qn("","Fleur-de-lis")),Gm=Qn("","Double Exclamation Mark"),jm=Qn("","Exclamation Question Mark"),Wm=Qn("","Information"),Vm=Qn("","Circled M"),Zm=Rn("","Check Mark Button"),Ym=Qn("","Check Mark"),Xm=Qn("","Eight-Spoked Asterisk"),Jm=Rn("","Cross Mark"),Km=Rn("","Cross Mark Button"),qm=Rn("","Question Mark"),$m=Rn("","White Question Mark"),tf=Rn("","White Exclamation Mark"),ef=Rn("","Exclamation Mark"),sf=Rn("","Curly Loop"),nf=Rn("","Double Curly Loop"),af=Qn("","Wavy Dash"),of=Qn("","Part Alternation Mark"),rf=Qn("","Trade Mark"),hf=Qn("","Copyright"),cf=Qn("","Registered"),Af=Qn("","Square: Four Corners"),lf=(Nn("Marks","Marks",{doubleExclamationMark:Gm,interrobang:jm,information:Wm,circledM:Vm,checkMarkButton:Zm,checkMark:Ym,eightSpokedAsterisk:Xm,crossMark:Jm,crossMarkButton:Km,questionMark:qm,whiteQuestionMark:$m,whiteExclamationMark:tf,exclamationMark:ef,curlyLoop:sf,doubleCurlyLoop:nf,wavyDash:af,partAlternationMark:of,tradeMark:rf,copyright:hf,registered:cf}),Nn("Science","Science",{droplet:Rn("","Droplet"),dropOfBlood:Rn("","Drop of Blood"),adhesiveBandage:Rn("","Adhesive Bandage"),stethoscope:Rn("","Stethoscope"),syringe:Rn("","Syringe"),pill:Rn("","Pill"),microscope:Ro,testTube:Rn("","Test Tube"),petriDish:Rn("","Petri Dish"),dna:Rn("","DNA"),abacus:Rn("","Abacus"),magnet:Rn("","Magnet"),telescope:Rn("","Telescope"),medical:oo,balanceScale:uo,alembic:vp,gear:wp,atomSymbol:Bp,magnifyingGlassTiltedLeft:rm,magnifyingGlassTiltedRight:hm})),uf=Rn("","White Chess King"),df=Rn("","White Chess Queen"),gf=Rn("","White Chess Rook"),pf=Rn("","White Chess Bishop"),mf=Rn("","White Chess Knight"),ff=Rn("","White Chess Pawn"),vf=Nn(uf.value+df.value+gf.value+pf.value+mf.value+ff.value,"White Chess Pieces",{width:"auto",king:uf,queen:df,rook:gf,bishop:pf,knight:mf,pawn:ff}),wf=Rn("","Black Chess King"),Bf=Rn("","Black Chess Queen"),yf=Rn("","Black Chess Rook"),Df=Rn("","Black Chess Bishop"),bf=Rn("","Black Chess Knight"),Cf=Rn("","Black Chess Pawn"),Mf=Nn(wf.value+Bf.value+yf.value+Df.value+bf.value+Cf.value,"Black Chess Pieces",{width:"auto",king:wf,queen:Bf,rook:yf,bishop:Df,knight:bf,pawn:Cf}),Pf=Nn(ff.value+Cf.value,"Chess Pawns",{width:"auto",white:ff,black:Cf}),If=Nn(gf.value+yf.value,"Chess Rooks",{width:"auto",white:gf,black:yf}),xf=Nn(pf.value+Df.value,"Chess Bishops",{width:"auto",white:pf,black:Df}),Sf=Nn(mf.value+bf.value,"Chess Knights",{width:"auto",white:mf,black:bf}),Ff=Nn(df.value+Bf.value,"Chess Queens",{width:"auto",white:df,black:Bf}),Ef=Nn(uf.value+wf.value,"Chess Kings",{width:"auto",white:uf,black:wf}),kf=Nn("Chess Pieces","Chess Pieces",{width:"auto",white:vf,black:Mf,pawns:Pf,rooks:If,bishops:xf,knights:Sf,queens:Ff,kings:Ef}),_f=Nn("Dice","Dice",{dice1:Rn("","Dice: Side 1"),dice2:Rn("","Dice: Side 2"),dice3:Rn("","Dice: Side 3"),dice4:Rn("","Dice: Side 4"),dice5:Rn("","Dice: Side 5"),dice6:Rn("","Dice: Side 6")}),Lf=Nn("All Icons","All Icons",{faces:Hc,love:cA,cartoon:kA,hands:Sl,bodyParts:gu,people:Er,gestures:Ra,inMotion:Cr,resting:Sr,roles:Go,fantasy:Xo,animals:Cu,plants:Pu,food:xu,flags:Lu,vehicles:Hd,clocks:zd,arrows:og,shapes:lu,buttons:Zg,zodiac:Yg,chess:kf,dice:_f,math:cp,games:Ap,sportsEquipment:lp,clothing:up,town:dp,music:gp,weather:fu,astro:pp,finance:mp,writing:fp,science:lf,tech:Em,mail:km,celebration:_m,tools:Lm,office:Tm,signs:Om,religion:Rm,household:Um,activities:Nm,travel:Hm,medieval:zm}),Tf=[];function Of(t){const e=[];return t.fontStyle&&"normal"!==t.fontStyle&&e.push(t.fontStyle),t.fontVariant&&"normal"!==t.fontVariant&&e.push(t.fontVariant),t.fontWeight&&"normal"!==t.fontWeight&&e.push(t.fontWeight),e.push(t.fontSize+"px"),e.push(t.fontFamily),e.join(" ")}async function Rf(t,e=null,i){if(-1===Tf.indexOf(t)){e=e||"The quick brown fox jumps over the lazy dog",i&&i(0,1,t);const s=await document.fonts.load(t,e);i&&i(1,1,t),0===s.length?console.warn(`Failed to load font "${t}". If this is a system font, just set the object's \`value\` property, instead of calling \`loadFontAndSetText\`.`):Tf.push(t)}}function Qf(t,e,i){return(1-i)*t+i*e}class Uf extends Event{constructor(){super("tick"),this.t=0,this.dt=0,this.sdt=0,Object.seal(this)}copy(t){this.t=t.t,this.dt=t.dt,this.sdt=t.sdt}set(t,e){this.t=t,this.dt=e,this.sdt=Qf(this.sdt,e,.01)}}class Nf extends g{constructor(t){super(),this._timer=null,this._frameTime=Number.MAX_VALUE,this._targetFPS=0,this.targetFrameRate=t,this._onTick=t=>{const e=new Uf;let i=t;this._onTick=t=>{t>i&&(e.t=t,e.dt=t-i,e.sdt=e.dt,i=t,this._onTick=t=>{let s=t-i;s<-1e3&&(i=t-this._frameTime,s=this._frameTime),s>0&&s>=this._frameTime&&(e.set(t,s),i=t,this.dispatchEvent(e))})}}}restart(){this.stop(),this.start()}get isRunning(){return null!=this._timer}stop(){this._timer=null,this.dispatchEvent(new Event("stopped"))}get targetFrameRate(){return this._targetFPS}set targetFrameRate(t){this._targetFPS=t,this._frameTime=1e3/t}}const Hf="tele.calla.chat";class zf{constructor(t,e,s){if(this.name=t,this.callback=e,!i(e))throw new Error("A function instance is required for this parameter");this.opts=s,Object.freeze(this)}apply(t){h(t)&&this.add(t)}add(t){t.addEventListener(this.name,this.callback,this.opts)}remove(t){t.removeEventListener(this.name,this.callback)}}function Gf(t,e){return new zf("click",t,e)}function jf(t,e){return new zf("input",t,e)}function Wf(t){return i(t.isOpen)&&i(t.setOpen)&&i(t.toggleOpen)&&i(t.show)&&i(t.hide)}function Vf(t){return Wf(t)?t.isOpen():"none"!==t.style.display}function Zf(t,e,i=""){Wf(t)?t.setOpen(e,i):e?Xf(t,i):Jf(t)}function Yf(t,e=""){Wf(t)?t.toggleOpen(e):Vf(t)?Jf(t,e):Xf(t)}function Xf(t,e=""){Wf(t)?t.show():t.style.display=e}function Jf(t,e=""){Wf(t)?t.hide(e):t.style.display="none"}function Kf(t,e,s,n,a){a=a||"",t.accessKey&&(a+=` <kbd>(ALT+${t.accessKey.toUpperCase()})</kbd>`),i(t.updateLabel)?t.updateLabel(e,s,n,a):t.innerHTML=(e?s:n)+a}const qf=y(!0),$f=y(!1);function tv(t,e){i(t.setLocked)?t.setLocked(e):e?qf.apply(t):$f.apply(t)}const ev=new d("toggleOptions"),iv=new d("tweet"),sv=new d("leave"),nv=new d("toggleFullscreen"),av=new d("toggleInstructions"),ov=new d("toggleUserDirectory"),rv=new d("toggleAudio"),hv=new d("toggleVideo"),cv=new d("changeDevices"),Av=new d("emote"),lv=new d("selectEmoji"),uv=new d("zoomChanged");class dv extends u{constructor(t,...e){super(),this.element=V(t,...e)}get id(){return this.element.id}get eventTarget(){return this.element}isForwardedEvent(t){return!0}addEventListener(t,e,i){this.isForwardedEvent(t)?this.eventTarget.addEventListener(t,e,i):super.addEventListener(t,e,i)}removeEventListener(t,e){this.isForwardedEvent(t)?this.eventTarget.removeEventListener(t,e):super.removeEventListener(t,e)}get style(){return this.element.style}get visible(){return null!==this.style.display}set visible(t){Zf(this.element,t)}get tagName(){return this.element.tagName}get disabled(){return!1}set disabled(t){}focus(){this.element.focus()}blur(){this.element.blur()}}const gv=y(!0),pv=y(!1);function mv(t,e,i,s,...n){return new fv(t,e,i,s,...n)}class fv extends dv{constructor(t,e,s,n,...a){if(super("select",M(t),...a),this._emptySelectionEnabled=!1,this._values=new Array,!i(s))throw new Error("makeID parameter must be a Function");if(!i(n))throw new Error("makeLabel parameter must be a Function");this.noSelectionText=e,this.makeID=t=>null!==t&&s(t)||null,this.makeLabel=t=>null!==t&&n(t)||"None",this.emptySelectionEnabled=!0,Object.seal(this)}render(){if(function(t){for(;t.lastChild;)t.lastChild.remove()}(this.element),0===this.values.length)this.element.append(it(this.noSelectionText)),gv.apply(this.element);else{this.emptySelectionEnabled&&this.element.append(it(this.noSelectionText));for(let t of this.values)this.element.append(it(O(this.makeID(t)),this.makeLabel(t)));pv.apply(this.element)}}get emptySelectionEnabled(){return this._emptySelectionEnabled}set emptySelectionEnabled(t){this._emptySelectionEnabled=t,this.render()}get values(){return this._values}set values(t){const e=this.selectedValue;this._values.splice(0,this._values.length,...t),this.render(),this.selectedValue=e}get options(){return this.element.options}get selectedIndex(){let t=this.element.selectedIndex;return this.emptySelectionEnabled&&--t,t}set selectedIndex(t){this.emptySelectionEnabled&&++t,this.element.selectedIndex=t}get selectedValue(){return 0<=this.selectedIndex&&this.selectedIndex<this.values.length?this.values[this.selectedIndex]:null}set selectedValue(t){this.selectedIndex=this.indexOf(t)}get selectedText(){const t=this.element.selectedOptions;return 1===t.length?t[0].textContent||t[0].innerText:""}set selectedText(t){const e=this.values.findIndex((e=>null!==t&&this.makeLabel(e)===t));this.selectedIndex=e}indexOf(t){return l(t)?-1:this.values.findIndex((e=>this.makeID(t)===this.makeID(e)))}contains(t){return this.indexOf(t)>=0}}const vv=new d("hidden"),wv=new d("shown");class Bv extends g{constructor(t){super(),this.element=K(M(t)),this.header=this.element.querySelector(".header"),this.content=this.element.querySelector(".content"),this.footer=this.element.querySelector(".footer");const e=this.element.querySelector(".dialogTitle > button.closeButton");e&&e.addEventListener("click",(()=>Jf(this)))}isOpen(){return"none"!==this.style.display}setOpen(t,e){this.style.display=t?e||"":"none"}toggleOpen(t){this.setOpen(!this.isOpen(),t)}get tagName(){return this.element.tagName}get disabled(){return!1}set disabled(t){}get style(){return this.element.style}appendChild(t){return this.element.appendChild(t)}append(...t){this.element.append(...t)}show(){Xf(this.element),this.dispatchEvent(wv)}async showAsync(){Xf(this),await m(this,"hidden")}hide(){Jf(this.element),this.dispatchEvent(vv)}}const yv=new d("audioInputChanged"),Dv=new d("audioOutputChanged"),bv=new d("videoInputChanged");function Cv(t,e,i,s){return l(i)&&(i=1),l(s)&&(s=1),new v("gridArea",`${e}/${t}/${e+s}/${t+i}`)}function Mv(t,e){return l(e)&&(e=1),new v("gridRow",`${t}/${t+e}`)}const Pv=H("grid");function Iv(...t){return U(Pv,(e=t.join(" "),new v("gridTemplateColumns",e)));var e}const xv=y(!0),Sv=y(!1);class Fv extends d{constructor(t){super("emojiSelected"),this.emoji=t}}const Ev=new d("emojiCanceled");const kv=new d("login");class _v extends d{constructor(t,e){super(t),this.button=e}}class Lv extends _v{constructor(t){super("gamepadButtonUp",t)}}class Tv extends _v{constructor(t){super("gamepadButtonDown",t)}}class Ov extends d{constructor(t,e){super(t),this.axis=e}}class Rv extends Ov{constructor(t){super("gamepadAxisMaxed",t)}}class Qv extends g{constructor(t){super(),this.lastButtons=new Array,this.buttons=new Array,this.axes=new Array,this.hapticActuators=new Array,this.btnDownEvts=new Array,this.btnUpEvts=new Array,this.btnState=new Array,this.axisThresholdMax=.9,this.axisThresholdMin=.1,this.axisMaxEvts=new Array,this.axisMaxed=new Array,this.sticks=new Array,this.id=t.id,this.displayId=t.displayId,this.connected=t.connected,this.hand=t.hand,this.pose=t.pose,this._isStick=e=>e%2==0&&e<t.axes.length-1;for(let e=0;e<t.buttons.length;++e)this.btnDownEvts[e]=new Tv(e),this.btnUpEvts[e]=new Lv(e),this.btnState[e]=!1,this.buttons[e]=t.buttons[e];for(let e=0;e<t.axes.length;++e)this.axisMaxEvts[e]=new Rv(e),this.axisMaxed[e]=!1,this._isStick(e)&&(this.sticks[e/2]={x:0,y:0}),this.axes[e]=t.axes[e];if(null!=t.hapticActuators)for(let e=0;e<t.hapticActuators.length;++e)this.hapticActuators[e]=t.hapticActuators[e];Object.seal(this)}update(t){this.connected=t.connected,this.hand=t.hand,this.pose=t.pose;for(let e=0;e<t.buttons.length;++e){const i=this.btnState[e],s=t.buttons[e].pressed;s!==i&&(this.btnState[e]=s,this.dispatchEvent((s?this.btnDownEvts:this.btnUpEvts)[e])),this.lastButtons[e]=this.buttons[e],this.buttons[e]=t.buttons[e]}for(let e=0;e<t.axes.length;++e){const i=this.axisMaxed[e],s=t.axes[e],n=Math.sign(s),a=Math.abs(s),o=a>=this.axisThresholdMax,r=a<=this.axisThresholdMin;o&&!i&&this.dispatchEvent(this.axisMaxEvts[e]),this.axes[e]=n*(o?1:r?0:a)}for(let t=0;t<this.axes.length-1;t+=2){const e=this.sticks[t/2];e.x=this.axes[t],e.y=this.axes[t+1]}if(null!=t.hapticActuators)for(let e=0;e<t.hapticActuators.length;++e)this.hapticActuators[e]=t.hapticActuators[e]}}const Uv="CallaSettings";class Nv extends Event{constructor(){super("inputBindingChanged")}}const Hv=new Nv;class zv extends g{constructor(){super(),this.bindings=new Map([["keyButtonUp","ArrowUp"],["keyButtonDown","ArrowDown"],["keyButtonLeft","ArrowLeft"],["keyButtonRight","ArrowRight"],["keyButtonEmote","e"],["keyButtonToggleAudio","a"],["keyButtonZoomOut","["],["keyButtonZoomIn","]"],["gpAxisLeftRight",0],["gpAxisUpDown",1],["gpButtonEmote",0],["gpButtonToggleAudio",1],["gpButtonZoomIn",6],["gpButtonZoomOut",7],["gpButtonUp",12],["gpButtonDown",13],["gpButtonLeft",14],["gpButtonRight",15]]);for(let t of this.bindings.keys())Object.defineProperty(this,t,{get:()=>this.bindings.get(t),set:e=>{this.bindings.has(t)&&e!==this.bindings.get(t)&&(this.bindings.set(t,e),this.dispatchEvent(Hv))}});Object.freeze(this)}get(t){return this.bindings.get(t)}set(t,e){this.bindings.set(t,e)}get keyButtonUp(){return this.bindings.get("keyButtonUp")}set keyButtonUp(t){this.checkedSet("keyButtonUp",t)}get keyButtonDown(){return this.bindings.get("keyButtonDown")}set keyButtonDown(t){this.checkedSet("keyButtonDown",t)}get keyButtonLeft(){return this.bindings.get("keyButtonLeft")}set keyButtonLeft(t){this.checkedSet("keyButtonLeft",t)}get keyButtonRight(){return this.bindings.get("keyButtonRight")}set keyButtonRight(t){this.checkedSet("keyButtonRight",t)}get keyButtonEmote(){return this.bindings.get("keyButtonEmote")}set keyButtonEmote(t){this.checkedSet("keyButtonEmote",t)}get keyButtonToggleAudio(){return this.bindings.get("keyButtonToggleAudio")}set keyButtonToggleAudio(t){this.checkedSet("keyButtonToggleAudio",t)}get keyButtonZoomOut(){return this.bindings.get("keyButtonZoomOut")}set keyButtonZoomOut(t){this.checkedSet("keyButtonZoomOut",t)}get keyButtonZoomIn(){return this.bindings.get("keyButtonZoomIn")}set keyButtonZoomIn(t){this.checkedSet("keyButtonZoomIn",t)}get gpAxisLeftRight(){return this.bindings.get("gpAxisLeftRight")}set gpAxisLeftRight(t){this.checkedSet("gpAxisLeftRight",t)}get gpAxisUpDown(){return this.bindings.get("gpAxisUpDown")}set gpAxisUpDown(t){this.checkedSet("gpAxisUpDown",t)}get gpButtonEmote(){return this.bindings.get("gpButtonEmote")}set gpButtonEmote(t){this.checkedSet("gpButtonEmote",t)}get gpButtonToggleAudio(){return this.bindings.get("gpButtonToggleAudio")}set gpButtonToggleAudio(t){this.checkedSet("gpButtonToggleAudio",t)}get gpButtonZoomIn(){return this.bindings.get("gpButtonZoomIn")}set gpButtonZoomIn(t){this.checkedSet("gpButtonZoomIn",t)}get gpButtonZoomOut(){return this.bindings.get("gpButtonZoomOut")}set gpButtonZoomOut(t){this.checkedSet("gpButtonZoomOut",t)}get gpButtonUp(){return this.bindings.get("gpButtonUp")}set gpButtonUp(t){this.checkedSet("gpButtonUp",t)}get gpButtonDown(){return this.bindings.get("gpButtonDown")}set gpButtonDown(t){this.checkedSet("gpButtonDown",t)}get gpButtonLeft(){return this.bindings.get("gpButtonLeft")}set gpButtonLeft(t){this.checkedSet("gpButtonLeft",t)}get gpButtonRight(){return this.bindings.get("gpButtonRight")}set gpButtonRight(t){this.checkedSet("gpButtonRight",t)}checkedSet(t,e){this.bindings.has(t)&&e!==this.bindings.get(t)&&(this.bindings.set(t,e),this.dispatchEvent(Hv))}toJSON(){return{keyButtonUp:this.keyButtonUp,keyButtonDown:this.keyButtonDown,keyButtonLeft:this.keyButtonLeft,keyButtonRight:this.keyButtonRight,keyButtonEmote:this.keyButtonEmote,keyButtonToggleAudio:this.keyButtonToggleAudio,keyButtonZoomOut:this.keyButtonZoomOut,keyButtonZoomIn:this.keyButtonZoomIn,gpAxisLeftRight:this.gpAxisLeftRight,gpAxisUpDown:this.gpAxisUpDown,gpButtonEmote:this.gpButtonEmote,gpButtonToggleAudio:this.gpButtonToggleAudio,gpButtonZoomIn:this.gpButtonZoomIn,gpButtonZoomOut:this.gpButtonZoomOut,gpButtonUp:this.gpButtonUp,gpButtonDown:this.gpButtonDown,gpButtonLeft:this.gpButtonLeft,gpButtonRight:this.gpButtonRight}}copy(t){this.keyButtonUp=t.keyButtonUp,this.keyButtonDown=t.keyButtonDown,this.keyButtonLeft=t.keyButtonLeft,this.keyButtonRight=t.keyButtonRight,this.keyButtonEmote=t.keyButtonEmote,this.keyButtonToggleAudio=t.keyButtonToggleAudio,this.keyButtonZoomOut=t.keyButtonZoomOut,this.keyButtonZoomIn=t.keyButtonZoomIn,this.gpAxisLeftRight=t.gpAxisLeftRight,this.gpAxisUpDown=t.gpAxisUpDown,this.gpButtonEmote=t.gpButtonEmote,this.gpButtonToggleAudio=t.gpButtonToggleAudio,this.gpButtonZoomIn=t.gpButtonZoomIn,this.gpButtonZoomOut=t.gpButtonZoomOut,this.gpButtonUp=t.gpButtonUp,this.gpButtonDown=t.gpButtonDown,this.gpButtonLeft=t.gpButtonLeft,this.gpButtonRight=t.gpButtonRight}fix(t){this.bindings.has("keyButtonUp")||(this.keyButtonUp=t.keyButtonUp),this.bindings.has("keyButtonDown")||(this.keyButtonDown=t.keyButtonDown),this.bindings.has("keyButtonLeft")||(this.keyButtonLeft=t.keyButtonLeft),this.bindings.has("keyButtonRight")||(this.keyButtonRight=t.keyButtonRight),this.bindings.has("keyButtonEmote")||(this.keyButtonEmote=t.keyButtonEmote),this.bindings.has("keyButtonToggleAudio")||(this.keyButtonToggleAudio=t.keyButtonToggleAudio),this.bindings.has("keyButtonZoomOut")||(this.keyButtonZoomOut=t.keyButtonZoomOut),this.bindings.has("keyButtonZoomIn")||(this.keyButtonZoomIn=t.keyButtonZoomIn),this.bindings.has("gpAxisLeftRight")||(this.gpAxisLeftRight=t.gpAxisLeftRight),this.bindings.has("gpAxisUpDown")||(this.gpAxisUpDown=t.gpAxisUpDown),this.bindings.has("gpButtonEmote")||(this.gpButtonEmote=t.gpButtonEmote),this.bindings.has("gpButtonToggleAudio")||(this.gpButtonToggleAudio=t.gpButtonToggleAudio),this.bindings.has("gpButtonZoomIn")||(this.gpButtonZoomIn=t.gpButtonZoomIn),this.bindings.has("gpButtonZoomOut")||(this.gpButtonZoomOut=t.gpButtonZoomOut),this.bindings.has("gpButtonUp")||(this.gpButtonUp=t.gpButtonUp),this.bindings.has("gpButtonDown")||(this.gpButtonDown=t.gpButtonDown),this.bindings.has("gpButtonLeft")||(this.gpButtonLeft=t.gpButtonLeft),this.bindings.has("gpButtonRight")||(this.gpButtonRight=t.gpButtonRight)}}const Gv=Object.freeze({keyButtonUp:"ArrowUp",keyButtonDown:"ArrowDown",keyButtonLeft:"ArrowLeft",keyButtonRight:"ArrowRight",keyButtonEmote:"e",keyButtonToggleAudio:"a",keyButtonZoomOut:"[",keyButtonZoomIn:"]",gpAxisLeftRight:0,gpAxisUpDown:1,gpButtonEmote:0,gpButtonToggleAudio:1,gpButtonZoomIn:6,gpButtonZoomOut:7,gpButtonUp:12,gpButtonDown:13,gpButtonLeft:14,gpButtonRight:15});function jv(t,e,i,...s){return new Wv(t,e,i,...s)}class Wv extends dv{constructor(t,e,i,...s){super("div"),this.label=tt(D(t),i),this.input=$(T(e),...s),this.element.append(this.label,this.input),this.element.style.display="grid",Object.seal(this)}get eventTarget(){return this.input}get value(){return this.input.value}set value(t){this.input.value=t}get checked(){return this.input.checked}set checked(t){this.input.checked=t}setLocked(t){tv(this.input,t)}}const Vv=new d("select");function Zv(t,e,...i){return new Yv(t,e,...i)}class Yv extends dv{constructor(t,e,...i){super("div",M(t),st(...i)),this.button=X(M(t+"Btn"),Gf((()=>this.dispatchEvent(Vv))),e)}isForwardedEvent(t){return"select"!==t}get visible(){return super.visible}set visible(t){super.visible=t,this.button.className=t?"tabSelected":"tabUnselected",this.element.className=t?"tabSelected":"tabUnselected"}}class Xv extends Event{constructor(){super("avatarURLChanged")}}class Jv extends Event{constructor(){super("gamepadChanged")}}class Kv extends Event{constructor(){super("selectAvatar")}}class qv extends Event{constructor(){super("fontSizeChanged")}}class $v extends Event{constructor(){super("inputBindingChanged")}}class tw extends Event{constructor(){super("audioPropertiesChanged")}}class ew extends Event{constructor(){super("toggleDrawHearing")}}class iw extends Event{constructor(){super("toggleVideo")}}class sw extends Event{constructor(){super("gamepadButtonUp"),this.button=0}}class nw extends Event{constructor(){super("gamepadAxisMaxed"),this.axis=0}}const aw=R("7em"),ow=R("3em"),rw=new Xv,hw=new Jv,cw=new Kv,Aw=new qv,lw=new $v,uw=new tw,dw=new ew,gw=new iw,pw=new sw,mw=new nw,fw=y(!0),vw=y(!1);const ww=N("lightgreen"),Bw=N("rgba(65, 255, 202, 0.25)"),yw=N("transparent");class Dw extends Event{constructor(){super("warpTo"),this.id=null}}const bw=new Dw;function Cw(t,e,i){return t*(i-e)+e}let Mw;if(!Object.prototype.hasOwnProperty.call(CanvasRenderingContext2D.prototype,"getTransform")&&Object.prototype.hasOwnProperty.call(CanvasRenderingContext2D.prototype,"mozCurrentTransform")){class t{constructor(t){this.a=t[0],this.b=t[1],this.c=t[2],this.d=t[3],this.e=t[4],this.f=t[5]}get is2D(){return!0}get isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}transformPoint(t){return void 0!==t&&void 0!==t.x&&void 0!==t.y?{x:t.x*this.a+t.y*this.c+this.e,y:t.x*this.b+t.y*this.d+this.f}:null}}Mw=e=>new t(e.mozCurrentTransform)}else Mw=t=>t.getTransform();function Pw(t){return Mw(t)}const Iw=new d("redrawn");class xw extends g{constructor(){super(),this._minWidth=null,this._maxWidth=null,this._minHeight=null,this._maxHeight=null,this._strokeColor=null,this._strokeSize=null,this._bgColor=null,this._value=null,this._scale=1,this._fillColor="black",this._textDirection="horizontal",this._wrapWords=!0,this._fontStyle="normal",this._fontVariant="normal",this._fontWeight="normal",this._fontFamily="sans-serif",this._fontSize=20,this._padding={top:0,right:0,bottom:0,left:0},this._canvas=pt(10,10);const t=this.canvas.getContext("2d");if(!t)throw new Error("Couldn't create a graphics context for the TextImage canvas.");this._g=t}async loadFontAndSetText(t=null){const e=Of(this);await Rf(e,t),this.value=t}get scale(){return this._scale}set scale(t){this.scale!==t&&(this._scale=t,this.redraw())}get minWidth(){return this._minWidth}set minWidth(t){this.minWidth!==t&&(this._minWidth=t,this.redraw())}get maxWidth(){return this._maxWidth}set maxWidth(t){this.maxWidth!==t&&(this._maxWidth=t,this.redraw())}get minHeight(){return this._minHeight}set minHeight(t){this.minHeight!==t&&(this._minHeight=t,this.redraw())}get maxHeight(){return this._maxHeight}set maxHeight(t){this.maxHeight!==t&&(this._maxHeight=t,this.redraw())}get canvas(){return this._canvas}get width(){return this.canvas.width/this.scale}get height(){return this.canvas.height/this.scale}get padding(){return this._padding}set padding(t){if(t instanceof Array)throw new Error("Invalid padding");this.padding.top===t.top&&this.padding.right==t.right&&this.padding.bottom==t.bottom&&this.padding.left==t.left||(this._padding=t,this.redraw())}get wrapWords(){return this._wrapWords}set wrapWords(t){this.wrapWords!==t&&(this._wrapWords=t,this.redraw())}get textDirection(){return this._textDirection}set textDirection(t){this.textDirection!==t&&(this._textDirection=t,this.redraw())}get fontStyle(){return this._fontStyle}set fontStyle(t){this.fontStyle!==t&&(this._fontStyle=t,this.redraw())}get fontVariant(){return this._fontVariant}set fontVariant(t){this.fontVariant!==t&&(this._fontVariant=t,this.redraw())}get fontWeight(){return this._fontWeight}set fontWeight(t){this.fontWeight!==t&&(this._fontWeight=t,this.redraw())}get fontSize(){return this._fontSize}set fontSize(t){this.fontSize!==t&&(this._fontSize=t,this.redraw())}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.redraw())}get fillColor(){return this._fillColor}set fillColor(t){this.fillColor!==t&&(this._fillColor=t,this.redraw())}get strokeColor(){return this._strokeColor}set strokeColor(t){this.strokeColor!==t&&(this._strokeColor=t,this.redraw())}get strokeSize(){return this._strokeSize}set strokeSize(t){this.strokeSize!==t&&(this._strokeSize=t,this.redraw())}get bgColor(){return this._bgColor}set bgColor(t){this.bgColor!==t&&(this._bgColor=t,this.redraw())}get value(){return this._value}set value(t){this.value!==t&&(this._value=t,this.redraw())}draw(t,e,i){this._canvas.width>0&&this._canvas.height>0&&t.drawImage(this._canvas,e,i,this.width,this.height)}split(t){return this.wrapWords?t.split(" ").join("\n").replace(/\r\n/,"\n").split("\n"):t.replace(/\r\n/,"\n").split("\n")}redraw(){if(this._g.clearRect(0,0,this.canvas.width,this.canvas.height),this.fontFamily&&this.fontSize&&(this.fillColor||this.strokeColor&&this.strokeSize)&&this.value){const t=this.textDirection&&0===this.textDirection.indexOf("vertical"),e=null!=this.minWidth||null!=this.maxWidth||null!=this.minHeight||null!=this.maxHeight,i=((this.minWidth||0)-this.padding.right-this.padding.left)*this.scale,s=((this.maxWidth||4096)-this.padding.right-this.padding.left)*this.scale,n=((this.minHeight||0)-this.padding.top-this.padding.bottom)*this.scale,o=((this.maxHeight||4096)-this.padding.top-this.padding.bottom)*this.scale,r=t?n:i,h=t?o:s,c=t?i:n,A=t?s:o,l=[],u=this.split(this.value);let d=0,g=0,p=0,m=!1,f=!1,v=1e4,w=0,B=Ct(this.fontSize*this.scale,w,v),y=null,D=Number.MAX_VALUE;do{const t=this.fontSize;this._fontSize=B;const i=Of(this);this._fontSize=t,this._g.textAlign="center",this._g.textBaseline="middle",this._g.font=i,g=0,p=0;for(const t of u){const i=this._g.measureText(t);g=Math.max(g,i.width),p+=B,a(i.actualBoundingBoxLeft)&&a(i.actualBoundingBoxRight)&&a(i.actualBoundingBoxAscent)&&a(i.actualBoundingBoxDescent)&&(e||(g=i.actualBoundingBoxLeft+i.actualBoundingBoxRight,p=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent,d=(i.actualBoundingBoxLeft-g/2)/2))}if(e){const t=g-r,e=g-h,i=p-c,s=p-A,n=Math.abs(t),a=Math.abs(e),o=Math.abs(i),u=Math.abs(s);m=e>1||s>1,f=t<-1&&i<-1;const d=Math.min(n,Math.min(a,Math.min(o,u)));d<D&&(D=d,y=this._g.font),(m||f)&&l.indexOf(this._g.font)>-1&&y&&(this._g.font=y,m=!1,f=!1),m?(v=B,B=(w+B)/2):f&&(w=B,B=(B+v)/2)}l.push(this._g.font)}while(m||f);e&&(g<r?g=r:g>h&&(g=h),p<c?p=c:p>A&&(p=A));const b=g+this.scale*(this.padding.right+this.padding.left),C=p+this.scale*(this.padding.top+this.padding.bottom);try{Bt(this._g,b,C)}catch(t){throw console.error(t),t}this.bgColor?(this._g.fillStyle=this.bgColor,this._g.fillRect(0,0,this.canvas.width,this.canvas.height)):this._g.clearRect(0,0,this.canvas.width,this.canvas.height),this.strokeColor&&this.strokeSize&&(this._g.lineWidth=this.strokeSize*this.scale,this._g.strokeStyle=this.strokeColor),this.fillColor&&(this._g.fillStyle=this.fillColor);const M=.5*(u.length-1);for(let t=0;t<u.length;++t){const e=u[t],i=(t-M)*B,s=d+this.canvas.width/2,n=i+this.canvas.height/2;this.strokeColor&&this.strokeSize&&this._g.strokeText(e,s,n),this.fillColor&&this._g.fillText(e,s,n)}if(t){const t=pt(this.canvas.height,this.canvas.width),e=t.getContext("2d");e?(e.translate(t.width/2,t.height/2),"vertical"===this.textDirection||"vertical-left"===this.textDirection?e.rotate(Math.PI/2):"vertical-right"===this.textDirection&&e.rotate(-Math.PI/2),e.translate(-this.canvas.width/2,-this.canvas.height/2),e.drawImage(this.canvas,0,0),Bt(this._g,t.width,t.height)):console.warn("Couldn't rotate the TextImage"),this._g.drawImage(t,0,0)}this.dispatchEvent(Iw)}}}class Sw{constructor(t,e,i){this.emoji=t,this.x=e,this.y=i,this.life=1,this.width=-1,this.emoteText=null,this.dx=Math.random()-.5,this.dy=.5*-Math.random()-.5,this.emoteText=new xw,this.emoteText.fontFamily="Noto Color Emoji",this.emoteText.value=t.value}isDead(){return this.life<=.01}update(t){this.life-=t/3,this.dx*=.99,this.dy*=.99,this.x+=this.dx*t,this.y+=this.dy*t}drawShadow(t,e){const i=Pw(t).a;t.save(),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowOffsetX=3*i,t.shadowOffsetY=3*i,t.shadowBlur=3*i,this.drawEmote(t,e),t.restore()}drawEmote(t,e){const i=t.globalAlpha,s=Pw(t).a;t.globalAlpha=this.life,this.emoteText.fontSize=e.tileHeight/2,this.emoteText.scale=s,this.emoteText.draw(t,this.x*e.tileWidth-this.width/2,this.y*e.tileHeight),t.globalAlpha=i}}class Fw extends d{constructor(t){super(t),this.pointerType=null,this.pointerID=null,this.x=0,this.y=0,this.dx=0,this.dy=0,this.dz=0,this.u=0,this.v=0,this.du=0,this.dv=0,this.buttons=0,this.dragDistance=0,Object.seal(this)}}class Ew extends d{constructor(t){super("inputTypeChanging"),this.newInputType=t,Object.freeze(this)}}class kw{constructor(t){if("wheel"!==t.type){const e=t;this.type=e.pointerType,this.id=e.pointerId}else this.type="mouse",this.id=0;this.buttons=t.buttons,this.moveDistance=0,this.dragDistance=0,this.x=t.offsetX,this.y=t.offsetY,this.dx=t.movementX,this.dy=t.movementY,Object.seal(this)}}const _w=new Fw("pointerdown"),Lw=new Fw("pointerup"),Tw=new Fw("click"),Ow=new Fw("move"),Rw=new Fw("drag");class Qw extends g{constructor(t){super(),this.pointers=new Map,this.currentInputType=null;let e=!0;const i=(e,i,s)=>{e.pointerType=i.type,e.pointerID=i.id,e.buttons=i.buttons,e.x=i.x,e.y=i.y,e.u=Cw(Bi(e.x,0,t.clientWidth),-1,1),e.v=Cw(Bi(e.y,0,t.clientHeight),-1,1),e.dx=i.dx,e.dy=i.dy,e.dz=s,e.du=2*e.dx/t.clientWidth,e.dv=2*e.dy/t.clientHeight,e.dragDistance=i.dragDistance,this.dispatchEvent(e)},s=t=>{const e=this.pointers.get(t.id);return e&&(t.dragDistance=e.dragDistance,document.pointerLockElement&&(t.x=e.x+t.dx,t.y=e.y+t.dy)),t.moveDistance=Math.sqrt(t.dx*t.dx+t.dy*t.dy),this.pointers.set(t.id,t),e};t.addEventListener("wheel",(t=>{if(!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)){t.preventDefault();const e=new kw(t);s(e);const n=-t.deltaY*(We?1:.02);i(Ow,e,n)}}),{passive:!1}),t.addEventListener("pointerdown",(t=>{const n=this.pressCount,a=new kw(t);s(a);const o=this.pressCount;a.type!==this.currentInputType&&(this.dispatchEvent(new Ew(a.type)),this.currentInputType=a.type),i(_w,a,0),e=0===n&&1===o}));t.addEventListener("pointermove",(t=>{const n=this.pinchDistance,a=new kw(t),o=s(a),r=this.pressCount,h=((t,i)=>{if(null!==t&&null!==i)return e=!1,(i-t)/10;return 0})(n,this.pinchDistance);i(Ow,a,h),1===r&&1===a.buttons&&o&&o.buttons===a.buttons&&(a.dragDistance+=a.moveDistance,a.dragDistance>5&&(e=!1,i(Rw,a,0)))})),t.addEventListener("pointerup",(t=>{const n=new kw(t),a=s(n);n.buttons=a.buttons,i(Lw,n,0),e&&i(Tw,n,0),n.dragDistance=0,"touch"===n.type&&this.pointers.delete(n.id)})),t.addEventListener("contextmenu",(t=>{t.preventDefault()})),t.addEventListener("pointercancel",(t=>{this.pointers.has(t.pointerId)&&this.pointers.delete(t.pointerId)}))}get primaryPointer(){for(let t of this.pointers.values())return t;return null}getPointerCount(t){let e=0;for(const i of this.pointers.values())i.type===t&&++e;return e}get pressCount(){let t=0;for(let e of this.pointers.values())e.buttons>0&&++t;return t}get pinchDistance(){if(2!==this.pressCount)return null;let t,e;for(let i of this.pointers.values())if(1===i.buttons)if(t){if(e)break;e=i}else t=i;const i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}}function Uw(t){let e=t;const i=new Array;for(;e.parent;)i.unshift(e),e=e.parent;return i}function Nw(t,e,i,s){t.cleanDirty();const n=(s=s||{}).heuristic||Hw.manhattan,a=s.closest||!1,o=new Ww((function(t){return t.f}));let r=e;for(e.h=n(e,i),t.markDirty(e),o.push(e);o.size()>0;){const e=o.pop();if(e===i)return Uw(e);e.closed=!0;const s=t.neighbors(e);for(const h of s){if(h.closed||h.isWall())continue;const s=e.g+h.getCost(e),c=h.visited;(!c||s<h.g)&&(h.visited=!0,h.parent=e,h.h=h.h||n(h,i),h.g=s,h.f=h.g+h.h,t.markDirty(h),a&&(h.h<r.h||h.h===r.h&&h.g<r.g)&&(r=h),c?o.rescoreElement(h):o.push(h))}}return a?Uw(r):[]}const Hw={manhattan:(t,e)=>Math.abs(e.x-t.x)+Math.abs(e.y-t.y),diagonal(t,e){const i=Math.sqrt(2),s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return 1*(s+n)+(i-2)*Math.min(s,n)}};function zw(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}class Gw{constructor(t,e){this.dirtyNodes=new Array,this.grid=null,this.diagonal=!0,e&&(this.diagonal=!1!==e.diagonal),this.nodes=new Array,this.grid=new Array;for(let e=0;e<t.length;e++){const i=t[e];this.grid[e]=new Array(i.length);for(let t=0;t<i.length;t++){const s=new jw(e,t,i[t]);this.grid[e][t]=s,this.nodes.push(s)}}this.init()}init(){Yt(this.dirtyNodes);for(let t=0;t<this.nodes.length;t++)zw(this.nodes[t])}cleanDirty(){for(let t=0;t<this.dirtyNodes.length;t++)zw(this.dirtyNodes[t]);Yt(this.dirtyNodes)}markDirty(t){this.dirtyNodes.push(t)}neighbors(t){const e=[],i=t.x,s=t.y,n=this.grid;return n[i-1]&&n[i-1][s]&&e.push(n[i-1][s]),n[i+1]&&n[i+1][s]&&e.push(n[i+1][s]),n[i]&&n[i][s-1]&&e.push(n[i][s-1]),n[i]&&n[i][s+1]&&e.push(n[i][s+1]),this.diagonal&&(n[i-1]&&n[i-1][s-1]&&e.push(n[i-1][s-1]),n[i+1]&&n[i+1][s-1]&&e.push(n[i+1][s-1]),n[i-1]&&n[i-1][s+1]&&e.push(n[i-1][s+1]),n[i+1]&&n[i+1][s+1]&&e.push(n[i+1][s+1])),e}toString(){const t=[],e=this.grid;for(let i=0;i<e.length;i++){const s=[],n=e[i];for(let t=0;t<n.length;t++)s.push(n[t].weight);t.push(s.join(" "))}return t.join("\n")}}class jw{constructor(t,e,i){this.x=t,this.y=e,this.weight=i,this.f=0,this.g=0,this.h=0,this.visited=!1,this.closed=!1,this.parent=null}toString(){return`[${this.x} ${this.y}]`}getCost(t){return t&&t.x!=this.x&&t.y!=this.y?1.41421*this.weight:this.weight}isWall(){return 0===this.weight}}class Ww{constructor(t){this.scoreFunction=t,this.content=new Array}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){const t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t}remove(t){const e=this.content.indexOf(t),i=this.content.pop();e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){const e=this.content[t];for(;t>0;){const i=(t+1>>1)-1,s=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(s)))break;this.content[i]=e,this.content[t]=s,t=i}}bubbleUp(t){const e=this.content.length,i=this.content[t],s=this.scoreFunction(i);for(;;){const n=t+1<<1,a=n-1;let o,r=null;if(a<e){const t=this.content[a];o=this.scoreFunction(t),o<s&&(r=a)}if(n<e){const t=this.content[n];this.scoreFunction(t)<(null===r?s:o)&&(r=n)}if(null===r)break;this.content[t]=this.content[r],this.content[r]=i,t=r}}}class Vw{constructor(t,e){this.url=t,this.fetcher=e,this.name=null,this.tileWidth=0,this.tileHeight=0,this.tilesPerRow=0,this.tileCount=0,this.image=null,this.collision=new Map}async load(){const t=await this.fetcher.getXml(this.url.href),e=t.querySelector("image").getAttribute("source"),i=new URL(e,this.url),s=t.querySelectorAll("tile");for(let t=0;t<s.length;++t){const e=s[t],i=parseInt(e.getAttribute("id"),10),n=e.querySelector("properties > property[name='Collision']").getAttribute("value");this.collision.set(i,"true"===n)}this.name=t.getAttribute("name"),this.tileWidth=parseInt(t.getAttribute("tilewidth"),10),this.tileHeight=parseInt(t.getAttribute("tileheight"),10),this.tileCount=parseInt(t.getAttribute("tilecount"),10),this.image=await this.fetcher.getImage(i.href)}isClear(t){return!this.collision.get(t-1)}draw(t,e,i,s){if(e>0){const n=e-1,a=this.tileWidth*(n%this.tilesPerRow),o=this.tileHeight*Math.floor(n/this.tilesPerRow),r=i*this.tileWidth,h=s*this.tileHeight;t.drawImage(this.image,a,o,this.tileWidth,this.tileHeight,r,h,this.tileWidth,this.tileHeight)}}}class Zw{constructor(t,e){this.fetcher=e,this._tileWidth=0,this._tileHeight=0,this._layers=0,this._width=0,this._height=0,this._offsetX=0,this._offsetY=0,this._layerImages=new Array,this._url=null,this._tileset=null,this._tiles=null,this._graph=null,this._url=new URL(`data/tilemaps/${t}.tmx`,document.baseURI)}async load(){const t=await this.fetcher.getXml(this._url.href),e=parseInt(t.getAttribute("width"),10),i=parseInt(t.getAttribute("height"),10),s=parseInt(t.getAttribute("tilewidth"),10),n=parseInt(t.getAttribute("tileheight"),10),a=t.querySelector("tileset").getAttribute("source"),o=t.querySelectorAll("layer > data");this._layers=o.length,this._width=e,this._height=i,this._offsetX=-Math.floor(e/2),this._offsetY=-Math.floor(i/2),this._tileWidth=s,this._tileHeight=n,this._tiles=[];for(let t=0;t<o.length;++t){const i=o[t].innerHTML.replace(" ","").replace("\t","").replace("\n","").replace("\r","").split(",").map((t=>parseInt(t,10))),s=[];let n=[];for(let t of i)n.push(t),n.length===e&&(s.push(n),n=[]);n.length>0&&s.push(n),this._tiles.push(s)}this._tileset=new Vw(new URL(a,this._url),this.fetcher),await this._tileset.load(),this._tileWidth=this._tileset.tileWidth,this._tileHeight=this._tileset.tileHeight;for(let t=0;t<this._layers;++t){const e=pt(this.width*this.tileWidth,this.height*this.tileHeight);this._layerImages.push(e);const i=e.getContext("2d"),s=this._tiles[t];for(let t=0;t<this.height;++t){const e=s[t];for(let s=0;s<this.width;++s){const n=e[s];this._tileset.draw(i,n,s,t)}}}let r=[];for(let t of this._tiles[0]){let e=[];for(let i of t)this._tileset.isClear(i)?e.push(1):e.push(0);r.push(e)}this._graph=new Gw(r,{diagonal:!0})}get width(){return this._width}get height(){return this._height}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}isInBounds(t,e){return 0<=t&&t<this.width&&0<=e&&e<this.height}getGridNode(t,e){return t-=this._offsetX,e-=this._offsetY,t=Math.round(t),e=Math.round(e),this.isInBounds(t,e)?this._graph.grid[e][t]:null}draw(t){t.save(),t.translate(this._offsetX*this.tileWidth,this._offsetY*this.tileHeight);for(let e of this._layerImages)t.drawImage(e,0,0);t.restore()}searchPath(t,e){return Nw(this._graph,t,e).map((t=>({x:t.y+this._offsetX,y:t.x+this._offsetY})))}isClear(t,e,i){return t-=this._offsetX,e-=this._offsetY,t=Math.round(t),e=Math.round(e),t<0||this.width<=t||e<0||this.height<=e||this._tileset&&this._tileset.isClear(this._tiles[0][e][t])||i&&i.canSwim}getClearTile(t,e,i,s,n){const a=t+i,o=e+s,r=t<a?1:-1,h=e<o?1:-1;let c=((i=Math.abs(a-t))>(s=Math.abs(o-e))?i:-s)/2;for(;t!==a||e!==o;){const a=c;if(a>-i){if(!this.isClear(t+r,e,n))break;c-=s,t+=r}if(a<s){if(!this.isClear(t,e+h,n))break;c+=i,e+=h}}return{x:t,y:e}}getClearTileNear(t,e,i,s){for(let n=1;n<=i;++n)for(let i=-n;i<=n;++i){const a=n-Math.abs(i),o=t+i,r=e+a,h=e-a;if(this.isClear(o,r,s))return{x:o,y:r};if(this.isClear(o,h,s))return{x:o,y:h}}return{x:t,y:e}}}var Yw;!function(t){t.None="none",t.Emoji="emoji",t.Photo="photo",t.Video="video"}(Yw||(Yw={}));class Xw{constructor(t,e){this.mode=t,this.canSwim=e,this.element=pt(128,128),this.g=this.element.getContext("2d")}draw(t,e,i,s){const n=this.element.width/this.element.height,a=n>1?e:n*i,o=n>1?e/n:i,r=(e-a)/2,h=(i-o)/2;t.drawImage(this.element,r,h,a,o)}}class Jw extends Xw{constructor(t){super(Yw.Emoji,function(t){return dr.contains(t)||gr.contains(t)||pr.contains(t)||Ea.contains(t)}(t)),this.value=t;const e=new xw;e.fillColor=t.color||"black",e.fontFamily="Noto Color Emoji",e.fontSize=256,e.value=this.value,Bt(this.g,e.width,e.height),e.draw(this.g,0,0)}}class Kw extends Xw{constructor(t){super(Yw.Photo,!1);const e=new Image;e.addEventListener("load",(()=>{const t=(e.width-e.height)/2,i=Math.max(0,t),s=Math.max(0,-t),n=Math.min(e.width,e.height);Bt(this.g,n,n),this.g.drawImage(e,i,s,n,n,0,0,n,n)})),t instanceof URL?this.url=t.href:this.url=t,e.src=this.url}}class qw extends Xw{constructor(t){if(super(Yw.Video,!1),t instanceof HTMLVideoElement)this.video=t;else{if(!(t instanceof MediaStream))throw new Error("Can only create a video avatar from an HTMLVideoElement or MediaStream.");this.video=function(...t){return V("video",...t)}(w,F,x,function(t){return new v("volume",t,"audio","video")}(0),k(t))}Ve||(this.video.play(),m(this.video,"canplay").then((()=>this.video.play())))}draw(t,e,i,s){if(this.video.videoWidth>0&&this.video.videoHeight>0){const t=(this.video.videoWidth-this.video.videoHeight)/2,e=Math.max(0,t),i=Math.max(0,-t),n=Math.min(this.video.videoWidth,this.video.videoHeight);Bt(this.g,n,n),this.g.save(),s&&(this.g.translate(n,0),this.g.scale(-1,1)),this.g.drawImage(this.video,e,i,n,n,0,0,n,n),this.g.restore()}super.draw(t,e,i,s)}}class $w extends d{constructor(t){super("userMoved"),this.id=t,this.x=0,this.y=0}}const tB=new xw,eB=new xw;tB.fontFamily="Noto Color Emoji",tB.value=em.value,eB.fontFamily="Noto Color Emoji",eB.value=sm.value;class iB extends g{constructor(t,e,i,s){super(),this.id=t,this.pose=i,this.isMe=s,this.audioMuted=!1,this.videoMuted=!0,this.isActive=!1,this.stackUserCount=1,this.stackIndex=0,this.stackAvatarHeight=0,this.stackAvatarWidth=0,this.stackOffsetX=0,this.stackOffsetY=0,this.visible=!0,this._displayName=null,this._avatarVideo=null,this._avatarImage=null,this._avatarEmoji=null,this.userMovedEvt=new $w(t),this.label=s?"(Me)":`(${this.id})`,this.setAvatarEmoji(Nc.value),this.lastPositionRequestTime=performance.now()/1e3-1,this.userNameText=new xw,this.userNameText.fillColor="white",this.userNameText.fontSize=128,this.displayName=e,Object.seal(this)}get x(){return this.pose.current.p[0]}get y(){return this.pose.current.p[2]}get gridX(){return this.pose.end.p[0]}get gridY(){return this.pose.end.p[2]}setAvatar(t){switch(t.mode){case Yw.Emoji:this.setAvatarEmoji(t.avatar);break;case Yw.Photo:this.setAvatarImage(t.avatar);break;case Yw.Video:this.setAvatarVideo(t.avatar);break;default:c(t)}}serialize(){return{id:this.id,avatarMode:this.avatarMode,avatarID:this.avatarID}}get avatarVideo(){return this._avatarVideo}setAvatarVideo(t){this._avatarVideo=t?new qw(t):null}get avatarImage(){return this._avatarImage}setAvatarImage(t){s(t)&&t.length>0?this._avatarImage=new Kw(t):this._avatarImage=null}get avatarEmoji(){return this._avatarEmoji}setAvatarEmoji(t){this._avatarEmoji=t?new Jw(t):null}get avatarMode(){return this._avatarVideo?Yw.Video:this._avatarImage?Yw.Photo:this._avatarEmoji?Yw.Emoji:Yw.None}get avatarID(){switch(this.avatarMode){case Yw.Emoji:return this.avatarEmoji.value;case Yw.Photo:return this.avatarImage.url;case Yw.Video:case Yw.None:return null;default:c(this.avatarMode)}}get avatar(){switch(this.avatarMode){case Yw.Emoji:return this._avatarEmoji;case Yw.Photo:return this._avatarImage;case Yw.Video:return this._avatarVideo;case Yw.None:return null;default:c(this.avatarMode)}}get displayName(){return this._displayName||this.label}set displayName(t){this._displayName=t,this.userNameText.value=this.displayName}moveTo(t,e){this.isMe&&(this.userMovedEvt.x=t,this.userMovedEvt.y=e,this.dispatchEvent(this.userMovedEvt))}update(t,e){this.stackUserCount=0,this.stackIndex=0;for(let t of e.values())t.gridX===this.gridX&&t.gridY===this.gridY&&(t.id===this.id&&(this.stackIndex=this.stackUserCount),++this.stackUserCount);this.stackAvatarWidth=t.tileWidth-5*(this.stackUserCount-1),this.stackAvatarHeight=t.tileHeight-5*(this.stackUserCount-1),this.stackOffsetX=5*this.stackIndex,this.stackOffsetY=5*this.stackIndex}drawShadow(t,e){const i=Pw(t).a,s=this.x*e.tileWidth,n=this.y*e.tileHeight,a=Pw(t).transformPoint({x:s,y:n});this.visible=-e.tileWidth<=a.x&&a.x<t.canvas.width&&-e.tileHeight<=a.y&&a.y<t.canvas.height,this.visible&&(t.save(),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowOffsetX=3*i,t.shadowOffsetY=3*i,t.shadowBlur=3*i,this.innerDraw(t,e),t.restore())}drawAvatar(t,e){if(this.visible){if(t.save(),this.innerDraw(t,e),this.isActive&&!this.audioMuted){const e=this.stackAvatarHeight/2,i=Pw(t).a;eB.fontSize=e,eB.scale=i,eB.draw(t,this.stackAvatarWidth-eB.width,0)}t.restore()}}innerDraw(t,e){if(t.translate(this.x*e.tileWidth+this.stackOffsetX,this.y*e.tileHeight+this.stackOffsetY),t.fillStyle="black",t.textBaseline="top",this.avatar&&this.avatar.draw(t,this.stackAvatarWidth,this.stackAvatarHeight,this.isMe),this.audioMuted||!this.videoMuted){const e=this.stackAvatarHeight/2,i=Pw(t).a;this.audioMuted&&(tB.fontSize=e,tB.scale=i,tB.draw(t,this.stackAvatarWidth-tB.width,0))}}drawName(t,e,i){if(this.visible){const s=Pw(t).a;t.save();{t.translate(this.x*e.tileWidth+this.stackOffsetX,this.y*e.tileHeight+this.stackOffsetY),t.shadowColor="black",t.shadowOffsetX=3*s,t.shadowOffsetY=3*s,t.shadowBlur=3*s;const n=i/this.userNameText.fontSize;t.scale(n,n),this.userNameText.draw(t,0,-this.userNameText.height)}t.restore()}}drawHearingTile(t,e,i,s,n){t.save(),t.translate((this.gridX+i)*e.tileWidth,(this.gridY+s)*e.tileHeight),t.strokeStyle=`rgba(0, 255, 0, ${(1-n)/2})`,t.strokeRect(0,0,e.tileWidth,e.tileHeight),t.restore()}drawHearingRange(t,e,i,s){const n=Pw(t).a,a=Math.min(s,Math.ceil(t.canvas.width/(2*e.tileWidth*n))),o=Math.min(s,Math.ceil(t.canvas.height/(2*e.tileHeight*n)));for(let n=0;n<o;++n)for(let o=0;o<a;++o){const a=Bi(Math.sqrt(o*o+n*n),i,s);a<=1&&(this.drawHearingTile(t,e,o,n,a),0!=n&&this.drawHearingTile(t,e,o,-n,a),0!=o&&this.drawHearingTile(t,e,-o,n,a),0!=o&&0!=n&&this.drawHearingTile(t,e,-o,-n,a))}}}const sB=.01,nB=new d("gameStarted"),aB=new d("gameEnded"),oB=new d("zoomChanged"),rB=new d("emojiNeeded"),hB=new d("toggleAudio"),cB=new d("toggleVideo"),AB=new class extends d{constructor(t){super("userJoined"),this.user=t}}(null),lB=new $w(null),uB=new class extends d{constructor(t){super("emote"),this.emoji=t}}(null),dB=new Map;const gB=new class{constructor(){this._drawHearing=!1,this._audioDistanceMin=1,this._audioDistanceMax=10,this._audioRolloff=1,this._fontSize=12,this._transitionSpeed=1,this._zoom=1.5,this._roomName="calla",this._userName="",this._email="",this._avatarEmoji=null,this._avatarURL=null,this._gamepadIndex=0,this._inputBinding=new zv,this._preferredAudioOutputID=null,this._preferredAudioInputID=null,this._preferredVideoInputID=null;const t=localStorage.getItem(Uv);if(t){const e=JSON.parse(t),i=e._inputBinding;delete e._inputBinding,Object.assign(this,e),this.inputBinding=i}this._inputBinding.fix(Gv),window.location.hash.length>0&&(this.roomName=window.location.hash.substring(1)),Object.seal(this)}commit(){localStorage.setItem(Uv,JSON.stringify(this))}get preferredAudioOutputID(){return this._preferredAudioOutputID}set preferredAudioOutputID(t){t!==this.preferredAudioOutputID&&(this._preferredAudioOutputID=t,this.commit())}get preferredAudioInputID(){return this._preferredAudioInputID}set preferredAudioInputID(t){t!==this.preferredAudioInputID&&(this._preferredAudioInputID=t,this.commit())}get preferredVideoInputID(){return this._preferredVideoInputID}set preferredVideoInputID(t){t!==this.preferredVideoInputID&&(this._preferredVideoInputID=t,this.commit())}get transitionSpeed(){return this._transitionSpeed}set transitionSpeed(t){t!==this.transitionSpeed&&(this._transitionSpeed=t,this.commit())}get drawHearing(){return this._drawHearing}set drawHearing(t){t!==this.drawHearing&&(this._drawHearing=t,this.commit())}get audioDistanceMin(){return this._audioDistanceMin}set audioDistanceMin(t){t!==this.audioDistanceMin&&(this._audioDistanceMin=t,this.commit())}get audioDistanceMax(){return this._audioDistanceMax}set audioDistanceMax(t){t!==this.audioDistanceMax&&(this._audioDistanceMax=t,this.commit())}get audioRolloff(){return this._audioRolloff}set audioRolloff(t){t!==this.audioRolloff&&(this._audioRolloff=t,this.commit())}get fontSize(){return this._fontSize}set fontSize(t){t!==this.fontSize&&(this._fontSize=t,this.commit())}get zoom(){return this._zoom}set zoom(t){t!==this.zoom&&(this._zoom=t,this.commit())}get userName(){return this._userName}set userName(t){t!==this.userName&&(this._userName=t,this.commit())}get email(){return this._email}set email(t){t!==this.email&&(this._email=t,this.commit())}get avatarEmoji(){return this._avatarEmoji}set avatarEmoji(t){t!==this.avatarEmoji&&(this._avatarEmoji=t,this.commit())}get avatarURL(){return this._avatarURL}set avatarURL(t){t!==this.avatarURL&&(this._avatarURL=t,this.commit())}get roomName(){return this._roomName}set roomName(t){t!==this.roomName&&(this._roomName=t,this.commit())}get gamepadIndex(){return this._gamepadIndex}set gamepadIndex(t){t!==this.gamepadIndex&&(this._gamepadIndex=t,this.commit())}get inputBinding(){return this._inputBinding.toJSON()}set inputBinding(t){let e=!1;this._inputBinding.addEventListener("inputBindingChanged",(t=>e=!0),{once:!0}),this._inputBinding.copy(t),e&&this.commit()}},pB=new zt,mB=new class extends g{constructor(t,e,i){super(),this.fetcher=t,this.zoomMin=e,this.zoomMax=i,this.waypoints=new Array,this.users=new Map,this.emotes=new Array,this.keys=new Map,this.lastMove=Number.MAX_VALUE,this.lastWalk=Number.MAX_VALUE,this.gridOffsetX=0,this.gridOffsetY=0,this.fontSize=0,this.cameraX=0,this.offsetCameraX=0,this.targetOffsetCameraX=0,this.cameraY=0,this.offsetCameraY=0,this.targetOffsetCameraY=0,this.cameraZ=1.5,this.targetCameraZ=1.5,this.drawHearing=!1,this.audioDistanceMin=2,this.audioDistanceMax=10,this.rolloff=5,this.lastGamepadIndex=-1,this.gamepadIndex=-1,this.transitionSpeed=.125,this.keyboardEnabled=!0,this.me=null,this.map=null,this.currentRoomName=null,this.currentEmoji=null,this.element=J(M("frontBuffer")),this.gFront=this.element.getContext("2d"),this.audioDistanceMin=2,this.audioDistanceMax=10,this.rolloff=5,this.currentEmoji=null,this.inputBinding={keyButtonUp:"ArrowUp",keyButtonDown:"ArrowDown",keyButtonLeft:"ArrowLeft",keyButtonRight:"ArrowRight",keyButtonEmote:"e",keyButtonToggleAudio:"a",keyButtonZoomOut:"[",keyButtonZoomIn:"]",gpAxisLeftRight:0,gpAxisUpDown:1,gpButtonEmote:0,gpButtonToggleAudio:1,gpButtonZoomIn:6,gpButtonZoomOut:7,gpButtonUp:12,gpButtonDown:13,gpButtonLeft:14,gpButtonRight:15},this.lastGamepadIndex=-1,this.gamepadIndex=-1,this.transitionSpeed=.125,this.keyboardEnabled=!0,window.addEventListener("keydown",(t=>{this.keys.set(t.key,t),!this.keyboardEnabled||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||t.key!==this.inputBinding.keyButtonToggleAudio||!this.me||this.toggleMyAudio()})),window.addEventListener("keyup",(t=>{this.keys.has(t.key)&&this.keys.delete(t.key)})),this.screenControls=new Qw(this.element),this.screenControls.addEventListener("move",(t=>{Math.abs(t.dz)>0&&(this.zoom+=t.dz,this.dispatchEvent(oB))})),this.screenControls.addEventListener("drag",(t=>{this.targetOffsetCameraX=this.offsetCameraX+=t.dx,this.targetOffsetCameraY=this.offsetCameraY+=t.dy})),this.screenControls.addEventListener("click",(t=>{if(this.me){const e=this.getTileAt(t),i=e.x-this.me.gridX,s=e.y-this.me.gridY;this.moveMeByPath(i,s)}}))}get style(){return this.element.style}updateAudioActivity(t,e){this.withUser("update audio activity",t,(t=>{t.isActive=e}))}emote(t,e){if(this.users.has(t)){const i=this.users.get(t);i.isMe&&((e=e||this.currentEmoji)?(uB.emoji=this.currentEmoji=e,this.dispatchEvent(uB)):this.dispatchEvent(rB)),e&&this.emotes.push(new Sw(e,i.x,i.y))}}getTileAt(t){const e=t.x*devicePixelRatio-this.gridOffsetX-this.offsetCameraX,i=t.y*devicePixelRatio-this.gridOffsetY-this.offsetCameraY,s=e/this.cameraZ,n=i/this.cameraZ,a=s-this.cameraX,o=n-this.cameraY;return{x:a/this.map.tileWidth-.5,y:o/this.map.tileHeight-.5}}moveMeTo(t,e){this.map.isClear(t,e,this.me.avatar)&&(this.targetOffsetCameraX=0,this.targetOffsetCameraY=0,lB.x=t,lB.y=e,this.dispatchEvent(lB))}moveMeBy(t,e){const i=this.map.getClearTile(this.me.gridX,this.me.gridY,t,e,this.me.avatar);this.moveMeTo(i.x,i.y)}moveMeByPath(t,e){Yt(this.waypoints);const i=this.me.gridX,s=this.me.gridY,n=this.map.getGridNode(i,s),a=i+t,o=s+e,r=a-Math.round(a),h=o-Math.round(o),c=this.map.getGridNode(a,o);if(n&&c){const t=this.map.searchPath(n,c);if(0===t.length)this.moveMeTo(a,o);else{for(let e of t)e.x+=r,e.y+=h;this.waypoints.push(...t)}}else this.moveMeTo(a,o)}warpMeTo(t,e){const i=this.map.getClearTileNear(t,e,3,this.me.avatar);this.moveMeTo(i.x,i.y)}visit(t){this.withUser("visit",t,(t=>{this.warpMeTo(t.gridX,t.gridY)}))}get zoom(){const t=Bi(this.targetCameraZ,this.zoomMin,this.zoomMax);return Cw(Math.pow(t,.5),this.zoomMin,this.zoomMax)}set zoom(t){const e=Bi(t=Ct(t,this.zoomMin,this.zoomMax),this.zoomMin,this.zoomMax),i=Cw(Math.pow(e,2),this.zoomMin,this.zoomMax);this.targetCameraZ=i}addUser(t,e,i){this.users.has(t)&&this.removeUser(t);const s=new iB(t,e,i,!1);this.users.set(t,s),AB.user=s,this.dispatchEvent(AB)}toggleMyAudio(){this.dispatchEvent(hB)}toggleMyVideo(){this.dispatchEvent(cB)}muteUserAudio(t,e){this.withUser("mute audio",t,(t=>{t.audioMuted=e}))}muteUserVideo(t,e){this.withUser("mute video",t,(t=>{t.videoMuted=e}))}withUser(t,e,i,s){if(void 0===s&&(s=5e3),e)if(this.users.has(e)){i(this.users.get(e))}else console.warn(`No user "${e}" found to ${t}. Trying again in a quarter second.`),s>0&&setTimeout(this.withUser.bind(this,t,e,i,s-250),250)}changeUserName(t,e){this.withUser("change user name",t,(t=>{t.displayName=e}))}removeUser(t){this.users.has(t)&&this.users.delete(t)}setAvatarVideo(t,e){this.withUser("set avatar video",t,(t=>{t.setAvatarVideo(e)}))}setAvatarURL(t,e){this.withUser("set avatar image",t,(t=>{t.setAvatarImage(e)}))}setAvatarEmoji(t,e){this.withUser("set avatar emoji",t,(t=>{t.setAvatarEmoji(e.value)}))}async startAsync(t,e,i,n,a){this.currentRoomName=a.toLowerCase(),this.me=new iB(t,e,i,!0),s(n)&&this.me.setAvatarImage(n),this.users.set(t,this.me),this.map=new Zw(this.currentRoomName,this.fetcher);let o=!1;for(let t=0;t<2;++t)try{await this.map.load(),o=!0}catch(e){0===t?(console.warn(e),console.warn("Retrying with default map."),this.map=new Zw("default",this.fetcher)):console.error(e)}o||console.error("Couldn't load any maps!"),this.startLoop(),this.dispatchEvent(oB),this.dispatchEvent(nB)}startLoop(){Xf(this.element),this.resize(),this.element.focus()}resize(){!function(t,e=1){wt(t,t.clientWidth,t.clientHeight,e)}(this.element,window.devicePixelRatio)}end(){this.currentRoomName=null,this.map=null,this.users.clear(),this.me=null,Jf(this.element),this.dispatchEvent(aB)}update(t){if(null!==this.currentRoomName){if(t/=1e3,this.gridOffsetX=Math.floor(.5*this.element.width/this.map.tileWidth)*this.map.tileWidth,this.gridOffsetY=Math.floor(.5*this.element.height/this.map.tileHeight)*this.map.tileHeight,this.lastMove+=t,this.lastMove>=.125){let t=0,e=0,i=0;if(this.keyboardEnabled)for(let s of Object.values(this.keys))if(!(s.altKey||s.shiftKey||s.ctrlKey||s.metaKey))switch(s.key){case this.inputBinding.keyButtonUp:e--;break;case this.inputBinding.keyButtonDown:e++;break;case this.inputBinding.keyButtonLeft:t--;break;case this.inputBinding.keyButtonRight:t++;break;case this.inputBinding.keyButtonZoomIn:i++;break;case this.inputBinding.keyButtonZoomOut:i--;break;case this.inputBinding.keyButtonEmote:this.emote(this.me.id,this.currentEmoji)}const s=navigator.getGamepads()[this.gamepadIndex];if(s){dB.has(this)||dB.set(this,new Qv(s));const n=dB.get(this);n.update(s),n.buttons[this.inputBinding.gpButtonEmote].pressed&&this.emote(this.me.id,this.currentEmoji),!n.lastButtons[this.inputBinding.gpButtonToggleAudio].pressed&&n.buttons[this.inputBinding.gpButtonToggleAudio].pressed&&this.toggleMyAudio(),n.buttons[this.inputBinding.gpButtonUp].pressed?--e:n.buttons[this.inputBinding.gpButtonDown].pressed&&++e,n.buttons[this.inputBinding.gpButtonLeft].pressed?--t:n.buttons[this.inputBinding.gpButtonRight].pressed&&++t,t+=Math.round(n.axes[this.inputBinding.gpAxisLeftRight]),e+=Math.round(n.axes[this.inputBinding.gpAxisUpDown]),i+=2*(n.buttons[this.inputBinding.gpButtonZoomIn].value-n.buttons[this.inputBinding.gpButtonZoomOut].value),this.targetOffsetCameraX+=-50*Math.round(2*n.axes[2]),this.targetOffsetCameraY+=-50*Math.round(2*n.axes[3]),this.dispatchEvent(oB)}t=Ct(t,-1,1),e=Ct(e,-1,1),0===t&&0===e||(this.moveMeBy(t,e),Yt(this.waypoints)),0!==i&&(this.zoom+=i,this.dispatchEvent(oB)),this.lastMove=0}if(this.lastWalk+=t,this.lastWalk>=this.transitionSpeed){if(this.waypoints.length>0){const t=this.waypoints.shift();this.moveMeTo(t.x,t.y)}this.lastWalk=0}for(let e of this.emotes)e.update(t);this.emotes=this.emotes.filter((t=>!t.isDead()));for(let t of this.users.values())t.update(this.map,this.users);this.render()}}render(){const t=-this.me.x*this.map.tileWidth,e=-this.me.y*this.map.tileHeight;this.cameraZ=Qf(this.cameraZ,this.targetCameraZ,sB*this.cameraZ),this.cameraX=Qf(this.cameraX,t,sB*this.cameraZ),this.cameraY=Qf(this.cameraY,e,sB*this.cameraZ),this.offsetCameraX=Qf(this.offsetCameraX,this.targetOffsetCameraX,sB),this.offsetCameraY=Qf(this.offsetCameraY,this.targetOffsetCameraY,sB),this.gFront.resetTransform(),this.gFront.imageSmoothingEnabled=!1,this.gFront.clearRect(0,0,this.element.width,this.element.height),this.gFront.save(),this.gFront.translate(this.gridOffsetX+this.offsetCameraX,this.gridOffsetY+this.offsetCameraY),this.gFront.scale(this.cameraZ,this.cameraZ),this.gFront.translate(this.cameraX,this.cameraY),this.map.draw(this.gFront);for(let t of this.users.values())t.drawShadow(this.gFront,this.map);for(let t of this.emotes)t.drawShadow(this.gFront,this.map);for(let t of this.users.values())t.drawAvatar(this.gFront,this.map);this.drawCursor();for(let t of this.users.values())t.drawName(this.gFront,this.map,this.fontSize);this.drawHearing&&this.me.drawHearingRange(this.gFront,this.map,this.audioDistanceMin,this.audioDistanceMax);for(let t of this.emotes)t.drawEmote(this.gFront,this.map);this.gFront.restore()}drawCursor(){const t=this.screenControls.primaryPointer;if(t){const e=this.getTileAt(t);this.gFront.strokeStyle=this.map.isClear(e.x,e.y,this.me.avatar)?"green":"red",this.gFront.strokeRect(e.x*this.map.tileWidth,e.y*this.map.tileHeight,this.map.tileWidth,this.map.tileHeight)}}}(pB,.5,20),fB=new class extends Bv{constructor(){super("login"),this._ready=!1,this._connecting=!1,this._connected=!1,this.addEventListener("shown",(()=>this._ready=!0)),this.roomSelectControl=K(M("roomSelectorControl")),this.roomEntryControl=K(M("roomEntryControl"));const t=new Array,e=this.element.querySelectorAll("#roomSelector option");for(let i=0;i<e.length;++i){const s=e[i];t.push({ShortName:s.value,Name:s.textContent||s.innerText})}this.roomSelect=mv("roomSelector","No rooms available",(t=>t.ShortName),(t=>t.Name)),this.roomSelect.addEventListener("input",(()=>this.validate())),this.roomSelect.emptySelectionEnabled=!1,this.roomSelect.values=t,this.roomSelect.selectedIndex=0,this.roomInput=ot(M("roomName")),this.roomInput.addEventListener("input",(()=>this.validate())),this.roomInput.addEventListener("keypress",(t=>{"Enter"===t.key&&(0===this.userName.length?this.userNameInput.focus():0===this.email.length&&this.emailInput.focus())})),this.userNameInput=ot(M("userName")),this.userNameInput.addEventListener("input",(()=>this.validate())),this.userNameInput.addEventListener("keypress",(t=>{"Enter"===t.key&&(0===this.userName.length?this.userNameInput.focus():0===this.roomName.length&&(this.roomSelectMode?this.roomSelect.focus():this.roomInput.focus()))})),this.emailInput=function(...t){return $(T("email"),...t)}(M("email")),this.emailInput.addEventListener("keypress",(t=>{"Enter"===t.key&&(0===this.userName.length?this.userNameInput.focus():0===this.roomName.length&&(this.roomSelectMode?this.roomSelect.focus():this.roomInput.focus()))}));X(M("createNewRoom")).addEventListener("click",(()=>{this.roomSelectMode=!1}));X(M("selectRoom")).addEventListener("click",(()=>{this.roomSelectMode=!0})),this.connectButton=X(M("connect"));const i=t=>{!t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&"Enter"===t.key&&this.userName.length>0&&this.roomName.length>0&&this.dispatchEvent(kv)};this.connectButton.addEventListener("click",(()=>this.dispatchEvent(kv))),this.roomInput.addEventListener("keypress",i),this.userNameInput.addEventListener("keypress",i),this.addEventListener("login",(()=>{this.connecting=!0})),this.roomSelectMode=!0,this.validate()}validate(){const t=this.roomName.length>0&&this.userName.length>0;tv(this.connectButton,!this.ready||this.connecting||this.connected||!t),this.connectButton.innerHTML=this.connected?"Connected":this.connecting?"Connecting...":this.ready?"Connect":"Loading..."}get roomSelectMode(){return"none"!==this.roomSelectControl.style.display}set roomSelectMode(t){Zf(this.roomSelectControl,t),Zf(this.roomEntryControl,!t),t?this.roomSelect.selectedValue={ShortName:this.roomInput.value}:this.roomSelect.selectedIndex>=0&&(this.roomInput.value=this.roomSelect.selectedValue.ShortName),this.validate()}get roomName(){return(this.roomSelectMode?this.roomSelect.selectedValue&&this.roomSelect.selectedValue.ShortName:this.roomInput.value)||""}set roomName(t){null!=t&&0!==t.length||(t=this.roomSelect.values[0].ShortName),this.roomInput.value=t,this.roomSelect.selectedValue={ShortName:t},this.roomSelectMode=this.roomSelect.selectedIndex>-1,this.validate()}set userName(t){this.userNameInput.value=t,this.validate()}get userName(){return this.userNameInput.value}set email(t){this.emailInput.value=t}get email(){return this.emailInput.value}get connectButtonText(){return this.connectButton.innerText||this.connectButton.textContent}set connectButtonText(t){this.connectButton.innerHTML=t}get ready(){return this._ready}set ready(t){this._ready=t,this.validate()}get connecting(){return this._connecting}set connecting(t){this._connecting=t,this.validate()}get connected(){return this._connected}set connected(t){this._connected=t,this.connecting=!1}},vB=new class extends Bv{constructor(){super("users"),this.roomName=null,this.userName=null,this.rows=new Map,this.users=new Map,this.avatarGs=new Map,this.lastUser=null,this.usersList=K(M("chatUsers")),Object.seal(this)}async startAsync(t,e){this.roomName=t,this.userName=e}update(){if(Vf(this))for(let t of this.users.entries()){const[e,i]=t;if(this.avatarGs.has(e)&&i.avatar){const t=this.avatarGs.get(e);t.clearRect(0,0,t.canvas.width,t.canvas.height),i.avatar.draw(t,t.canvas.width,t.canvas.height,i.isMe)}}}set(t){const e=!this.rows.has(t.id);this.delete(t.id);const i=this.rows.size+1;if(e){const e=K(Cv(1,i,2,1),j(-1),ww);setTimeout((()=>{this.usersList.removeChild(e)}),3e3),this.usersList.append(e),this.users.set(t.id,t),this.avatarGs.set(t.id,J(R(32),b(32)).getContext("2d"))}const s=this.avatarGs.get(t.id).canvas,n=K(U(Cv(1,i,2,1),j(1),yw),new zf("mouseover",(t=>{Bw.apply(n.style)}),a),function(t,e){return new zf("mouseout",t,e)}((()=>yw.apply(n.style))),Gf((()=>{Jf(this),bw.id=t.id,this.dispatchEvent(bw)})));var a;const o=[K(U(Cv(1,i),j(0)),s),K(U(Cv(2,i),j(0)),t.displayName),n];this.rows.set(t.id,o),this.usersList.append(...o)}delete(t){if(this.rows.has(t)){const e=this.rows.get(t);this.rows.delete(t);for(let t of e)this.usersList.removeChild(t);let i=1;for(let t of this.rows.values()){const e=Mv(i++);for(let i of t)e.apply(i)}}}clear(){for(let t of this.rows.keys())this.delete(t)}warn(...t){const e=K(U(Cv(1,this.rows.size+1,2,1),N("yellow")),...t.map((t=>t.toString())));this.usersList.append(e),setTimeout((()=>{this.usersList.removeChild(e)}),5e3)}},wB=new class extends g{constructor(t,e){super(),this._audioEnabled=!0,this._videoEnabled=!1;const i=t=>{this.zoom+=t,this.dispatchEvent(uv)};this.element=K(M("controls")),this.element.append(this.optionsButton=X(M("optionsButton"),L("Show/hide options"),Gf((()=>this.dispatchEvent(ev))),ht(wp.value),ht("Options")),this.instructionsButton=X(M("instructionsButton"),L("Show/hide instructions"),Gf((()=>this.dispatchEvent(av))),ht(qm.value),ht("Info")),this.shareButton=X(M("shareButton"),L("Share your current room to twitter"),Gf((()=>this.dispatchEvent(iv))),function(...t){return V("img",...t)}(E("https://cdn2.iconfinder.com/data/icons/minimalism/512/twitter.png"),function(t){return new v("alt",t,"applet","area","img","input")}("icon"),function(t){return new v("role",t)}("presentation"),b("25px"),G("2px auto -2px auto")),ht("Tweet")),this.showUsersButton=X(M("showUsersButton"),L("View user directory"),Gf((()=>this.dispatchEvent(ov))),ht(Uc.value),ht("Users")),this.fullscreenButton=X(M("fullscreenButton"),L("Toggle fullscreen"),Gf((()=>this.dispatchEvent(nv))),Gf((()=>this.isFullscreen=!this.isFullscreen)),ht(Af.value),ht("Expand")),this.leaveButton=X(M("leaveButton"),L("Leave the room"),Gf((()=>this.dispatchEvent(sv))),ht(Qm.value),ht("Leave")),K(M("toggleAudioControl"),B("comboButton"),this.toggleAudioButton=X(M("toggleAudioButton"),L("Toggle audio mute/unmute"),Gf((()=>this.dispatchEvent(rv))),this.toggleAudioLabel=ht(nm.value),ht("Audio")),this.toggleVideoButton=X(M("toggleVideoButton"),L("Toggle video mute/unmute"),Gf((()=>this.dispatchEvent(hv))),this.toggleVideoLabel=ht(jp.value),ht("Video")),this.changeDevicesButton=X(M("changeDevicesButton"),L("Change devices"),Gf((()=>this.dispatchEvent(cv))),ht(kg.value),ht("Change"))),K(M("emojiControl"),B("comboButton"),new v("textAlign","center"),X(M("emoteButton"),L("Emote"),Gf((()=>this.dispatchEvent(Av))),this.emoteButton=ht(Mu.value),ht("Emote")),X(M("selectEmoteButton"),L("Select Emoji"),Gf((()=>this.dispatchEvent(lv))),ht(kg.value),ht("Change"))),this.zoomInButton=X(M("zoomInButton"),L("Zoom in"),Gf((()=>i(.5))),ht(rm.value),ht("+")),K(M("zoomSliderContainer"),this.slider=function(...t){return $(T("range"),...t)}(M("zoomSlider"),L("Zoom"),I(t),P(e),_(.1),O("0"),jf((()=>this.dispatchEvent(uv))))),this.zoomOutButton=X(M("zoomOutButton"),L("Zoom out"),Gf((()=>i(-.5))),ht(hm.value),ht("-"))),Object.seal(this)}get isFullscreen(){return null!==document.fullscreenElement}set isFullscreen(t){t?document.body.requestFullscreen():document.exitFullscreen(),Kf(this.fullscreenButton,t,Xd.value,Af.value)}get style(){return this.element.style}isOpen(){return"none"!==this.style.display}setOpen(t,e){this.style.display=t?e||"":"none"}toggleOpen(t){this.setOpen(!this.isOpen(),t)}hide(){this.setOpen(!1)}show(){this.setOpen(!0)}get enabled(){return!this.instructionsButton.disabled}set enabled(t){const e=this.element.querySelectorAll("button");for(let i=0;i<e.length;++i)e[i].disabled=!t}get audioEnabled(){return this._audioEnabled}set audioEnabled(t){this._audioEnabled=t,Kf(this.toggleAudioLabel,t,nm.value,em.value)}get videoEnabled(){return this._videoEnabled}set videoEnabled(t){this._videoEnabled=t,Kf(this.toggleVideoLabel,t,Yp.value,jp.value)}setEmojiButton(t){this.emoteButton.innerHTML=t.value}get zoom(){return parseFloat(this.slider.value)}set zoom(t){this.slider.value=t.toFixed(3)}}(.5,20),BB=new class extends Bv{constructor(){super("devices"),this.videoInputSelect=mv("videoInputDevices","No video input",(t=>t.deviceId),(t=>t.label),jf((()=>this.dispatchEvent(bv)))),this.audioInputSelect=mv("audioInputDevices","No audio input",(t=>t.deviceId),(t=>t.label),jf((()=>this.dispatchEvent(yv)))),this.audioOutputSelect=mv("audioOutputDevices","No audio output",(t=>t.deviceId),(t=>t.label),jf((()=>this.dispatchEvent(Dv)))),this.audioInputDevices=[],this.audioOutputDevices=[],this.videoInputDevices=[],Object.seal(this)}get audioInputDevices(){return this.audioInputSelect.values}set audioInputDevices(t){this.audioInputSelect.values=t}get currentAudioInputDevice(){return this.audioInputSelect.selectedValue}set currentAudioInputDevice(t){this.audioInputSelect.selectedValue=t}get audioOutputDevices(){return this.audioOutputSelect.values}set audioOutputDevices(t){this.audioOutputSelect.values=t}get currentAudioOutputDevice(){return this.audioOutputSelect.selectedValue}set currentAudioOutputDevice(t){this.audioOutputSelect.selectedValue=t}get videoInputDevices(){return this.videoInputSelect.values}set videoInputDevices(t){this.videoInputSelect.values=t}get currentVideoInputDevice(){return this.videoInputSelect.selectedValue}set currentVideoInputDevice(t){this.videoInputSelect.selectedValue=t}},yB=new class extends Bv{constructor(){super("options"),this._drawHearing=!1,this._inputBinding=new zv,this.user=null;const t=t=>()=>this.dispatchEvent(t),e=jf(t(uw)),i=(t,e)=>{const i=jv(t,"text",e,aw,new zf("keyup",(e=>{const i=e;"Tab"!==i.key&&"Shift"!==i.key&&(this._inputBinding.set(t,i.key),this.dispatchEvent(lw))}),s));var s;return i.value=this._inputBinding.get(t).toString(),i},s=(t,e)=>{const i=jv(t,"text",e,ow);return this.addEventListener("gamepadButtonUp",(e=>{document.activeElement===i.input&&(this._inputBinding.set(t,e.button),this.dispatchEvent(lw))})),i.value=this._inputBinding.get(t).toString(),i},n=(t,e)=>{const i=jv(t,"text",e,ow);return this.addEventListener("gamepadAxisMaxed",(e=>{document.activeElement===i.input&&(this._inputBinding.set(t,e.axis),this.dispatchEvent(lw))})),i.value=this._inputBinding.get(t).toString(),i},a=[Zv("avatar","Avatar",K(tt(D("selectAvatarEmoji"),"Emoji: "),X(M("selectAvatarEmoji"),"Select",Gf(t(cw))))," or ",K(tt(D("setAvatarURL"),"Photo: "),this.avatarURLInput=rt(S("https://example.com/me.png")),X(M("setAvatarURL"),"Set",Gf((()=>{this.avatarURL=this.avatarURLInput.value,this.dispatchEvent(rw)}))),this.clearAvatarURLButton=X(y,"Clear",Gf((()=>{this.avatarURL=null,this.dispatchEvent(rw)}))))," or ",K(tt(D("videoAvatarButton"),"Video: "),this.useVideoAvatarButton=X(M("videoAvatarButton"),"Use video",Gf(t(gw)))),this.avatarPreview=J(R(256),b(256))),Zv("interface","Interface",this.fontSizeInput=jv("fontSize","number","Font size: ",O("10"),I(5),P(32),ow,jf(t(Aw))),st(this.drawHearingCheck=jv("drawHearing","checkbox","Draw hearing range: ",jf((()=>{this.drawHearing=!this.drawHearing,this.dispatchEvent(dw)}))),this.audioMinInput=jv("minAudio","number","Min: ",O("1"),I(0),P(100),ow,e),this.audioMaxInput=jv("maxAudio","number","Min: ",O("10"),I(0),P(100),ow,e),this.audioRolloffInput=jv("rollof","number","Rollof: ",O("1"),I(.1),P(10),_(.1),ow,e))),Zv("keyboard","Keyboard",this.keyButtonUpInput=i("keyButtonUp","Up: "),this.keyButtonDownInput=i("keyButtonDown","Down: "),this.keyButtonLeftInput=i("keyButtonLeft","Left: "),this.keyButtonRightInput=i("keyButtonRight","Right: "),this.keyButtonEmoteInput=i("keyButtonEmote","Emote: "),this.keyButtonToggleAudioInput=i("keyButtonToggleAudio","Toggle audio: ")),Zv("gamepad","Gamepad",K(tt(D("gamepads"),"Use gamepad: "),this.gpSelect=mv("gamepads","No gamepad",(t=>t.id),(t=>t.id),jf(t(hw)))),this.gpAxisLeftRightInput=n("gpAxisLeftRight","Left/Right axis:"),this.gpAxisUpDownInput=n("gpAxisUpDown","Up/Down axis:"),this.gpButtonUpInput=s("gpButtonUp","Up button: "),this.gpButtonDownInput=s("gpButtonDown","Down button: "),this.gpButtonLeftInput=s("gpButtonLeft","Left button: "),this.gpButtonRightInput=s("gpButtonRight","Right button: "),this.gpButtonEmoteInput=s("gpButtonEmote","Emote button: "),this.gpButtonToggleAudioInput=s("gpButtonToggleAudio","Toggle audio button: "))],o=[];for(let t=0;t<a.length;++t)o[t]="1fr",a[t].style.gridColumnStart=(t+1).toFixed(0);Iv(...o).apply(this.header),this.header.append(...a.map((t=>t.button))),this.content.append(...a.map((t=>t.element)));const r=t=>()=>{for(let e=0;e<a.length;++e)a[e].visible=e===t};for(let t=0;t<a.length;++t)a[t].visible=0===t,a[t].addEventListener("select",r(t));this._inputBinding.addEventListener("inputBindingChanged",(()=>{this.keyButtonUp=this._inputBinding.keyButtonUp,this.keyButtonDown=this._inputBinding.keyButtonDown,this.keyButtonLeft=this._inputBinding.keyButtonLeft,this.keyButtonRight=this._inputBinding.keyButtonRight,this.keyButtonEmote=this._inputBinding.keyButtonEmote,this.keyButtonToggleAudio=this._inputBinding.keyButtonToggleAudio,this.keyButtonZoomOut=this._inputBinding.keyButtonZoomOut,this.keyButtonZoomIn=this._inputBinding.keyButtonZoomIn,this.gpAxisLeftRight=this._inputBinding.gpAxisLeftRight,this.gpAxisUpDown=this._inputBinding.gpAxisUpDown,this.gpButtonUp=this._inputBinding.gpButtonUp,this.gpButtonDown=this._inputBinding.gpButtonDown,this.gpButtonLeft=this._inputBinding.gpButtonLeft,this.gpButtonRight=this._inputBinding.gpButtonRight,this.gpButtonEmote=this._inputBinding.gpButtonEmote,this.gpButtonToggleAudio=this._inputBinding.gpButtonToggleAudio,this.gpButtonZoomOut=this._inputBinding.gpButtonZoomOut,this.gpButtonZoomIn=this._inputBinding.gpButtonZoomIn})),this.gamepads=[],this._avatarG=this.avatarPreview.getContext("2d"),Object.seal(this)}update(){if(Vf(this)){const t=this.currentGamepad;t&&(this._pad?this._pad.update(t):(this._pad=new Qv(t),this._pad.addEventListener("gamepadbuttonup",(t=>{pw.button=t.button,this.dispatchEvent(pw)})),this._pad.addEventListener("gamepadaxismaxed",(t=>{mw.axis=t.axis,this.dispatchEvent(mw)})))),this.user&&this.user.avatar&&(this._avatarG.clearRect(0,0,this.avatarPreview.width,this.avatarPreview.height),this.user.avatar.draw(this._avatarG,this.avatarPreview.width,this.avatarPreview.height,!0))}}get avatarURL(){return 0===this.avatarURLInput.value.length?null:this.avatarURLInput.value}set avatarURL(t){s(t)?(this.avatarURLInput.value=t,vw.apply(this.clearAvatarURLButton)):(this.avatarURLInput.value="",fw.apply(this.clearAvatarURLButton))}setAvatarVideo(t){this.useVideoAvatarButton.innerHTML=null!==t?"Remove video":"Use video"}get inputBinding(){return this._inputBinding.toJSON()}set inputBinding(t){this._inputBinding.copy(t)}get gamepads(){return this.gpSelect.values}set gamepads(t){const e=0===t.length;this.gpSelect.values=t,tv(this.gpAxisLeftRightInput,e),tv(this.gpAxisUpDownInput,e),tv(this.gpButtonUpInput,e),tv(this.gpButtonDownInput,e),tv(this.gpButtonLeftInput,e),tv(this.gpButtonRightInput,e),tv(this.gpButtonEmoteInput,e),tv(this.gpButtonToggleAudioInput,e)}get currentGamepadIndex(){return this.gpSelect.selectedIndex}get currentGamepad(){return this.currentGamepadIndex<0?null:navigator.getGamepads()[this.currentGamepadIndex]}get gamepadIndex(){return this.gpSelect.selectedIndex}set gamepadIndex(t){this.gpSelect.selectedIndex=t}get drawHearing(){return this._drawHearing}set drawHearing(t){this._drawHearing=t,this.drawHearingCheck.checked=t}get audioDistanceMin(){const t=parseFloat(this.audioMinInput.value);return A(t)?t:1}set audioDistanceMin(t){A(t)&&t>0&&(this.audioMinInput.value=t.toFixed(3),this.audioDistanceMin>this.audioDistanceMax&&(this.audioDistanceMax=this.audioDistanceMin))}get audioDistanceMax(){const t=parseFloat(this.audioMaxInput.value);return A(t)?t:10}set audioDistanceMax(t){A(t)&&t>0&&(this.audioMaxInput.value=t.toFixed(3),this.audioDistanceMin>this.audioDistanceMax&&(this.audioDistanceMin=this.audioDistanceMax))}get audioRolloff(){const t=parseFloat(this.audioRolloffInput.value);return A(t)?t:1}set audioRolloff(t){A(t)&&t>0&&(this.audioRolloffInput.value=t.toFixed(3))}get fontSize(){const t=parseFloat(this.fontSizeInput.value);return A(t)?t:16}set fontSize(t){A(t)&&t>0&&(this.fontSizeInput.value=t.toFixed(3))}get keyButtonUp(){return this.keyButtonUpInput.value}set keyButtonUp(t){this.keyButtonUpInput.value=t}get keyButtonDown(){return this.keyButtonDownInput.value}set keyButtonDown(t){this.keyButtonDownInput.value=t}get keyButtonLeft(){return this.keyButtonLeftInput.value}set keyButtonLeft(t){this.keyButtonLeftInput.value=t}get keyButtonRight(){return this.keyButtonRightInput.value}set keyButtonRight(t){this.keyButtonRightInput.value=t}get keyButtonEmote(){return this.keyButtonEmoteInput.value}set keyButtonEmote(t){this.keyButtonEmoteInput.value=t}get keyButtonToggleAudio(){return this.keyButtonToggleAudioInput.value}set keyButtonToggleAudio(t){this.keyButtonToggleAudioInput.value=t}get keyButtonZoomOut(){return this.keyButtonZoomOutInput.value}set keyButtonZoomOut(t){this.keyButtonZoomOutInput.value=t}get keyButtonZoomIn(){return this.keyButtonZoomInInput.value}set keyButtonZoomIn(t){this.keyButtonZoomInInput.value=t}get gpAxisLeftRight(){return parseInt(this.gpAxisLeftRightInput.value,10)}set gpAxisLeftRight(t){this.gpAxisLeftRightInput.value=t.toFixed(0)}get gpAxisUpDown(){return parseInt(this.gpAxisUpDownInput.value,10)}set gpAxisUpDown(t){this.gpAxisUpDownInput.value=t.toFixed(0)}get gpButtonUp(){return parseInt(this.gpButtonUpInput.value,10)}set gpButtonUp(t){this.gpButtonUpInput.value=t.toFixed(0)}get gpButtonDown(){return parseInt(this.gpButtonDownInput.value,10)}set gpButtonDown(t){this.gpButtonDownInput.value=t.toFixed(0)}get gpButtonLeft(){return parseInt(this.gpButtonLeftInput.value,10)}set gpButtonLeft(t){this.gpButtonLeftInput.value=t.toFixed(0)}get gpButtonRight(){return parseInt(this.gpButtonRightInput.value,10)}set gpButtonRight(t){this.gpButtonRightInput.value=t.toFixed(0)}get gpButtonEmote(){return parseInt(this.gpButtonEmoteInput.value,10)}set gpButtonEmote(t){this.gpButtonEmoteInput.value=t.toFixed(0)}get gpButtonToggleAudio(){return parseInt(this.gpButtonToggleAudioInput.value,10)}set gpButtonToggleAudio(t){this.gpButtonToggleAudioInput.value=t.toFixed(0)}get gpButtonZoomOut(){return parseInt(this.gpButtonZoomOutInput.value,10)}set gpButtonZoomOut(t){this.gpButtonZoomOutInput.value=t.toFixed(0)}get gpButtonZoomIn(){return parseInt(this.gpButtonZoomInInput.value,10)}set gpButtonZoomIn(t){this.gpButtonZoomInInput.value=t.toFixed(0)}},DB=new Bv("instructions"),bB=new class extends Bv{constructor(){super("emoji"),this.header.append(function(...t){return V("h2",...t)}("Recent"),this.recent=st("(None)"));const t=new Array,e=new Array;let i=null,s=0;function n(t,e){let i=t.value,s=i.indexOf(Xn.value);return-1===s&&(s=i.indexOf(Yn.value)),s>=0&&(i=i.substring(0,s)),new Xt(i+e.value,t.desc+"/"+e.desc)}const a=(t,o,h)=>{const c=r(t)&&t||!r(t)&&t.alts;for(let t of c){let r=null;const c=X(L(t.desc),Gf((e=>{i=i&&e.ctrlKey?n(i,t):t,this.preview.innerHTML=`${i.value} - ${i.desc}`,Sv.apply(this.confirmButton),r&&(Yf(r),c.innerHTML=t.value+(Vf(r)?"-":"+"))})),t.value);let A=null;h?(c.id="emoji-with-alt-"+s++,A=at(et(c,tt(D(c.id),t.desc)))):A=nt(c),t.alts&&(r=K(),e.push(r),a(t,r,!0),Jf(r),A.appendChild(r),c.style.width="3em",c.innerHTML+="+"),t.width&&(c.style.width=t.width),t.color&&(c.style.color=t.color),o.appendChild(A)}};for(let t of Object.values(Lf))if(t instanceof On){const e=q(),i=st(),s=Z(C("javascript:undefined"),L(t.desc),Gf((()=>{Yf(i),s.innerHTML=t.value+(Vf(i)?" -":" +")})),t.value+" -");a(t,i,!1),e.appendChild(s),this.content.appendChild(e),this.content.appendChild(i)}this.footer.append(this.confirmButton=X(B("confirm"),"OK",Gf((()=>{-1===t.indexOf(i)&&(t.push(i),this.recent.innerHTML="",a(t,this.recent,!1)),this.dispatchEvent(new Fv(i)),Jf(this)}))),X(B("cancel"),"Cancel",Gf((()=>{xv.apply(this.confirmButton),this.dispatchEvent(Ev),Jf(this)}))),this.preview=nt(Cv(1,4,3,1))),xv.apply(this.confirmButton),this.selectAsync=()=>new Promise(((t,i)=>{let s=null,n=null;const a=()=>{this.removeEventListener("emojiSelected",s),this.removeEventListener("emojiCanceled",n),this.removeEventListener("hidden",n)};s=e=>{a();try{t(e.emoji)}catch(t){i(t)}},n=()=>{a(),t(null)},this.addEventListener("emojiSelected",s),this.addEventListener("emojiCanceled",n),this.addEventListener("hidden",n),(()=>{for(let t of e)Jf(t)})(),Xf(this)}))}},CB=new class extends g{constructor(t,e,i){super(),this.isAudioMuted=null,this.isVideoMuted=null,l(t)&&(t=new zt),l(e)&&(e=_n),this.tele=new e(t),l(i)?this.meta=this.tele.getDefaultMetadataClient():this.meta=new i(this.tele);const s=this.dispatchEvent.bind(this);this.tele.addEventListener("serverConnected",s),this.tele.addEventListener("serverDisconnected",s),this.tele.addEventListener("serverFailed",s),this.tele.addEventListener("conferenceFailed",s),this.tele.addEventListener("conferenceRestored",s),this.tele.addEventListener("audioMuteStatusChanged",s),this.tele.addEventListener("videoMuteStatusChanged",s),this.tele.addEventListener("conferenceJoined",(async t=>{const e=this.audio.createLocalUser(t.id);t.pose=e.pose,this.dispatchEvent(t),await this.setPreferredDevices()})),this.tele.addEventListener("conferenceLeft",(t=>{this.audio.createLocalUser(t.id),this.dispatchEvent(t)})),this.tele.addEventListener("participantJoined",(async t=>{t.source=this.audio.createUser(t.id),this.dispatchEvent(t)})),this.tele.addEventListener("participantLeft",(t=>{this.dispatchEvent(t),this.audio.removeUser(t.id)})),this.tele.addEventListener("userNameChanged",s),this.tele.addEventListener("videoAdded",s),this.tele.addEventListener("videoRemoved",s),this.tele.addEventListener("audioAdded",(t=>{const e=this.audio.getUser(t.id);if(e){let i=e.streams.get(t.kind);i&&e.streams.delete(t.kind),i=t.stream,e.streams.set(t.kind,i),t.id!==this.tele.localUserID&&this.audio.setUserStream(t.id,i),this.dispatchEvent(t)}})),this.tele.addEventListener("audioRemoved",(t=>{const e=this.audio.getUser(t.id);e&&e.streams.has(t.kind)&&e.streams.delete(t.kind),t.id!==this.tele.localUserID&&this.audio.setUserStream(t.id,null),this.dispatchEvent(t)})),this.meta.addEventListener("avatarChanged",s),this.meta.addEventListener("chat",s),this.meta.addEventListener("emote",s),this.meta.addEventListener("setAvatarEmoji",s);const n=t=>{const e=this.audio.getUserOffset(t.id);e&&(t.px+=e[0],t.py+=e[1],t.pz+=e[2]),this.dispatchEvent(t)};this.meta.addEventListener("userPointer",n),this.meta.addEventListener("userPosed",(t=>{this.audio.setUserPose(t.id,t.px,t.py,t.pz,t.fx,t.fy,t.fz,t.ux,t.uy,t.uz),n(t)})),this.audio.addEventListener("audioActivity",(t=>{Tn.id=t.id,Tn.isActive=t.isActive,this.dispatchEvent(Tn)}));const a=this.dispose.bind(this);window.addEventListener("beforeunload",a),window.addEventListener("unload",a),window.addEventListener("pagehide",a),Object.seal(this)}get connectionState(){return this.tele.connectionState}get conferenceState(){return this.tele.conferenceState}get audio(){return this.tele.audio}get preferredAudioOutputID(){return this.tele.preferredAudioOutputID}set preferredAudioOutputID(t){this.tele.preferredAudioOutputID=t}get preferredAudioInputID(){return this.tele.preferredAudioInputID}set preferredAudioInputID(t){this.tele.preferredAudioInputID=t}get preferredVideoInputID(){return this.tele.preferredVideoInputID}set preferredVideoInputID(t){this.tele.preferredVideoInputID=t}async getCurrentAudioOutputDevice(){return await this.tele.getCurrentAudioOutputDevice()}async getMediaPermissions(){return await this.tele.getMediaPermissions()}async getAudioOutputDevices(t){return await this.tele.getAudioOutputDevices(t)}async getAudioInputDevices(t){return await this.tele.getAudioInputDevices(t)}async getVideoInputDevices(t){return await this.tele.getVideoInputDevices(t)}dispose(){this.leave(),this.disconnect()}get offsetRadius(){return this.audio.offsetRadius}set offsetRadius(t){this.audio.offsetRadius=t}setLocalPose(t,e,i,s,n,a,o,r,h){this.audio.setUserPose(this.localUserID,t,e,i,s,n,a,o,r,h,0),this.meta.setLocalPose(t,e,i,s,n,a,o,r,h)}setLocalPoseImmediate(t,e,i,s,n,a,o,r,h){this.audio.setUserPose(this.localUserID,t,e,i,s,n,a,o,r,h,0),this.meta.setLocalPoseImmediate(t,e,i,s,n,a,o,r,h)}setLocalPointer(t,e,i,s,n,a,o,r,h,c){this.meta.setLocalPointer(t,e,i,s,n,a,o,r,h,c)}setAvatarEmoji(t){this.meta.setAvatarEmoji(t)}setAvatarURL(t){this.meta.setAvatarURL(t)}emote(t){this.meta.emote(t)}chat(t){this.meta.chat(t)}async setPreferredDevices(){await this.tele.setPreferredDevices()}async setAudioInputDevice(t){await this.tele.setAudioInputDevice(t)}async setVideoInputDevice(t){await this.tele.setVideoInputDevice(t)}async getCurrentAudioInputDevice(){return await this.tele.getCurrentAudioInputDevice()}async getCurrentVideoInputDevice(){return await this.tele.getCurrentVideoInputDevice()}async toggleAudioMuted(){return await this.tele.toggleAudioMuted()}async toggleVideoMuted(){return await this.tele.toggleVideoMuted()}async getAudioMuted(){return await this.tele.getAudioMuted()}async getVideoMuted(){return await this.tele.getVideoMuted()}get metadataState(){return this.meta.metadataState}get localUserID(){return this.tele.localUserID}get localUserName(){return this.tele.localUserName}get roomName(){return this.tele.roomName}userExists(t){return this.tele.userExists(t)}getUserNames(){return this.tele.getUserNames()}async prepare(t,e,i,s){await this.tele.prepare(t,e,i,s)}async connect(){await this.tele.connect(),this.tele.connectionState===Wt.Connected&&await this.meta.connect()}async join(t){await this.tele.join(t),this.tele.conferenceState===Wt.Connected&&await this.meta.join(t)}async identify(t){await this.tele.identify(t),await this.meta.identify(this.localUserID)}async leave(){await this.meta.leave(),await this.tele.leave()}async disconnect(){await this.meta.disconnect(),await this.tele.disconnect()}update(){this.audio.update()}async setAudioOutputDevice(t){this.tele.setAudioOutputDevice(t),jt&&await this.audio.setAudioOutputDeviceID(this.tele.preferredAudioOutputID)}async setAudioMuted(t){let e=this.isAudioMuted;return t!==e&&(e=await this.toggleAudioMuted()),e}async setVideoMuted(t){let e=this.isVideoMuted;return t!==e&&(e=await this.toggleVideoMuted()),e}}(pB),MB=new class extends Nf{constructor(){super(120)}start(){const t=e=>{this._timer=requestAnimationFrame(t),this._onTick(e)};this._timer=requestAnimationFrame(t)}stop(){this._timer&&(cancelAnimationFrame(this._timer),super.stop())}},PB=y(!0),IB=y(!1);let xB=!1;function SB(t){return()=>FB(t)}function FB(t){xB||(Jf(fB),Jf(vB),Jf(yB),Jf(BB),Jf(bB),Jf(DB),Xf(t))}async function EB(t){if(!Vf(bB)){xB=!0,PB.apply(wB.optionsButton),PB.apply(wB.instructionsButton),PB.apply(wB.changeDevicesButton),Jf(yB);const e=await bB.selectAsync();e&&t(e),IB.apply(wB.optionsButton),IB.apply(wB.instructionsButton),IB.apply(wB.changeDevicesButton),xB=!1}}async function kB(){await EB((t=>{mB.emote(CB.localUserID,t),wB.setEmojiButton(t)}))}function _B(){CB.audio.setAudioProperties(gB.audioDistanceMin=mB.audioDistanceMin=yB.audioDistanceMin,gB.audioDistanceMax=mB.audioDistanceMax=yB.audioDistanceMax,gB.audioRolloff=yB.audioRolloff,CB.audio.algorithm,gB.transitionSpeed)}function LB(){yB.gamepads=navigator.getGamepads(),yB.gamepadIndex=mB.gamepadIndex}function TB(t){mB.withUser("list user in directory",t,(t=>vB.set(t)))}Object.assign(window,{settings:gB,fetcher:pB,client:CB,game:mB,login:fB,directory:vB,controls:wB,devices:BB,options:yB,emoji:bB,instructions:DB}),window.addEventListener("gamepadconnected",LB),window.addEventListener("gamepaddisconnected",LB),window.addEventListener("resize",(()=>mB.resize())),wB.addEventListener("toggleOptions",SB(yB)),wB.addEventListener("toggleInstructions",SB(DB)),wB.addEventListener("toggleUserDirectory",SB(vB)),wB.addEventListener("changeDevices",SB(BB)),wB.addEventListener("tweet",(()=>{const t="https://twitter.com/intent/tweet?text="+encodeURIComponent(`Join my #TeleParty ${document.location.href}`);window.open(t)})),wB.addEventListener("leave",(async()=>{vB.clear(),await CB.leave()})),wB.addEventListener("selectEmoji",kB),wB.addEventListener("emote",(()=>{mB.emote(CB.localUserID,mB.currentEmoji)})),wB.addEventListener("toggleAudio",(async()=>{await CB.toggleAudioMuted()})),wB.addEventListener("toggleVideo",(async()=>{await CB.toggleVideoMuted()})),wB.addEventListener("zoomChanged",(()=>{gB.zoom=mB.zoom=wB.zoom})),fB.addEventListener("login",(async()=>{await CB.audio.createClip("join",!1,!1,!1,.5,"audio/door-open.mp3"),await CB.audio.createClip("leave",!1,!1,!0,.5,"audio/door-close.mp3"),_B();let t=fB.roomName;fB.roomSelectMode||(t=await async function(t){return await pB.postObjectForText("/Game/Rooms",t)}(t)),await async function(t,e,i){await pB.postObject("/Contacts",{Name:t,Email:e,Room:i})}(gB.userName=fB.userName,gB.email=fB.email,gB.roomName=t);const e=`Calla - chatting in ${t}`,i=`${window.location.pathname}#${t}`;window.history.replaceState({},e,i),await vB.startAsync(t,fB.userName),await CB.join(t),await CB.identify(fB.userName)})),yB.addEventListener("audioPropertiesChanged",_B),yB.addEventListener("selectAvatar",(async()=>{await EB((t=>{gB.avatarEmoji=t.value,CB.setAvatarEmoji(t),mB.me.setAvatarEmoji(t.value),TB(CB.localUserID)}))})),yB.addEventListener("avatarURLChanged",(()=>{gB.avatarURL=yB.avatarURL,CB.setAvatarURL(yB.avatarURL),mB.me.setAvatarImage(yB.avatarURL),TB(CB.localUserID)})),yB.addEventListener("toggleDrawHearing",(()=>{gB.drawHearing=mB.drawHearing=yB.drawHearing})),yB.addEventListener("fontSizeChanged",(()=>{gB.fontSize=mB.fontSize=yB.fontSize})),yB.addEventListener("gamepadChanged",(()=>{gB.gamepadIndex=mB.gamepadIndex=yB.gamepadIndex})),yB.addEventListener("inputBindingChanged",(()=>{gB.inputBinding=mB.inputBinding=yB.inputBinding})),yB.addEventListener("toggleVideo",(async()=>{await CB.toggleVideoMuted()})),BB.addEventListener("audioInputChanged",(async()=>{const t=BB.currentAudioInputDevice;await CB.setAudioInputDevice(t),gB.preferredAudioInputID=CB.preferredAudioInputID})),BB.addEventListener("audioOutputChanged",(async()=>{const t=BB.currentAudioOutputDevice;await CB.setAudioOutputDevice(t),gB.preferredAudioOutputID=CB.preferredAudioOutputID})),BB.addEventListener("videoInputChanged",(async()=>{const t=BB.currentVideoInputDevice;await CB.setVideoInputDevice(t),gB.preferredVideoInputID=CB.preferredVideoInputID})),mB.addEventListener("emojiNeeded",kB),mB.addEventListener("emote",(t=>{CB.emote(t.emoji)})),mB.addEventListener("userJoined",(t=>{TB(t.user.id)})),mB.addEventListener("toggleAudio",(async()=>{await CB.toggleAudioMuted(),gB.preferredAudioInputID=CB.preferredAudioInputID})),mB.addEventListener("toggleVideo",(async()=>{await CB.toggleVideoMuted(),gB.preferredVideoInputID=CB.preferredVideoInputID}));const OB=new Xt(null,"");mB.addEventListener("gameStarted",(()=>{mB.resize(),Jf(fB),Xf(wB),yB.user=mB.me,wB.enabled=!0,gB.avatarEmoji=gB.avatarEmoji||kr.random().value,OB.value=gB.avatarEmoji,CB.setAvatarEmoji(OB),mB.me.setAvatarEmoji(gB.avatarEmoji),TB(CB.localUserID)})),mB.addEventListener("userMoved",(t=>{CB.setLocalPose(t.x,0,t.y,0,0,-1,0,1,0)})),mB.addEventListener("gameEnded",(()=>{fB.connected=!1,FB(fB)})),mB.addEventListener("zoomChanged",(()=>{gB.zoom=wB.zoom=mB.zoom})),vB.addEventListener("warpTo",(t=>{mB.visit(t.id)})),CB.addEventListener("conferenceJoined",(async t=>{fB.connected=!0,await mB.startAsync(t.id,fB.userName,t.pose,null,fB.roomName),yB.avatarURL=gB.avatarURL,CB.setAvatarURL(gB.avatarURL),mB.me.setAvatarImage(gB.avatarURL),BB.audioInputDevices=await CB.getAudioInputDevices(!0),BB.audioOutputDevices=await CB.getAudioOutputDevices(!0),BB.videoInputDevices=await CB.getVideoInputDevices(!0),gB.preferredAudioInputID=CB.preferredAudioInputID,gB.preferredAudioOutputID=CB.preferredAudioOutputID,gB.preferredVideoInputID=CB.preferredVideoInputID,BB.currentAudioInputDevice=await CB.getCurrentAudioInputDevice(),BB.currentAudioOutputDevice=await CB.getCurrentAudioOutputDevice(),BB.currentVideoInputDevice=await CB.getCurrentVideoInputDevice();const e=CB.isAudioMuted;mB.muteUserAudio(CB.localUserID,e),wB.audioEnabled=!e;const i=CB.isVideoMuted;mB.muteUserVideo(CB.localUserID,i),wB.videoEnabled=!i})),CB.addEventListener("conferenceLeft",(()=>{mB.end()})),CB.addEventListener("participantJoined",(t=>{CB.audio.playClip("join"),mB.addUser(t.id,t.displayName,t.source.pose)})),CB.addEventListener("participantLeft",(t=>{CB.audio.playClip("leave"),mB.removeUser(t.id),vB.delete(t.id)})),CB.addEventListener("audioAdded",(t=>TB(t.id))),CB.addEventListener("audioRemoved",(t=>TB(t.id))),CB.addEventListener("videoAdded",(t=>{mB.setAvatarVideo(t.id,t.stream),TB(t.id)})),CB.addEventListener("videoRemoved",(t=>{mB.setAvatarVideo(t.id,null),TB(t.id)})),CB.addEventListener("avatarChanged",(t=>{mB.setAvatarURL(t.id,t.url),TB(t.id)})),CB.addEventListener("userNameChanged",(t=>{mB.changeUserName(t.id,t.displayName),TB(t.id)})),CB.addEventListener("audioMuteStatusChanged",(async t=>{t.id===CB.localUserID&&(wB.audioEnabled=!t.muted,BB.currentAudioInputDevice=await CB.getCurrentAudioInputDevice(),gB.preferredAudioInputID=CB.preferredAudioInputID),mB.muteUserAudio(t.id,t.muted)})),CB.addEventListener("videoMuteStatusChanged",(async t=>{t.id===CB.localUserID&&(wB.videoEnabled=!t.muted,t.muted?yB.setAvatarVideo(null):yB.setAvatarVideo(mB.me.avatarVideo.element),BB.currentVideoInputDevice=await CB.getCurrentVideoInputDevice()),mB.muteUserVideo(t.id,t.muted),gB.preferredVideoInputID=CB.preferredVideoInputID}));const RB=new Xt(null,"");CB.addEventListener("emote",(t=>{RB.value=t.emoji,mB.emote(t.id,RB)}));const QB=new Xt(null,"");CB.addEventListener("setAvatarEmoji",(t=>{QB.value=t.emoji,mB.setAvatarEmoji(t.id,QB),TB(t.id)})),CB.addEventListener("audioActivity",(t=>{mB.updateAudioActivity(t.id,t.isActive)})),MB.addEventListener("tick",(t=>{CB.update(),yB.update(),vB.update(),mB.update(t.dt)})),yB.drawHearing=mB.drawHearing=gB.drawHearing,yB.audioDistanceMin=mB.audioDistanceMin=gB.audioDistanceMin,yB.audioDistanceMax=mB.audioDistanceMax=gB.audioDistanceMax,yB.audioRolloff=gB.audioRolloff,yB.fontSize=mB.fontSize=gB.fontSize,yB.gamepads=navigator.getGamepads(),yB.gamepadIndex=mB.gamepadIndex=gB.gamepadIndex,yB.inputBinding=mB.inputBinding=gB.inputBinding,wB.zoom=mB.zoom=gB.zoom,mB.cameraZ=mB.targetCameraZ,mB.transitionSpeed=gB.transitionSpeed=.5,fB.userName=gB.userName,fB.roomName=gB.roomName,fB.email=gB.email,wB.enabled=!1,FB(fB),fB.ready=!0,MB.start(),async function(){await Rf(Of({fontFamily:"Noto Color Emoji",fontSize:100})),await CB.prepare(Hf,"tele.calla.chat","conference.tele.calla.chat"),await CB.connect()}()}();
//# sourceMappingURL=game.min.js.map
